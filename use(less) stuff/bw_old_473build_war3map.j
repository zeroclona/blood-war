globals
//globals from cjCallbacksRegestrationHack:
constant boolean LIBRARY_cjCallbacksRegestrationHack=true
//endglobals from cjCallbacksRegestrationHack
//globals from cjLib75hJKJ374s4e597nba9o7w45gf:
constant boolean LIBRARY_cjLib75hJKJ374s4e597nba9o7w45gf=true
group cj_tmpgr_copy_nw509ert7
//endglobals from cjLib75hJKJ374s4e597nba9o7w45gf
//globals from ALL:
constant boolean LIBRARY_ALL=true
constant timer ALL__Timer=CreateTimer()
integer ALL__MaxVar=- 1
integer array ALL__LeakNum
location array ALL__LocationVar
rect array ALL__RectVar
group array ALL__GroupVar
force array ALL__ForceVar
group ALL__Group
force ALL__Force
boolean ALL_Remove=false
//endglobals from ALL
//globals from Base16:
constant boolean LIBRARY_Base16=true
constant string Base16__CHARS="0123456789ABCDEF"
constant integer Base16__BASE=StringLength(Base16__CHARS)
//endglobals from Base16
//globals from CodeLib:
constant boolean LIBRARY_CodeLib=true
boolexpr array CodeArray
force CodeForce=CreateForce()
constant integer CodeHandle=2
boolean CodeBool=false
integer CodeCount=0
unit CodeUnitSource
unit CodeUnitTarget
//endglobals from CodeLib
//globals from FICS:
constant boolean LIBRARY_FICS=true
constant timer FICS__T=CreateTimer()
item array FICS__Dropped
integer array FICS__DropNum
// processed: integer array FICS__Temp[21]
integer FICS__DropCount=0
// processed: integer array FICS__ItemMap[400000]
// processed: integer array FICS__Items[500][5]
// processed: integer array FICS__Recipes[256][8]
integer FICS__ItemCount=0
integer FICS__RecipeCount=0
integer array FICS__FirstList
integer array FICS__LastList
integer array FICS__Recipe
integer array FICS__Next
integer FICS__ListCount=0
integer FICS__CallbackArgument=0
// processed: trigger array FICS__Callbacks[500][2]
boolean FICS__Flag=true
boolean array FICS_FICS_gif
//endglobals from FICS
//globals from Forest:
constant boolean LIBRARY_Forest=true
integer lrunekeep
integer rrunekeep
group cjgrfgn_00000008=CreateGroup()
//endglobals from Forest
//globals from Musicka:
constant boolean LIBRARY_Musicka=true
//endglobals from Musicka
//globals from PosohSili:
constant boolean LIBRARY_PosohSili=true
//endglobals from PosohSili
//globals from ProjectileArt:
constant boolean LIBRARY_ProjectileArt=true
//endglobals from ProjectileArt
//globals from Table:
constant boolean LIBRARY_Table=true
constant integer Table__MAX_INSTANCES=8100
hashtable Table__ht=InitHashtable()
//endglobals from Table
//globals from TimerUtils:
constant boolean LIBRARY_TimerUtils=true
constant boolean TimerUtils__USE_HASH_TABLE=true
constant boolean TimerUtils__USE_FLEXIBLE_OFFSET=false
constant integer TimerUtils__OFFSET=0x100000
integer TimerUtils__VOFFSET=TimerUtils__OFFSET
constant integer TimerUtils__QUANTITY=256
constant integer TimerUtils__ARRAY_SIZE=8190
// processed: integer array TimerUtils__data[TimerUtils__ARRAY_SIZE]
hashtable TimerUtils__ht
// processed: timer array TimerUtils__tT[TimerUtils__ARRAY_SIZE]
integer TimerUtils__tN=0
constant integer TimerUtils__HELD=0x28829022
boolean TimerUtils__didinit=false
//endglobals from TimerUtils
//globals from definitelynotcheats:
constant boolean LIBRARY_definitelynotcheats=true
integer Text_Int
integer definitelynotcheats__localint
unit definitelynotcheats__localunit
boolean definitelynotcheats__wtfmode_on=false
group cjgrfgn_00000001=CreateGroup()

//endglobals from definitelynotcheats
//globals from heropicklib:
constant boolean LIBRARY_heropicklib=true
constant integer heropicklib__HeroTypeCount=20
unit STR_ORDEN
unit AGI_ORDEN
unit INT_ORDEN
unit STR_KULTE
unit AGI_KULTE
unit INT_KULTE
// processed: unit array HERO[12]
// processed: integer array deaths[12]
// processed: integer array HeroType[100]
// processed: string array HeroIcon[100]
trigger heropicklib__Picktrg
trigger heropicklib_Randomtrg
triggeraction heropicklib__Picktrgact
triggeraction heropicklib__Randomtrgact
region heropicklib__leftP
region heropicklib__rightP
// processed: unit array heropicklib__picker[12]
//endglobals from heropicklib
//globals from lanecreeps:
constant boolean LIBRARY_lanecreeps=true
timer LineCreepsTimer
//endglobals from lanecreeps
//globals from textcommands:
constant boolean LIBRARY_textcommands=true
integer textcommands__localint
unit textcommands__localunit
player textcommands__localplayer
group cjgrfgn_00000000=CreateGroup()
//endglobals from textcommands
//globals from InRangeWithSource:
constant boolean LIBRARY_InRangeWithSource=true
constant integer InRangeWithSource__MAX_INSTANCES=408000
constant integer InRangeWithSource__MAX_UNITS=100
constant real InRangeWithSource__OFFSET=20.00
real InRangeWithSource_ClearSourceTime=.01
integer InRangeWithSource__ht
//endglobals from InRangeWithSource
//globals from Vector:
constant boolean LIBRARY_Vector=true
//endglobals from Vector
//globals from herospelltable:
constant boolean LIBRARY_herospelltable=true
integer spelltable
//endglobals from herospelltable
//globals from initdatabase:
constant boolean LIBRARY_initdatabase=true

//endglobals from initdatabase
//globals from Preload:
constant boolean LIBRARY_Preload=true
unit Preload__preload=null
string Preload__charMap="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
string Preload__currentPreloadFunc=null
integer Preload__cycleIterator=0
integer Preload__cycleCurrentID=0x41303030
boolean Preload__isWorking=false
integer Preload__timerExecCount=0
integer baseID=0x41303030
integer offset=0
integer prelcounter=0
real currenttimeL=0.
//endglobals from Preload
//globals from Projectile:
constant boolean LIBRARY_Projectile=true
constant integer Projectile_ID__flyHeightModifier=0x416D7266
constant real Projectile_COLLISION__default=70.00
constant real Projectile_COLLISION__sizeMax=200.00
constant boolean Projectile__DEFAULT__targetFollow=true
constant boolean Projectile__DEFAULT__unitCollision=false
constant boolean Projectile__DEFAULT__destCollision=false
constant boolean Projectile__DEFAULT__faceRotation=true
constant boolean Projectile__DEFAULT__facePitch=true
constant boolean Projectile__DEFAULT__toExpire=true
constant boolean Projectile__DEFAULT__toKill=true
constant boolean Projectile__DEFAULT__toRemove=false
constant boolean Projectile__DEFAULT__Zcollision=false
constant real Projectile_SETTING__timeout=0.03
integer Projectile__projRef
location Projectile__loc=Location(0, 0)
group Projectile__grp=CreateGroup()
rect Projectile__rct
hashtable Projectile__projGroupTable=InitHashtable()
integer Projectile__totalProjectiles=0
//endglobals from Projectile
//globals from Initbwlib:
constant boolean LIBRARY_Initbwlib=true
// processed: integer array color[12]
constant string mapinitMsg0="|c0000FF00Добро пожаловать в Blood War v. 1.3!|r"
constant string mapinitMsg1="Битва начнётся через 90 секунд"
constant string mapinitMsg2="Первый раз в игре? Обязательно ознакомьтесь с информацией о карте (F9) и получите ценные советы!"
constant string mapinitMsg3="|cffff1000Карта находится на этапе бета-тестирования.\nСообщить о баге или найти товарищей для игры можно в группе ВКонтакте или в комнате в дискорде. Ссылки в Инфо (F9)|r"
constant string gamestartmessage="|c00FF0000Да начнётся битва!|r"
constant string title="Время игры: "
constant string pretitle="До начала игры: "
multiboard table
timer GameTime
timer ForestTime
timer MoneyTime
boolean GameStarted=false
boolean Initbwlib_GameEnded=false
integer mins=0
integer tens=0
integer secs=0
//endglobals from Initbwlib
integer udg_L=0
hashtable udg_hashtable=null
integer udg_TPC=0
integer udg_swi=0
unit udg_Geroy=null
real udg_CCollect=0
integer udg_fmcsam=0
integer udg_UDex=0
integer array udg_UnitIndexLock
integer array udg_UDexPrev
integer array udg_UDexNext
real udg_UnitIndexEvent=0
unit array udg_UDexUnits
integer udg_UDexRecycle=0
boolean udg_UnitIndexerEnabled=false
integer udg_UDexWasted=0
integer udg_UDexGen=0
integer udg_DamageBlockingAbility=0
integer udg_SpellDamageAbility=0
integer udg_DamageTypeExplosive=0
integer udg_DamageTypeCriticalStrike=0
integer udg_DamageTypeHeal=0
integer udg_DamageTypeReduced=0
integer udg_DamageTypeBlocked=0
integer udg_DmgEvBracers=0
real udg_DAMAGE_FACTOR_BRACERS=0
real udg_DAMAGE_FACTOR_ELUNES=0
real udg_DAMAGE_FACTOR_ETHEREAL=0
integer udg_DamageEventAOE=0
integer udg_DamageEventLevel=0
real udg_AfterDamageEvent=0
real udg_DamageEvent=0
real udg_AOEDamageEvent=0
real udg_DamageModifierEvent=0
trigger udg_ClearDamageEvent=null
real udg_DamageEventAmount=0
real udg_DamageEventPrevAmt=0
boolean udg_DamageEventOverride=false
boolean udg_NextDamageOverride=false
unit udg_DamageEventSource=null
unit udg_DamageEventTarget=null
trigger udg_DamageEventTrigger=null
trigger udg_DmgEvTrig=null
integer udg_DamageEventType=0
integer array udg_LastDmgPrevType
integer udg_NextDamageType=0
integer udg_DamageEventsWasted=0
integer udg_DmgEvRecursionN=0
boolean udg_DmgEvRunning=false
boolean udg_DmgEvStarted=false
boolean udg_IsDamageSpell=false
boolean array udg_LastDmgWasSpell
real udg_LastDamageHP=0
timer udg_DmgEvTimer=null
real array udg_LastDmgPrevAmount
real array udg_LastDmgValue
unit array udg_LastDmgSource
unit array udg_LastDmgTarget
boolean array udg_HideDamageFrom
boolean array udg_UnitDamageRegistered
unit udg_EnhancedDamageTarget=null
group udg_DamageEventAOEGroup=null
integer udg_DamageTypeSpell=0
rect gg_rct_left_2_ghou_1_ooz=null
rect gg_rct_left_3_drake=null
rect gg_rct_left_2_ner_1_spid=null
rect gg_rct_left_2_gia_1_ghou=null
rect gg_rct_left_2_inca_1_ro=null
rect gg_rct________________006=null
rect gg_rct_left_3_trea=null
rect gg_rct_left_2_liz_1_cob=null
rect gg_rct_right_3_trea=null
rect gg_rct_right_2_ghou_1_ooz=null
rect gg_rct_right_2_gia_1_ghou=null
rect gg_rct_mid_2_liz_1_ner=null
rect gg_rct_mid_2_trea_1_liz=null
rect gg_rct_right_2__liz_1_cob=null
rect gg_rct_right_2_ner_1_spid=null
rect gg_rct_right_3_drake=null
rect gg_rct_right_2_inca_1_ro=null
rect gg_rct________________017=null
rect gg_rct_Right_Moonwell=null
rect gg_rct_Left_Moonwell=null
rect gg_rct_left_1_trea_1_cob_1_spid=null
rect gg_rct_right_1_trea_1_cob_1_spid=null
rect gg_rct_right_2_gia_1_ooz=null
rect gg_rct_left_2_gia_1_ooz=null
rect gg_rct_rresp=null
rect gg_rct_lresp=null
rect gg_rct_1=null
rect gg_rct_2=null
rect gg_rct_r1s=null
rect gg_rct_r2s=null
rect gg_rct_rm2=null
rect gg_rct_lm2=null
rect gg_rct_l2s=null
rect gg_rct_l1s=null
rect gg_rct_lm1=null
rect gg_rct_rm1=null
rect gg_rct_rthr=null
rect gg_rct_lthr=null
rect gg_rct_llhello=null
rect gg_rct_rrhello=null
rect gg_rct_rp=null
rect gg_rct_lp=null
rect gg_rct_llll=null
rect gg_rct_rrrr=null
rect gg_rct________________045=null
rect gg_rct________________046=null
rect gg_rct_bb_bot_k=null
rect gg_rct_db_bot_k=null
rect gg_rct_db_top_k=null
rect gg_rct_bb_top_k=null
rect gg_rct_bb_top_o=null
rect gg_rct_db_top_o=null
rect gg_rct_bb_bot_o=null
rect gg_rct_db_bot_o=null
rect gg_rct_anit_verh=null
rect gg_rct_anti_niz=null
rect gg_rct_Portal_right=null
rect gg_rct_Portal_left=null
rect gg_rct________________060=null
rect gg_rct________________060_____________________u=null
rect gg_rct_right_runekeeper=null
rect gg_rct_left_runekeeper=null
camerasetup gg_cam_Camera_EndGameCult=null
camerasetup gg_cam_Camera_EndGameOrden=null
sound gg_snd_MuradinTaunt1=null
sound gg_snd_StasisTotem=null
sound gg_snd_ArthasYesAttack1=null
sound gg_snd_N01Archimonde30=null
sound gg_snd_CaptainYesAttack1=null
sound gg_snd_PeasantYes4=null
sound gg_snd_HeroBladeMasterPissed1=null
string gg_snd_ArthasTheme
string gg_snd_IllidansTheme
string gg_snd_LichKingTheme
string gg_snd_NagaTheme
sound gg_snd_NewTournament=null
sound gg_snd_DarkVictory=null
sound gg_snd_PursuitTheme=null
sound gg_snd_GoblinSapperYes5=null
sound gg_snd_GoblinZeppelinYes3=null
sound gg_snd_HeroTinkerYes4=null
sound gg_snd_ThunderClapCaster=null
sound gg_snd_GyrocopterDeath1=null
string gg_snd_Comradeship
string gg_snd_NightElfDefeat
string gg_snd_OrcDefeat
string gg_snd_Orc1
string gg_snd_Orc2
string gg_snd_Orc3
string gg_snd_Mainscreen
string gg_snd_BloodElfTheme
string gg_snd_Human1
sound gg_snd_CreepAggroWhat1=null
sound gg_snd_Hint=null
string gg_snd_DarkVictory01
sound gg_snd_EarthquakeLoop1=null
sound gg_snd_CrippleTarget1=null
sound gg_snd_NerubianCryptLordYesAttack2=null
sound gg_snd_EvilArthasYesAttack5=null
sound gg_snd_HeroDreadlordYesAttack2=null
sound gg_snd_HeroDreadlordYesAttack3=null
sound gg_snd_DeathKnightYesAttack1=null
sound gg_snd_TrollbatriderYesAttack3=null
sound gg_snd_WarlordWarcry1=null
sound gg_snd_WarlordYesAttack1=null
sound gg_snd_HPitLordYesAttack3=null
sound gg_snd_HeroMountainKingReady1=null
sound gg_snd_HeroMountainKingYesAttack3=null
sound gg_snd_HeroPaladinYesAttack3=null
sound gg_snd_TaurenYesAttack1=null
sound gg_snd_HeroLichYesAttack1=null
sound gg_snd_NaishaYesAttack3=null
sound gg_snd_Coin8=null
trigger gg_trg_Info=null
trigger gg_trg_CHDmgCheckACT=null
trigger gg_trg_Observ=null
trigger gg_trg_Herospelltable=null
trigger gg_trg_some_Preload=null
trigger gg_trg_map_init_plus_some_features=null
trigger gg_trg_heropickinit=null
trigger gg_trg_rly_ez_money=null
trigger gg_trg_musiclab=null
trigger gg_trg_TextCommands=null
trigger gg_trg_Dont_touch_ally=null
trigger gg_trg_DAMAGE_REPORT=null
trigger gg_trg_Left_smbd=null
trigger gg_trg_development_tools=null
trigger gg_trg_Endgame=null
trigger gg_trg_Killing_Reward_SYS=null
trigger gg_trg_Names=null
trigger gg_trg_Wether_the_Weather_Be_Fine=null
trigger gg_trg_Misiile_lib=null
trigger gg_trg_Vectormove=null
trigger gg_trg_Dam_det_sys=null
trigger gg_trg_VexTable=null
trigger gg_trg_Unit_Indexer=null
trigger gg_trg_TimerUtils=null
trigger gg_trg_Damage_Engine_Config=null
trigger gg_trg_Damage_Engine=null
trigger gg_trg_FICS_cJASS=null
trigger gg_trg_FICS_Callback_debug=null
trigger gg_trg_Vector=null
trigger gg_trg_Projectile_system=null
trigger gg_trg_ProjectileArt=null
trigger gg_trg_Getsourceunti=null
trigger gg_trg_CodeLib=null
trigger gg_trg_Home_TP=null
trigger gg_trg_Backdoor=null
trigger gg_trg_Invulnerable_Towers=null
trigger gg_trg_LDefMod_Tier1=null
trigger gg_trg_LDefTree1_Tier1=null
trigger gg_trg_LDefMod_Tier_3=null
trigger gg_trg_LDefMod_Tier4=null
trigger gg_trg_LDefMod_Tier5=null
trigger gg_trg_RDefMod_Tier1=null
trigger gg_trg_RDefTree1_Tier1=null
trigger gg_trg_RDefModTree2=null
trigger gg_trg_RDefMod_Tier_3=null
trigger gg_trg_RDefMod_Tier4=null
trigger gg_trg_RDefMod_Tier5=null
trigger gg_trg_Spawn_bot_le=null
trigger gg_trg_l2s___lm2=null
trigger gg_trg_lm2____llll=null
trigger gg_trg_llll____2=null
trigger gg_trg_bot_rrrr=null
trigger gg_trg_rrrr_lhello=null
trigger gg_trg_lhelo_rm2=null
trigger gg_trg_lthrone2=null
trigger gg_trg_final_atack_Orden=null
trigger gg_trg_l1s___lm1=null
trigger gg_trg_lm1___1=null
trigger gg_trg_top_rm1=null
trigger gg_trg_lthrone1=null
trigger gg_trg_r1s___rm1=null
trigger gg_trg_rm1___1=null
trigger gg_trg_top_lm1=null
trigger gg_trg_rthrone_1=null
trigger gg_trg_rthrone_1_____________________u=null
trigger gg_trg_rthrone_1__________________________________________u=null
trigger gg_trg_rthrone_1_______________________________________________________________u=null
trigger gg_trg_final_atack_kult=null
trigger gg_trg_r2s___rm2=null
trigger gg_trg_rm2_rrrr=null
trigger gg_trg_rrrr_2=null
trigger gg_trg_bot_llll=null
trigger gg_trg_llll_rhello=null
trigger gg_trg_rhello_lm2=null
trigger gg_trg_rthrone2=null
trigger gg_trg_Orden_debag_verh=null
trigger gg_trg_Orden_debag_niz=null
trigger gg_trg_Kult_debag_niz=null
trigger gg_trg_Kult_debag_verh=null
trigger gg_trg_FOREST_SPAWN=null
trigger gg_trg_Volya=null
trigger gg_trg_BlueDrakeDeath=null
trigger gg_trg_DragonRune=null
trigger gg_trg_LMoonwell=null
trigger gg_trg_RMoonwell=null
trigger gg_trg_RuneEffec=null
trigger gg_trg_RunerDeath=null
trigger gg_trg_Spear_Eff=null
trigger gg_trg_Spear=null
trigger gg_trg_CorpPo=null
trigger gg_trg_TreantHeal=null
trigger gg_trg_BossTpItAct=null
trigger gg_trg_Fear_____________________u=null
trigger gg_trg_DarkSouls=null
trigger gg_trg_BossStun=null
trigger gg_trg_BossDeath=null
trigger gg_trg_InitDataBase=null
trigger gg_trg_Gladius=null
trigger gg_trg_crusher=null
trigger gg_trg_The_Doll_of_a_Sorcerer=null
trigger gg_trg_BandeeteeDamaged=null
trigger gg_trg_EnslaverDamaged=null
trigger gg_trg_StellSwordS=null
trigger gg_trg_BanHammer=null
trigger gg_trg_Wind_sabre=null
trigger gg_trg_ShurikenDamaged=null
trigger gg_trg_LivingSparkSparker=null
trigger gg_trg_LivingSparkSparker_____________________u=null
trigger gg_trg_SpiritPiercer=null
trigger gg_trg_LuckyBone=null
trigger gg_trg_DiverseBoots=null
trigger gg_trg_StealthBoots=null
trigger gg_trg_BootsofGonec=null
trigger gg_trg_SilentBoots=null
trigger gg_trg_ActiveMagRes=null
trigger gg_trg_Panzar=null
trigger gg_trg_EAmulet=null
trigger gg_trg_Mail_of_Untouchability=null
trigger gg_trg_ArmorOfTheDeeps=null
trigger gg_trg_onethousandsswordsarmor=null
trigger gg_trg_EssenceOfDeath=null
trigger gg_trg_RaidersBlade=null
trigger gg_trg_zagadsosud=null
trigger gg_trg_flag_of_victory=null
trigger gg_trg_PosohSIli=null
trigger gg_trg_Ring_of_despair=null
trigger gg_trg_SwampPot=null
trigger gg_trg_Cocktail=null
trigger gg_trg_LifeEff=null
trigger gg_trg_Firestone=null
trigger gg_trg_Crystal=null
trigger gg_trg_Lefruit=null
trigger gg_trg_Limitless_Cup_eff=null
trigger gg_trg_MartyrShieldEff=null
trigger gg_trg_WarDrum=null
trigger gg_trg_OWLSTONE=null
trigger gg_trg_Spellbloom=null
trigger gg_trg_HornOfDoom=null
trigger gg_trg_JediBracele=null
trigger gg_trg_MagicLamp=null
trigger gg_trg_Coin=null
trigger gg_trg_Stuff_of_tp=null
trigger gg_trg_StrangeBook=null
trigger gg_trg_boooksmegaboooooks=null
trigger gg_trg_UsefulAlmanac=null
trigger gg_trg_Ultranomicon=null
trigger gg_trg_Temariys_stone=null
trigger gg_trg_ObiStone=null
trigger gg_trg_ObiStone_____________________u=null
trigger gg_trg_PentagramArea=null
trigger gg_trg_PentAct=null
trigger gg_trg_Mind_Execution=null
trigger gg_trg_Portal=null
trigger gg_trg_Portal_Eff=null
trigger gg_trg_Winds=null
trigger gg_trg_sub0=null
trigger gg_trg_Slide=null
trigger gg_trg_ColdEmbrace=null
trigger gg_trg_Enfektsia=null
trigger gg_trg_SummonLimit=null
trigger gg_trg_Zombre_Lifesteal=null
trigger gg_trg_Cobra_Ulty=null
trigger gg_trg_Manasteal=null
trigger gg_trg_ManaEStart=null
trigger gg_trg_MANAEACT=null
trigger gg_trg_Cloud=null
trigger gg_trg_HitinLearn=null
trigger gg_trg_Hitin=null
trigger gg_trg_Reap=null
trigger gg_trg_FMULTY=null
trigger gg_trg_FH_EXPL=null
trigger gg_trg_Hou=null
trigger gg_trg_FC=null
trigger gg_trg_FMD=null
trigger gg_trg_Spasm=null
trigger gg_trg_MenstrualBrotherhood=null
trigger gg_trg_PirshestvoTrig=null
trigger gg_trg_PirshestvLear=null
trigger gg_trg_BEA=null
trigger gg_trg_Bleeding=null
trigger gg_trg_BE=null
trigger gg_trg_Circular_Hits=null
trigger gg_trg_DemonicScream=null
trigger gg_trg_ThirstyFire=null
trigger gg_trg_HuntBegin=null
trigger gg_trg_Latanel=null
trigger gg_trg_LataUlty=null
trigger gg_trg_Blink_trap=null
trigger gg_trg_Net=null
trigger gg_trg_Magrondus=null
trigger gg_trg_NamUlt=null
trigger gg_trg_Nam=null
trigger gg_trg_inithash=null
trigger gg_trg_Spell=null
trigger gg_trg_Meditation=null
trigger gg_trg_Healing_Touch=null
trigger gg_trg_Healing_Touch_____________________u=null
trigger gg_trg_Gift=null
trigger gg_trg_Split_skull=null
trigger gg_trg_MarchThrow=null
trigger gg_trg_AngryGnomes=null
trigger gg_trg_Dash=null
trigger gg_trg_Reality_Distortion=null
trigger gg_trg_Energy_Redirection=null
trigger gg_trg_Spatial_Fracture_Remake=null
trigger gg_trg_Spatial_Fracture=null
trigger gg_trg_Dusk_time=null
trigger gg_trg_Ridilan=null
trigger gg_trg_Penetration_Strike=null
trigger gg_trg_Inspire=null
trigger gg_trg_Defender=null
trigger gg_trg_LifeWall=null
trigger gg_trg_Reincarnation=null
trigger gg_trg_Inspire_____________________u=null
trigger gg_trg_Shadow_of_Death=null
trigger gg_trg_Sikruf_Passa=null
trigger gg_trg_SikrPassAgi=null
trigger gg_trg_Metka2=null
trigger gg_trg_Istoshenie=null
trigger gg_trg_Execute=null
trigger gg_trg_Fallen_Gladiator=null
trigger gg_trg_BLOODLUST=null
trigger gg_trg_PowerStrike=null
trigger gg_trg_Gr=null
trigger gg_trg_TitanPassa=null
trigger gg_trg_Zemlya=null
trigger gg_trg_Meteor_Strike=null
trigger gg_trg_Vargn_expl=null
trigger gg_trg_Ulty=null
trigger gg_trg_Shit_vody=null
trigger gg_trg_Volna=null
trigger gg_trg_FE=null
trigger gg_trg_Vod_Shard=null
trigger gg_trg_Magnet=null
trigger gg_trg_ConeDrak=null
trigger gg_trg_Unbinded_Power=null
trigger gg_trg_DrakUty=null
trigger gg_trg_Disturbance=null
trigger gg_trg_LifeCycle=null
trigger gg_trg_Conflux=null
trigger gg_trg_Threat_to_balance=null
trigger gg_trg_WholeNineGramms=null
trigger gg_trg_HoleMaker=null
trigger gg_trg_FullMetalBullet=null
trigger gg_trg_armortest=null
trigger gg_trg_BangBang=null
trigger gg_trg_RevolverSpin__________________________________________u=null
trigger gg_trg_RevolverSpin=null
trigger gg_trg_RevolverSpin_____________________u=null
trigger gg_trg_Grenade=null
trigger gg_trg_Fallen_Gladiator_____________________u=null
trigger gg_trg_Upgrade=null
trigger gg_trg_KillingDron=null
trigger gg_trg_EHG=null
trigger gg_trg_HealingGrenade=null
trigger gg_trg_Combust=null
trigger gg_trg_Combust_RMK=null
trigger gg_trg_FlameCloak=null
trigger gg_trg_FireServants=null
trigger gg_trg_ImmolateMana=null
unit gg_unit_h012_0033=null
unit gg_unit_h009_0041=null
unit gg_unit_H021_0158=null
unit gg_unit_h00X_0055=null
unit gg_unit_h00U_0049=null
unit gg_unit_h015_0034=null
unit gg_unit_h014_0038=null
unit gg_unit_h00T_0054=null
unit gg_unit_h00Y_0052=null
unit gg_unit_h00Z_0025=null
unit gg_unit_h016_0029=null
unit gg_unit_h00W_0036=null
unit gg_unit_n00A_0093=null
unit gg_unit_n00C_0075=null
unit gg_unit_n00B_0074=null
unit gg_unit_n00A_0072=null
unit gg_unit_n00B_0043=null
unit gg_unit_h00A_0048=null
unit gg_unit_h007_0023=null
unit gg_unit_h007_0024=null
unit gg_unit_h010_0027=null
unit gg_unit_h016_0030=null
unit gg_unit_h013_0028=null
unit gg_unit_h00V_0010=null
unit gg_unit_h008_0040=null
unit gg_unit_h011_0031=null
unit gg_unit_n00D_0159=null
unit gg_unit_n00C_0051=null
hashtable hash
integer i=0
unit FilUnit
timer FilTimer
effect Zeffect
force uteam_1=CreateForce()
force uteam_2=CreateForce()
boolean IsTriggerDamage=false
integer forestspk=0
integer lanespk=0
location LOC
trigger leavergoldtrigger
// processed: boolean array HasAddedToControl[12]
boolean endgame__WonOrder=false
constant string endgame__endmsg="СПАСИБО ЗА УЧАСТИЕ В ТЕСТИРОВАНИИ! СВЕЖИЕ ВЕРСИИ И БОЕВЫХ ТОВАРИЩЕЙ МОЖНО НАЙТИ В ГРУППЕ: vk.com/bwwc3 "
constant string endgame__endmsg2="Игра закончится через 120 секунд"
integer KillingRewardSystem__Bounty_Raiskoe
trigger KRS
group cjgrfgn_00000006=CreateGroup()
boolean HomeTP__IsFinishedCast=false
group cjgrfgn_0000000a=CreateGroup()
unit BossTP___portalent
group Boss_portals=CreateGroup()
player BossTP___plown
group cjgrfgn_0000000b=CreateGroup()
group cjgrfgn_0000000c=CreateGroup()
group cjgrfgn_0000000d=CreateGroup()
group cjgrfgn_0000000e=CreateGroup()
trigger ZagadoSosud___trg
timer LifeRuneTimer
unit lifeeff___filterunit
group cjgrfgn_0000000f=CreateGroup()
group cjgrfgn_00000010=CreateGroup()
trigger Spellbloom___trg
integer sbkmin=0
timer EXPBTimer
group cjgrfgn_00000011=CreateGroup()
group cjgrfgn_00000012=CreateGroup()
group cjgrfgn_00000013=CreateGroup()
unit integer___gro_dummy
group cjgrfgn_00000015=CreateGroup()
group cjgrfgn_00000016=CreateGroup()
group cjgrfgn_00000017=CreateGroup()
group cjgrfgn_00000018=CreateGroup()
group cjgrfgn_00000019=CreateGroup()
trigger dyn
group cjgrfgn_0000001a=CreateGroup()
integer array Magrondusspells___M
trigger Magrondusspells___Trigger
trigger Magrondusspells___LearnTrig
trigger Magrondusspells___DmgTrig
boolean Magrondusspells___IsSpell=false
boolean Magrondusspells___IsUlti=false
group cjgrfgn_0000001b=CreateGroup()
group cjgrfgn_0000001c=CreateGroup()
group cjgrfgn_0000001d=CreateGroup()
integer RonaldAura___lvl_abil
unit RonaldAura___zashitnik
trigger SikrufSF___dmgtrg
group cjgrfgn_0000001e=CreateGroup()
group cjgrfgn_0000001f=CreateGroup()
group cjgrfgn_00000020=CreateGroup()
group cjgrfgn_00000021=CreateGroup()
group cjgrfgn_00000022=CreateGroup()
boolean cj_v666_boolean
unit cj_v666_unit
trigger cj_callback_trg_02=CreateTrigger()
trigger cj_callback_trg_07=CreateTrigger()
trigger cj_callback_trg_08=CreateTrigger()
trigger cj_callback_trg_09=CreateTrigger()
trigger cj_callback_trg_0a=CreateTrigger()
trigger cj_callback_trg_0b=CreateTrigger()
trigger cj_callback_trg_0c=CreateTrigger()
trigger cj_callback_trg_0d=CreateTrigger()
trigger cj_callback_trg_0f=CreateTrigger()
trigger cj_callback_trg_10=CreateTrigger()

trigger l__library_init

//JASSHelper struct globals:
constant integer si__Posoh=4
integer si__Posoh_F=0
integer si__Posoh_I=0
integer array si__Posoh_V
timer s__Posoh_t=null
integer s__Posoh_count=0
integer array s__Posoh_Name
trigger array s__Posoh_trig
unit array s__Posoh_u
unit array s__Posoh_c
real array s__Posoh_mp
boolean array s__Posoh_b
effect array s__Posoh_Eff
real array s__Posoh_tt
constant integer si__Table__GTable=5
integer si__Table__GTable_F=0
integer si__Table__GTable_I=0
integer array si__Table__GTable_V
constant integer si__Table=6
constant integer si__StringTable=7
constant integer si__HandleTable=8
constant integer si__InRangeWithSource__Data=9
integer si__InRangeWithSource__Data_F=0
integer si__InRangeWithSource__Data_I=0
integer array si__InRangeWithSource__Data_V
integer array si__InRangeWithSource__Data_2V
integer array si__InRangeWithSource__Data_3V
integer array si__InRangeWithSource__Data_4V
integer array si__InRangeWithSource__Data_5V
integer array si__InRangeWithSource__Data_6V
integer array si__InRangeWithSource__Data_7V
integer array si__InRangeWithSource__Data_8V
integer array si__InRangeWithSource__Data_9V
integer array si__InRangeWithSource__Data_10V
integer array si__InRangeWithSource__Data_11V
integer array si__InRangeWithSource__Data_12V
integer array si__InRangeWithSource__Data_13V
integer array si__InRangeWithSource__Data_14V
integer array si__InRangeWithSource__Data_15V
integer array si__InRangeWithSource__Data_16V
integer array si__InRangeWithSource__Data_17V
integer array si__InRangeWithSource__Data_18V
integer array si__InRangeWithSource__Data_19V
integer array si__InRangeWithSource__Data_20V
integer array si__InRangeWithSource__Data_21V
integer array si__InRangeWithSource__Data_22V
integer array si__InRangeWithSource__Data_23V
integer array si__InRangeWithSource__Data_24V
integer array si__InRangeWithSource__Data_25V
integer array si__InRangeWithSource__Data_26V
integer array si__InRangeWithSource__Data_27V
integer array si__InRangeWithSource__Data_28V
integer array si__InRangeWithSource__Data_29V
integer array si__InRangeWithSource__Data_30V
integer array si__InRangeWithSource__Data_31V
integer array si__InRangeWithSource__Data_32V
integer array si__InRangeWithSource__Data_33V
integer array si__InRangeWithSource__Data_34V
integer array si__InRangeWithSource__Data_35V
integer array si__InRangeWithSource__Data_36V
integer array si__InRangeWithSource__Data_37V
integer array si__InRangeWithSource__Data_38V
integer array si__InRangeWithSource__Data_39V
integer array si__InRangeWithSource__Data_40V
integer array si__InRangeWithSource__Data_41V
integer array si__InRangeWithSource__Data_42V
integer array si__InRangeWithSource__Data_43V
integer array si__InRangeWithSource__Data_44V
integer array si__InRangeWithSource__Data_45V
integer array si__InRangeWithSource__Data_46V
integer array si__InRangeWithSource__Data_47V
integer array si__InRangeWithSource__Data_48V
integer array si__InRangeWithSource__Data_49V
integer array si__InRangeWithSource__Data_50V
unit array s___InRangeWithSource__Data_registered
unit array s__2_InRangeWithSource__Data_registered
unit array s__3_InRangeWithSource__Data_registered
unit array s__4_InRangeWithSource__Data_registered
unit array s__5_InRangeWithSource__Data_registered
unit array s__6_InRangeWithSource__Data_registered
unit array s__7_InRangeWithSource__Data_registered
unit array s__8_InRangeWithSource__Data_registered
unit array s__9_InRangeWithSource__Data_registered
unit array s__10_InRangeWithSource__Data_registered
unit array s__11_InRangeWithSource__Data_registered
unit array s__12_InRangeWithSource__Data_registered
unit array s__13_InRangeWithSource__Data_registered
unit array s__14_InRangeWithSource__Data_registered
unit array s__15_InRangeWithSource__Data_registered
unit array s__16_InRangeWithSource__Data_registered
unit array s__17_InRangeWithSource__Data_registered
unit array s__18_InRangeWithSource__Data_registered
unit array s__19_InRangeWithSource__Data_registered
unit array s__20_InRangeWithSource__Data_registered
unit array s__21_InRangeWithSource__Data_registered
unit array s__22_InRangeWithSource__Data_registered
unit array s__23_InRangeWithSource__Data_registered
unit array s__24_InRangeWithSource__Data_registered
unit array s__25_InRangeWithSource__Data_registered
unit array s__26_InRangeWithSource__Data_registered
unit array s__27_InRangeWithSource__Data_registered
unit array s__28_InRangeWithSource__Data_registered
unit array s__29_InRangeWithSource__Data_registered
unit array s__30_InRangeWithSource__Data_registered
unit array s__31_InRangeWithSource__Data_registered
unit array s__32_InRangeWithSource__Data_registered
unit array s__33_InRangeWithSource__Data_registered
unit array s__34_InRangeWithSource__Data_registered
unit array s__35_InRangeWithSource__Data_registered
unit array s__36_InRangeWithSource__Data_registered
unit array s__37_InRangeWithSource__Data_registered
unit array s__38_InRangeWithSource__Data_registered
unit array s__39_InRangeWithSource__Data_registered
unit array s__40_InRangeWithSource__Data_registered
unit array s__41_InRangeWithSource__Data_registered
unit array s__42_InRangeWithSource__Data_registered
unit array s__43_InRangeWithSource__Data_registered
unit array s__44_InRangeWithSource__Data_registered
unit array s__45_InRangeWithSource__Data_registered
unit array s__46_InRangeWithSource__Data_registered
unit array s__47_InRangeWithSource__Data_registered
unit array s__48_InRangeWithSource__Data_registered
unit array s__49_InRangeWithSource__Data_registered
unit array s__50_InRangeWithSource__Data_registered
constant integer s___InRangeWithSource__Data_registered_size=100
integer array s__InRangeWithSource__Data_2registered
integer array s__InRangeWithSource__Data_3registered
integer array s__InRangeWithSource__Data_4registered
integer array s__InRangeWithSource__Data_5registered
integer array s__InRangeWithSource__Data_6registered
integer array s__InRangeWithSource__Data_7registered
integer array s__InRangeWithSource__Data_8registered
integer array s__InRangeWithSource__Data_9registered
integer array s__InRangeWithSource__Data_10registered
integer array s__InRangeWithSource__Data_11registered
integer array s__InRangeWithSource__Data_12registered
integer array s__InRangeWithSource__Data_13registered
integer array s__InRangeWithSource__Data_14registered
integer array s__InRangeWithSource__Data_15registered
integer array s__InRangeWithSource__Data_16registered
integer array s__InRangeWithSource__Data_17registered
integer array s__InRangeWithSource__Data_18registered
integer array s__InRangeWithSource__Data_19registered
integer array s__InRangeWithSource__Data_20registered
integer array s__InRangeWithSource__Data_21registered
integer array s__InRangeWithSource__Data_22registered
integer array s__InRangeWithSource__Data_23registered
integer array s__InRangeWithSource__Data_24registered
integer array s__InRangeWithSource__Data_25registered
integer array s__InRangeWithSource__Data_26registered
integer array s__InRangeWithSource__Data_27registered
integer array s__InRangeWithSource__Data_28registered
integer array s__InRangeWithSource__Data_29registered
integer array s__InRangeWithSource__Data_30registered
integer array s__InRangeWithSource__Data_31registered
integer array s__InRangeWithSource__Data_32registered
integer array s__InRangeWithSource__Data_33registered
integer array s__InRangeWithSource__Data_34registered
integer array s__InRangeWithSource__Data_35registered
integer array s__InRangeWithSource__Data_36registered
integer array s__InRangeWithSource__Data_37registered
integer array s__InRangeWithSource__Data_38registered
integer array s__InRangeWithSource__Data_39registered
integer array s__InRangeWithSource__Data_40registered
integer array s__InRangeWithSource__Data_41registered
integer array s__InRangeWithSource__Data_42registered
integer array s__InRangeWithSource__Data_43registered
integer array s__InRangeWithSource__Data_44registered
integer array s__InRangeWithSource__Data_45registered
integer array s__InRangeWithSource__Data_46registered
integer array s__InRangeWithSource__Data_47registered
integer array s__InRangeWithSource__Data_48registered
integer array s__InRangeWithSource__Data_49registered
integer array s__InRangeWithSource__Data_50registered
integer array s__InRangeWithSource__Data_registered
real array s___InRangeWithSource__Data_registered_dist
real array s__2_InRangeWithSource__Data_registered_dist
real array s__3_InRangeWithSource__Data_registered_dist
real array s__4_InRangeWithSource__Data_registered_dist
real array s__5_InRangeWithSource__Data_registered_dist
real array s__6_InRangeWithSource__Data_registered_dist
real array s__7_InRangeWithSource__Data_registered_dist
real array s__8_InRangeWithSource__Data_registered_dist
real array s__9_InRangeWithSource__Data_registered_dist
real array s__10_InRangeWithSource__Data_registered_dist
real array s__11_InRangeWithSource__Data_registered_dist
real array s__12_InRangeWithSource__Data_registered_dist
real array s__13_InRangeWithSource__Data_registered_dist
real array s__14_InRangeWithSource__Data_registered_dist
real array s__15_InRangeWithSource__Data_registered_dist
real array s__16_InRangeWithSource__Data_registered_dist
real array s__17_InRangeWithSource__Data_registered_dist
real array s__18_InRangeWithSource__Data_registered_dist
real array s__19_InRangeWithSource__Data_registered_dist
real array s__20_InRangeWithSource__Data_registered_dist
real array s__21_InRangeWithSource__Data_registered_dist
real array s__22_InRangeWithSource__Data_registered_dist
real array s__23_InRangeWithSource__Data_registered_dist
real array s__24_InRangeWithSource__Data_registered_dist
real array s__25_InRangeWithSource__Data_registered_dist
real array s__26_InRangeWithSource__Data_registered_dist
real array s__27_InRangeWithSource__Data_registered_dist
real array s__28_InRangeWithSource__Data_registered_dist
real array s__29_InRangeWithSource__Data_registered_dist
real array s__30_InRangeWithSource__Data_registered_dist
real array s__31_InRangeWithSource__Data_registered_dist
real array s__32_InRangeWithSource__Data_registered_dist
real array s__33_InRangeWithSource__Data_registered_dist
real array s__34_InRangeWithSource__Data_registered_dist
real array s__35_InRangeWithSource__Data_registered_dist
real array s__36_InRangeWithSource__Data_registered_dist
real array s__37_InRangeWithSource__Data_registered_dist
real array s__38_InRangeWithSource__Data_registered_dist
real array s__39_InRangeWithSource__Data_registered_dist
real array s__40_InRangeWithSource__Data_registered_dist
real array s__41_InRangeWithSource__Data_registered_dist
real array s__42_InRangeWithSource__Data_registered_dist
real array s__43_InRangeWithSource__Data_registered_dist
real array s__44_InRangeWithSource__Data_registered_dist
real array s__45_InRangeWithSource__Data_registered_dist
real array s__46_InRangeWithSource__Data_registered_dist
real array s__47_InRangeWithSource__Data_registered_dist
real array s__48_InRangeWithSource__Data_registered_dist
real array s__49_InRangeWithSource__Data_registered_dist
real array s__50_InRangeWithSource__Data_registered_dist
constant integer s___InRangeWithSource__Data_registered_dist_size=100
integer array s__InRangeWithSource__Data_2registered_dist
integer array s__InRangeWithSource__Data_3registered_dist
integer array s__InRangeWithSource__Data_4registered_dist
integer array s__InRangeWithSource__Data_5registered_dist
integer array s__InRangeWithSource__Data_6registered_dist
integer array s__InRangeWithSource__Data_7registered_dist
integer array s__InRangeWithSource__Data_8registered_dist
integer array s__InRangeWithSource__Data_9registered_dist
integer array s__InRangeWithSource__Data_10registered_dist
integer array s__InRangeWithSource__Data_11registered_dist
integer array s__InRangeWithSource__Data_12registered_dist
integer array s__InRangeWithSource__Data_13registered_dist
integer array s__InRangeWithSource__Data_14registered_dist
integer array s__InRangeWithSource__Data_15registered_dist
integer array s__InRangeWithSource__Data_16registered_dist
integer array s__InRangeWithSource__Data_17registered_dist
integer array s__InRangeWithSource__Data_18registered_dist
integer array s__InRangeWithSource__Data_19registered_dist
integer array s__InRangeWithSource__Data_20registered_dist
integer array s__InRangeWithSource__Data_21registered_dist
integer array s__InRangeWithSource__Data_22registered_dist
integer array s__InRangeWithSource__Data_23registered_dist
integer array s__InRangeWithSource__Data_24registered_dist
integer array s__InRangeWithSource__Data_25registered_dist
integer array s__InRangeWithSource__Data_26registered_dist
integer array s__InRangeWithSource__Data_27registered_dist
integer array s__InRangeWithSource__Data_28registered_dist
integer array s__InRangeWithSource__Data_29registered_dist
integer array s__InRangeWithSource__Data_30registered_dist
integer array s__InRangeWithSource__Data_31registered_dist
integer array s__InRangeWithSource__Data_32registered_dist
integer array s__InRangeWithSource__Data_33registered_dist
integer array s__InRangeWithSource__Data_34registered_dist
integer array s__InRangeWithSource__Data_35registered_dist
integer array s__InRangeWithSource__Data_36registered_dist
integer array s__InRangeWithSource__Data_37registered_dist
integer array s__InRangeWithSource__Data_38registered_dist
integer array s__InRangeWithSource__Data_39registered_dist
integer array s__InRangeWithSource__Data_40registered_dist
integer array s__InRangeWithSource__Data_41registered_dist
integer array s__InRangeWithSource__Data_42registered_dist
integer array s__InRangeWithSource__Data_43registered_dist
integer array s__InRangeWithSource__Data_44registered_dist
integer array s__InRangeWithSource__Data_45registered_dist
integer array s__InRangeWithSource__Data_46registered_dist
integer array s__InRangeWithSource__Data_47registered_dist
integer array s__InRangeWithSource__Data_48registered_dist
integer array s__InRangeWithSource__Data_49registered_dist
integer array s__InRangeWithSource__Data_50registered_dist
integer array s__InRangeWithSource__Data_registered_dist
integer array s__InRangeWithSource__Data_2index
integer array s__InRangeWithSource__Data_3index
integer array s__InRangeWithSource__Data_4index
integer array s__InRangeWithSource__Data_5index
integer array s__InRangeWithSource__Data_6index
integer array s__InRangeWithSource__Data_7index
integer array s__InRangeWithSource__Data_8index
integer array s__InRangeWithSource__Data_9index
integer array s__InRangeWithSource__Data_10index
integer array s__InRangeWithSource__Data_11index
integer array s__InRangeWithSource__Data_12index
integer array s__InRangeWithSource__Data_13index
integer array s__InRangeWithSource__Data_14index
integer array s__InRangeWithSource__Data_15index
integer array s__InRangeWithSource__Data_16index
integer array s__InRangeWithSource__Data_17index
integer array s__InRangeWithSource__Data_18index
integer array s__InRangeWithSource__Data_19index
integer array s__InRangeWithSource__Data_20index
integer array s__InRangeWithSource__Data_21index
integer array s__InRangeWithSource__Data_22index
integer array s__InRangeWithSource__Data_23index
integer array s__InRangeWithSource__Data_24index
integer array s__InRangeWithSource__Data_25index
integer array s__InRangeWithSource__Data_26index
integer array s__InRangeWithSource__Data_27index
integer array s__InRangeWithSource__Data_28index
integer array s__InRangeWithSource__Data_29index
integer array s__InRangeWithSource__Data_30index
integer array s__InRangeWithSource__Data_31index
integer array s__InRangeWithSource__Data_32index
integer array s__InRangeWithSource__Data_33index
integer array s__InRangeWithSource__Data_34index
integer array s__InRangeWithSource__Data_35index
integer array s__InRangeWithSource__Data_36index
integer array s__InRangeWithSource__Data_37index
integer array s__InRangeWithSource__Data_38index
integer array s__InRangeWithSource__Data_39index
integer array s__InRangeWithSource__Data_40index
integer array s__InRangeWithSource__Data_41index
integer array s__InRangeWithSource__Data_42index
integer array s__InRangeWithSource__Data_43index
integer array s__InRangeWithSource__Data_44index
integer array s__InRangeWithSource__Data_45index
integer array s__InRangeWithSource__Data_46index
integer array s__InRangeWithSource__Data_47index
integer array s__InRangeWithSource__Data_48index
integer array s__InRangeWithSource__Data_49index
integer array s__InRangeWithSource__Data_50index
integer array s__InRangeWithSource__Data_index
unit array s__InRangeWithSource__Data_2currentSource
unit array s__InRangeWithSource__Data_3currentSource
unit array s__InRangeWithSource__Data_4currentSource
unit array s__InRangeWithSource__Data_5currentSource
unit array s__InRangeWithSource__Data_6currentSource
unit array s__InRangeWithSource__Data_7currentSource
unit array s__InRangeWithSource__Data_8currentSource
unit array s__InRangeWithSource__Data_9currentSource
unit array s__InRangeWithSource__Data_10currentSource
unit array s__InRangeWithSource__Data_11currentSource
unit array s__InRangeWithSource__Data_12currentSource
unit array s__InRangeWithSource__Data_13currentSource
unit array s__InRangeWithSource__Data_14currentSource
unit array s__InRangeWithSource__Data_15currentSource
unit array s__InRangeWithSource__Data_16currentSource
unit array s__InRangeWithSource__Data_17currentSource
unit array s__InRangeWithSource__Data_18currentSource
unit array s__InRangeWithSource__Data_19currentSource
unit array s__InRangeWithSource__Data_20currentSource
unit array s__InRangeWithSource__Data_21currentSource
unit array s__InRangeWithSource__Data_22currentSource
unit array s__InRangeWithSource__Data_23currentSource
unit array s__InRangeWithSource__Data_24currentSource
unit array s__InRangeWithSource__Data_25currentSource
unit array s__InRangeWithSource__Data_26currentSource
unit array s__InRangeWithSource__Data_27currentSource
unit array s__InRangeWithSource__Data_28currentSource
unit array s__InRangeWithSource__Data_29currentSource
unit array s__InRangeWithSource__Data_30currentSource
unit array s__InRangeWithSource__Data_31currentSource
unit array s__InRangeWithSource__Data_32currentSource
unit array s__InRangeWithSource__Data_33currentSource
unit array s__InRangeWithSource__Data_34currentSource
unit array s__InRangeWithSource__Data_35currentSource
unit array s__InRangeWithSource__Data_36currentSource
unit array s__InRangeWithSource__Data_37currentSource
unit array s__InRangeWithSource__Data_38currentSource
unit array s__InRangeWithSource__Data_39currentSource
unit array s__InRangeWithSource__Data_40currentSource
unit array s__InRangeWithSource__Data_41currentSource
unit array s__InRangeWithSource__Data_42currentSource
unit array s__InRangeWithSource__Data_43currentSource
unit array s__InRangeWithSource__Data_44currentSource
unit array s__InRangeWithSource__Data_45currentSource
unit array s__InRangeWithSource__Data_46currentSource
unit array s__InRangeWithSource__Data_47currentSource
unit array s__InRangeWithSource__Data_48currentSource
unit array s__InRangeWithSource__Data_49currentSource
unit array s__InRangeWithSource__Data_50currentSource
unit array s__InRangeWithSource__Data_currentSource
constant integer si__vector=12
integer si__vector_F=0
integer si__vector_I=0
integer array si__vector_V
real array s__vector_x
real array s__vector_y
real array s__vector_z
location s__vector_loc=Location(0.0, 0.0)
constant integer si__projectileinterface=13
integer si__projectileinterface_F=0
integer si__projectileinterface_I=0
integer array si__projectileinterface_V
integer array si__projectileinterface_type
trigger array st__projectileinterface_onDestroy
trigger array st__projectileinterface_onStart
trigger array st__projectileinterface_onFinish
trigger array st__projectileinterface_onGround
trigger array st__projectileinterface_onIteration
trigger array st__projectileinterface_onUnitCollision
trigger array st__projectileinterface_onDestCollision
trigger array st__projectileinterface_isValidTargetUnit
trigger array st__projectileinterface_isValidTargetDest
constant integer si__projectilegroup=14
integer si__projectilegroup_F=0
integer si__projectilegroup_I=0
integer array si__projectilegroup_V
integer array s__projectilegroup_size
hashtable s__projectilegroup_table=InitHashtable()
constant integer si__projectile=15
unit array s__projectile_toUnit
real array s__projectile_speed
real array s__projectile_arc
unit array s__projectile_PROP__target
unit array s__projectile_PROP__source
real array s__projectile_PROP__timescale
real array s__projectile_PROP__collision
real array s__projectile_PROP__targetHeight
boolean array s__projectile_activeTargetFollow
boolean array s__projectile_activePitch
boolean array s__projectile_activeRotation
boolean array s__projectile_activeUnitCollision
boolean array s__projectile_activeDestCollision
boolean array s__projectile_activeZcollision
boolean array s__projectile_destroyed
boolean array s__projectile_toDestroy
boolean array s__projectile_toKill
boolean array s__projectile_toRemove
boolean array s__projectile_FLAG__onGround
boolean array s__projectile_FLAG__active
boolean array s__projectile_FLAG__targetFollow
boolean array s__projectile_FLAG__followUnit
boolean array s__projectile_FLAG__isPaused
boolean array s__projectile_FLAG__activeZcollision
integer array s__projectile_VECTOR__position
integer array s__projectile_VECTOR__velocity
integer array s__projectile_VECTOR__acceleration
integer array s__projectile_VECTOR__target
integer array s__projectile_VECTOR__start
integer array s__projectile_DATA__index
integer array s__projectile_DATA__stack
integer s__projectile_DATA__size=0
timer s__projectile_DATA__loop=CreateTimer()
constant real s__projectile_DATA__loopRef=Projectile_SETTING__timeout
real array s__projectile_DATA__timeLeft
boolexpr s__projectile_FUNC__enumUnits=null
boolexpr s__projectile_FUNC__enumDests=null
string array s__projectile_ART__path
effect array s__projectile_ART__model
constant integer si__hometper=16
integer si__hometper_F=0
integer si__hometper_I=0
integer array si__hometper_V
integer array s__hometper_me
integer s__hometper_count=0
trigger s__hometper_trigchannel
trigger s__hometper_triginterrupt
trigger s__hometper_trigfinish
integer array s__hometper_index
unit array s__hometper_source
boolean array s__hometper_finished
boolean array s__hometper_active
effect array s__hometper_portalanim
constant integer si__trollsforestspear___fspearproj=17
group array s__trollsforestspear___fspearproj_affected
constant integer si__shurikenitem___shurp=18
real array s__shurikenitem___shurp_dmg
constant integer si__bootsofgon=19
integer si__bootsofgon_F=0
integer si__bootsofgon_I=0
integer array si__bootsofgon_V
integer array s__bootsofgon_me
integer s__bootsofgon_count=0
timer s__bootsofgon_swapper
integer s__bootsofgon_newb
integer array s__bootsofgon_index
unit array s__bootsofgon_carrier
integer array s__bootsofgon_projecti
boolean array s__bootsofgon_swapped
constant integer si__bogproj=20
integer array s__bogproj_boots
constant integer si__Fov___fovaura=21
integer si__Fov___fovaura_F=0
integer si__Fov___fovaura_I=0
integer array si__Fov___fovaura_V
integer s__Fov___fovaura_count=0
integer array s__Fov___fovaura_main
timer s__Fov___fovaura_auratimer
integer array s__Fov___fovaura_number
unit array s__Fov___fovaura_u
group array s__Fov___fovaura_curaura
constant integer si__ringofdespair___rodeffect=22
integer si__ringofdespair___rodeffect_F=0
integer si__ringofdespair___rodeffect_I=0
integer array si__ringofdespair___rodeffect_V
integer array s__ringofdespair___rodeffect_me
integer s__ringofdespair___rodeffect_count=0
timer s__ringofdespair___rodeffect_T
integer array s__ringofdespair___rodeffect_index
real array s__ringofdespair___rodeffect_remain
unit array s__ringofdespair___rodeffect_affected
constant integer si__ringofdespair___rodproj=23
integer array s__ringofdespair___rodproj_id
group array s__ringofdespair___rodproj_affected
constant integer si__PortalEff___asairaportal=24
integer si__PortalEff___asairaportal_F=0
integer si__PortalEff___asairaportal_I=0
integer array si__PortalEff___asairaportal_V
integer array s__PortalEff___asairaportal_me
integer s__PortalEff___asairaportal_count=0
trigger s__PortalEff___asairaportal_interrupt
integer array s__PortalEff___asairaportal_index
boolean array s__PortalEff___asairaportal_isAllocated
effect array s__PortalEff___asairaportal_eff
effect array s__PortalEff___asairaportal_eff3
unit array s__PortalEff___asairaportal_u
unit array s__PortalEff___asairaportal_target
constant integer si__thirstyfire___thirstyfire=25
integer array s__thirstyfire___thirstyfire_level
group array s__thirstyfire___thirstyfire_affected
constant integer si__latanelka___leftarrow=26
integer si__latanelka___leftarrow_F=0
integer si__latanelka___leftarrow_I=0
integer array si__latanelka___leftarrow_V
integer array s__latanelka___leftarrow_me
integer s__latanelka___leftarrow_count=0
timer s__latanelka___leftarrow_time
integer array s__latanelka___leftarrow_index
real array s__latanelka___leftarrow_remain
effect array s__latanelka___leftarrow_eff
unit array s__latanelka___leftarrow_u
constant integer si__latanelka___lataarrowproj=27
real array s__latanelka___lataarrowproj_dmg
integer array s__latanelka___lataarrowproj_arf_factor
effect array s__latanelka___lataarrowproj_additionaleff
boolean array s__latanelka___lataarrowproj_targeted
constant integer si__arrfallspell=28
integer si__arrfallspell_F=0
integer si__arrfallspell_I=0
integer array si__arrfallspell_V
integer array s__arrfallspell_me
integer s__arrfallspell_count=0
trigger s__arrfallspell_damagetaketrig
trigger s__arrfallspell_interrupttrig
boolean s__arrfallspell_allocated=false
integer array s__arrfallspell_index
boolean array s__arrfallspell_doingcast
unit array s__arrfallspell_source
integer array s__arrfallspell_level
unit array s__arrfallspell_faketarget
unit array s__arrfallspell_arrowmark
unit array s___arrfallspell_border
constant integer s___arrfallspell_border_size=6
integer array s__arrfallspell_border
effect array s___arrfallspell_bordermdl
constant integer s___arrfallspell_bordermdl_size=6
integer array s__arrfallspell_bordermdl
real array s__arrfallspell_x
real array s__arrfallspell_y
fogmodifier array s__arrfallspell_onmark
fogmodifier array s__arrfallspell_ontarget
boolean array s__arrfallspell_finished
constant integer si__latablinktrap___trap=31
integer si__latablinktrap___trap_F=0
integer si__latablinktrap___trap_I=0
integer array si__latablinktrap___trap_V
integer array s__latablinktrap___trap_me
integer s__latablinktrap___trap_count=0
timer s__latablinktrap___trap_lifetimer
timer s__latablinktrap___trap_activatetimer
integer array s__latablinktrap___trap_index
unit array s__latablinktrap___trap_latablinktrap___trap
boolean array s__latablinktrap___trap_activated
real array s__latablinktrap___trap_lifetime
real array s__latablinktrap___trap_activatetime
boolean array s__latablinktrap___trap_exploded
effect array s__latablinktrap___trap_effectactive
unit array s__latablinktrap___trap_source
integer array s__latablinktrap___trap_level
constant integer si__latadash=32
integer array s__latadash_level
timer array s__latadash_efft
constant integer si__lnetproj=33
integer array s__lnetproj_level
group array s__lnetproj_affected
constant integer si__Magrondusspells___Magr=34
integer si__Magrondusspells___Magr_F=0
integer si__Magrondusspells___Magr_I=0
integer array si__Magrondusspells___Magr_V
integer s__Magrondusspells___Magr_Num=0
unit array s__Magrondusspells___Magr_Un
texttag array s__Magrondusspells___Magr_ttag
timer array s__Magrondusspells___Magr_tagtimer
timer array s__Magrondusspells___Magr_stacktimer
integer array s__Magrondusspells___Magr_stacks
constant integer si__splitskull___spsproj=35
integer array s__splitskull___spsproj_level
group array s__splitskull___spsproj_affected
integer array s__splitskull___spsproj_opercount
constant integer si__angrybird___ffganim=36
integer si__angrybird___ffganim_F=0
integer si__angrybird___ffganim_I=0
integer array si__angrybird___ffganim_V
integer array s__angrybird___ffganim_me
trigger s__angrybird___ffganim_dmgtrg
integer s__angrybird___ffganim_count=0
timer s__angrybird___ffganim_t
integer array s__angrybird___ffganim_index
unit array s__angrybird___ffganim_u
unit array s___angrybird___ffganim_cell
constant integer s___angrybird___ffganim_cell_size=2
integer array s__angrybird___ffganim_cell
effect array s___angrybird___ffganim_cellmdl
constant integer s___angrybird___ffganim_cellmdl_size=2
integer array s__angrybird___ffganim_cellmdl
real array s__angrybird___ffganim_da
constant integer si__angrybird___ordrek=39
integer si__angrybird___ordrek_F=0
integer si__angrybird___ordrek_I=0
integer array si__angrybird___ordrek_V
integer array s__angrybird___ordrek_me
trigger s__angrybird___ordrek_dmgtrg
integer s__angrybird___ordrek_count=0
timer s__angrybird___ordrek_t
unit array s__angrybird___ordrek_u
effect array s__angrybird___ordrek_eff
effect array s__angrybird___ordrek_effactive
boolean array s__angrybird___ordrek_activated
real array s__angrybird___ordrek_activeremain
boolean array s__angrybird___ordrek_highBuff
boolean array s__angrybird___ordrek_lowBuff
constant integer si__orddash=40
integer array s__orddash_level
timer array s__orddash_efft
group array s__orddash_affected
constant integer si__slepsv=41
integer si__slepsv_F=0
integer si__slepsv_I=0
integer array si__slepsv_V
integer s__slepsv_count=0
integer array s__slepsv_me
trigger s__slepsv_trg_cast=null
trigger s__slepsv_trg_dmg=null
integer array s__slepsv_index
unit array s__slepsv_c
unit array s__slepsv_att
boolean array s__slepsv_hasEff
boolean array s__slepsv_IsPassa
effect array s__slepsv_weap_eff
constant integer si__pechsveta=42
integer si__pechsveta_F=0
integer si__pechsveta_I=0
integer array si__pechsveta_V
integer s__pechsveta_count=0
integer array s__pechsveta_me
timer s__pechsveta_time
unit array s__pechsveta_affected
integer array s__pechsveta_index
real array s__pechsveta_remain
constant integer si__Ridilan___ridichargetarg=43
constant integer si__Ridilan___ridichargeproj=44
integer array s__Ridilan___ridichargeproj_level
effect array s__Ridilan___ridichargeproj_eff
timer array s__Ridilan___ridichargeproj_delay
real array s__Ridilan___ridichargeproj_remain
integer array s__Ridilan___ridichargeproj_Aa
integer array s__Ridilan___ridichargeproj_Bb
real array s__Ridilan___ridichargeproj_lspeed
integer array s__Ridilan___ridichargeproj_bluecolor
integer array s__Ridilan___ridichargeproj_alphacolor
constant integer si__sod___sodproj=45
integer array s__sod___sodproj_level
constant integer si__thexec=46
integer array s__thexec_level
group array s__thexec_affected
constant integer si__gladiator=47
integer si__gladiator_F=0
integer si__gladiator_I=0
integer array si__gladiator_V
constant integer s__gladiator_unit_type1=0x6E303052
timer s__gladiator_gtime
integer array s__gladiator_me
integer s__gladiator_count=0
integer array s__gladiator_index
unit array s__gladiator_source
unit array s__gladiator_u
constant integer si__gladproj=48
integer array s__gladproj_self
integer array s__gladproj_level
group array s__gladproj_affected
constant integer si__powerstrike___pwrstrike=49
integer array s__powerstrike___pwrstrike_level
real array s__powerstrike___pwrstrike_distance
real array s__powerstrike___pwrstrike_traveled
group array s__powerstrike___pwrstrike_affected
real array s__powerstrike___pwrstrike_preX
real array s__powerstrike___pwrstrike_preY
real array s__powerstrike___pwrstrike_fadetime
real array s__powerstrike___pwrstrike_sca
constant integer si__drozhkicked=50
timer array s__drozhkicked_efft
constant integer si__drozhzem=51
integer si__drozhzem_F=0
integer si__drozhzem_I=0
integer array si__drozhzem_V
integer array s__drozhzem_me
integer s__drozhzem_count=0
timer s__drozhzem_time
boolean array s__drozhzem_destrthis
boolean array s__drozhzem_dead
integer array s__drozhzem_index
unit array s__drozhzem_source
unit array s__drozhzem_dummy
integer array s__drozhzem_level
real array s__drozhzem_lifespan
effect array s__drozhzem_model
constant integer si__volnawodomuta___wavslow=52
integer si__volnawodomuta___wavslow_F=0
integer si__volnawodomuta___wavslow_I=0
integer array si__volnawodomuta___wavslow_V
integer array s__volnawodomuta___wavslow_me
integer s__volnawodomuta___wavslow_count=0
timer s__volnawodomuta___wavslow_time
integer array s__volnawodomuta___wavslow_index
real array s__volnawodomuta___wavslow_remain
unit array s__volnawodomuta___wavslow_source
unit array s__volnawodomuta___wavslow_target
constant integer si__volnawodomuta___wavanim=53
constant integer si__volnawodomuta___thewave=54
integer array s__volnawodomuta___thewave_level
unit array s___volnawodomuta___thewave_waveunits
constant integer s___volnawodomuta___thewave_waveunits_size=6
integer array s__volnawodomuta___thewave_waveunits
integer si__volnawodomuta___thewave_arrI=0
integer si__volnawodomuta___thewave_arrN=0
integer array si__volnawodomuta___thewave_arr
integer array si__volnawodomuta___thewave_arrV
effect array s___volnawodomuta___thewave_wavemodel
constant integer s___volnawodomuta___thewave_wavemodel_size=6
integer array s__volnawodomuta___thewave_wavemodel
group array s__volnawodomuta___thewave_affected
group array s__volnawodomuta___thewave_g
real array s__volnawodomuta___thewave_angle
real array s__volnawodomuta___thewave_traveled
integer array s__volnawodomuta___thewave_codir
integer array s__volnawodomuta___thewave_antidir
constant integer si__vodshard___shard=57
integer array s__vodshard___shard_level
group array s__vodshard___shard_affected
constant integer si__magnproj=58
integer array s__magnproj_level
real array s__magnproj_distsum
real array s__magnproj_maxdist
unit array s__magnproj_affected
boolean array s__magnproj_isdestroyed
constant integer si__drakulty___drakultybuff=59
integer si__drakulty___drakultybuff_F=0
integer si__drakulty___drakultybuff_I=0
integer array si__drakulty___drakultybuff_V
timer s__drakulty___drakultybuff_time
integer array s__drakulty___drakultybuff_me
integer s__drakulty___drakultybuff_count=0
integer array s__drakulty___drakultybuff_index
unit array s__drakulty___drakultybuff_buffer
group array s__drakulty___drakultybuff_affected
real array s__drakulty___drakultybuff_rad
constant integer si__grenade=60
integer array s__grenade_level
real array s__grenade_angle
real array s__grenade_dist
integer array s__FICS__Temp
integer array s__FICS__ItemMap
integer array s__2FICS__ItemMap
integer array s__3FICS__ItemMap
integer array s__4FICS__ItemMap
integer array s__5FICS__ItemMap
integer array s__6FICS__ItemMap
integer array s__7FICS__ItemMap
integer array s__8FICS__ItemMap
integer array s__9FICS__ItemMap
integer array s__10FICS__ItemMap
integer array s__11FICS__ItemMap
integer array s__12FICS__ItemMap
integer array s__13FICS__ItemMap
integer array s__14FICS__ItemMap
integer array s__15FICS__ItemMap
integer array s__16FICS__ItemMap
integer array s__17FICS__ItemMap
integer array s__18FICS__ItemMap
integer array s__19FICS__ItemMap
integer array s__20FICS__ItemMap
integer array s__21FICS__ItemMap
integer array s__22FICS__ItemMap
integer array s__23FICS__ItemMap
integer array s__24FICS__ItemMap
integer array s__25FICS__ItemMap
integer array s__26FICS__ItemMap
integer array s__27FICS__ItemMap
integer array s__28FICS__ItemMap
integer array s__29FICS__ItemMap
integer array s__30FICS__ItemMap
integer array s__31FICS__ItemMap
integer array s__32FICS__ItemMap
integer array s__33FICS__ItemMap
integer array s__34FICS__ItemMap
integer array s__35FICS__ItemMap
integer array s__36FICS__ItemMap
integer array s__37FICS__ItemMap
integer array s__38FICS__ItemMap
integer array s__39FICS__ItemMap
integer array s__40FICS__ItemMap
integer array s__41FICS__ItemMap
integer array s__42FICS__ItemMap
integer array s__43FICS__ItemMap
integer array s__44FICS__ItemMap
integer array s__45FICS__ItemMap
integer array s__46FICS__ItemMap
integer array s__47FICS__ItemMap
integer array s__48FICS__ItemMap
integer array s__49FICS__ItemMap
integer array s__FICS__Items
integer array s__FICS__Recipes
trigger array s__FICS__Callbacks
integer array s__TimerUtils__data
timer array s__TimerUtils__tT
unit array s__HERO
integer array s__deaths
integer array s__HeroType
string array s__HeroIcon
unit array s__heropicklib__picker
integer array s__color
boolean array s__HasAddedToControl
integer array si__Table__GTable_type
trigger array st__Table__GTable_onDestroy
trigger st__Posoh_GetUnitMp
trigger st__Posoh_Proverka
trigger st__Posoh_RemoveStruct
trigger st__Posoh_Update
trigger st__projectilegroup_onDestroy
trigger st__projectile_create
trigger st__trollsforestspear___fspearproj_destroy
trigger st__shurikenitem___shurp_create
trigger st__bootsofgon_Activate
trigger st__bootsofgon_Find
trigger st__bootsofgon_onDestroy
trigger st__bootsofgon_destroy
trigger st__bogproj_destroy
trigger st__ringofdespair___rodeffect_onDestroy
trigger st__ringofdespair___rodeffect_destroy
trigger st__ringofdespair___rodproj_destroy
trigger st__thirstyfire___thirstyfire_destroy
trigger st__latanelka___leftarrow_onDestroy
trigger st__latanelka___leftarrow_destroy
trigger st__latanelka___lataarrowproj_create
trigger st__latanelka___lataarrowproj_destroy
trigger st__arrfallspell_Find
trigger st__arrfallspell_onDestroy
trigger st__arrfallspell_destroy
trigger st__latablinktrap___trap_onDestroy
trigger st__latablinktrap___trap_destroy
trigger st__lnetproj_destroy
trigger st__splitskull___spsproj_launchAgain
trigger st__splitskull___spsproj_destroy
trigger st__angrybird___ffganim_onDestroy
trigger st__angrybird___ffganim_Find
trigger st__angrybird___ffganim_destroy
trigger st__angrybird___ordrek_Find
trigger st__slepsv_onDestroy
trigger st__pechsveta_onDestroy
trigger st__gladiator_onDestroy
trigger st__gladiator_destroy
trigger st__gladproj_destroy
trigger st__drozhzem_Find
trigger st__drozhzem_onDestroy
trigger st__drozhzem_destroy
trigger st__volnawodomuta___wavslow_onDestroy
trigger st__volnawodomuta___wavslow_destroy
trigger st__vodshard___shard_destroy
trigger st__magnproj_destroy
trigger st__drakulty___drakultybuff_onDestroy
trigger st__grenade_create
trigger array st___prototype1
trigger array st___prototype24
integer f__result_integer
trigger array st___prototype36
trigger array st___prototype41
trigger array st___prototype42
trigger array st___prototype67
trigger array st___prototype68
unit f__arg_unit1
unit f__arg_unit2
destructable f__arg_destructable1
real f__arg_real1
real f__arg_real2
real f__arg_real3
real f__arg_real4
integer f__arg_integer1
integer f__arg_integer2
integer f__arg_integer3
string f__arg_string1
string f__arg_string2
integer f__arg_this
boolean f__result_boolean

endglobals
native GetPlayerUnitTypeCount takes player p,integer unitid returns integer


function sg__FICS__ItemMap_get takes integer l__i returns integer
    if(l__i<8191) then
        return s__FICS__ItemMap[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__2FICS__ItemMap[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__3FICS__ItemMap[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__4FICS__ItemMap[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__5FICS__ItemMap[l__i-32764]
                    else
                        return s__6FICS__ItemMap[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__7FICS__ItemMap[l__i-49146]
                else
                    return s__8FICS__ItemMap[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__9FICS__ItemMap[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__10FICS__ItemMap[l__i-73719]
                else
                    return s__11FICS__ItemMap[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__12FICS__ItemMap[l__i-90101]
            else
                return s__13FICS__ItemMap[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__14FICS__ItemMap[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__15FICS__ItemMap[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__16FICS__ItemMap[l__i-122865]
                else
                    return s__17FICS__ItemMap[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__18FICS__ItemMap[l__i-139247]
            else
                return s__19FICS__ItemMap[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__20FICS__ItemMap[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__21FICS__ItemMap[l__i-163820]
            else
                return s__22FICS__ItemMap[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__23FICS__ItemMap[l__i-180202]
        elseif(l__i<196584) then
            return s__24FICS__ItemMap[l__i-188393]
        else
            return s__25FICS__ItemMap[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__26FICS__ItemMap[l__i-204775]
    elseif(l__i<303067) then
        if(l__i<221157) then
            return s__27FICS__ItemMap[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__28FICS__ItemMap[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__29FICS__ItemMap[l__i-229348]
                else
                    return s__30FICS__ItemMap[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__31FICS__ItemMap[l__i-245730]
            else
                return s__32FICS__ItemMap[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__33FICS__ItemMap[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__34FICS__ItemMap[l__i-270303]
            else
                return s__35FICS__ItemMap[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__36FICS__ItemMap[l__i-286685]
        else
            return s__37FICS__ItemMap[l__i-294876]
        endif
    elseif(l__i<311258) then
        return s__38FICS__ItemMap[l__i-303067]
    elseif(l__i<352213) then
        if(l__i<319449) then
            return s__39FICS__ItemMap[l__i-311258]
        elseif(l__i<335831) then
            if(l__i<327640) then
                return s__40FICS__ItemMap[l__i-319449]
            else
                return s__41FICS__ItemMap[l__i-327640]
            endif
        elseif(l__i<344022) then
            return s__42FICS__ItemMap[l__i-335831]
        else
            return s__43FICS__ItemMap[l__i-344022]
        endif
    elseif(l__i<360404) then
        return s__44FICS__ItemMap[l__i-352213]
    elseif(l__i<376786) then
        if(l__i<368595) then
            return s__45FICS__ItemMap[l__i-360404]
        else
            return s__46FICS__ItemMap[l__i-368595]
        endif
    elseif(l__i<384977) then
        return s__47FICS__ItemMap[l__i-376786]
    elseif(l__i<393168) then
        return s__48FICS__ItemMap[l__i-384977]
    else
        return s__49FICS__ItemMap[l__i-393168]
    endif
endfunction

function sg__FICS__ItemMap_set takes integer l__i,integer v returns nothing
    if(l__i<8191) then
        set s__FICS__ItemMap[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__2FICS__ItemMap[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__3FICS__ItemMap[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__4FICS__ItemMap[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__5FICS__ItemMap[l__i-32764]=v
                    else
                        set s__6FICS__ItemMap[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__7FICS__ItemMap[l__i-49146]=v
                else
                    set s__8FICS__ItemMap[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__9FICS__ItemMap[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__10FICS__ItemMap[l__i-73719]=v
                else
                    set s__11FICS__ItemMap[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__12FICS__ItemMap[l__i-90101]=v
            else
                set s__13FICS__ItemMap[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__14FICS__ItemMap[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__15FICS__ItemMap[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__16FICS__ItemMap[l__i-122865]=v
                else
                    set s__17FICS__ItemMap[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__18FICS__ItemMap[l__i-139247]=v
            else
                set s__19FICS__ItemMap[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__20FICS__ItemMap[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__21FICS__ItemMap[l__i-163820]=v
            else
                set s__22FICS__ItemMap[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__23FICS__ItemMap[l__i-180202]=v
        elseif(l__i<196584) then
            set s__24FICS__ItemMap[l__i-188393]=v
        else
            set s__25FICS__ItemMap[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__26FICS__ItemMap[l__i-204775]=v
    elseif(l__i<303067) then
        if(l__i<221157) then
            set s__27FICS__ItemMap[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__28FICS__ItemMap[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__29FICS__ItemMap[l__i-229348]=v
                else
                    set s__30FICS__ItemMap[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__31FICS__ItemMap[l__i-245730]=v
            else
                set s__32FICS__ItemMap[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__33FICS__ItemMap[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__34FICS__ItemMap[l__i-270303]=v
            else
                set s__35FICS__ItemMap[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__36FICS__ItemMap[l__i-286685]=v
        else
            set s__37FICS__ItemMap[l__i-294876]=v
        endif
    elseif(l__i<311258) then
        set s__38FICS__ItemMap[l__i-303067]=v
    elseif(l__i<352213) then
        if(l__i<319449) then
            set s__39FICS__ItemMap[l__i-311258]=v
        elseif(l__i<335831) then
            if(l__i<327640) then
                set s__40FICS__ItemMap[l__i-319449]=v
            else
                set s__41FICS__ItemMap[l__i-327640]=v
            endif
        elseif(l__i<344022) then
            set s__42FICS__ItemMap[l__i-335831]=v
        else
            set s__43FICS__ItemMap[l__i-344022]=v
        endif
    elseif(l__i<360404) then
        set s__44FICS__ItemMap[l__i-352213]=v
    elseif(l__i<376786) then
        if(l__i<368595) then
            set s__45FICS__ItemMap[l__i-360404]=v
        else
            set s__46FICS__ItemMap[l__i-368595]=v
        endif
    elseif(l__i<384977) then
        set s__47FICS__ItemMap[l__i-376786]=v
    elseif(l__i<393168) then
        set s__48FICS__ItemMap[l__i-384977]=v
    else
        set s__49FICS__ItemMap[l__i-393168]=v
    endif
endfunction

function sg__InRangeWithSource__Data_get_registered takes integer l__i returns integer
    if(l__i<8191) then
        return s__InRangeWithSource__Data_registered[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__InRangeWithSource__Data_2registered[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__InRangeWithSource__Data_3registered[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__InRangeWithSource__Data_4registered[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__InRangeWithSource__Data_5registered[l__i-32764]
                    else
                        return s__InRangeWithSource__Data_6registered[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__InRangeWithSource__Data_7registered[l__i-49146]
                else
                    return s__InRangeWithSource__Data_8registered[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__InRangeWithSource__Data_9registered[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__InRangeWithSource__Data_10registered[l__i-73719]
                else
                    return s__InRangeWithSource__Data_11registered[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__InRangeWithSource__Data_12registered[l__i-90101]
            else
                return s__InRangeWithSource__Data_13registered[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__InRangeWithSource__Data_14registered[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__InRangeWithSource__Data_15registered[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__InRangeWithSource__Data_16registered[l__i-122865]
                else
                    return s__InRangeWithSource__Data_17registered[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__InRangeWithSource__Data_18registered[l__i-139247]
            else
                return s__InRangeWithSource__Data_19registered[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__InRangeWithSource__Data_20registered[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__InRangeWithSource__Data_21registered[l__i-163820]
            else
                return s__InRangeWithSource__Data_22registered[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__InRangeWithSource__Data_23registered[l__i-180202]
        elseif(l__i<196584) then
            return s__InRangeWithSource__Data_24registered[l__i-188393]
        else
            return s__InRangeWithSource__Data_25registered[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__InRangeWithSource__Data_26registered[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__InRangeWithSource__Data_27registered[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__InRangeWithSource__Data_28registered[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__InRangeWithSource__Data_29registered[l__i-229348]
                else
                    return s__InRangeWithSource__Data_30registered[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__InRangeWithSource__Data_31registered[l__i-245730]
            else
                return s__InRangeWithSource__Data_32registered[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__InRangeWithSource__Data_33registered[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__InRangeWithSource__Data_34registered[l__i-270303]
            else
                return s__InRangeWithSource__Data_35registered[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__InRangeWithSource__Data_36registered[l__i-286685]
        elseif(l__i<303067) then
            return s__InRangeWithSource__Data_37registered[l__i-294876]
        else
            return s__InRangeWithSource__Data_38registered[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__InRangeWithSource__Data_39registered[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__InRangeWithSource__Data_40registered[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__InRangeWithSource__Data_41registered[l__i-327640]
            else
                return s__InRangeWithSource__Data_42registered[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__InRangeWithSource__Data_43registered[l__i-344022]
        else
            return s__InRangeWithSource__Data_44registered[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__InRangeWithSource__Data_45registered[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__InRangeWithSource__Data_46registered[l__i-368595]
        else
            return s__InRangeWithSource__Data_47registered[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__InRangeWithSource__Data_48registered[l__i-384977]
    elseif(l__i<401359) then
        return s__InRangeWithSource__Data_49registered[l__i-393168]
    else
        return s__InRangeWithSource__Data_50registered[l__i-401359]
    endif
endfunction

function sg__InRangeWithSource__Data_set_registered takes integer l__i,integer v returns nothing
    if(l__i<8191) then
        set s__InRangeWithSource__Data_registered[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__InRangeWithSource__Data_2registered[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__InRangeWithSource__Data_3registered[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__InRangeWithSource__Data_4registered[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__InRangeWithSource__Data_5registered[l__i-32764]=v
                    else
                        set s__InRangeWithSource__Data_6registered[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__InRangeWithSource__Data_7registered[l__i-49146]=v
                else
                    set s__InRangeWithSource__Data_8registered[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__InRangeWithSource__Data_9registered[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__InRangeWithSource__Data_10registered[l__i-73719]=v
                else
                    set s__InRangeWithSource__Data_11registered[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__InRangeWithSource__Data_12registered[l__i-90101]=v
            else
                set s__InRangeWithSource__Data_13registered[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__InRangeWithSource__Data_14registered[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__InRangeWithSource__Data_15registered[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__InRangeWithSource__Data_16registered[l__i-122865]=v
                else
                    set s__InRangeWithSource__Data_17registered[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__InRangeWithSource__Data_18registered[l__i-139247]=v
            else
                set s__InRangeWithSource__Data_19registered[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__InRangeWithSource__Data_20registered[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__InRangeWithSource__Data_21registered[l__i-163820]=v
            else
                set s__InRangeWithSource__Data_22registered[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__InRangeWithSource__Data_23registered[l__i-180202]=v
        elseif(l__i<196584) then
            set s__InRangeWithSource__Data_24registered[l__i-188393]=v
        else
            set s__InRangeWithSource__Data_25registered[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__InRangeWithSource__Data_26registered[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__InRangeWithSource__Data_27registered[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__InRangeWithSource__Data_28registered[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__InRangeWithSource__Data_29registered[l__i-229348]=v
                else
                    set s__InRangeWithSource__Data_30registered[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__InRangeWithSource__Data_31registered[l__i-245730]=v
            else
                set s__InRangeWithSource__Data_32registered[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__InRangeWithSource__Data_33registered[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__InRangeWithSource__Data_34registered[l__i-270303]=v
            else
                set s__InRangeWithSource__Data_35registered[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__InRangeWithSource__Data_36registered[l__i-286685]=v
        elseif(l__i<303067) then
            set s__InRangeWithSource__Data_37registered[l__i-294876]=v
        else
            set s__InRangeWithSource__Data_38registered[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__InRangeWithSource__Data_39registered[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__InRangeWithSource__Data_40registered[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__InRangeWithSource__Data_41registered[l__i-327640]=v
            else
                set s__InRangeWithSource__Data_42registered[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__InRangeWithSource__Data_43registered[l__i-344022]=v
        else
            set s__InRangeWithSource__Data_44registered[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__InRangeWithSource__Data_45registered[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__InRangeWithSource__Data_46registered[l__i-368595]=v
        else
            set s__InRangeWithSource__Data_47registered[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__InRangeWithSource__Data_48registered[l__i-384977]=v
    elseif(l__i<401359) then
        set s__InRangeWithSource__Data_49registered[l__i-393168]=v
    else
        set s__InRangeWithSource__Data_50registered[l__i-401359]=v
    endif
endfunction

function sg__InRangeWithSource__Data_get_registered_dist takes integer l__i returns integer
    if(l__i<8191) then
        return s__InRangeWithSource__Data_registered_dist[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__InRangeWithSource__Data_2registered_dist[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__InRangeWithSource__Data_3registered_dist[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__InRangeWithSource__Data_4registered_dist[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__InRangeWithSource__Data_5registered_dist[l__i-32764]
                    else
                        return s__InRangeWithSource__Data_6registered_dist[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__InRangeWithSource__Data_7registered_dist[l__i-49146]
                else
                    return s__InRangeWithSource__Data_8registered_dist[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__InRangeWithSource__Data_9registered_dist[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__InRangeWithSource__Data_10registered_dist[l__i-73719]
                else
                    return s__InRangeWithSource__Data_11registered_dist[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__InRangeWithSource__Data_12registered_dist[l__i-90101]
            else
                return s__InRangeWithSource__Data_13registered_dist[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__InRangeWithSource__Data_14registered_dist[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__InRangeWithSource__Data_15registered_dist[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__InRangeWithSource__Data_16registered_dist[l__i-122865]
                else
                    return s__InRangeWithSource__Data_17registered_dist[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__InRangeWithSource__Data_18registered_dist[l__i-139247]
            else
                return s__InRangeWithSource__Data_19registered_dist[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__InRangeWithSource__Data_20registered_dist[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__InRangeWithSource__Data_21registered_dist[l__i-163820]
            else
                return s__InRangeWithSource__Data_22registered_dist[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__InRangeWithSource__Data_23registered_dist[l__i-180202]
        elseif(l__i<196584) then
            return s__InRangeWithSource__Data_24registered_dist[l__i-188393]
        else
            return s__InRangeWithSource__Data_25registered_dist[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__InRangeWithSource__Data_26registered_dist[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__InRangeWithSource__Data_27registered_dist[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__InRangeWithSource__Data_28registered_dist[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__InRangeWithSource__Data_29registered_dist[l__i-229348]
                else
                    return s__InRangeWithSource__Data_30registered_dist[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__InRangeWithSource__Data_31registered_dist[l__i-245730]
            else
                return s__InRangeWithSource__Data_32registered_dist[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__InRangeWithSource__Data_33registered_dist[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__InRangeWithSource__Data_34registered_dist[l__i-270303]
            else
                return s__InRangeWithSource__Data_35registered_dist[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__InRangeWithSource__Data_36registered_dist[l__i-286685]
        elseif(l__i<303067) then
            return s__InRangeWithSource__Data_37registered_dist[l__i-294876]
        else
            return s__InRangeWithSource__Data_38registered_dist[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__InRangeWithSource__Data_39registered_dist[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__InRangeWithSource__Data_40registered_dist[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__InRangeWithSource__Data_41registered_dist[l__i-327640]
            else
                return s__InRangeWithSource__Data_42registered_dist[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__InRangeWithSource__Data_43registered_dist[l__i-344022]
        else
            return s__InRangeWithSource__Data_44registered_dist[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__InRangeWithSource__Data_45registered_dist[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__InRangeWithSource__Data_46registered_dist[l__i-368595]
        else
            return s__InRangeWithSource__Data_47registered_dist[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__InRangeWithSource__Data_48registered_dist[l__i-384977]
    elseif(l__i<401359) then
        return s__InRangeWithSource__Data_49registered_dist[l__i-393168]
    else
        return s__InRangeWithSource__Data_50registered_dist[l__i-401359]
    endif
endfunction

function sg__InRangeWithSource__Data_set_registered_dist takes integer l__i,integer v returns nothing
    if(l__i<8191) then
        set s__InRangeWithSource__Data_registered_dist[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__InRangeWithSource__Data_2registered_dist[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__InRangeWithSource__Data_3registered_dist[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__InRangeWithSource__Data_4registered_dist[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__InRangeWithSource__Data_5registered_dist[l__i-32764]=v
                    else
                        set s__InRangeWithSource__Data_6registered_dist[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__InRangeWithSource__Data_7registered_dist[l__i-49146]=v
                else
                    set s__InRangeWithSource__Data_8registered_dist[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__InRangeWithSource__Data_9registered_dist[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__InRangeWithSource__Data_10registered_dist[l__i-73719]=v
                else
                    set s__InRangeWithSource__Data_11registered_dist[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__InRangeWithSource__Data_12registered_dist[l__i-90101]=v
            else
                set s__InRangeWithSource__Data_13registered_dist[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__InRangeWithSource__Data_14registered_dist[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__InRangeWithSource__Data_15registered_dist[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__InRangeWithSource__Data_16registered_dist[l__i-122865]=v
                else
                    set s__InRangeWithSource__Data_17registered_dist[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__InRangeWithSource__Data_18registered_dist[l__i-139247]=v
            else
                set s__InRangeWithSource__Data_19registered_dist[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__InRangeWithSource__Data_20registered_dist[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__InRangeWithSource__Data_21registered_dist[l__i-163820]=v
            else
                set s__InRangeWithSource__Data_22registered_dist[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__InRangeWithSource__Data_23registered_dist[l__i-180202]=v
        elseif(l__i<196584) then
            set s__InRangeWithSource__Data_24registered_dist[l__i-188393]=v
        else
            set s__InRangeWithSource__Data_25registered_dist[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__InRangeWithSource__Data_26registered_dist[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__InRangeWithSource__Data_27registered_dist[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__InRangeWithSource__Data_28registered_dist[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__InRangeWithSource__Data_29registered_dist[l__i-229348]=v
                else
                    set s__InRangeWithSource__Data_30registered_dist[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__InRangeWithSource__Data_31registered_dist[l__i-245730]=v
            else
                set s__InRangeWithSource__Data_32registered_dist[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__InRangeWithSource__Data_33registered_dist[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__InRangeWithSource__Data_34registered_dist[l__i-270303]=v
            else
                set s__InRangeWithSource__Data_35registered_dist[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__InRangeWithSource__Data_36registered_dist[l__i-286685]=v
        elseif(l__i<303067) then
            set s__InRangeWithSource__Data_37registered_dist[l__i-294876]=v
        else
            set s__InRangeWithSource__Data_38registered_dist[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__InRangeWithSource__Data_39registered_dist[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__InRangeWithSource__Data_40registered_dist[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__InRangeWithSource__Data_41registered_dist[l__i-327640]=v
            else
                set s__InRangeWithSource__Data_42registered_dist[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__InRangeWithSource__Data_43registered_dist[l__i-344022]=v
        else
            set s__InRangeWithSource__Data_44registered_dist[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__InRangeWithSource__Data_45registered_dist[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__InRangeWithSource__Data_46registered_dist[l__i-368595]=v
        else
            set s__InRangeWithSource__Data_47registered_dist[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__InRangeWithSource__Data_48registered_dist[l__i-384977]=v
    elseif(l__i<401359) then
        set s__InRangeWithSource__Data_49registered_dist[l__i-393168]=v
    else
        set s__InRangeWithSource__Data_50registered_dist[l__i-401359]=v
    endif
endfunction

function sg__InRangeWithSource__Data_get_index takes integer l__i returns integer
    if(l__i<8191) then
        return s__InRangeWithSource__Data_index[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__InRangeWithSource__Data_2index[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__InRangeWithSource__Data_3index[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__InRangeWithSource__Data_4index[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__InRangeWithSource__Data_5index[l__i-32764]
                    else
                        return s__InRangeWithSource__Data_6index[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__InRangeWithSource__Data_7index[l__i-49146]
                else
                    return s__InRangeWithSource__Data_8index[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__InRangeWithSource__Data_9index[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__InRangeWithSource__Data_10index[l__i-73719]
                else
                    return s__InRangeWithSource__Data_11index[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__InRangeWithSource__Data_12index[l__i-90101]
            else
                return s__InRangeWithSource__Data_13index[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__InRangeWithSource__Data_14index[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__InRangeWithSource__Data_15index[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__InRangeWithSource__Data_16index[l__i-122865]
                else
                    return s__InRangeWithSource__Data_17index[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__InRangeWithSource__Data_18index[l__i-139247]
            else
                return s__InRangeWithSource__Data_19index[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__InRangeWithSource__Data_20index[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__InRangeWithSource__Data_21index[l__i-163820]
            else
                return s__InRangeWithSource__Data_22index[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__InRangeWithSource__Data_23index[l__i-180202]
        elseif(l__i<196584) then
            return s__InRangeWithSource__Data_24index[l__i-188393]
        else
            return s__InRangeWithSource__Data_25index[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__InRangeWithSource__Data_26index[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__InRangeWithSource__Data_27index[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__InRangeWithSource__Data_28index[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__InRangeWithSource__Data_29index[l__i-229348]
                else
                    return s__InRangeWithSource__Data_30index[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__InRangeWithSource__Data_31index[l__i-245730]
            else
                return s__InRangeWithSource__Data_32index[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__InRangeWithSource__Data_33index[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__InRangeWithSource__Data_34index[l__i-270303]
            else
                return s__InRangeWithSource__Data_35index[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__InRangeWithSource__Data_36index[l__i-286685]
        elseif(l__i<303067) then
            return s__InRangeWithSource__Data_37index[l__i-294876]
        else
            return s__InRangeWithSource__Data_38index[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__InRangeWithSource__Data_39index[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__InRangeWithSource__Data_40index[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__InRangeWithSource__Data_41index[l__i-327640]
            else
                return s__InRangeWithSource__Data_42index[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__InRangeWithSource__Data_43index[l__i-344022]
        else
            return s__InRangeWithSource__Data_44index[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__InRangeWithSource__Data_45index[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__InRangeWithSource__Data_46index[l__i-368595]
        else
            return s__InRangeWithSource__Data_47index[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__InRangeWithSource__Data_48index[l__i-384977]
    elseif(l__i<401359) then
        return s__InRangeWithSource__Data_49index[l__i-393168]
    else
        return s__InRangeWithSource__Data_50index[l__i-401359]
    endif
endfunction

function sg__InRangeWithSource__Data_set_index takes integer l__i,integer v returns nothing
    if(l__i<8191) then
        set s__InRangeWithSource__Data_index[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__InRangeWithSource__Data_2index[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__InRangeWithSource__Data_3index[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__InRangeWithSource__Data_4index[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__InRangeWithSource__Data_5index[l__i-32764]=v
                    else
                        set s__InRangeWithSource__Data_6index[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__InRangeWithSource__Data_7index[l__i-49146]=v
                else
                    set s__InRangeWithSource__Data_8index[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__InRangeWithSource__Data_9index[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__InRangeWithSource__Data_10index[l__i-73719]=v
                else
                    set s__InRangeWithSource__Data_11index[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__InRangeWithSource__Data_12index[l__i-90101]=v
            else
                set s__InRangeWithSource__Data_13index[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__InRangeWithSource__Data_14index[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__InRangeWithSource__Data_15index[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__InRangeWithSource__Data_16index[l__i-122865]=v
                else
                    set s__InRangeWithSource__Data_17index[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__InRangeWithSource__Data_18index[l__i-139247]=v
            else
                set s__InRangeWithSource__Data_19index[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__InRangeWithSource__Data_20index[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__InRangeWithSource__Data_21index[l__i-163820]=v
            else
                set s__InRangeWithSource__Data_22index[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__InRangeWithSource__Data_23index[l__i-180202]=v
        elseif(l__i<196584) then
            set s__InRangeWithSource__Data_24index[l__i-188393]=v
        else
            set s__InRangeWithSource__Data_25index[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__InRangeWithSource__Data_26index[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__InRangeWithSource__Data_27index[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__InRangeWithSource__Data_28index[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__InRangeWithSource__Data_29index[l__i-229348]=v
                else
                    set s__InRangeWithSource__Data_30index[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__InRangeWithSource__Data_31index[l__i-245730]=v
            else
                set s__InRangeWithSource__Data_32index[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__InRangeWithSource__Data_33index[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__InRangeWithSource__Data_34index[l__i-270303]=v
            else
                set s__InRangeWithSource__Data_35index[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__InRangeWithSource__Data_36index[l__i-286685]=v
        elseif(l__i<303067) then
            set s__InRangeWithSource__Data_37index[l__i-294876]=v
        else
            set s__InRangeWithSource__Data_38index[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__InRangeWithSource__Data_39index[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__InRangeWithSource__Data_40index[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__InRangeWithSource__Data_41index[l__i-327640]=v
            else
                set s__InRangeWithSource__Data_42index[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__InRangeWithSource__Data_43index[l__i-344022]=v
        else
            set s__InRangeWithSource__Data_44index[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__InRangeWithSource__Data_45index[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__InRangeWithSource__Data_46index[l__i-368595]=v
        else
            set s__InRangeWithSource__Data_47index[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__InRangeWithSource__Data_48index[l__i-384977]=v
    elseif(l__i<401359) then
        set s__InRangeWithSource__Data_49index[l__i-393168]=v
    else
        set s__InRangeWithSource__Data_50index[l__i-401359]=v
    endif
endfunction

function sg__InRangeWithSource__Data_get_currentSource takes integer l__i returns unit
    if(l__i<8191) then
        return s__InRangeWithSource__Data_currentSource[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__InRangeWithSource__Data_2currentSource[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__InRangeWithSource__Data_3currentSource[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__InRangeWithSource__Data_4currentSource[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__InRangeWithSource__Data_5currentSource[l__i-32764]
                    else
                        return s__InRangeWithSource__Data_6currentSource[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__InRangeWithSource__Data_7currentSource[l__i-49146]
                else
                    return s__InRangeWithSource__Data_8currentSource[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__InRangeWithSource__Data_9currentSource[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__InRangeWithSource__Data_10currentSource[l__i-73719]
                else
                    return s__InRangeWithSource__Data_11currentSource[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__InRangeWithSource__Data_12currentSource[l__i-90101]
            else
                return s__InRangeWithSource__Data_13currentSource[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__InRangeWithSource__Data_14currentSource[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__InRangeWithSource__Data_15currentSource[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__InRangeWithSource__Data_16currentSource[l__i-122865]
                else
                    return s__InRangeWithSource__Data_17currentSource[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__InRangeWithSource__Data_18currentSource[l__i-139247]
            else
                return s__InRangeWithSource__Data_19currentSource[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__InRangeWithSource__Data_20currentSource[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__InRangeWithSource__Data_21currentSource[l__i-163820]
            else
                return s__InRangeWithSource__Data_22currentSource[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__InRangeWithSource__Data_23currentSource[l__i-180202]
        elseif(l__i<196584) then
            return s__InRangeWithSource__Data_24currentSource[l__i-188393]
        else
            return s__InRangeWithSource__Data_25currentSource[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__InRangeWithSource__Data_26currentSource[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__InRangeWithSource__Data_27currentSource[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__InRangeWithSource__Data_28currentSource[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__InRangeWithSource__Data_29currentSource[l__i-229348]
                else
                    return s__InRangeWithSource__Data_30currentSource[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__InRangeWithSource__Data_31currentSource[l__i-245730]
            else
                return s__InRangeWithSource__Data_32currentSource[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__InRangeWithSource__Data_33currentSource[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__InRangeWithSource__Data_34currentSource[l__i-270303]
            else
                return s__InRangeWithSource__Data_35currentSource[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__InRangeWithSource__Data_36currentSource[l__i-286685]
        elseif(l__i<303067) then
            return s__InRangeWithSource__Data_37currentSource[l__i-294876]
        else
            return s__InRangeWithSource__Data_38currentSource[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__InRangeWithSource__Data_39currentSource[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__InRangeWithSource__Data_40currentSource[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__InRangeWithSource__Data_41currentSource[l__i-327640]
            else
                return s__InRangeWithSource__Data_42currentSource[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__InRangeWithSource__Data_43currentSource[l__i-344022]
        else
            return s__InRangeWithSource__Data_44currentSource[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__InRangeWithSource__Data_45currentSource[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__InRangeWithSource__Data_46currentSource[l__i-368595]
        else
            return s__InRangeWithSource__Data_47currentSource[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__InRangeWithSource__Data_48currentSource[l__i-384977]
    elseif(l__i<401359) then
        return s__InRangeWithSource__Data_49currentSource[l__i-393168]
    else
        return s__InRangeWithSource__Data_50currentSource[l__i-401359]
    endif
endfunction

function sg__InRangeWithSource__Data_set_currentSource takes integer l__i,unit v returns nothing
    if(l__i<8191) then
        set s__InRangeWithSource__Data_currentSource[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__InRangeWithSource__Data_2currentSource[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__InRangeWithSource__Data_3currentSource[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__InRangeWithSource__Data_4currentSource[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__InRangeWithSource__Data_5currentSource[l__i-32764]=v
                    else
                        set s__InRangeWithSource__Data_6currentSource[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__InRangeWithSource__Data_7currentSource[l__i-49146]=v
                else
                    set s__InRangeWithSource__Data_8currentSource[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__InRangeWithSource__Data_9currentSource[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__InRangeWithSource__Data_10currentSource[l__i-73719]=v
                else
                    set s__InRangeWithSource__Data_11currentSource[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__InRangeWithSource__Data_12currentSource[l__i-90101]=v
            else
                set s__InRangeWithSource__Data_13currentSource[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__InRangeWithSource__Data_14currentSource[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__InRangeWithSource__Data_15currentSource[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__InRangeWithSource__Data_16currentSource[l__i-122865]=v
                else
                    set s__InRangeWithSource__Data_17currentSource[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__InRangeWithSource__Data_18currentSource[l__i-139247]=v
            else
                set s__InRangeWithSource__Data_19currentSource[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__InRangeWithSource__Data_20currentSource[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__InRangeWithSource__Data_21currentSource[l__i-163820]=v
            else
                set s__InRangeWithSource__Data_22currentSource[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__InRangeWithSource__Data_23currentSource[l__i-180202]=v
        elseif(l__i<196584) then
            set s__InRangeWithSource__Data_24currentSource[l__i-188393]=v
        else
            set s__InRangeWithSource__Data_25currentSource[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__InRangeWithSource__Data_26currentSource[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__InRangeWithSource__Data_27currentSource[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__InRangeWithSource__Data_28currentSource[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__InRangeWithSource__Data_29currentSource[l__i-229348]=v
                else
                    set s__InRangeWithSource__Data_30currentSource[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__InRangeWithSource__Data_31currentSource[l__i-245730]=v
            else
                set s__InRangeWithSource__Data_32currentSource[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__InRangeWithSource__Data_33currentSource[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__InRangeWithSource__Data_34currentSource[l__i-270303]=v
            else
                set s__InRangeWithSource__Data_35currentSource[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__InRangeWithSource__Data_36currentSource[l__i-286685]=v
        elseif(l__i<303067) then
            set s__InRangeWithSource__Data_37currentSource[l__i-294876]=v
        else
            set s__InRangeWithSource__Data_38currentSource[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__InRangeWithSource__Data_39currentSource[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__InRangeWithSource__Data_40currentSource[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__InRangeWithSource__Data_41currentSource[l__i-327640]=v
            else
                set s__InRangeWithSource__Data_42currentSource[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__InRangeWithSource__Data_43currentSource[l__i-344022]=v
        else
            set s__InRangeWithSource__Data_44currentSource[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__InRangeWithSource__Data_45currentSource[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__InRangeWithSource__Data_46currentSource[l__i-368595]=v
        else
            set s__InRangeWithSource__Data_47currentSource[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__InRangeWithSource__Data_48currentSource[l__i-384977]=v
    elseif(l__i<401359) then
        set s__InRangeWithSource__Data_49currentSource[l__i-393168]=v
    else
        set s__InRangeWithSource__Data_50currentSource[l__i-401359]=v
    endif
endfunction

function sg___InRangeWithSource__Data_registered_get takes integer l__i returns unit
    if(l__i<8191) then
        return s___InRangeWithSource__Data_registered[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__2_InRangeWithSource__Data_registered[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__3_InRangeWithSource__Data_registered[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__4_InRangeWithSource__Data_registered[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__5_InRangeWithSource__Data_registered[l__i-32764]
                    else
                        return s__6_InRangeWithSource__Data_registered[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__7_InRangeWithSource__Data_registered[l__i-49146]
                else
                    return s__8_InRangeWithSource__Data_registered[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__9_InRangeWithSource__Data_registered[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__10_InRangeWithSource__Data_registered[l__i-73719]
                else
                    return s__11_InRangeWithSource__Data_registered[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__12_InRangeWithSource__Data_registered[l__i-90101]
            else
                return s__13_InRangeWithSource__Data_registered[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__14_InRangeWithSource__Data_registered[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__15_InRangeWithSource__Data_registered[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__16_InRangeWithSource__Data_registered[l__i-122865]
                else
                    return s__17_InRangeWithSource__Data_registered[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__18_InRangeWithSource__Data_registered[l__i-139247]
            else
                return s__19_InRangeWithSource__Data_registered[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__20_InRangeWithSource__Data_registered[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__21_InRangeWithSource__Data_registered[l__i-163820]
            else
                return s__22_InRangeWithSource__Data_registered[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__23_InRangeWithSource__Data_registered[l__i-180202]
        elseif(l__i<196584) then
            return s__24_InRangeWithSource__Data_registered[l__i-188393]
        else
            return s__25_InRangeWithSource__Data_registered[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__26_InRangeWithSource__Data_registered[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__27_InRangeWithSource__Data_registered[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__28_InRangeWithSource__Data_registered[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__29_InRangeWithSource__Data_registered[l__i-229348]
                else
                    return s__30_InRangeWithSource__Data_registered[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__31_InRangeWithSource__Data_registered[l__i-245730]
            else
                return s__32_InRangeWithSource__Data_registered[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__33_InRangeWithSource__Data_registered[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__34_InRangeWithSource__Data_registered[l__i-270303]
            else
                return s__35_InRangeWithSource__Data_registered[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__36_InRangeWithSource__Data_registered[l__i-286685]
        elseif(l__i<303067) then
            return s__37_InRangeWithSource__Data_registered[l__i-294876]
        else
            return s__38_InRangeWithSource__Data_registered[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__39_InRangeWithSource__Data_registered[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__40_InRangeWithSource__Data_registered[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__41_InRangeWithSource__Data_registered[l__i-327640]
            else
                return s__42_InRangeWithSource__Data_registered[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__43_InRangeWithSource__Data_registered[l__i-344022]
        else
            return s__44_InRangeWithSource__Data_registered[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__45_InRangeWithSource__Data_registered[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__46_InRangeWithSource__Data_registered[l__i-368595]
        else
            return s__47_InRangeWithSource__Data_registered[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__48_InRangeWithSource__Data_registered[l__i-384977]
    elseif(l__i<401359) then
        return s__49_InRangeWithSource__Data_registered[l__i-393168]
    else
        return s__50_InRangeWithSource__Data_registered[l__i-401359]
    endif
endfunction

function sg___InRangeWithSource__Data_registered_set takes integer l__i,unit v returns nothing
    if(l__i<8191) then
        set s___InRangeWithSource__Data_registered[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__2_InRangeWithSource__Data_registered[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__3_InRangeWithSource__Data_registered[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__4_InRangeWithSource__Data_registered[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__5_InRangeWithSource__Data_registered[l__i-32764]=v
                    else
                        set s__6_InRangeWithSource__Data_registered[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__7_InRangeWithSource__Data_registered[l__i-49146]=v
                else
                    set s__8_InRangeWithSource__Data_registered[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__9_InRangeWithSource__Data_registered[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__10_InRangeWithSource__Data_registered[l__i-73719]=v
                else
                    set s__11_InRangeWithSource__Data_registered[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__12_InRangeWithSource__Data_registered[l__i-90101]=v
            else
                set s__13_InRangeWithSource__Data_registered[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__14_InRangeWithSource__Data_registered[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__15_InRangeWithSource__Data_registered[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__16_InRangeWithSource__Data_registered[l__i-122865]=v
                else
                    set s__17_InRangeWithSource__Data_registered[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__18_InRangeWithSource__Data_registered[l__i-139247]=v
            else
                set s__19_InRangeWithSource__Data_registered[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__20_InRangeWithSource__Data_registered[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__21_InRangeWithSource__Data_registered[l__i-163820]=v
            else
                set s__22_InRangeWithSource__Data_registered[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__23_InRangeWithSource__Data_registered[l__i-180202]=v
        elseif(l__i<196584) then
            set s__24_InRangeWithSource__Data_registered[l__i-188393]=v
        else
            set s__25_InRangeWithSource__Data_registered[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__26_InRangeWithSource__Data_registered[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__27_InRangeWithSource__Data_registered[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__28_InRangeWithSource__Data_registered[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__29_InRangeWithSource__Data_registered[l__i-229348]=v
                else
                    set s__30_InRangeWithSource__Data_registered[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__31_InRangeWithSource__Data_registered[l__i-245730]=v
            else
                set s__32_InRangeWithSource__Data_registered[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__33_InRangeWithSource__Data_registered[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__34_InRangeWithSource__Data_registered[l__i-270303]=v
            else
                set s__35_InRangeWithSource__Data_registered[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__36_InRangeWithSource__Data_registered[l__i-286685]=v
        elseif(l__i<303067) then
            set s__37_InRangeWithSource__Data_registered[l__i-294876]=v
        else
            set s__38_InRangeWithSource__Data_registered[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__39_InRangeWithSource__Data_registered[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__40_InRangeWithSource__Data_registered[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__41_InRangeWithSource__Data_registered[l__i-327640]=v
            else
                set s__42_InRangeWithSource__Data_registered[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__43_InRangeWithSource__Data_registered[l__i-344022]=v
        else
            set s__44_InRangeWithSource__Data_registered[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__45_InRangeWithSource__Data_registered[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__46_InRangeWithSource__Data_registered[l__i-368595]=v
        else
            set s__47_InRangeWithSource__Data_registered[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__48_InRangeWithSource__Data_registered[l__i-384977]=v
    elseif(l__i<401359) then
        set s__49_InRangeWithSource__Data_registered[l__i-393168]=v
    else
        set s__50_InRangeWithSource__Data_registered[l__i-401359]=v
    endif
endfunction

function sg___InRangeWithSource__Data_registered_dist_get takes integer l__i returns real
    if(l__i<8191) then
        return s___InRangeWithSource__Data_registered_dist[l__i]
    elseif(l__i<204775) then
        if(l__i<16382) then
            return s__2_InRangeWithSource__Data_registered_dist[l__i-8191]
        elseif(l__i<106483) then
            if(l__i<24573) then
                return s__3_InRangeWithSource__Data_registered_dist[l__i-16382]
            elseif(l__i<65528) then
                if(l__i<32764) then
                    return s__4_InRangeWithSource__Data_registered_dist[l__i-24573]
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        return s__5_InRangeWithSource__Data_registered_dist[l__i-32764]
                    else
                        return s__6_InRangeWithSource__Data_registered_dist[l__i-40955]
                    endif
                elseif(l__i<57337) then
                    return s__7_InRangeWithSource__Data_registered_dist[l__i-49146]
                else
                    return s__8_InRangeWithSource__Data_registered_dist[l__i-57337]
                endif
            elseif(l__i<73719) then
                return s__9_InRangeWithSource__Data_registered_dist[l__i-65528]
            elseif(l__i<90101) then
                if(l__i<81910) then
                    return s__10_InRangeWithSource__Data_registered_dist[l__i-73719]
                else
                    return s__11_InRangeWithSource__Data_registered_dist[l__i-81910]
                endif
            elseif(l__i<98292) then
                return s__12_InRangeWithSource__Data_registered_dist[l__i-90101]
            else
                return s__13_InRangeWithSource__Data_registered_dist[l__i-98292]
            endif
        elseif(l__i<114674) then
            return s__14_InRangeWithSource__Data_registered_dist[l__i-106483]
        elseif(l__i<155629) then
            if(l__i<122865) then
                return s__15_InRangeWithSource__Data_registered_dist[l__i-114674]
            elseif(l__i<139247) then
                if(l__i<131056) then
                    return s__16_InRangeWithSource__Data_registered_dist[l__i-122865]
                else
                    return s__17_InRangeWithSource__Data_registered_dist[l__i-131056]
                endif
            elseif(l__i<147438) then
                return s__18_InRangeWithSource__Data_registered_dist[l__i-139247]
            else
                return s__19_InRangeWithSource__Data_registered_dist[l__i-147438]
            endif
        elseif(l__i<163820) then
            return s__20_InRangeWithSource__Data_registered_dist[l__i-155629]
        elseif(l__i<180202) then
            if(l__i<172011) then
                return s__21_InRangeWithSource__Data_registered_dist[l__i-163820]
            else
                return s__22_InRangeWithSource__Data_registered_dist[l__i-172011]
            endif
        elseif(l__i<188393) then
            return s__23_InRangeWithSource__Data_registered_dist[l__i-180202]
        elseif(l__i<196584) then
            return s__24_InRangeWithSource__Data_registered_dist[l__i-188393]
        else
            return s__25_InRangeWithSource__Data_registered_dist[l__i-196584]
        endif
    elseif(l__i<212966) then
        return s__26_InRangeWithSource__Data_registered_dist[l__i-204775]
    elseif(l__i<311258) then
        if(l__i<221157) then
            return s__27_InRangeWithSource__Data_registered_dist[l__i-212966]
        elseif(l__i<262112) then
            if(l__i<229348) then
                return s__28_InRangeWithSource__Data_registered_dist[l__i-221157]
            elseif(l__i<245730) then
                if(l__i<237539) then
                    return s__29_InRangeWithSource__Data_registered_dist[l__i-229348]
                else
                    return s__30_InRangeWithSource__Data_registered_dist[l__i-237539]
                endif
            elseif(l__i<253921) then
                return s__31_InRangeWithSource__Data_registered_dist[l__i-245730]
            else
                return s__32_InRangeWithSource__Data_registered_dist[l__i-253921]
            endif
        elseif(l__i<270303) then
            return s__33_InRangeWithSource__Data_registered_dist[l__i-262112]
        elseif(l__i<286685) then
            if(l__i<278494) then
                return s__34_InRangeWithSource__Data_registered_dist[l__i-270303]
            else
                return s__35_InRangeWithSource__Data_registered_dist[l__i-278494]
            endif
        elseif(l__i<294876) then
            return s__36_InRangeWithSource__Data_registered_dist[l__i-286685]
        elseif(l__i<303067) then
            return s__37_InRangeWithSource__Data_registered_dist[l__i-294876]
        else
            return s__38_InRangeWithSource__Data_registered_dist[l__i-303067]
        endif
    elseif(l__i<319449) then
        return s__39_InRangeWithSource__Data_registered_dist[l__i-311258]
    elseif(l__i<360404) then
        if(l__i<327640) then
            return s__40_InRangeWithSource__Data_registered_dist[l__i-319449]
        elseif(l__i<344022) then
            if(l__i<335831) then
                return s__41_InRangeWithSource__Data_registered_dist[l__i-327640]
            else
                return s__42_InRangeWithSource__Data_registered_dist[l__i-335831]
            endif
        elseif(l__i<352213) then
            return s__43_InRangeWithSource__Data_registered_dist[l__i-344022]
        else
            return s__44_InRangeWithSource__Data_registered_dist[l__i-352213]
        endif
    elseif(l__i<368595) then
        return s__45_InRangeWithSource__Data_registered_dist[l__i-360404]
    elseif(l__i<384977) then
        if(l__i<376786) then
            return s__46_InRangeWithSource__Data_registered_dist[l__i-368595]
        else
            return s__47_InRangeWithSource__Data_registered_dist[l__i-376786]
        endif
    elseif(l__i<393168) then
        return s__48_InRangeWithSource__Data_registered_dist[l__i-384977]
    elseif(l__i<401359) then
        return s__49_InRangeWithSource__Data_registered_dist[l__i-393168]
    else
        return s__50_InRangeWithSource__Data_registered_dist[l__i-401359]
    endif
endfunction

function sg___InRangeWithSource__Data_registered_dist_set takes integer l__i,real v returns nothing
    if(l__i<8191) then
        set s___InRangeWithSource__Data_registered_dist[l__i]=v
    elseif(l__i<204775) then
        if(l__i<16382) then
            set s__2_InRangeWithSource__Data_registered_dist[l__i-8191]=v
        elseif(l__i<106483) then
            if(l__i<24573) then
                set s__3_InRangeWithSource__Data_registered_dist[l__i-16382]=v
            elseif(l__i<65528) then
                if(l__i<32764) then
                    set s__4_InRangeWithSource__Data_registered_dist[l__i-24573]=v
                elseif(l__i<49146) then
                    if(l__i<40955) then
                        set s__5_InRangeWithSource__Data_registered_dist[l__i-32764]=v
                    else
                        set s__6_InRangeWithSource__Data_registered_dist[l__i-40955]=v
                    endif
                elseif(l__i<57337) then
                    set s__7_InRangeWithSource__Data_registered_dist[l__i-49146]=v
                else
                    set s__8_InRangeWithSource__Data_registered_dist[l__i-57337]=v
                endif
            elseif(l__i<73719) then
                set s__9_InRangeWithSource__Data_registered_dist[l__i-65528]=v
            elseif(l__i<90101) then
                if(l__i<81910) then
                    set s__10_InRangeWithSource__Data_registered_dist[l__i-73719]=v
                else
                    set s__11_InRangeWithSource__Data_registered_dist[l__i-81910]=v
                endif
            elseif(l__i<98292) then
                set s__12_InRangeWithSource__Data_registered_dist[l__i-90101]=v
            else
                set s__13_InRangeWithSource__Data_registered_dist[l__i-98292]=v
            endif
        elseif(l__i<114674) then
            set s__14_InRangeWithSource__Data_registered_dist[l__i-106483]=v
        elseif(l__i<155629) then
            if(l__i<122865) then
                set s__15_InRangeWithSource__Data_registered_dist[l__i-114674]=v
            elseif(l__i<139247) then
                if(l__i<131056) then
                    set s__16_InRangeWithSource__Data_registered_dist[l__i-122865]=v
                else
                    set s__17_InRangeWithSource__Data_registered_dist[l__i-131056]=v
                endif
            elseif(l__i<147438) then
                set s__18_InRangeWithSource__Data_registered_dist[l__i-139247]=v
            else
                set s__19_InRangeWithSource__Data_registered_dist[l__i-147438]=v
            endif
        elseif(l__i<163820) then
            set s__20_InRangeWithSource__Data_registered_dist[l__i-155629]=v
        elseif(l__i<180202) then
            if(l__i<172011) then
                set s__21_InRangeWithSource__Data_registered_dist[l__i-163820]=v
            else
                set s__22_InRangeWithSource__Data_registered_dist[l__i-172011]=v
            endif
        elseif(l__i<188393) then
            set s__23_InRangeWithSource__Data_registered_dist[l__i-180202]=v
        elseif(l__i<196584) then
            set s__24_InRangeWithSource__Data_registered_dist[l__i-188393]=v
        else
            set s__25_InRangeWithSource__Data_registered_dist[l__i-196584]=v
        endif
    elseif(l__i<212966) then
        set s__26_InRangeWithSource__Data_registered_dist[l__i-204775]=v
    elseif(l__i<311258) then
        if(l__i<221157) then
            set s__27_InRangeWithSource__Data_registered_dist[l__i-212966]=v
        elseif(l__i<262112) then
            if(l__i<229348) then
                set s__28_InRangeWithSource__Data_registered_dist[l__i-221157]=v
            elseif(l__i<245730) then
                if(l__i<237539) then
                    set s__29_InRangeWithSource__Data_registered_dist[l__i-229348]=v
                else
                    set s__30_InRangeWithSource__Data_registered_dist[l__i-237539]=v
                endif
            elseif(l__i<253921) then
                set s__31_InRangeWithSource__Data_registered_dist[l__i-245730]=v
            else
                set s__32_InRangeWithSource__Data_registered_dist[l__i-253921]=v
            endif
        elseif(l__i<270303) then
            set s__33_InRangeWithSource__Data_registered_dist[l__i-262112]=v
        elseif(l__i<286685) then
            if(l__i<278494) then
                set s__34_InRangeWithSource__Data_registered_dist[l__i-270303]=v
            else
                set s__35_InRangeWithSource__Data_registered_dist[l__i-278494]=v
            endif
        elseif(l__i<294876) then
            set s__36_InRangeWithSource__Data_registered_dist[l__i-286685]=v
        elseif(l__i<303067) then
            set s__37_InRangeWithSource__Data_registered_dist[l__i-294876]=v
        else
            set s__38_InRangeWithSource__Data_registered_dist[l__i-303067]=v
        endif
    elseif(l__i<319449) then
        set s__39_InRangeWithSource__Data_registered_dist[l__i-311258]=v
    elseif(l__i<360404) then
        if(l__i<327640) then
            set s__40_InRangeWithSource__Data_registered_dist[l__i-319449]=v
        elseif(l__i<344022) then
            if(l__i<335831) then
                set s__41_InRangeWithSource__Data_registered_dist[l__i-327640]=v
            else
                set s__42_InRangeWithSource__Data_registered_dist[l__i-335831]=v
            endif
        elseif(l__i<352213) then
            set s__43_InRangeWithSource__Data_registered_dist[l__i-344022]=v
        else
            set s__44_InRangeWithSource__Data_registered_dist[l__i-352213]=v
        endif
    elseif(l__i<368595) then
        set s__45_InRangeWithSource__Data_registered_dist[l__i-360404]=v
    elseif(l__i<384977) then
        if(l__i<376786) then
            set s__46_InRangeWithSource__Data_registered_dist[l__i-368595]=v
        else
            set s__47_InRangeWithSource__Data_registered_dist[l__i-376786]=v
        endif
    elseif(l__i<393168) then
        set s__48_InRangeWithSource__Data_registered_dist[l__i-384977]=v
    elseif(l__i<401359) then
        set s__49_InRangeWithSource__Data_registered_dist[l__i-393168]=v
    else
        set s__50_InRangeWithSource__Data_registered_dist[l__i-401359]=v
    endif
endfunction

//Generated method caller for drakulty___drakultybuff.onDestroy
function sc__drakulty___drakultybuff_onDestroy takes integer this returns nothing
local integer l__i
call DestroyGroup(s__drakulty___drakultybuff_affected[this])
set l__i=s__drakulty___drakultybuff_index[this]
set s__drakulty___drakultybuff_count=s__drakulty___drakultybuff_count - 1
set s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]=s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_count]
set s__drakulty___drakultybuff_index[s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]]=s__drakulty___drakultybuff_index[this]
if s__drakulty___drakultybuff_count == 0 then
call DestroyTimer(s__drakulty___drakultybuff_time)
endif
endfunction

//Generated allocator of drakulty___drakultybuff
function s__drakulty___drakultybuff__allocate takes nothing returns integer
 local integer this=si__drakulty___drakultybuff_F
    if (this!=0) then
        set si__drakulty___drakultybuff_F=si__drakulty___drakultybuff_V[this]
    else
        set si__drakulty___drakultybuff_I=si__drakulty___drakultybuff_I+1
        set this=si__drakulty___drakultybuff_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: drakulty___drakultybuff")
        return 0
    endif

    set si__drakulty___drakultybuff_V[this]=-1
 return this
endfunction

//Generated destructor of drakulty___drakultybuff
function sc__drakulty___drakultybuff_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: drakulty___drakultybuff")
        return
    elseif (si__drakulty___drakultybuff_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: drakulty___drakultybuff")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__drakulty___drakultybuff_onDestroy)
    set si__drakulty___drakultybuff_V[this]=si__drakulty___drakultybuff_F
    set si__drakulty___drakultybuff_F=this
endfunction

//Generated method caller for Posoh.GetUnitMp
function sc__Posoh_GetUnitMp takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__Posoh_GetUnitMp)
endfunction

//Generated method caller for Posoh.Proverka
function sc__Posoh_Proverka takes unit u returns integer
    set f__arg_unit1=u
    call TriggerEvaluate(st__Posoh_Proverka)
 return f__result_integer
endfunction

//Generated method caller for Posoh.RemoveStruct
function sc__Posoh_RemoveStruct takes unit u returns nothing
    set f__arg_unit1=u
    call TriggerEvaluate(st__Posoh_RemoveStruct)
endfunction

//Generated method caller for Posoh.Update
function sc__Posoh_Update takes nothing returns nothing
    call TriggerEvaluate(st__Posoh_Update)
endfunction

//Generated allocator of Posoh
function s__Posoh__allocate takes nothing returns integer
 local integer this=si__Posoh_F
    if (this!=0) then
        set si__Posoh_F=si__Posoh_V[this]
    else
        set si__Posoh_I=si__Posoh_I+1
        set this=si__Posoh_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Posoh")
        return 0
    endif

   set s__Posoh_trig[this]=null
   set s__Posoh_mp[this]=0
   set s__Posoh_b[this]=false
   set s__Posoh_Eff[this]=null
   set s__Posoh_tt[this]=0
    set si__Posoh_V[this]=-1
 return this
endfunction

//Generated destructor of Posoh
function s__Posoh_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Posoh")
        return
    elseif (si__Posoh_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Posoh")
        return
    endif
    set si__Posoh_V[this]=si__Posoh_F
    set si__Posoh_F=this
endfunction

//Generated method caller for Table__GTable.onDestroy
function sc__Table__GTable_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__Table__GTable_onDestroy[5])
endfunction

//Generated allocator of Table__GTable
function s__Table__GTable__allocate takes nothing returns integer
 local integer this=si__Table__GTable_F
    if (this!=0) then
        set si__Table__GTable_F=si__Table__GTable_V[this]
    else
        set si__Table__GTable_I=si__Table__GTable_I+1
        set this=si__Table__GTable_I
    endif
    if (this>8100) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Table__GTable")
        return 0
    endif

    set si__Table__GTable_type[this]=5
    set si__Table__GTable_V[this]=-1
 return this
endfunction

//Generated destructor of Table__GTable
function sc__Table__GTable_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Table__GTable")
        return
    elseif (si__Table__GTable_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Table__GTable")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__Table__GTable_onDestroy[si__Table__GTable_type[this]])
    set si__Table__GTable_V[this]=si__Table__GTable_F
    set si__Table__GTable_F=this
endfunction

//Generated allocator of Table
function s__Table__allocate takes nothing returns integer
 local integer this=s__Table__GTable__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__Table__GTable_type[this]=6
    set kthis=this

 return this
endfunction


//Generated method caller for volnawodomuta___wavslow.onDestroy
function sc__volnawodomuta___wavslow_onDestroy takes integer this returns nothing
local integer l__i
call RemoveUnit(s__volnawodomuta___wavslow_source[this])
set l__i=s__volnawodomuta___wavslow_index[this]
set s__volnawodomuta___wavslow_count=s__volnawodomuta___wavslow_count - 1
set s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]=s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_count]
set s__volnawodomuta___wavslow_index[s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]]=s__volnawodomuta___wavslow_index[this]
if s__volnawodomuta___wavslow_count == 0 then
call DestroyTimer(s__volnawodomuta___wavslow_time)
endif
endfunction

//Generated allocator of volnawodomuta___wavslow
function s__volnawodomuta___wavslow__allocate takes nothing returns integer
 local integer this=si__volnawodomuta___wavslow_F
    if (this!=0) then
        set si__volnawodomuta___wavslow_F=si__volnawodomuta___wavslow_V[this]
    else
        set si__volnawodomuta___wavslow_I=si__volnawodomuta___wavslow_I+1
        set this=si__volnawodomuta___wavslow_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: volnawodomuta___wavslow")
        return 0
    endif

    set si__volnawodomuta___wavslow_V[this]=-1
 return this
endfunction

//Generated destructor of volnawodomuta___wavslow
function sc__volnawodomuta___wavslow_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: volnawodomuta___wavslow")
        return
    elseif (si__volnawodomuta___wavslow_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: volnawodomuta___wavslow")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__volnawodomuta___wavslow_onDestroy)
    set si__volnawodomuta___wavslow_V[this]=si__volnawodomuta___wavslow_F
    set si__volnawodomuta___wavslow_F=this
endfunction

//Generated method caller for drozhzem.Find
function sc__drozhzem_Find takes unit s returns integer
    set f__arg_unit1=s
    call TriggerEvaluate(st__drozhzem_Find)
 return f__result_integer
endfunction

//Generated method caller for drozhzem.onDestroy
function sc__drozhzem_onDestroy takes integer this returns nothing
local integer l__i=s__drozhzem_index[this]
set s__drozhzem_count=s__drozhzem_count - 1
set s__drozhzem_me[s__drozhzem_index[this]]=s__drozhzem_me[s__drozhzem_count]
set s__drozhzem_index[s__drozhzem_me[s__drozhzem_index[this]]]=s__drozhzem_index[this]
if s__drozhzem_count == 0 then
call DestroyTimer(s__drozhzem_time)
endif
endfunction

//Generated allocator of drozhzem
function s__drozhzem__allocate takes nothing returns integer
 local integer this=si__drozhzem_F
    if (this!=0) then
        set si__drozhzem_F=si__drozhzem_V[this]
    else
        set si__drozhzem_I=si__drozhzem_I+1
        set this=si__drozhzem_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: drozhzem")
        return 0
    endif

   set s__drozhzem_destrthis[this]=false
   set s__drozhzem_dead[this]=false
    set si__drozhzem_V[this]=-1
 return this
endfunction

//Generated destructor of drozhzem
function sc__drozhzem_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: drozhzem")
        return
    elseif (si__drozhzem_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: drozhzem")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__drozhzem_onDestroy)
    set si__drozhzem_V[this]=si__drozhzem_F
    set si__drozhzem_F=this
endfunction

//Generated allocator of StringTable
function s__StringTable__allocate takes nothing returns integer
 local integer this=s__Table__GTable__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__Table__GTable_type[this]=7
    set kthis=this

 return this
endfunction


//Generated allocator of HandleTable
function s__HandleTable__allocate takes nothing returns integer
 local integer this=s__Table__GTable__allocate()
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__Table__GTable_type[this]=8
    set kthis=this

 return this
endfunction


//Generated allocator of InRangeWithSource__Data
function s__InRangeWithSource__Data__allocate takes nothing returns integer
 local integer this=si__InRangeWithSource__Data_F
    if (this!=0) then
        if(this<8191) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_V[this]
        elseif(this<204775) then
            if(this<16382) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_2V[this-8191]
            elseif(this<106483) then
                if(this<24573) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_3V[this-16382]
                elseif(this<65528) then
                    if(this<32764) then
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_4V[this-24573]
                    elseif(this<49146) then
                        if(this<40955) then
                            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_5V[this-32764]
                        else
                            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_6V[this-40955]
                        endif
                    elseif(this<57337) then
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_7V[this-49146]
                    else
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_8V[this-57337]
                    endif
                elseif(this<73719) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_9V[this-65528]
                elseif(this<90101) then
                    if(this<81910) then
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_10V[this-73719]
                    else
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_11V[this-81910]
                    endif
                elseif(this<98292) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_12V[this-90101]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_13V[this-98292]
                endif
            elseif(this<114674) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_14V[this-106483]
            elseif(this<155629) then
                if(this<122865) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_15V[this-114674]
                elseif(this<139247) then
                    if(this<131056) then
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_16V[this-122865]
                    else
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_17V[this-131056]
                    endif
                elseif(this<147438) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_18V[this-139247]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_19V[this-147438]
                endif
            elseif(this<163820) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_20V[this-155629]
            elseif(this<180202) then
                if(this<172011) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_21V[this-163820]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_22V[this-172011]
                endif
            elseif(this<188393) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_23V[this-180202]
            elseif(this<196584) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_24V[this-188393]
            else
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_25V[this-196584]
            endif
        elseif(this<212966) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_26V[this-204775]
        elseif(this<311258) then
            if(this<221157) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_27V[this-212966]
            elseif(this<262112) then
                if(this<229348) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_28V[this-221157]
                elseif(this<245730) then
                    if(this<237539) then
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_29V[this-229348]
                    else
                        set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_30V[this-237539]
                    endif
                elseif(this<253921) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_31V[this-245730]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_32V[this-253921]
                endif
            elseif(this<270303) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_33V[this-262112]
            elseif(this<286685) then
                if(this<278494) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_34V[this-270303]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_35V[this-278494]
                endif
            elseif(this<294876) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_36V[this-286685]
            elseif(this<303067) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_37V[this-294876]
            else
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_38V[this-303067]
            endif
        elseif(this<319449) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_39V[this-311258]
        elseif(this<360404) then
            if(this<327640) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_40V[this-319449]
            elseif(this<344022) then
                if(this<335831) then
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_41V[this-327640]
                else
                    set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_42V[this-335831]
                endif
            elseif(this<352213) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_43V[this-344022]
            else
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_44V[this-352213]
            endif
        elseif(this<368595) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_45V[this-360404]
        elseif(this<384977) then
            if(this<376786) then
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_46V[this-368595]
            else
                set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_47V[this-376786]
            endif
        elseif(this<393168) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_48V[this-384977]
        elseif(this<401359) then
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_49V[this-393168]
        else
            set si__InRangeWithSource__Data_F=si__InRangeWithSource__Data_50V[this-401359]
        endif
    else
        set si__InRangeWithSource__Data_I=si__InRangeWithSource__Data_I+1
        set this=si__InRangeWithSource__Data_I
    endif
    if (this>4079) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: InRangeWithSource__Data")
        return 0
    endif
    if(this<8191) then
        set s__InRangeWithSource__Data_registered[this]=(this-1)*100
    elseif(this<204775) then
        if(this<16382) then
            set s__InRangeWithSource__Data_2registered[this-8191]=(this-1)*100
        elseif(this<106483) then
            if(this<24573) then
                set s__InRangeWithSource__Data_3registered[this-16382]=(this-1)*100
            elseif(this<65528) then
                if(this<32764) then
                    set s__InRangeWithSource__Data_4registered[this-24573]=(this-1)*100
                elseif(this<49146) then
                    if(this<40955) then
                        set s__InRangeWithSource__Data_5registered[this-32764]=(this-1)*100
                    else
                        set s__InRangeWithSource__Data_6registered[this-40955]=(this-1)*100
                    endif
                elseif(this<57337) then
                    set s__InRangeWithSource__Data_7registered[this-49146]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_8registered[this-57337]=(this-1)*100
                endif
            elseif(this<73719) then
                set s__InRangeWithSource__Data_9registered[this-65528]=(this-1)*100
            elseif(this<90101) then
                if(this<81910) then
                    set s__InRangeWithSource__Data_10registered[this-73719]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_11registered[this-81910]=(this-1)*100
                endif
            elseif(this<98292) then
                set s__InRangeWithSource__Data_12registered[this-90101]=(this-1)*100
            else
                set s__InRangeWithSource__Data_13registered[this-98292]=(this-1)*100
            endif
        elseif(this<114674) then
            set s__InRangeWithSource__Data_14registered[this-106483]=(this-1)*100
        elseif(this<155629) then
            if(this<122865) then
                set s__InRangeWithSource__Data_15registered[this-114674]=(this-1)*100
            elseif(this<139247) then
                if(this<131056) then
                    set s__InRangeWithSource__Data_16registered[this-122865]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_17registered[this-131056]=(this-1)*100
                endif
            elseif(this<147438) then
                set s__InRangeWithSource__Data_18registered[this-139247]=(this-1)*100
            else
                set s__InRangeWithSource__Data_19registered[this-147438]=(this-1)*100
            endif
        elseif(this<163820) then
            set s__InRangeWithSource__Data_20registered[this-155629]=(this-1)*100
        elseif(this<180202) then
            if(this<172011) then
                set s__InRangeWithSource__Data_21registered[this-163820]=(this-1)*100
            else
                set s__InRangeWithSource__Data_22registered[this-172011]=(this-1)*100
            endif
        elseif(this<188393) then
            set s__InRangeWithSource__Data_23registered[this-180202]=(this-1)*100
        elseif(this<196584) then
            set s__InRangeWithSource__Data_24registered[this-188393]=(this-1)*100
        else
            set s__InRangeWithSource__Data_25registered[this-196584]=(this-1)*100
        endif
    elseif(this<212966) then
        set s__InRangeWithSource__Data_26registered[this-204775]=(this-1)*100
    elseif(this<311258) then
        if(this<221157) then
            set s__InRangeWithSource__Data_27registered[this-212966]=(this-1)*100
        elseif(this<262112) then
            if(this<229348) then
                set s__InRangeWithSource__Data_28registered[this-221157]=(this-1)*100
            elseif(this<245730) then
                if(this<237539) then
                    set s__InRangeWithSource__Data_29registered[this-229348]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_30registered[this-237539]=(this-1)*100
                endif
            elseif(this<253921) then
                set s__InRangeWithSource__Data_31registered[this-245730]=(this-1)*100
            else
                set s__InRangeWithSource__Data_32registered[this-253921]=(this-1)*100
            endif
        elseif(this<270303) then
            set s__InRangeWithSource__Data_33registered[this-262112]=(this-1)*100
        elseif(this<286685) then
            if(this<278494) then
                set s__InRangeWithSource__Data_34registered[this-270303]=(this-1)*100
            else
                set s__InRangeWithSource__Data_35registered[this-278494]=(this-1)*100
            endif
        elseif(this<294876) then
            set s__InRangeWithSource__Data_36registered[this-286685]=(this-1)*100
        elseif(this<303067) then
            set s__InRangeWithSource__Data_37registered[this-294876]=(this-1)*100
        else
            set s__InRangeWithSource__Data_38registered[this-303067]=(this-1)*100
        endif
    elseif(this<319449) then
        set s__InRangeWithSource__Data_39registered[this-311258]=(this-1)*100
    elseif(this<360404) then
        if(this<327640) then
            set s__InRangeWithSource__Data_40registered[this-319449]=(this-1)*100
        elseif(this<344022) then
            if(this<335831) then
                set s__InRangeWithSource__Data_41registered[this-327640]=(this-1)*100
            else
                set s__InRangeWithSource__Data_42registered[this-335831]=(this-1)*100
            endif
        elseif(this<352213) then
            set s__InRangeWithSource__Data_43registered[this-344022]=(this-1)*100
        else
            set s__InRangeWithSource__Data_44registered[this-352213]=(this-1)*100
        endif
    elseif(this<368595) then
        set s__InRangeWithSource__Data_45registered[this-360404]=(this-1)*100
    elseif(this<384977) then
        if(this<376786) then
            set s__InRangeWithSource__Data_46registered[this-368595]=(this-1)*100
        else
            set s__InRangeWithSource__Data_47registered[this-376786]=(this-1)*100
        endif
    elseif(this<393168) then
        set s__InRangeWithSource__Data_48registered[this-384977]=(this-1)*100
    elseif(this<401359) then
        set s__InRangeWithSource__Data_49registered[this-393168]=(this-1)*100
    else
        set s__InRangeWithSource__Data_50registered[this-401359]=(this-1)*100
    endif
    if(this<8191) then
        set s__InRangeWithSource__Data_registered_dist[this]=(this-1)*100
    elseif(this<204775) then
        if(this<16382) then
            set s__InRangeWithSource__Data_2registered_dist[this-8191]=(this-1)*100
        elseif(this<106483) then
            if(this<24573) then
                set s__InRangeWithSource__Data_3registered_dist[this-16382]=(this-1)*100
            elseif(this<65528) then
                if(this<32764) then
                    set s__InRangeWithSource__Data_4registered_dist[this-24573]=(this-1)*100
                elseif(this<49146) then
                    if(this<40955) then
                        set s__InRangeWithSource__Data_5registered_dist[this-32764]=(this-1)*100
                    else
                        set s__InRangeWithSource__Data_6registered_dist[this-40955]=(this-1)*100
                    endif
                elseif(this<57337) then
                    set s__InRangeWithSource__Data_7registered_dist[this-49146]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_8registered_dist[this-57337]=(this-1)*100
                endif
            elseif(this<73719) then
                set s__InRangeWithSource__Data_9registered_dist[this-65528]=(this-1)*100
            elseif(this<90101) then
                if(this<81910) then
                    set s__InRangeWithSource__Data_10registered_dist[this-73719]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_11registered_dist[this-81910]=(this-1)*100
                endif
            elseif(this<98292) then
                set s__InRangeWithSource__Data_12registered_dist[this-90101]=(this-1)*100
            else
                set s__InRangeWithSource__Data_13registered_dist[this-98292]=(this-1)*100
            endif
        elseif(this<114674) then
            set s__InRangeWithSource__Data_14registered_dist[this-106483]=(this-1)*100
        elseif(this<155629) then
            if(this<122865) then
                set s__InRangeWithSource__Data_15registered_dist[this-114674]=(this-1)*100
            elseif(this<139247) then
                if(this<131056) then
                    set s__InRangeWithSource__Data_16registered_dist[this-122865]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_17registered_dist[this-131056]=(this-1)*100
                endif
            elseif(this<147438) then
                set s__InRangeWithSource__Data_18registered_dist[this-139247]=(this-1)*100
            else
                set s__InRangeWithSource__Data_19registered_dist[this-147438]=(this-1)*100
            endif
        elseif(this<163820) then
            set s__InRangeWithSource__Data_20registered_dist[this-155629]=(this-1)*100
        elseif(this<180202) then
            if(this<172011) then
                set s__InRangeWithSource__Data_21registered_dist[this-163820]=(this-1)*100
            else
                set s__InRangeWithSource__Data_22registered_dist[this-172011]=(this-1)*100
            endif
        elseif(this<188393) then
            set s__InRangeWithSource__Data_23registered_dist[this-180202]=(this-1)*100
        elseif(this<196584) then
            set s__InRangeWithSource__Data_24registered_dist[this-188393]=(this-1)*100
        else
            set s__InRangeWithSource__Data_25registered_dist[this-196584]=(this-1)*100
        endif
    elseif(this<212966) then
        set s__InRangeWithSource__Data_26registered_dist[this-204775]=(this-1)*100
    elseif(this<311258) then
        if(this<221157) then
            set s__InRangeWithSource__Data_27registered_dist[this-212966]=(this-1)*100
        elseif(this<262112) then
            if(this<229348) then
                set s__InRangeWithSource__Data_28registered_dist[this-221157]=(this-1)*100
            elseif(this<245730) then
                if(this<237539) then
                    set s__InRangeWithSource__Data_29registered_dist[this-229348]=(this-1)*100
                else
                    set s__InRangeWithSource__Data_30registered_dist[this-237539]=(this-1)*100
                endif
            elseif(this<253921) then
                set s__InRangeWithSource__Data_31registered_dist[this-245730]=(this-1)*100
            else
                set s__InRangeWithSource__Data_32registered_dist[this-253921]=(this-1)*100
            endif
        elseif(this<270303) then
            set s__InRangeWithSource__Data_33registered_dist[this-262112]=(this-1)*100
        elseif(this<286685) then
            if(this<278494) then
                set s__InRangeWithSource__Data_34registered_dist[this-270303]=(this-1)*100
            else
                set s__InRangeWithSource__Data_35registered_dist[this-278494]=(this-1)*100
            endif
        elseif(this<294876) then
            set s__InRangeWithSource__Data_36registered_dist[this-286685]=(this-1)*100
        elseif(this<303067) then
            set s__InRangeWithSource__Data_37registered_dist[this-294876]=(this-1)*100
        else
            set s__InRangeWithSource__Data_38registered_dist[this-303067]=(this-1)*100
        endif
    elseif(this<319449) then
        set s__InRangeWithSource__Data_39registered_dist[this-311258]=(this-1)*100
    elseif(this<360404) then
        if(this<327640) then
            set s__InRangeWithSource__Data_40registered_dist[this-319449]=(this-1)*100
        elseif(this<344022) then
            if(this<335831) then
                set s__InRangeWithSource__Data_41registered_dist[this-327640]=(this-1)*100
            else
                set s__InRangeWithSource__Data_42registered_dist[this-335831]=(this-1)*100
            endif
        elseif(this<352213) then
            set s__InRangeWithSource__Data_43registered_dist[this-344022]=(this-1)*100
        else
            set s__InRangeWithSource__Data_44registered_dist[this-352213]=(this-1)*100
        endif
    elseif(this<368595) then
        set s__InRangeWithSource__Data_45registered_dist[this-360404]=(this-1)*100
    elseif(this<384977) then
        if(this<376786) then
            set s__InRangeWithSource__Data_46registered_dist[this-368595]=(this-1)*100
        else
            set s__InRangeWithSource__Data_47registered_dist[this-376786]=(this-1)*100
        endif
    elseif(this<393168) then
        set s__InRangeWithSource__Data_48registered_dist[this-384977]=(this-1)*100
    elseif(this<401359) then
        set s__InRangeWithSource__Data_49registered_dist[this-393168]=(this-1)*100
    else
        set s__InRangeWithSource__Data_50registered_dist[this-401359]=(this-1)*100
    endif
    if(this<8191) then
        set s__InRangeWithSource__Data_index[this]=0
        set s__InRangeWithSource__Data_currentSource[this]=null
    elseif(this<204775) then
        if(this<16382) then
            set s__InRangeWithSource__Data_2index[this-8191]=0
            set s__InRangeWithSource__Data_2currentSource[this-8191]=null
        elseif(this<106483) then
            if(this<24573) then
                set s__InRangeWithSource__Data_3index[this-16382]=0
                set s__InRangeWithSource__Data_3currentSource[this-16382]=null
            elseif(this<65528) then
                if(this<32764) then
                    set s__InRangeWithSource__Data_4index[this-24573]=0
                    set s__InRangeWithSource__Data_4currentSource[this-24573]=null
                elseif(this<49146) then
                    if(this<40955) then
                        set s__InRangeWithSource__Data_5index[this-32764]=0
                        set s__InRangeWithSource__Data_5currentSource[this-32764]=null
                    else
                        set s__InRangeWithSource__Data_6index[this-40955]=0
                        set s__InRangeWithSource__Data_6currentSource[this-40955]=null
                    endif
                elseif(this<57337) then
                    set s__InRangeWithSource__Data_7index[this-49146]=0
                    set s__InRangeWithSource__Data_7currentSource[this-49146]=null
                else
                    set s__InRangeWithSource__Data_8index[this-57337]=0
                    set s__InRangeWithSource__Data_8currentSource[this-57337]=null
                endif
            elseif(this<73719) then
                set s__InRangeWithSource__Data_9index[this-65528]=0
                set s__InRangeWithSource__Data_9currentSource[this-65528]=null
            elseif(this<90101) then
                if(this<81910) then
                    set s__InRangeWithSource__Data_10index[this-73719]=0
                    set s__InRangeWithSource__Data_10currentSource[this-73719]=null
                else
                    set s__InRangeWithSource__Data_11index[this-81910]=0
                    set s__InRangeWithSource__Data_11currentSource[this-81910]=null
                endif
            elseif(this<98292) then
                set s__InRangeWithSource__Data_12index[this-90101]=0
                set s__InRangeWithSource__Data_12currentSource[this-90101]=null
            else
                set s__InRangeWithSource__Data_13index[this-98292]=0
                set s__InRangeWithSource__Data_13currentSource[this-98292]=null
            endif
        elseif(this<114674) then
            set s__InRangeWithSource__Data_14index[this-106483]=0
            set s__InRangeWithSource__Data_14currentSource[this-106483]=null
        elseif(this<155629) then
            if(this<122865) then
                set s__InRangeWithSource__Data_15index[this-114674]=0
                set s__InRangeWithSource__Data_15currentSource[this-114674]=null
            elseif(this<139247) then
                if(this<131056) then
                    set s__InRangeWithSource__Data_16index[this-122865]=0
                    set s__InRangeWithSource__Data_16currentSource[this-122865]=null
                else
                    set s__InRangeWithSource__Data_17index[this-131056]=0
                    set s__InRangeWithSource__Data_17currentSource[this-131056]=null
                endif
            elseif(this<147438) then
                set s__InRangeWithSource__Data_18index[this-139247]=0
                set s__InRangeWithSource__Data_18currentSource[this-139247]=null
            else
                set s__InRangeWithSource__Data_19index[this-147438]=0
                set s__InRangeWithSource__Data_19currentSource[this-147438]=null
            endif
        elseif(this<163820) then
            set s__InRangeWithSource__Data_20index[this-155629]=0
            set s__InRangeWithSource__Data_20currentSource[this-155629]=null
        elseif(this<180202) then
            if(this<172011) then
                set s__InRangeWithSource__Data_21index[this-163820]=0
                set s__InRangeWithSource__Data_21currentSource[this-163820]=null
            else
                set s__InRangeWithSource__Data_22index[this-172011]=0
                set s__InRangeWithSource__Data_22currentSource[this-172011]=null
            endif
        elseif(this<188393) then
            set s__InRangeWithSource__Data_23index[this-180202]=0
            set s__InRangeWithSource__Data_23currentSource[this-180202]=null
        elseif(this<196584) then
            set s__InRangeWithSource__Data_24index[this-188393]=0
            set s__InRangeWithSource__Data_24currentSource[this-188393]=null
        else
            set s__InRangeWithSource__Data_25index[this-196584]=0
            set s__InRangeWithSource__Data_25currentSource[this-196584]=null
        endif
    elseif(this<212966) then
        set s__InRangeWithSource__Data_26index[this-204775]=0
        set s__InRangeWithSource__Data_26currentSource[this-204775]=null
    elseif(this<311258) then
        if(this<221157) then
            set s__InRangeWithSource__Data_27index[this-212966]=0
            set s__InRangeWithSource__Data_27currentSource[this-212966]=null
        elseif(this<262112) then
            if(this<229348) then
                set s__InRangeWithSource__Data_28index[this-221157]=0
                set s__InRangeWithSource__Data_28currentSource[this-221157]=null
            elseif(this<245730) then
                if(this<237539) then
                    set s__InRangeWithSource__Data_29index[this-229348]=0
                    set s__InRangeWithSource__Data_29currentSource[this-229348]=null
                else
                    set s__InRangeWithSource__Data_30index[this-237539]=0
                    set s__InRangeWithSource__Data_30currentSource[this-237539]=null
                endif
            elseif(this<253921) then
                set s__InRangeWithSource__Data_31index[this-245730]=0
                set s__InRangeWithSource__Data_31currentSource[this-245730]=null
            else
                set s__InRangeWithSource__Data_32index[this-253921]=0
                set s__InRangeWithSource__Data_32currentSource[this-253921]=null
            endif
        elseif(this<270303) then
            set s__InRangeWithSource__Data_33index[this-262112]=0
            set s__InRangeWithSource__Data_33currentSource[this-262112]=null
        elseif(this<286685) then
            if(this<278494) then
                set s__InRangeWithSource__Data_34index[this-270303]=0
                set s__InRangeWithSource__Data_34currentSource[this-270303]=null
            else
                set s__InRangeWithSource__Data_35index[this-278494]=0
                set s__InRangeWithSource__Data_35currentSource[this-278494]=null
            endif
        elseif(this<294876) then
            set s__InRangeWithSource__Data_36index[this-286685]=0
            set s__InRangeWithSource__Data_36currentSource[this-286685]=null
        elseif(this<303067) then
            set s__InRangeWithSource__Data_37index[this-294876]=0
            set s__InRangeWithSource__Data_37currentSource[this-294876]=null
        else
            set s__InRangeWithSource__Data_38index[this-303067]=0
            set s__InRangeWithSource__Data_38currentSource[this-303067]=null
        endif
    elseif(this<319449) then
        set s__InRangeWithSource__Data_39index[this-311258]=0
        set s__InRangeWithSource__Data_39currentSource[this-311258]=null
    elseif(this<360404) then
        if(this<327640) then
            set s__InRangeWithSource__Data_40index[this-319449]=0
            set s__InRangeWithSource__Data_40currentSource[this-319449]=null
        elseif(this<344022) then
            if(this<335831) then
                set s__InRangeWithSource__Data_41index[this-327640]=0
                set s__InRangeWithSource__Data_41currentSource[this-327640]=null
            else
                set s__InRangeWithSource__Data_42index[this-335831]=0
                set s__InRangeWithSource__Data_42currentSource[this-335831]=null
            endif
        elseif(this<352213) then
            set s__InRangeWithSource__Data_43index[this-344022]=0
            set s__InRangeWithSource__Data_43currentSource[this-344022]=null
        else
            set s__InRangeWithSource__Data_44index[this-352213]=0
            set s__InRangeWithSource__Data_44currentSource[this-352213]=null
        endif
    elseif(this<368595) then
        set s__InRangeWithSource__Data_45index[this-360404]=0
        set s__InRangeWithSource__Data_45currentSource[this-360404]=null
    elseif(this<384977) then
        if(this<376786) then
            set s__InRangeWithSource__Data_46index[this-368595]=0
            set s__InRangeWithSource__Data_46currentSource[this-368595]=null
        else
            set s__InRangeWithSource__Data_47index[this-376786]=0
            set s__InRangeWithSource__Data_47currentSource[this-376786]=null
        endif
    elseif(this<393168) then
        set s__InRangeWithSource__Data_48index[this-384977]=0
        set s__InRangeWithSource__Data_48currentSource[this-384977]=null
    elseif(this<401359) then
        set s__InRangeWithSource__Data_49index[this-393168]=0
        set s__InRangeWithSource__Data_49currentSource[this-393168]=null
    else
        set s__InRangeWithSource__Data_50index[this-401359]=0
        set s__InRangeWithSource__Data_50currentSource[this-401359]=null
    endif
    if(this<8191) then
        set si__InRangeWithSource__Data_V[this]=-1
    elseif(this<204775) then
        if(this<16382) then
            set si__InRangeWithSource__Data_2V[this-8191]=-1
        elseif(this<106483) then
            if(this<24573) then
                set si__InRangeWithSource__Data_3V[this-16382]=-1
            elseif(this<65528) then
                if(this<32764) then
                    set si__InRangeWithSource__Data_4V[this-24573]=-1
                elseif(this<49146) then
                    if(this<40955) then
                        set si__InRangeWithSource__Data_5V[this-32764]=-1
                    else
                        set si__InRangeWithSource__Data_6V[this-40955]=-1
                    endif
                elseif(this<57337) then
                    set si__InRangeWithSource__Data_7V[this-49146]=-1
                else
                    set si__InRangeWithSource__Data_8V[this-57337]=-1
                endif
            elseif(this<73719) then
                set si__InRangeWithSource__Data_9V[this-65528]=-1
            elseif(this<90101) then
                if(this<81910) then
                    set si__InRangeWithSource__Data_10V[this-73719]=-1
                else
                    set si__InRangeWithSource__Data_11V[this-81910]=-1
                endif
            elseif(this<98292) then
                set si__InRangeWithSource__Data_12V[this-90101]=-1
            else
                set si__InRangeWithSource__Data_13V[this-98292]=-1
            endif
        elseif(this<114674) then
            set si__InRangeWithSource__Data_14V[this-106483]=-1
        elseif(this<155629) then
            if(this<122865) then
                set si__InRangeWithSource__Data_15V[this-114674]=-1
            elseif(this<139247) then
                if(this<131056) then
                    set si__InRangeWithSource__Data_16V[this-122865]=-1
                else
                    set si__InRangeWithSource__Data_17V[this-131056]=-1
                endif
            elseif(this<147438) then
                set si__InRangeWithSource__Data_18V[this-139247]=-1
            else
                set si__InRangeWithSource__Data_19V[this-147438]=-1
            endif
        elseif(this<163820) then
            set si__InRangeWithSource__Data_20V[this-155629]=-1
        elseif(this<180202) then
            if(this<172011) then
                set si__InRangeWithSource__Data_21V[this-163820]=-1
            else
                set si__InRangeWithSource__Data_22V[this-172011]=-1
            endif
        elseif(this<188393) then
            set si__InRangeWithSource__Data_23V[this-180202]=-1
        elseif(this<196584) then
            set si__InRangeWithSource__Data_24V[this-188393]=-1
        else
            set si__InRangeWithSource__Data_25V[this-196584]=-1
        endif
    elseif(this<212966) then
        set si__InRangeWithSource__Data_26V[this-204775]=-1
    elseif(this<311258) then
        if(this<221157) then
            set si__InRangeWithSource__Data_27V[this-212966]=-1
        elseif(this<262112) then
            if(this<229348) then
                set si__InRangeWithSource__Data_28V[this-221157]=-1
            elseif(this<245730) then
                if(this<237539) then
                    set si__InRangeWithSource__Data_29V[this-229348]=-1
                else
                    set si__InRangeWithSource__Data_30V[this-237539]=-1
                endif
            elseif(this<253921) then
                set si__InRangeWithSource__Data_31V[this-245730]=-1
            else
                set si__InRangeWithSource__Data_32V[this-253921]=-1
            endif
        elseif(this<270303) then
            set si__InRangeWithSource__Data_33V[this-262112]=-1
        elseif(this<286685) then
            if(this<278494) then
                set si__InRangeWithSource__Data_34V[this-270303]=-1
            else
                set si__InRangeWithSource__Data_35V[this-278494]=-1
            endif
        elseif(this<294876) then
            set si__InRangeWithSource__Data_36V[this-286685]=-1
        elseif(this<303067) then
            set si__InRangeWithSource__Data_37V[this-294876]=-1
        else
            set si__InRangeWithSource__Data_38V[this-303067]=-1
        endif
    elseif(this<319449) then
        set si__InRangeWithSource__Data_39V[this-311258]=-1
    elseif(this<360404) then
        if(this<327640) then
            set si__InRangeWithSource__Data_40V[this-319449]=-1
        elseif(this<344022) then
            if(this<335831) then
                set si__InRangeWithSource__Data_41V[this-327640]=-1
            else
                set si__InRangeWithSource__Data_42V[this-335831]=-1
            endif
        elseif(this<352213) then
            set si__InRangeWithSource__Data_43V[this-344022]=-1
        else
            set si__InRangeWithSource__Data_44V[this-352213]=-1
        endif
    elseif(this<368595) then
        set si__InRangeWithSource__Data_45V[this-360404]=-1
    elseif(this<384977) then
        if(this<376786) then
            set si__InRangeWithSource__Data_46V[this-368595]=-1
        else
            set si__InRangeWithSource__Data_47V[this-376786]=-1
        endif
    elseif(this<393168) then
        set si__InRangeWithSource__Data_48V[this-384977]=-1
    elseif(this<401359) then
        set si__InRangeWithSource__Data_49V[this-393168]=-1
    else
        set si__InRangeWithSource__Data_50V[this-401359]=-1
    endif
 return this
endfunction

//Generated destructor of InRangeWithSource__Data
function s__InRangeWithSource__Data_deallocate takes integer this returns nothing
 local integer used
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: InRangeWithSource__Data")
        return
    else
        if(this<8191) then
            set used=si__InRangeWithSource__Data_V[this]
        elseif(this<204775) then
            if(this<16382) then
                set used=si__InRangeWithSource__Data_2V[this-8191]
            elseif(this<106483) then
                if(this<24573) then
                    set used=si__InRangeWithSource__Data_3V[this-16382]
                elseif(this<65528) then
                    if(this<32764) then
                        set used=si__InRangeWithSource__Data_4V[this-24573]
                    elseif(this<49146) then
                        if(this<40955) then
                            set used=si__InRangeWithSource__Data_5V[this-32764]
                        else
                            set used=si__InRangeWithSource__Data_6V[this-40955]
                        endif
                    elseif(this<57337) then
                        set used=si__InRangeWithSource__Data_7V[this-49146]
                    else
                        set used=si__InRangeWithSource__Data_8V[this-57337]
                    endif
                elseif(this<73719) then
                    set used=si__InRangeWithSource__Data_9V[this-65528]
                elseif(this<90101) then
                    if(this<81910) then
                        set used=si__InRangeWithSource__Data_10V[this-73719]
                    else
                        set used=si__InRangeWithSource__Data_11V[this-81910]
                    endif
                elseif(this<98292) then
                    set used=si__InRangeWithSource__Data_12V[this-90101]
                else
                    set used=si__InRangeWithSource__Data_13V[this-98292]
                endif
            elseif(this<114674) then
                set used=si__InRangeWithSource__Data_14V[this-106483]
            elseif(this<155629) then
                if(this<122865) then
                    set used=si__InRangeWithSource__Data_15V[this-114674]
                elseif(this<139247) then
                    if(this<131056) then
                        set used=si__InRangeWithSource__Data_16V[this-122865]
                    else
                        set used=si__InRangeWithSource__Data_17V[this-131056]
                    endif
                elseif(this<147438) then
                    set used=si__InRangeWithSource__Data_18V[this-139247]
                else
                    set used=si__InRangeWithSource__Data_19V[this-147438]
                endif
            elseif(this<163820) then
                set used=si__InRangeWithSource__Data_20V[this-155629]
            elseif(this<180202) then
                if(this<172011) then
                    set used=si__InRangeWithSource__Data_21V[this-163820]
                else
                    set used=si__InRangeWithSource__Data_22V[this-172011]
                endif
            elseif(this<188393) then
                set used=si__InRangeWithSource__Data_23V[this-180202]
            elseif(this<196584) then
                set used=si__InRangeWithSource__Data_24V[this-188393]
            else
                set used=si__InRangeWithSource__Data_25V[this-196584]
            endif
        elseif(this<212966) then
            set used=si__InRangeWithSource__Data_26V[this-204775]
        elseif(this<311258) then
            if(this<221157) then
                set used=si__InRangeWithSource__Data_27V[this-212966]
            elseif(this<262112) then
                if(this<229348) then
                    set used=si__InRangeWithSource__Data_28V[this-221157]
                elseif(this<245730) then
                    if(this<237539) then
                        set used=si__InRangeWithSource__Data_29V[this-229348]
                    else
                        set used=si__InRangeWithSource__Data_30V[this-237539]
                    endif
                elseif(this<253921) then
                    set used=si__InRangeWithSource__Data_31V[this-245730]
                else
                    set used=si__InRangeWithSource__Data_32V[this-253921]
                endif
            elseif(this<270303) then
                set used=si__InRangeWithSource__Data_33V[this-262112]
            elseif(this<286685) then
                if(this<278494) then
                    set used=si__InRangeWithSource__Data_34V[this-270303]
                else
                    set used=si__InRangeWithSource__Data_35V[this-278494]
                endif
            elseif(this<294876) then
                set used=si__InRangeWithSource__Data_36V[this-286685]
            elseif(this<303067) then
                set used=si__InRangeWithSource__Data_37V[this-294876]
            else
                set used=si__InRangeWithSource__Data_38V[this-303067]
            endif
        elseif(this<319449) then
            set used=si__InRangeWithSource__Data_39V[this-311258]
        elseif(this<360404) then
            if(this<327640) then
                set used=si__InRangeWithSource__Data_40V[this-319449]
            elseif(this<344022) then
                if(this<335831) then
                    set used=si__InRangeWithSource__Data_41V[this-327640]
                else
                    set used=si__InRangeWithSource__Data_42V[this-335831]
                endif
            elseif(this<352213) then
                set used=si__InRangeWithSource__Data_43V[this-344022]
            else
                set used=si__InRangeWithSource__Data_44V[this-352213]
            endif
        elseif(this<368595) then
            set used=si__InRangeWithSource__Data_45V[this-360404]
        elseif(this<384977) then
            if(this<376786) then
                set used=si__InRangeWithSource__Data_46V[this-368595]
            else
                set used=si__InRangeWithSource__Data_47V[this-376786]
            endif
        elseif(this<393168) then
            set used=si__InRangeWithSource__Data_48V[this-384977]
        elseif(this<401359) then
            set used=si__InRangeWithSource__Data_49V[this-393168]
        else
            set used=si__InRangeWithSource__Data_50V[this-401359]
        endif
        if (used!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: InRangeWithSource__Data")
            return
        endif
    endif
    if(this<8191) then
        set si__InRangeWithSource__Data_V[this]=si__InRangeWithSource__Data_F
    elseif(this<204775) then
        if(this<16382) then
            set si__InRangeWithSource__Data_2V[this-8191]=si__InRangeWithSource__Data_F
        elseif(this<106483) then
            if(this<24573) then
                set si__InRangeWithSource__Data_3V[this-16382]=si__InRangeWithSource__Data_F
            elseif(this<65528) then
                if(this<32764) then
                    set si__InRangeWithSource__Data_4V[this-24573]=si__InRangeWithSource__Data_F
                elseif(this<49146) then
                    if(this<40955) then
                        set si__InRangeWithSource__Data_5V[this-32764]=si__InRangeWithSource__Data_F
                    else
                        set si__InRangeWithSource__Data_6V[this-40955]=si__InRangeWithSource__Data_F
                    endif
                elseif(this<57337) then
                    set si__InRangeWithSource__Data_7V[this-49146]=si__InRangeWithSource__Data_F
                else
                    set si__InRangeWithSource__Data_8V[this-57337]=si__InRangeWithSource__Data_F
                endif
            elseif(this<73719) then
                set si__InRangeWithSource__Data_9V[this-65528]=si__InRangeWithSource__Data_F
            elseif(this<90101) then
                if(this<81910) then
                    set si__InRangeWithSource__Data_10V[this-73719]=si__InRangeWithSource__Data_F
                else
                    set si__InRangeWithSource__Data_11V[this-81910]=si__InRangeWithSource__Data_F
                endif
            elseif(this<98292) then
                set si__InRangeWithSource__Data_12V[this-90101]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_13V[this-98292]=si__InRangeWithSource__Data_F
            endif
        elseif(this<114674) then
            set si__InRangeWithSource__Data_14V[this-106483]=si__InRangeWithSource__Data_F
        elseif(this<155629) then
            if(this<122865) then
                set si__InRangeWithSource__Data_15V[this-114674]=si__InRangeWithSource__Data_F
            elseif(this<139247) then
                if(this<131056) then
                    set si__InRangeWithSource__Data_16V[this-122865]=si__InRangeWithSource__Data_F
                else
                    set si__InRangeWithSource__Data_17V[this-131056]=si__InRangeWithSource__Data_F
                endif
            elseif(this<147438) then
                set si__InRangeWithSource__Data_18V[this-139247]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_19V[this-147438]=si__InRangeWithSource__Data_F
            endif
        elseif(this<163820) then
            set si__InRangeWithSource__Data_20V[this-155629]=si__InRangeWithSource__Data_F
        elseif(this<180202) then
            if(this<172011) then
                set si__InRangeWithSource__Data_21V[this-163820]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_22V[this-172011]=si__InRangeWithSource__Data_F
            endif
        elseif(this<188393) then
            set si__InRangeWithSource__Data_23V[this-180202]=si__InRangeWithSource__Data_F
        elseif(this<196584) then
            set si__InRangeWithSource__Data_24V[this-188393]=si__InRangeWithSource__Data_F
        else
            set si__InRangeWithSource__Data_25V[this-196584]=si__InRangeWithSource__Data_F
        endif
    elseif(this<212966) then
        set si__InRangeWithSource__Data_26V[this-204775]=si__InRangeWithSource__Data_F
    elseif(this<311258) then
        if(this<221157) then
            set si__InRangeWithSource__Data_27V[this-212966]=si__InRangeWithSource__Data_F
        elseif(this<262112) then
            if(this<229348) then
                set si__InRangeWithSource__Data_28V[this-221157]=si__InRangeWithSource__Data_F
            elseif(this<245730) then
                if(this<237539) then
                    set si__InRangeWithSource__Data_29V[this-229348]=si__InRangeWithSource__Data_F
                else
                    set si__InRangeWithSource__Data_30V[this-237539]=si__InRangeWithSource__Data_F
                endif
            elseif(this<253921) then
                set si__InRangeWithSource__Data_31V[this-245730]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_32V[this-253921]=si__InRangeWithSource__Data_F
            endif
        elseif(this<270303) then
            set si__InRangeWithSource__Data_33V[this-262112]=si__InRangeWithSource__Data_F
        elseif(this<286685) then
            if(this<278494) then
                set si__InRangeWithSource__Data_34V[this-270303]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_35V[this-278494]=si__InRangeWithSource__Data_F
            endif
        elseif(this<294876) then
            set si__InRangeWithSource__Data_36V[this-286685]=si__InRangeWithSource__Data_F
        elseif(this<303067) then
            set si__InRangeWithSource__Data_37V[this-294876]=si__InRangeWithSource__Data_F
        else
            set si__InRangeWithSource__Data_38V[this-303067]=si__InRangeWithSource__Data_F
        endif
    elseif(this<319449) then
        set si__InRangeWithSource__Data_39V[this-311258]=si__InRangeWithSource__Data_F
    elseif(this<360404) then
        if(this<327640) then
            set si__InRangeWithSource__Data_40V[this-319449]=si__InRangeWithSource__Data_F
        elseif(this<344022) then
            if(this<335831) then
                set si__InRangeWithSource__Data_41V[this-327640]=si__InRangeWithSource__Data_F
            else
                set si__InRangeWithSource__Data_42V[this-335831]=si__InRangeWithSource__Data_F
            endif
        elseif(this<352213) then
            set si__InRangeWithSource__Data_43V[this-344022]=si__InRangeWithSource__Data_F
        else
            set si__InRangeWithSource__Data_44V[this-352213]=si__InRangeWithSource__Data_F
        endif
    elseif(this<368595) then
        set si__InRangeWithSource__Data_45V[this-360404]=si__InRangeWithSource__Data_F
    elseif(this<384977) then
        if(this<376786) then
            set si__InRangeWithSource__Data_46V[this-368595]=si__InRangeWithSource__Data_F
        else
            set si__InRangeWithSource__Data_47V[this-376786]=si__InRangeWithSource__Data_F
        endif
    elseif(this<393168) then
        set si__InRangeWithSource__Data_48V[this-384977]=si__InRangeWithSource__Data_F
    elseif(this<401359) then
        set si__InRangeWithSource__Data_49V[this-393168]=si__InRangeWithSource__Data_F
    else
        set si__InRangeWithSource__Data_50V[this-401359]=si__InRangeWithSource__Data_F
    endif
    set si__InRangeWithSource__Data_F=this
endfunction

//Generated method caller for gladiator.onDestroy
function sc__gladiator_onDestroy takes integer this returns nothing
local integer l__i=s__gladiator_index[this]
set s__gladiator_count=s__gladiator_count - 1
set s__gladiator_me[s__gladiator_index[this]]=s__gladiator_me[s__gladiator_count]
set s__gladiator_index[s__gladiator_me[s__gladiator_index[this]]]=s__gladiator_index[this]
if s__gladiator_count == 0 then
call DestroyTimer(s__gladiator_gtime)
endif
endfunction

//Generated allocator of gladiator
function s__gladiator__allocate takes nothing returns integer
 local integer this=si__gladiator_F
    if (this!=0) then
        set si__gladiator_F=si__gladiator_V[this]
    else
        set si__gladiator_I=si__gladiator_I+1
        set this=si__gladiator_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: gladiator")
        return 0
    endif

    set si__gladiator_V[this]=-1
 return this
endfunction

//Generated destructor of gladiator
function sc__gladiator_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: gladiator")
        return
    elseif (si__gladiator_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: gladiator")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__gladiator_onDestroy)
    set si__gladiator_V[this]=si__gladiator_F
    set si__gladiator_F=this
endfunction

//Generated allocator of vector
function s__vector__allocate takes nothing returns integer
 local integer this=si__vector_F
    if (this!=0) then
        set si__vector_F=si__vector_V[this]
    else
        set si__vector_I=si__vector_I+1
        set this=si__vector_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: vector")
        return 0
    endif

    set si__vector_V[this]=-1
 return this
endfunction

//Generated destructor of vector
function s__vector_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: vector")
        return
    elseif (si__vector_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: vector")
        return
    endif
    set si__vector_V[this]=si__vector_F
    set si__vector_F=this
endfunction

//Generated method caller for projectileinterface.onStart
function sc__projectileinterface_onStart takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onStart[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onStart
function sx__projectileinterface_onStart takes integer this returns nothing
    set f__arg_this=this
    call TriggerExecute(st__projectileinterface_onStart[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.onFinish
function sc__projectileinterface_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onFinish
function sx__projectileinterface_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerExecute(st__projectileinterface_onFinish[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.onGround
function sc__projectileinterface_onGround takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onGround[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onGround
function sx__projectileinterface_onGround takes integer this returns nothing
    set f__arg_this=this
    call TriggerExecute(st__projectileinterface_onGround[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.onIteration
function sc__projectileinterface_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onIteration[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onIteration
function sx__projectileinterface_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerExecute(st__projectileinterface_onIteration[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.onUnitCollision
function sc__projectileinterface_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onUnitCollision
function sx__projectileinterface_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerExecute(st__projectileinterface_onUnitCollision[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.onDestCollision
function sc__projectileinterface_onDestCollision takes integer this,destructable d returns nothing
    set f__arg_this=this
    set f__arg_destructable1=d
    call TriggerEvaluate(st__projectileinterface_onDestCollision[si__projectileinterface_type[this]])
endfunction

//Generated method executor for projectileinterface.onDestCollision
function sx__projectileinterface_onDestCollision takes integer this,destructable d returns nothing
    set f__arg_this=this
    set f__arg_destructable1=d
    call TriggerExecute(st__projectileinterface_onDestCollision[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.isValidTargetUnit
function sc__projectileinterface_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    //An error in the next line would mean declaration for projectileinterface.isValidTargetUnit had a wrong default (true)
    set f__result_boolean=true
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[si__projectileinterface_type[this]])
 return f__result_boolean
endfunction

//Generated method executor for projectileinterface.isValidTargetUnit
function sx__projectileinterface_isValidTargetUnit takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerExecute(st__projectileinterface_isValidTargetUnit[si__projectileinterface_type[this]])
endfunction

//Generated method caller for projectileinterface.isValidTargetDest
function sc__projectileinterface_isValidTargetDest takes integer this,destructable d returns boolean
    set f__arg_this=this
    set f__arg_destructable1=d
    //An error in the next line would mean declaration for projectileinterface.isValidTargetDest had a wrong default (true)
    set f__result_boolean=true
    call TriggerEvaluate(st__projectileinterface_isValidTargetDest[si__projectileinterface_type[this]])
 return f__result_boolean
endfunction

//Generated method executor for projectileinterface.isValidTargetDest
function sx__projectileinterface_isValidTargetDest takes integer this,destructable d returns nothing
    set f__arg_this=this
    set f__arg_destructable1=d
    call TriggerExecute(st__projectileinterface_isValidTargetDest[si__projectileinterface_type[this]])
endfunction
//Generated destructor of projectileinterface
function sc__projectileinterface_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: projectileinterface")
        return
    elseif (si__projectileinterface_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: projectileinterface")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[si__projectileinterface_type[this]])
    set si__projectileinterface_V[this]=si__projectileinterface_F
    set si__projectileinterface_F=this
endfunction

//Generated method caller for pechsveta.onDestroy
function sc__pechsveta_onDestroy takes integer this returns nothing
local integer l__i
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41525061)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41526962)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x42525030)
set l__i=s__pechsveta_index[this]
set s__pechsveta_count=s__pechsveta_count - 1
set s__pechsveta_me[s__pechsveta_index[this]]=s__pechsveta_me[s__pechsveta_count]
set s__pechsveta_index[s__pechsveta_me[s__pechsveta_index[this]]]=s__pechsveta_index[this]
call DestroyTimer(s__pechsveta_time)
endfunction

//Generated allocator of pechsveta
function s__pechsveta__allocate takes nothing returns integer
 local integer this=si__pechsveta_F
    if (this!=0) then
        set si__pechsveta_F=si__pechsveta_V[this]
    else
        set si__pechsveta_I=si__pechsveta_I+1
        set this=si__pechsveta_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: pechsveta")
        return 0
    endif

    set si__pechsveta_V[this]=-1
 return this
endfunction

//Generated destructor of pechsveta
function sc__pechsveta_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: pechsveta")
        return
    elseif (si__pechsveta_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: pechsveta")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__pechsveta_onDestroy)
    set si__pechsveta_V[this]=si__pechsveta_F
    set si__pechsveta_F=this
endfunction

//Generated method caller for slepsv.onDestroy
function sc__slepsv_onDestroy takes integer this returns nothing
local integer l__i=s__slepsv_index[this]
set s__slepsv_count=s__slepsv_count - 1
set s__slepsv_me[s__slepsv_index[this]]=s__slepsv_me[s__slepsv_count]
set s__slepsv_index[s__slepsv_me[s__slepsv_index[this]]]=s__slepsv_index[this]
endfunction

//Generated allocator of slepsv
function s__slepsv__allocate takes nothing returns integer
 local integer this=si__slepsv_F
    if (this!=0) then
        set si__slepsv_F=si__slepsv_V[this]
    else
        set si__slepsv_I=si__slepsv_I+1
        set this=si__slepsv_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: slepsv")
        return 0
    endif

   set s__slepsv_hasEff[this]=false
   set s__slepsv_IsPassa[this]=false
    set si__slepsv_V[this]=-1
 return this
endfunction

//Generated destructor of slepsv
function sc__slepsv_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: slepsv")
        return
    elseif (si__slepsv_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: slepsv")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__slepsv_onDestroy)
    set si__slepsv_V[this]=si__slepsv_F
    set si__slepsv_F=this
endfunction

//Generated method caller for projectilegroup.onDestroy
function sc__projectilegroup_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectilegroup_onDestroy)
endfunction

//Generated allocator of projectilegroup
function s__projectilegroup__allocate takes nothing returns integer
 local integer this=si__projectilegroup_F
    if (this!=0) then
        set si__projectilegroup_F=si__projectilegroup_V[this]
    else
        set si__projectilegroup_I=si__projectilegroup_I+1
        set this=si__projectilegroup_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: projectilegroup")
        return 0
    endif

   set s__projectilegroup_size[this]=0
    set si__projectilegroup_V[this]=-1
 return this
endfunction

//Generated destructor of projectilegroup
function sc__projectilegroup_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: projectilegroup")
        return
    elseif (si__projectilegroup_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: projectilegroup")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__projectilegroup_onDestroy)
    set si__projectilegroup_V[this]=si__projectilegroup_F
    set si__projectilegroup_F=this
endfunction

//Generated method caller for angrybird___ordrek.Find
function sc__angrybird___ordrek_Find takes unit u returns integer
    set f__arg_unit1=u
    call TriggerEvaluate(st__angrybird___ordrek_Find)
 return f__result_integer
endfunction

//Generated allocator of angrybird___ordrek
function s__angrybird___ordrek__allocate takes nothing returns integer
 local integer this=si__angrybird___ordrek_F
    if (this!=0) then
        set si__angrybird___ordrek_F=si__angrybird___ordrek_V[this]
    else
        set si__angrybird___ordrek_I=si__angrybird___ordrek_I+1
        set this=si__angrybird___ordrek_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: angrybird___ordrek")
        return 0
    endif

   set s__angrybird___ordrek_eff[this]=null
   set s__angrybird___ordrek_effactive[this]=null
   set s__angrybird___ordrek_activated[this]=false
   set s__angrybird___ordrek_activeremain[this]=0.
   set s__angrybird___ordrek_highBuff[this]=false
   set s__angrybird___ordrek_lowBuff[this]=false
    set si__angrybird___ordrek_V[this]=-1
 return this
endfunction

//Generated destructor of angrybird___ordrek
function s__angrybird___ordrek_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: angrybird___ordrek")
        return
    elseif (si__angrybird___ordrek_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: angrybird___ordrek")
        return
    endif
    set si__angrybird___ordrek_V[this]=si__angrybird___ordrek_F
    set si__angrybird___ordrek_F=this
endfunction

//Generated method caller for angrybird___ffganim.onDestroy
function sc__angrybird___ffganim_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__angrybird___ffganim_onDestroy)
endfunction

//Generated method caller for angrybird___ffganim.Find
function sc__angrybird___ffganim_Find takes unit u returns integer
    set f__arg_unit1=u
    call TriggerEvaluate(st__angrybird___ffganim_Find)
 return f__result_integer
endfunction

//Generated allocator of angrybird___ffganim
function s__angrybird___ffganim__allocate takes nothing returns integer
 local integer this=si__angrybird___ffganim_F
    if (this!=0) then
        set si__angrybird___ffganim_F=si__angrybird___ffganim_V[this]
    else
        set si__angrybird___ffganim_I=si__angrybird___ffganim_I+1
        set this=si__angrybird___ffganim_I
    endif
    if (this>4094) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: angrybird___ffganim")
        return 0
    endif
    set s__angrybird___ffganim_cell[this]=(this-1)*2
    set s__angrybird___ffganim_cellmdl[this]=(this-1)*2
   set s__angrybird___ffganim_da[this]=0
    set si__angrybird___ffganim_V[this]=-1
 return this
endfunction

//Generated destructor of angrybird___ffganim
function sc__angrybird___ffganim_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: angrybird___ffganim")
        return
    elseif (si__angrybird___ffganim_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: angrybird___ffganim")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__angrybird___ffganim_onDestroy)
    set si__angrybird___ffganim_V[this]=si__angrybird___ffganim_F
    set si__angrybird___ffganim_F=this
endfunction

//Generated method caller for projectile.onDestroy
function sc__projectile_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[15])
endfunction

//Generated method caller for projectile.create
function sc__projectile_create takes unit u returns integer
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectile_create)
 return f__result_integer
endfunction

//Generated allocator of projectile
function s__projectile__allocate takes nothing returns integer
 local integer kthis
 local integer this=si__projectileinterface_F
    if (this!=0) then
        set si__projectileinterface_F=si__projectileinterface_V[this]
    else
        set si__projectileinterface_I=si__projectileinterface_I+1
        set this=si__projectileinterface_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: projectile")
        return 0
    endif

    set si__projectileinterface_type[this]=15
    set kthis=this

   set s__projectile_toUnit[this]=null
   set s__projectile_PROP__target[this]=null
   set s__projectile_PROP__source[this]=null
   set s__projectile_PROP__timescale[this]=1.00
   set s__projectile_PROP__collision[this]=Projectile_COLLISION__default
   set s__projectile_PROP__targetHeight[this]=0
   set s__projectile_activeTargetFollow[this]=Projectile__DEFAULT__targetFollow
   set s__projectile_activePitch[this]=Projectile__DEFAULT__facePitch
   set s__projectile_activeRotation[this]=Projectile__DEFAULT__faceRotation
   set s__projectile_activeUnitCollision[this]=Projectile__DEFAULT__unitCollision
   set s__projectile_activeDestCollision[this]=Projectile__DEFAULT__destCollision
   set s__projectile_activeZcollision[this]=Projectile__DEFAULT__Zcollision
   set s__projectile_destroyed[this]=false
   set s__projectile_toDestroy[this]=Projectile__DEFAULT__toExpire
   set s__projectile_toKill[this]=Projectile__DEFAULT__toKill
   set s__projectile_toRemove[this]=Projectile__DEFAULT__toRemove
   set s__projectile_FLAG__onGround[this]=true
   set s__projectile_FLAG__active[this]=false
   set s__projectile_FLAG__targetFollow[this]=false
   set s__projectile_FLAG__followUnit[this]=false
   set s__projectile_FLAG__isPaused[this]=false
   set s__projectile_FLAG__activeZcollision[this]=false
   set s__projectile_ART__model[this]=null
    set si__projectileinterface_V[this]=-1
 return this
endfunction


//Generated allocator of Magrondusspells___Magr
function s__Magrondusspells___Magr__allocate takes nothing returns integer
 local integer this=si__Magrondusspells___Magr_F
    if (this!=0) then
        set si__Magrondusspells___Magr_F=si__Magrondusspells___Magr_V[this]
    else
        set si__Magrondusspells___Magr_I=si__Magrondusspells___Magr_I+1
        set this=si__Magrondusspells___Magr_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Magrondusspells___Magr")
        return 0
    endif

   set s__Magrondusspells___Magr_stacks[this]=0
    set si__Magrondusspells___Magr_V[this]=-1
 return this
endfunction

//Generated destructor of Magrondusspells___Magr
function s__Magrondusspells___Magr_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Magrondusspells___Magr")
        return
    elseif (si__Magrondusspells___Magr_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Magrondusspells___Magr")
        return
    endif
    set si__Magrondusspells___Magr_V[this]=si__Magrondusspells___Magr_F
    set si__Magrondusspells___Magr_F=this
endfunction

//Generated method caller for lnetproj.onUnitCollision
function sc__lnetproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[33])
endfunction

//Generated method caller for lnetproj.isValidTargetUnit
function sc__lnetproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[33])
 return f__result_boolean
endfunction

//Generated method caller for lnetproj.onFinish
function sc__lnetproj_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[33])
endfunction

//Generated method caller for lnetproj.onDestroy
function sc__lnetproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__lnetproj_affected[this])
set s__lnetproj_affected[this]=null
endfunction

//Generated allocator of lnetproj
function s__lnetproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=33
    set kthis=this

 return this
endfunction


//Generated method caller for latadash.onFinish
function sc__latadash_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[32])
endfunction

//Generated allocator of latadash
function s__latadash__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=32
    set kthis=this

 return this
endfunction


//Generated method caller for latablinktrap___trap.onDestroy
function sc__latablinktrap___trap_onDestroy takes integer this returns nothing
local integer l__i
call DestroyEffect(s__latablinktrap___trap_effectactive[this])
set l__i=s__latablinktrap___trap_index[this]
set s__latablinktrap___trap_count=s__latablinktrap___trap_count - 1
set s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]=s__latablinktrap___trap_me[s__latablinktrap___trap_count]
set s__latablinktrap___trap_index[s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]]=s__latablinktrap___trap_index[this]
if s__latablinktrap___trap_count == 0 then
call DestroyTimer(s__latablinktrap___trap_lifetimer)
call DestroyTimer(s__latablinktrap___trap_activatetimer)
endif
endfunction

//Generated allocator of latablinktrap___trap
function s__latablinktrap___trap__allocate takes nothing returns integer
 local integer this=si__latablinktrap___trap_F
    if (this!=0) then
        set si__latablinktrap___trap_F=si__latablinktrap___trap_V[this]
    else
        set si__latablinktrap___trap_I=si__latablinktrap___trap_I+1
        set this=si__latablinktrap___trap_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: latablinktrap___trap")
        return 0
    endif

   set s__latablinktrap___trap_activated[this]=false
   set s__latablinktrap___trap_exploded[this]=false
    set si__latablinktrap___trap_V[this]=-1
 return this
endfunction

//Generated destructor of latablinktrap___trap
function sc__latablinktrap___trap_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: latablinktrap___trap")
        return
    elseif (si__latablinktrap___trap_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: latablinktrap___trap")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__latablinktrap___trap_onDestroy)
    set si__latablinktrap___trap_V[this]=si__latablinktrap___trap_F
    set si__latablinktrap___trap_F=this
endfunction

//Generated method caller for arrfallspell.Find
function sc__arrfallspell_Find takes unit s returns integer
    set f__arg_unit1=s
    call TriggerEvaluate(st__arrfallspell_Find)
 return f__result_integer
endfunction

//Generated method caller for arrfallspell.onDestroy
function sc__arrfallspell_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__arrfallspell_onDestroy)
endfunction

//Generated allocator of arrfallspell
function s__arrfallspell__allocate takes nothing returns integer
 local integer this=si__arrfallspell_F
    if (this!=0) then
        set si__arrfallspell_F=si__arrfallspell_V[this]
    else
        set si__arrfallspell_I=si__arrfallspell_I+1
        set this=si__arrfallspell_I
    endif
    if (this>1364) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: arrfallspell")
        return 0
    endif
    set s__arrfallspell_border[this]=(this-1)*6
    set s__arrfallspell_bordermdl[this]=(this-1)*6
   set s__arrfallspell_doingcast[this]=false
   set s__arrfallspell_finished[this]=false
    set si__arrfallspell_V[this]=-1
 return this
endfunction

//Generated destructor of arrfallspell
function sc__arrfallspell_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: arrfallspell")
        return
    elseif (si__arrfallspell_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: arrfallspell")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__arrfallspell_onDestroy)
    set si__arrfallspell_V[this]=si__arrfallspell_F
    set si__arrfallspell_F=this
endfunction

//Generated method caller for latanelka___lataarrowproj.onUnitCollision
function sc__latanelka___lataarrowproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[27])
endfunction

//Generated method caller for latanelka___lataarrowproj.isValidTargetUnit
function sc__latanelka___lataarrowproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[27])
 return f__result_boolean
endfunction

//Generated method caller for latanelka___lataarrowproj.onDestroy
function sc__latanelka___lataarrowproj_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[27])
endfunction

//Generated method caller for latanelka___lataarrowproj.create
function sc__latanelka___lataarrowproj_create takes integer spellfactor,real size,unit u,real dmg,unit target,real speed,real arc,integer startVector,integer endVector,string modelpath,string addmdlpath returns integer
    set f__arg_integer1=spellfactor
    set f__arg_real1=size
    set f__arg_unit1=u
    set f__arg_real2=dmg
    set f__arg_unit2=target
    set f__arg_real3=speed
    set f__arg_real4=arc
    set f__arg_integer2=startVector
    set f__arg_integer3=endVector
    set f__arg_string1=modelpath
    set f__arg_string2=addmdlpath
    call TriggerEvaluate(st__latanelka___lataarrowproj_create)
 return f__result_integer
endfunction

//Generated method executor for latanelka___lataarrowproj.create
function sx__latanelka___lataarrowproj_create takes integer spellfactor,real size,unit u,real dmg,unit target,real speed,real arc,integer startVector,integer endVector,string modelpath,string addmdlpath returns nothing
    set f__arg_integer1=spellfactor
    set f__arg_real1=size
    set f__arg_unit1=u
    set f__arg_real2=dmg
    set f__arg_unit2=target
    set f__arg_real3=speed
    set f__arg_real4=arc
    set f__arg_integer2=startVector
    set f__arg_integer3=endVector
    set f__arg_string1=modelpath
    set f__arg_string2=addmdlpath
    call TriggerExecute(st__latanelka___lataarrowproj_create)
endfunction

//Generated allocator of latanelka___lataarrowproj
function s__latanelka___lataarrowproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=27
    set kthis=this

   set s__latanelka___lataarrowproj_targeted[this]=false
 return this
endfunction


//Generated method caller for latanelka___leftarrow.onDestroy
function sc__latanelka___leftarrow_onDestroy takes integer this returns nothing
local integer l__i
call DestroyEffect(s__latanelka___leftarrow_eff[this])
call RemoveUnit(s__latanelka___leftarrow_u[this])
set l__i=s__latanelka___leftarrow_index[this]
set s__latanelka___leftarrow_count=s__latanelka___leftarrow_count - 1
set s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]=s__latanelka___leftarrow_me[s__latanelka___leftarrow_count]
set s__latanelka___leftarrow_index[s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]]=s__latanelka___leftarrow_index[this]
if s__latanelka___leftarrow_count == 0 then
call DestroyTimer(s__latanelka___leftarrow_time)
endif
endfunction

//Generated allocator of latanelka___leftarrow
function s__latanelka___leftarrow__allocate takes nothing returns integer
 local integer this=si__latanelka___leftarrow_F
    if (this!=0) then
        set si__latanelka___leftarrow_F=si__latanelka___leftarrow_V[this]
    else
        set si__latanelka___leftarrow_I=si__latanelka___leftarrow_I+1
        set this=si__latanelka___leftarrow_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: latanelka___leftarrow")
        return 0
    endif

    set si__latanelka___leftarrow_V[this]=-1
 return this
endfunction

//Generated destructor of latanelka___leftarrow
function sc__latanelka___leftarrow_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: latanelka___leftarrow")
        return
    elseif (si__latanelka___leftarrow_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: latanelka___leftarrow")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__latanelka___leftarrow_onDestroy)
    set si__latanelka___leftarrow_V[this]=si__latanelka___leftarrow_F
    set si__latanelka___leftarrow_F=this
endfunction

//Generated method caller for thirstyfire___thirstyfire.onUnitCollision
function sc__thirstyfire___thirstyfire_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[25])
endfunction

//Generated method caller for thirstyfire___thirstyfire.isValidTargetUnit
function sc__thirstyfire___thirstyfire_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[25])
 return f__result_boolean
endfunction

//Generated method caller for thirstyfire___thirstyfire.onDestroy
function sc__thirstyfire___thirstyfire_onDestroy takes integer this returns nothing
call DestroyGroup(s__thirstyfire___thirstyfire_affected[this])
set s__thirstyfire___thirstyfire_affected[this]=null
endfunction

//Generated allocator of thirstyfire___thirstyfire
function s__thirstyfire___thirstyfire__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=25
    set kthis=this

 return this
endfunction


//Generated allocator of PortalEff___asairaportal
function s__PortalEff___asairaportal__allocate takes nothing returns integer
 local integer this=si__PortalEff___asairaportal_F
    if (this!=0) then
        set si__PortalEff___asairaportal_F=si__PortalEff___asairaportal_V[this]
    else
        set si__PortalEff___asairaportal_I=si__PortalEff___asairaportal_I+1
        set this=si__PortalEff___asairaportal_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: PortalEff___asairaportal")
        return 0
    endif

   set s__PortalEff___asairaportal_isAllocated[this]=false
    set si__PortalEff___asairaportal_V[this]=-1
 return this
endfunction

//Generated destructor of PortalEff___asairaportal
function s__PortalEff___asairaportal_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: PortalEff___asairaportal")
        return
    elseif (si__PortalEff___asairaportal_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: PortalEff___asairaportal")
        return
    endif
    set si__PortalEff___asairaportal_V[this]=si__PortalEff___asairaportal_F
    set si__PortalEff___asairaportal_F=this
endfunction

//Generated method caller for ringofdespair___rodproj.onUnitCollision
function sc__ringofdespair___rodproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[23])
endfunction

//Generated method caller for ringofdespair___rodproj.isValidTargetUnit
function sc__ringofdespair___rodproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[23])
 return f__result_boolean
endfunction

//Generated method caller for ringofdespair___rodproj.onFinish
function sc__ringofdespair___rodproj_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[23])
endfunction

//Generated method caller for ringofdespair___rodproj.onDestroy
function sc__ringofdespair___rodproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__ringofdespair___rodproj_affected[this])
set s__ringofdespair___rodproj_affected[this]=null
endfunction

//Generated allocator of ringofdespair___rodproj
function s__ringofdespair___rodproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=23
    set kthis=this

 return this
endfunction


//Generated method caller for ringofdespair___rodeffect.onDestroy
function sc__ringofdespair___rodeffect_onDestroy takes integer this returns nothing
local integer l__i=s__ringofdespair___rodeffect_index[this]
set s__ringofdespair___rodeffect_count=s__ringofdespair___rodeffect_count - 1
set s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]=s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_count]
set s__ringofdespair___rodeffect_index[s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]]=s__ringofdespair___rodeffect_index[this]
if s__ringofdespair___rodeffect_count == 0 then
call DestroyTimer(s__ringofdespair___rodeffect_T)
endif
endfunction

//Generated allocator of ringofdespair___rodeffect
function s__ringofdespair___rodeffect__allocate takes nothing returns integer
 local integer this=si__ringofdespair___rodeffect_F
    if (this!=0) then
        set si__ringofdespair___rodeffect_F=si__ringofdespair___rodeffect_V[this]
    else
        set si__ringofdespair___rodeffect_I=si__ringofdespair___rodeffect_I+1
        set this=si__ringofdespair___rodeffect_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: ringofdespair___rodeffect")
        return 0
    endif

    set si__ringofdespair___rodeffect_V[this]=-1
 return this
endfunction

//Generated destructor of ringofdespair___rodeffect
function sc__ringofdespair___rodeffect_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: ringofdespair___rodeffect")
        return
    elseif (si__ringofdespair___rodeffect_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: ringofdespair___rodeffect")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__ringofdespair___rodeffect_onDestroy)
    set si__ringofdespair___rodeffect_V[this]=si__ringofdespair___rodeffect_F
    set si__ringofdespair___rodeffect_F=this
endfunction

//Generated allocator of Fov___fovaura
function s__Fov___fovaura__allocate takes nothing returns integer
 local integer this=si__Fov___fovaura_F
    if (this!=0) then
        set si__Fov___fovaura_F=si__Fov___fovaura_V[this]
    else
        set si__Fov___fovaura_I=si__Fov___fovaura_I+1
        set this=si__Fov___fovaura_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Fov___fovaura")
        return 0
    endif

    set si__Fov___fovaura_V[this]=-1
 return this
endfunction

//Generated destructor of Fov___fovaura
function s__Fov___fovaura_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Fov___fovaura")
        return
    elseif (si__Fov___fovaura_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Fov___fovaura")
        return
    endif
    set si__Fov___fovaura_V[this]=si__Fov___fovaura_F
    set si__Fov___fovaura_F=this
endfunction

//Generated method caller for bogproj.onFinish
function sc__bogproj_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[20])
endfunction

//Generated method caller for bogproj.onDestroy
function sc__bogproj_onDestroy takes integer this returns nothing
endfunction

//Generated allocator of bogproj
function s__bogproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=20
    set kthis=this

 return this
endfunction


//Generated method caller for bootsofgon.Activate
function sc__bootsofgon_Activate takes unit caster returns boolean
    set f__arg_unit1=caster
    call TriggerEvaluate(st__bootsofgon_Activate)
 return f__result_boolean
endfunction

//Generated method caller for bootsofgon.Find
function sc__bootsofgon_Find takes unit a returns integer
    set f__arg_unit1=a
    call TriggerEvaluate(st__bootsofgon_Find)
 return f__result_integer
endfunction

//Generated method caller for bootsofgon.onDestroy
function sc__bootsofgon_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__bootsofgon_onDestroy)
endfunction

//Generated allocator of bootsofgon
function s__bootsofgon__allocate takes nothing returns integer
 local integer this=si__bootsofgon_F
    if (this!=0) then
        set si__bootsofgon_F=si__bootsofgon_V[this]
    else
        set si__bootsofgon_I=si__bootsofgon_I+1
        set this=si__bootsofgon_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: bootsofgon")
        return 0
    endif

   set s__bootsofgon_swapped[this]=false
    set si__bootsofgon_V[this]=-1
 return this
endfunction

//Generated destructor of bootsofgon
function sc__bootsofgon_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: bootsofgon")
        return
    elseif (si__bootsofgon_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: bootsofgon")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__bootsofgon_onDestroy)
    set si__bootsofgon_V[this]=si__bootsofgon_F
    set si__bootsofgon_F=this
endfunction

//Generated method caller for shurikenitem___shurp.onUnitCollision
function sc__shurikenitem___shurp_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[18])
endfunction

//Generated method caller for shurikenitem___shurp.isValidTargetUnit
function sc__shurikenitem___shurp_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[18])
 return f__result_boolean
endfunction

//Generated method caller for shurikenitem___shurp.create
function sc__shurikenitem___shurp_create takes unit u,real dmg,unit target,real speed,integer startVector,integer endVector,string modelpath returns integer
    set f__arg_unit1=u
    set f__arg_real1=dmg
    set f__arg_unit2=target
    set f__arg_real2=speed
    set f__arg_integer1=startVector
    set f__arg_integer2=endVector
    set f__arg_string1=modelpath
    call TriggerEvaluate(st__shurikenitem___shurp_create)
 return f__result_integer
endfunction

//Generated method executor for shurikenitem___shurp.create
function sx__shurikenitem___shurp_create takes unit u,real dmg,unit target,real speed,integer startVector,integer endVector,string modelpath returns nothing
    set f__arg_unit1=u
    set f__arg_real1=dmg
    set f__arg_unit2=target
    set f__arg_real2=speed
    set f__arg_integer1=startVector
    set f__arg_integer2=endVector
    set f__arg_string1=modelpath
    call TriggerExecute(st__shurikenitem___shurp_create)
endfunction

//Generated allocator of shurikenitem___shurp
function s__shurikenitem___shurp__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=18
    set kthis=this

 return this
endfunction


//Generated method caller for trollsforestspear___fspearproj.onUnitCollision
function sc__trollsforestspear___fspearproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[17])
endfunction

//Generated method caller for trollsforestspear___fspearproj.isValidTargetUnit
function sc__trollsforestspear___fspearproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[17])
 return f__result_boolean
endfunction

//Generated method caller for trollsforestspear___fspearproj.onFinish
function sc__trollsforestspear___fspearproj_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[17])
endfunction

//Generated method caller for trollsforestspear___fspearproj.onDestroy
function sc__trollsforestspear___fspearproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__trollsforestspear___fspearproj_affected[this])
set s__trollsforestspear___fspearproj_affected[this]=null
endfunction

//Generated allocator of trollsforestspear___fspearproj
function s__trollsforestspear___fspearproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=17
    set kthis=this

 return this
endfunction


//Generated allocator of hometper
function s__hometper__allocate takes nothing returns integer
 local integer this=si__hometper_F
    if (this!=0) then
        set si__hometper_F=si__hometper_V[this]
    else
        set si__hometper_I=si__hometper_I+1
        set this=si__hometper_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: hometper")
        return 0
    endif

   set s__hometper_finished[this]=false
   set s__hometper_active[this]=false
    set si__hometper_V[this]=-1
 return this
endfunction

//Generated destructor of hometper
function s__hometper_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: hometper")
        return
    elseif (si__hometper_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: hometper")
        return
    endif
    set si__hometper_V[this]=si__hometper_F
    set si__hometper_F=this
endfunction

//Generated method caller for grenade.onGround
function sc__grenade_onGround takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onGround[60])
endfunction

//Generated method caller for grenade.create
function sc__grenade_create takes unit u,unit dummy,integer level,real dist,real speed,real arc,integer startVector,integer endVector,string modelpath returns integer
    set f__arg_unit1=u
    set f__arg_unit2=dummy
    set f__arg_integer1=level
    set f__arg_real1=dist
    set f__arg_real2=speed
    set f__arg_real3=arc
    set f__arg_integer2=startVector
    set f__arg_integer3=endVector
    set f__arg_string1=modelpath
    call TriggerEvaluate(st__grenade_create)
 return f__result_integer
endfunction

//Generated allocator of grenade
function s__grenade__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=60
    set kthis=this

 return this
endfunction


//Generated method caller for splitskull___spsproj.onFinish
function sc__splitskull___spsproj_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[35])
endfunction

//Generated method caller for splitskull___spsproj.onDestroy
function sc__splitskull___spsproj_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[35])
endfunction

//Generated method caller for splitskull___spsproj.launchAgain
function sc__splitskull___spsproj_launchAgain takes integer this,unit from,real speed returns nothing
    set f__arg_this=this
    set f__arg_unit1=from
    set f__arg_real1=speed
    call TriggerEvaluate(st__splitskull___spsproj_launchAgain)
endfunction

//Generated allocator of splitskull___spsproj
function s__splitskull___spsproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=35
    set kthis=this

   set s__splitskull___spsproj_opercount[this]=0
 return this
endfunction


//Generated method caller for orddash.onUnitCollision
function sc__orddash_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[40])
endfunction

//Generated method caller for orddash.isValidTargetUnit
function sc__orddash_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[40])
 return f__result_boolean
endfunction

//Generated method caller for orddash.onFinish
function sc__orddash_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[40])
endfunction

//Generated allocator of orddash
function s__orddash__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=40
    set kthis=this

 return this
endfunction


//Generated allocator of Ridilan___ridichargetarg
function s__Ridilan___ridichargetarg__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=43
    set kthis=this

 return this
endfunction


//Generated method caller for Ridilan___ridichargeproj.onUnitCollision
function sc__Ridilan___ridichargeproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[44])
endfunction

//Generated method caller for Ridilan___ridichargeproj.onIteration
function sc__Ridilan___ridichargeproj_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onIteration[44])
endfunction

//Generated method caller for Ridilan___ridichargeproj.isValidTargetUnit
function sc__Ridilan___ridichargeproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[44])
 return f__result_boolean
endfunction

//Generated allocator of Ridilan___ridichargeproj
function s__Ridilan___ridichargeproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=44
    set kthis=this

   set s__Ridilan___ridichargeproj_bluecolor[this]=255
   set s__Ridilan___ridichargeproj_alphacolor[this]=255
 return this
endfunction


//Generated method caller for sod___sodproj.onUnitCollision
function sc__sod___sodproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[45])
endfunction

//Generated method caller for sod___sodproj.isValidTargetUnit
function sc__sod___sodproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[45])
 return f__result_boolean
endfunction

//Generated allocator of sod___sodproj
function s__sod___sodproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=45
    set kthis=this

 return this
endfunction


//Generated method caller for thexec.onUnitCollision
function sc__thexec_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[46])
endfunction

//Generated method caller for thexec.isValidTargetUnit
function sc__thexec_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[46])
 return f__result_boolean
endfunction

//Generated method caller for thexec.onFinish
function sc__thexec_onFinish takes integer this returns nothing
call DestroyGroup(s__thexec_affected[this])
set s__thexec_affected[this]=null
endfunction

//Generated allocator of thexec
function s__thexec__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=46
    set kthis=this

 return this
endfunction


//Generated method caller for gladproj.onUnitCollision
function sc__gladproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[48])
endfunction

//Generated method caller for gladproj.isValidTargetUnit
function sc__gladproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[48])
 return f__result_boolean
endfunction

//Generated method caller for gladproj.onDestroy
function sc__gladproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__gladproj_affected[this])
set s__gladproj_affected[this]=null
endfunction

//Generated allocator of gladproj
function s__gladproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=48
    set kthis=this

 return this
endfunction


//Generated method caller for powerstrike___pwrstrike.onIteration
function sc__powerstrike___pwrstrike_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onIteration[49])
endfunction

//Generated method caller for powerstrike___pwrstrike.onUnitCollision
function sc__powerstrike___pwrstrike_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[49])
endfunction

//Generated method caller for powerstrike___pwrstrike.isValidTargetUnit
function sc__powerstrike___pwrstrike_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[49])
 return f__result_boolean
endfunction

//Generated method caller for powerstrike___pwrstrike.onDestroy
function sc__powerstrike___pwrstrike_onDestroy takes integer this returns nothing
call DestroyGroup(s__powerstrike___pwrstrike_affected[this])
set s__powerstrike___pwrstrike_affected[this]=null
endfunction

//Generated method caller for powerstrike___pwrstrike.onFinish
function sc__powerstrike___pwrstrike_onFinish takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onFinish[49])
endfunction

//Generated allocator of powerstrike___pwrstrike
function s__powerstrike___pwrstrike__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=49
    set kthis=this

   set s__powerstrike___pwrstrike_fadetime[this]=0.2
   set s__powerstrike___pwrstrike_sca[this]=1.
 return this
endfunction


//Generated method caller for drozhkicked.onFinish
function sc__drozhkicked_onFinish takes integer this returns nothing
call FlushChildHashtable(hash, GetHandleId(s__drozhkicked_efft[this]))
call DestroyTimer(s__drozhkicked_efft[this])
endfunction

//Generated allocator of drozhkicked
function s__drozhkicked__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=50
    set kthis=this

 return this
endfunction


//Generated method caller for volnawodomuta___wavanim.onDestroy
function sc__volnawodomuta___wavanim_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[53])
endfunction

//Generated allocator of volnawodomuta___wavanim
function s__volnawodomuta___wavanim__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=53
    set kthis=this

 return this
endfunction


//Generated method caller for volnawodomuta___thewave.onIteration
function sc__volnawodomuta___thewave_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onIteration[54])
endfunction

//Generated method caller for volnawodomuta___thewave.onDestroy
function sc__volnawodomuta___thewave_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onDestroy[54])
endfunction

//Generated allocator of volnawodomuta___thewave
function s__volnawodomuta___thewave__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=54
    if (si__volnawodomuta___thewave_arrN==0) then
        set si__volnawodomuta___thewave_arrI=si__volnawodomuta___thewave_arrI+1
        set kthis=si__volnawodomuta___thewave_arrI
        if (kthis>1364) then
            set si__projectileinterface_type[this]=13
            call sc__projectileinterface_deallocate(this)
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: volnawodomuta___thewave")
            return 0
        endif
    else
        set kthis=si__volnawodomuta___thewave_arrV[si__volnawodomuta___thewave_arrN]
        set si__volnawodomuta___thewave_arrN=si__volnawodomuta___thewave_arrN-1
    endif
    set si__volnawodomuta___thewave_arr[this]=kthis
    set s__volnawodomuta___thewave_waveunits[this]=(kthis-1)*6
    set s__volnawodomuta___thewave_wavemodel[this]=(kthis-1)*6
   set s__volnawodomuta___thewave_traveled[this]=0.
 return this
endfunction


//Generated method caller for vodshard___shard.onUnitCollision
function sc__vodshard___shard_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[57])
endfunction

//Generated method caller for vodshard___shard.isValidTargetUnit
function sc__vodshard___shard_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[57])
 return f__result_boolean
endfunction

//Generated method caller for vodshard___shard.onDestroy
function sc__vodshard___shard_onDestroy takes integer this returns nothing
call DestroyGroup(s__vodshard___shard_affected[this])
set s__vodshard___shard_affected[this]=null
endfunction

//Generated allocator of vodshard___shard
function s__vodshard___shard__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=57
    set kthis=this

 return this
endfunction


//Generated method caller for magnproj.onIteration
function sc__magnproj_onIteration takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__projectileinterface_onIteration[58])
endfunction

//Generated method caller for magnproj.onDestroy
function sc__magnproj_onDestroy takes integer this returns nothing
set s__magnproj_isdestroyed[this]=true
call UnitRemoveAbility(s__magnproj_affected[this], 0x426D6C74)
set s__magnproj_affected[this]=null
endfunction

//Generated method caller for magnproj.onUnitCollision
function sc__magnproj_onUnitCollision takes integer this,unit u returns nothing
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_onUnitCollision[58])
endfunction

//Generated method caller for magnproj.isValidTargetUnit
function sc__magnproj_isValidTargetUnit takes integer this,unit u returns boolean
    set f__arg_this=this
    set f__arg_unit1=u
    call TriggerEvaluate(st__projectileinterface_isValidTargetUnit[58])
 return f__result_boolean
endfunction

//Generated allocator of magnproj
function s__magnproj__allocate takes unit u returns integer
 local integer this=sc__projectile_create(u)
 local integer kthis
    if(this==0) then
        return 0
    endif
    set si__projectileinterface_type[this]=58
    set kthis=this

   set s__magnproj_isdestroyed[this]=false
 return this
endfunction

function sc___prototype1_execute takes integer l__i returns nothing

    call TriggerExecute(st___prototype1[l__i])
endfunction
function sc___prototype1_evaluate takes integer l__i returns nothing

    call TriggerEvaluate(st___prototype1[l__i])

endfunction
function sc___prototype24_execute takes integer l__i returns nothing

    call TriggerExecute(st___prototype24[l__i])
endfunction
function sc___prototype24_evaluate takes integer l__i returns integer

    call TriggerEvaluate(st___prototype24[l__i])
 return f__result_integer
endfunction
function sc___prototype36_execute takes integer l__i,integer a1 returns nothing
    set f__arg_integer1=a1

    call TriggerExecute(st___prototype36[l__i])
endfunction
function sc___prototype36_evaluate takes integer l__i,integer a1 returns nothing
    set f__arg_integer1=a1

    call TriggerEvaluate(st___prototype36[l__i])

endfunction
function sc___prototype41_execute takes integer l__i,integer a1,integer a2 returns nothing
    set f__arg_integer1=a1
    set f__arg_integer2=a2

    call TriggerExecute(st___prototype41[l__i])
endfunction
function sc___prototype41_evaluate takes integer l__i,integer a1,integer a2 returns nothing
    set f__arg_integer1=a1
    set f__arg_integer2=a2

    call TriggerEvaluate(st___prototype41[l__i])

endfunction
function sc___prototype42_execute takes integer l__i,integer a1,string a2 returns nothing
    set f__arg_integer1=a1
    set f__arg_string1=a2

    call TriggerExecute(st___prototype42[l__i])
endfunction
function sc___prototype42_evaluate takes integer l__i,integer a1,string a2 returns nothing
    set f__arg_integer1=a1
    set f__arg_string1=a2

    call TriggerEvaluate(st___prototype42[l__i])

endfunction
function sc___prototype67_execute takes integer l__i,unit a1,real a2,unit a3,real a4,integer a5,integer a6,string a7 returns nothing
    set f__arg_unit1=a1
    set f__arg_real1=a2
    set f__arg_unit2=a3
    set f__arg_real2=a4
    set f__arg_integer1=a5
    set f__arg_integer2=a6
    set f__arg_string1=a7

    call TriggerExecute(st___prototype67[l__i])
endfunction
function sc___prototype67_evaluate takes integer l__i,unit a1,real a2,unit a3,real a4,integer a5,integer a6,string a7 returns integer
    set f__arg_unit1=a1
    set f__arg_real1=a2
    set f__arg_unit2=a3
    set f__arg_real2=a4
    set f__arg_integer1=a5
    set f__arg_integer2=a6
    set f__arg_string1=a7

    call TriggerEvaluate(st___prototype67[l__i])
 return f__result_integer
endfunction
function sc___prototype68_execute takes integer l__i,integer a1,real a2,unit a3,real a4,unit a5,real a6,real a7,integer a8,integer a9,string a10,string a11 returns nothing
    set f__arg_integer1=a1
    set f__arg_real1=a2
    set f__arg_unit1=a3
    set f__arg_real2=a4
    set f__arg_unit2=a5
    set f__arg_real3=a6
    set f__arg_real4=a7
    set f__arg_integer2=a8
    set f__arg_integer3=a9
    set f__arg_string1=a10
    set f__arg_string2=a11

    call TriggerExecute(st___prototype68[l__i])
endfunction
function sc___prototype68_evaluate takes integer l__i,integer a1,real a2,unit a3,real a4,unit a5,real a6,real a7,integer a8,integer a9,string a10,string a11 returns integer
    set f__arg_integer1=a1
    set f__arg_real1=a2
    set f__arg_unit1=a3
    set f__arg_real2=a4
    set f__arg_unit2=a5
    set f__arg_real3=a6
    set f__arg_real4=a7
    set f__arg_integer2=a8
    set f__arg_integer3=a9
    set f__arg_string1=a10
    set f__arg_string2=a11

    call TriggerEvaluate(st___prototype68[l__i])
 return f__result_integer
endfunction

//library cjCallbacksRegestrationHack:
function cjCallbacksRegestration__init0 takes nothing returns nothing
//# optional
call ExecuteFunc("cjCallbacksRegestration__initX")
endfunction

//library cjCallbacksRegestrationHack ends
//library cjLib75hJKJ374s4e597nba9o7w45gf:
function cj_group_copy_75hJKJ3745gf takes nothing returns nothing
//# optional
call GroupAddUnit(cj_tmpgr_copy_nw509ert7, GetEnumUnit())
endfunction

//library cjLib75hJKJ374s4e597nba9o7w45gf ends
//library ALL:

function ALL__RemoveLeak takes nothing returns nothing
loop
if ALL__LeakNum[ALL__MaxVar] < 2 then
if ALL__LeakNum[ALL__MaxVar] < 1 then
call RemoveLocation(ALL__LocationVar[ALL__MaxVar])
else
call RemoveRect(ALL__RectVar[ALL__MaxVar])
endif
elseif ALL__LeakNum[ALL__MaxVar] < 3 then
call DestroyGroup(ALL__GroupVar[ALL__MaxVar])
else
call DestroyForce(ALL__ForceVar[ALL__MaxVar])
endif
set ALL__MaxVar=ALL__MaxVar - 1
exitwhen ALL__MaxVar < 0
endloop
endfunction
function ALL_RemoveRect takes rect leak returns rect
if ALL_Remove then
set ALL__MaxVar=ALL__MaxVar + 1
set ALL__RectVar[ALL__MaxVar]=leak
set ALL__LeakNum[ALL__MaxVar]=1
if ALL__MaxVar == 0 then
call TimerStart(ALL__Timer, .0, false, function ALL__RemoveLeak)
endif
endif
return leak
endfunction
function ALL_RectFromCenterSizeBJ_GetRectFromCircleBJ takes location l,real width,real height,boolean b returns rect
local real x=GetLocationX(l)
local real y=GetLocationY(l)
if b then
set width=width * .5
set height=height * .5
return Rect(x - width, y - height, x + width, y + height)
endif
return Rect(x - width, y - width, x + width, y + width)
endfunction
function ALL_RemoveLocation takes location leak returns location
if ALL_Remove then
set ALL__MaxVar=ALL__MaxVar + 1
set ALL__LocationVar[ALL__MaxVar]=leak
set ALL__LeakNum[ALL__MaxVar]=0
if ALL__MaxVar == 0 then
call TimerStart(ALL__Timer, .0, false, function ALL__RemoveLeak)
endif
endif
return leak
endfunction
function ALL_GetWidgetLoc takes widget w returns location
return Location(GetWidgetX(w), GetWidgetY(w))
endfunction
function ALL_PolarProjectionBJ takes location l,real r,real a returns location
set a=a * .017
return Location(GetLocationX(l) + Cos(a) * r, GetLocationY(l) + Sin(a) * r)
endfunction
function ALL_MeleeGetLocWithinRect takes location l,rect r returns location
local real minX=GetRectMinX(r)
local real maxX=GetRectMaxX(r)
local real minY=GetRectMinY(r)
local real maxY=GetRectMaxY(r)
local real x=GetLocationX(l)
local real y=GetLocationY(l)
if x < minX then
set x=minX
elseif x > maxX then
set x=maxX
endif
if y < minY then
return Location(x, minY)
elseif y > maxY then
return Location(x, maxY)
endif
return Location(x, y)
endfunction
function ALL_DestroyGroup takes group leak returns group
if ALL_Remove then
set ALL__MaxVar=ALL__MaxVar + 1
set ALL__GroupVar[ALL__MaxVar]=leak
set ALL__LeakNum[ALL__MaxVar]=2
if ALL__MaxVar == 0 then
call TimerStart(ALL__Timer, .0, false, function ALL__RemoveLeak)
endif
endif
return leak
endfunction
function ALL_GetUnitsInRangeOfLocMatching takes real r,location l,boolexpr b returns group
set ALL__Group=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(ALL__Group, l, r, b)
call DestroyBoolExpr(b)
return ALL__Group
endfunction
function ALL_GetUnitsInRectMatching takes rect r,boolexpr b returns group
set ALL__Group=CreateGroup()
call GroupEnumUnitsInRect(ALL__Group, r, b)
call DestroyBoolExpr(b)
return ALL__Group
endfunction
function ALL_GetUnitsInRectOfPlayer takes rect r,player p returns group
set ALL__Group=CreateGroup()
set bj_groupEnumOwningPlayer=p
call GroupEnumUnitsInRect(ALL__Group, r, filterGetUnitsInRectOfPlayer)
return ALL__Group
endfunction
function ALL_GetUnitsOfPlayerMatching takes player p,boolexpr b returns group
set ALL__Group=CreateGroup()
call GroupEnumUnitsOfPlayer(ALL__Group, p, b)
call DestroyBoolExpr(b)
return ALL__Group
endfunction
function ALL_GetUnitsOfPlayerAndTypeId takes player p,integer id returns group
set ALL__Group=CreateGroup()
set bj_groupEnumTypeId=id
call GroupEnumUnitsOfPlayer(ALL__Group, p, filterGetUnitsOfPlayerAndTypeId)
return ALL__Group
endfunction
function ALL_GetUnitsOfTypeIdAll takes integer id returns group
local group g=CreateGroup()
local integer l__i=0
set bj_groupAddGroupDest=CreateGroup()
set bj_groupEnumTypeId=id
loop
call GroupEnumUnitsOfPlayer(g, Player(l__i), filterGetUnitsOfTypeIdAll)
call ForGroup(g, function GroupAddGroupEnum)
exitwhen l__i == 15
set l__i=l__i + 1
endloop
call ALL_DestroyGroup(g)
set g=null
return bj_groupAddGroupDest
endfunction
function ALL_GetUnitsSelectedAll takes player p returns group
set ALL__Group=CreateGroup()
call SyncSelections()
call GroupEnumUnitsSelected(ALL__Group, p, null)
return ALL__Group
endfunction
function ALL_DestroyForce takes force leak returns force
if ALL_Remove then
set ALL__MaxVar=ALL__MaxVar + 1
set ALL__ForceVar[ALL__MaxVar]=leak
set ALL__LeakNum[ALL__MaxVar]=3
if ALL__MaxVar == 0 then
call TimerStart(ALL__Timer, .0, false, function ALL__RemoveLeak)
endif
endif
return leak
endfunction
function ALL_GetForceOfPlayer takes player p returns force
set ALL__Force=CreateForce()
call ForceAddPlayer(ALL__Force, p)
return ALL__Force
endfunction
function ALL_GetPlayersAllies takes player p returns force
set ALL__Force=CreateForce()
call ForceEnumAllies(ALL__Force, p, null)
return ALL__Force
endfunction
function ALL_GetPlayersByMapControl takes mapcontrol mc returns force
local player p=Player(0)
local integer l__i=0
set ALL__Force=CreateForce()
loop
if GetPlayerController(p) == mc then
call ForceAddPlayer(ALL__Force, p)
endif
exitwhen l__i == 15
set l__i=l__i + 1
set p=Player(l__i)
endloop
set p=null
return ALL__Force
endfunction
function ALL_GetPlayersEnemies takes player p returns force
set ALL__Force=CreateForce()
call ForceEnumEnemies(ALL__Force, p, null)
return ALL__Force
endfunction
function ALL_GetPlayersMatching takes boolexpr b returns force
set ALL__Force=CreateForce()
call ForceEnumPlayers(ALL__Force, b)
call DestroyBoolExpr(b)
return ALL__Force
endfunction

//library ALL ends
//library Base16:
function ToHex takes integer n returns string
return SubString(Base16__CHARS, n, n + 1)
endfunction
function Dec2Hex takes integer dec returns string
local integer r=ModuloInteger(dec, Base16__BASE)
if dec - r == 0 then
return ToHex(r)
else
return Dec2Hex(( dec - r ) / Base16__BASE) + ToHex(r)
endif
return ""
endfunction
function ToDec takes string s returns integer
local integer n=0
local string hex
loop
exitwhen ( n == Base16__BASE )
if SubString(Base16__CHARS, n, n + 1) == s then
return n
endif
set n=n + 1
endloop
return 0
endfunction
function Hex2Dec takes string hex returns integer
local integer length=StringLength(hex)
local string r
if length == 1 then
return ToDec(hex)
elseif length > 1 then
set r=SubString(hex, length - 1, length)
set hex=SubString(hex, 0, length - 1)
return Hex2Dec(hex) * Base16__BASE + ToDec(r)
endif
return 0
endfunction

//library Base16 ends
//library CodeLib:

//library CodeLib ends
//library FICS:
function FICS_GetIndexById takes integer id returns integer
return sg__FICS__ItemMap_get(id - 0x49303030)
endfunction
function FICS_GetNormalByIndex takes integer index returns integer
return s__FICS__Items[(index)*(5)+0]
endfunction
function FICS_GetRuneByIndex takes integer index returns integer
return s__FICS__Items[(index)*(5)+1]
endfunction
function FICS_GetDisabledByIndex takes integer index returns integer
return s__FICS__Items[(index)*(5)+2]
endfunction
function FICS_GetGoldCostByIndex takes integer index returns integer
return s__FICS__Items[(index)*(5)+3]
endfunction
function FICS_GetLumberCostByIndex takes integer index returns integer
return s__FICS__Items[(index)*(5)+4]
endfunction
function FICS_GetPickupCallbackByIndex takes integer index returns trigger
return s__FICS__Callbacks[(index)*(2)+0]
endfunction
function FICS_GetDropCallbackByIndex takes integer index returns trigger
return s__FICS__Callbacks[(index)*(2)+1]
endfunction
function FICS_GetManipulatedItemIndex takes nothing returns integer
return FICS__CallbackArgument
endfunction
function FICS_Register takes integer id,integer rune,integer dis,integer gcost,integer lcost returns integer
set FICS__ItemCount=FICS__ItemCount + 1
//# static if true then
    if id - 0x49303030 > 400000 or rune - 0x49303030 > 400000 or dis - 0x49303030 > 400000 or id - 0x49303030 < 0 or rune - 0x49303030 < 0 or dis - 0x49303030 < 0 then
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Too many items. Increase the ITEM_MAP_SIZE constant. This message also may be shown if you are trying to register a standard item. Use only custom items instead.|r")
    return 0
    endif
//# endif
call sg__FICS__ItemMap_set(id - 0x49303030,FICS__ItemCount)
call sg__FICS__ItemMap_set(rune - 0x49303030,FICS__ItemCount)
call sg__FICS__ItemMap_set(dis - 0x49303030,FICS__ItemCount)
set s__FICS__Items[(FICS__ItemCount)*(5)+0]= id
set s__FICS__Items[(FICS__ItemCount)*(5)+1]= rune
set s__FICS__Items[(FICS__ItemCount)*(5)+2]= dis
set s__FICS__Items[(FICS__ItemCount)*(5)+3]= gcost
set s__FICS__Items[(FICS__ItemCount)*(5)+4]= lcost
return FICS__ItemCount
endfunction
function FICS_SetCallbacks takes integer index,trigger pickup,trigger drop returns nothing
set s__FICS__Callbacks[(index)*(2)+0]= pickup
set s__FICS__Callbacks[(index)*(2)+1]= drop
endfunction
function FICS_Register7 takes integer result,integer i0,integer i1,integer i2,integer i3,integer i4,integer i5,integer i6 returns nothing
local integer cjlocgn_00000000=0
local integer cjlocgn_00000001
//# static if true then
    if result < 0 or result > FICS__ItemCount then
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[0]= i0
//# static if true then
    if i0 < 0 or i0 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(0) + " = " + I2S(i0))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[1]= i1
//# static if true then
    if i1 < 0 or i1 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(1) + " = " + I2S(i1))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[2]= i2
//# static if true then
    if i2 < 0 or i2 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(2) + " = " + I2S(i2))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[3]= i3
//# static if true then
    if i3 < 0 or i3 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(3) + " = " + I2S(i3))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[4]= i4
//# static if true then
    if i4 < 0 or i4 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(4) + " = " + I2S(i4))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[5]= i5
//# static if true then
    if i5 < 0 or i5 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(5) + " = " + I2S(i5))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif
set s__FICS__Temp[6]= i6
//# static if true then
    if i6 < 0 or i6 > FICS__ItemCount then
    call BJDebugMsg("i" + I2S(6) + " = " + I2S(i6))
    call BJDebugMsg("|cffff0000CRITICAL ERROR in FICS: Invalid index in recipe.|r")
    return
    endif
//# endif

set FICS__RecipeCount=FICS__RecipeCount + 1
loop
if s__FICS__Temp[cjlocgn_00000000] > 0 then
if FICS__LastList[s__FICS__Temp[cjlocgn_00000000]] == 0 or FICS__Recipe[FICS__LastList[s__FICS__Temp[cjlocgn_00000000]]] != FICS__RecipeCount then
set FICS__ListCount=FICS__ListCount + 1
if FICS__LastList[s__FICS__Temp[cjlocgn_00000000]] == 0 then
set FICS__FirstList[s__FICS__Temp[cjlocgn_00000000]]=FICS__ListCount
else
set FICS__Next[FICS__LastList[s__FICS__Temp[cjlocgn_00000000]]]=FICS__ListCount
endif
set FICS__LastList[s__FICS__Temp[cjlocgn_00000000]]=FICS__ListCount
set FICS__Recipe[FICS__LastList[s__FICS__Temp[cjlocgn_00000000]]]=FICS__RecipeCount
set FICS__Next[FICS__LastList[s__FICS__Temp[cjlocgn_00000000]]]=0
endif
set cjlocgn_00000001=cjlocgn_00000000
loop
exitwhen cjlocgn_00000001 == 0 or s__FICS__Recipes[(FICS__RecipeCount)*(8)+cjlocgn_00000001 - 1] >= s__FICS__Temp[cjlocgn_00000000]
set s__FICS__Recipes[(FICS__RecipeCount)*(8)+cjlocgn_00000001]= s__FICS__Recipes[(FICS__RecipeCount)*(8)+cjlocgn_00000001 - 1]
set cjlocgn_00000001=cjlocgn_00000001 - 1
endloop
set s__FICS__Recipes[(FICS__RecipeCount)*(8)+cjlocgn_00000001]= s__FICS__Temp[cjlocgn_00000000]
endif
exitwhen cjlocgn_00000000 == 6
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set s__FICS__Recipes[(FICS__RecipeCount)*(8)+7]= result
endfunction
function cj_anonym__11 takes nothing returns nothing
//# optional
local item it
loop
set FICS__DropCount=FICS__DropCount - 1
if GetItemTypeId(FICS__Dropped[FICS__DropCount]) != 0 and not IsItemOwned(FICS__Dropped[FICS__DropCount]) then
set it=CreateItem(FICS_GetRuneByIndex(FICS__DropNum[FICS__DropCount]), GetWidgetX(FICS__Dropped[FICS__DropCount]), GetWidgetY(FICS__Dropped[FICS__DropCount]))
if GetItemType(FICS__Dropped[FICS__DropCount]) == ITEM_TYPE_CHARGED then
call SetItemCharges(it, GetItemCharges(FICS__Dropped[FICS__DropCount]))
endif
call SetItemPlayer(it, GetItemPlayer(FICS__Dropped[FICS__DropCount]), false)
call RemoveItem(FICS__Dropped[FICS__DropCount])
endif
exitwhen FICS__DropCount == 0
endloop
set it=null
endfunction
function FICS__DropItem takes item it,integer num returns nothing
set FICS__Dropped[FICS__DropCount]=it
set FICS__DropNum[FICS__DropCount]=num
set FICS__DropCount=FICS__DropCount + 1
if FICS__DropCount == 1 then
call TimerStart(FICS__T, .0, false, function cj_anonym__11)
endif
endfunction
function FICS__PickActions takes nothing returns boolean
local unit u=GetTriggerUnit()
local item it=GetManipulatedItem()
local item it2
local player p=GetOwningPlayer(u)
local integer itid=GetItemTypeId(it)
local integer num=FICS_GetIndexById(itid)
local integer ls=FICS__FirstList[num]
local integer m=6
local boolean norm=itid == FICS_GetNormalByIndex(num)
local boolean rune=itid == FICS_GetRuneByIndex(num)
local boolean dis=itid == FICS_GetDisabledByIndex(num)
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local integer cjlocgn_00000002
local integer cjlocgn_00000003
local boolean cjlocgn_00000004
local boolean cjlocgn_00000005
local boolean cjlocgn_00000006
if FICS__Flag and num != 0 then
set s__FICS__Temp[0]= num
set s__FICS__Temp[7]= - 1
set cjlocgn_00000000=0
loop
set it2=UnitItemInSlot(u, cjlocgn_00000000)
if it != it2 then
set cjlocgn_00000001=GetItemTypeId(it2)
set cjlocgn_00000002=FICS_GetIndexById(cjlocgn_00000001)
set cjlocgn_00000003=cjlocgn_00000000 + 1
if cjlocgn_00000001 == 0 or cjlocgn_00000002 == 0 or cjlocgn_00000001 != FICS_GetNormalByIndex(cjlocgn_00000002) then
set m=m - 1
set cjlocgn_00000002=0
else
loop
exitwhen cjlocgn_00000003 == 0 or s__FICS__Temp[cjlocgn_00000003 - 1] >= cjlocgn_00000002
set s__FICS__Temp[cjlocgn_00000003]= s__FICS__Temp[cjlocgn_00000003 - 1]
set s__FICS__Temp[cjlocgn_00000003 + 7]= s__FICS__Temp[cjlocgn_00000003 + 6]
set cjlocgn_00000003=cjlocgn_00000003 - 1
endloop
endif
set s__FICS__Temp[cjlocgn_00000003]= cjlocgn_00000002
set s__FICS__Temp[cjlocgn_00000003 + 7]= cjlocgn_00000000
endif
exitwhen cjlocgn_00000000 == 5
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
loop
exitwhen ls == 0
set cjlocgn_00000000=0
set cjlocgn_00000001=0
loop
exitwhen s__FICS__Temp[cjlocgn_00000000] < s__FICS__Recipes[(FICS__Recipe[ls])*(8)+cjlocgn_00000001]
if s__FICS__Temp[cjlocgn_00000000] == s__FICS__Recipes[(FICS__Recipe[ls])*(8)+cjlocgn_00000001] then
set s__FICS__Temp[cjlocgn_00000001 + 14]= s__FICS__Temp[cjlocgn_00000000 + 7]
set cjlocgn_00000001=cjlocgn_00000001 + 1
if cjlocgn_00000001 == 7 or s__FICS__Recipes[(FICS__Recipe[ls])*(8)+cjlocgn_00000001] == 0 then
set cjlocgn_00000001=cjlocgn_00000001 + ( 14 )
loop
set cjlocgn_00000001=cjlocgn_00000001 - 1
exitwhen cjlocgn_00000001 < 14
if s__FICS__Temp[cjlocgn_00000001] != - 1 then
call RemoveItem(UnitItemInSlot(u, s__FICS__Temp[cjlocgn_00000001]))
endif
endloop
if not rune then
call RemoveItem(it)
endif
call SetItemPlayer(UnitAddItemById(u, FICS_GetRuneByIndex(s__FICS__Recipes[(FICS__Recipe[ls])*(8)+7])), p, false)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", u, "origin"))
set it2=null
set it=null
set u=null
return false
endif
endif
exitwhen cjlocgn_00000000 == m
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set ls=FICS__Next[ls]
endloop
set FICS__Flag=false
set p=GetItemPlayer(it)
set cjlocgn_00000004=p == Player(15)
set cjlocgn_00000005=cjlocgn_00000004 or ( FICS_FICS_gif[GetPlayerId(p)] and GetPlayerSlotState(GetOwningPlayer(u)) != PLAYER_SLOT_STATE_PLAYING ) or p == GetOwningPlayer(u) or FICS_GetNormalByIndex(num) == FICS_GetDisabledByIndex(num)
if cjlocgn_00000005 then
set itid=FICS_GetNormalByIndex(num)
if cjlocgn_00000004 then
set p=GetOwningPlayer(u)
endif
else
set itid=FICS_GetDisabledByIndex(num)
endif
set cjlocgn_00000000=0
set cjlocgn_00000006=false
if GetItemType(it) == ITEM_TYPE_CHARGED then
set cjlocgn_00000001=GetItemCharges(it)
loop
set it2=UnitItemInSlot(u, cjlocgn_00000000)
if it != it2 then
set ls=GetItemTypeId(it2)
if ( ls == FICS_GetNormalByIndex(num) and cjlocgn_00000005 ) or ( ls == FICS_GetDisabledByIndex(num) and GetItemPlayer(it2) == p ) then
if not ( ( ls == 0x49303743 or ls == 0x49303744 ) and ( GetItemCharges(it2) >= 0 or cjlocgn_00000001 == 0 ) ) then
if cjlocgn_00000005 then
set FICS__CallbackArgument=num
call TriggerEvaluate(FICS_GetPickupCallbackByIndex(num))
endif
call SetItemCharges(it2, GetItemCharges(it2) + cjlocgn_00000001)
if not rune then
call RemoveItem(it)
endif
exitwhen true
endif
elseif it2 == null then
set cjlocgn_00000006=true
endif
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
exitwhen cjlocgn_00000000 > 5
endloop
if cjlocgn_00000000 > 5 then
if cjlocgn_00000004 and not cjlocgn_00000006 then
set p=GetOwningPlayer(u)
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + FICS_GetGoldCostByIndex(num))
call SetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) + FICS_GetLumberCostByIndex(num))
elseif cjlocgn_00000006 then
if cjlocgn_00000005 then
set FICS__CallbackArgument=num
call TriggerEvaluate(FICS_GetPickupCallbackByIndex(num))
endif
if rune or ( norm and not cjlocgn_00000005 ) or ( dis and cjlocgn_00000005 ) then
if not rune then
call RemoveItem(it)
endif
set it2=UnitAddItemById(u, itid)
call SetItemCharges(it2, cjlocgn_00000001)
call SetItemPlayer(it2, p, false)
endif
else
call FICS__DropItem(it , num)
endif
endif
else
loop
exitwhen UnitItemInSlot(u, cjlocgn_00000000) == null
set cjlocgn_00000000=cjlocgn_00000000 + 1
exitwhen cjlocgn_00000000 > 5
endloop
if cjlocgn_00000000 <= 5 then
if cjlocgn_00000005 then
set FICS__CallbackArgument=num
call TriggerEvaluate(FICS_GetPickupCallbackByIndex(num))
endif
if rune or ( norm and not cjlocgn_00000005 ) or ( dis and cjlocgn_00000005 ) then
if not rune then
call RemoveItem(it)
endif
call SetItemPlayer(UnitAddItemById(u, itid), p, false)
endif
elseif cjlocgn_00000004 then
set p=GetOwningPlayer(u)
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + FICS_GetGoldCostByIndex(num))
call SetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) + FICS_GetLumberCostByIndex(num))
else
call FICS__DropItem(it , num)
endif
endif
set FICS__Flag=true
endif
set it2=null
set it=null
set u=null
return false
endfunction
function FICS__DropActions takes nothing returns boolean
local item it=GetManipulatedItem()
local integer itid=GetItemTypeId(it)
local integer num=FICS_GetIndexById(itid)
if FICS__Flag and num != 0 and ( itid == FICS_GetNormalByIndex(num) or itid == FICS_GetDisabledByIndex(num) ) then
if itid == FICS_GetNormalByIndex(num) then
set FICS__CallbackArgument=num
call TriggerEvaluate(FICS_GetDropCallbackByIndex(num))
endif
call FICS__DropItem(it , num)
endif
set it=null
return false
endfunction
function cj_callback_00000009 takes nothing returns nothing
//# optional
local trigger pick=CreateTrigger()
local trigger drop=CreateTrigger()
local integer cjlocgn_00000000=0
loop
call TriggerRegisterPlayerUnitEvent(pick, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_PICKUP_ITEM, null)
call TriggerRegisterPlayerUnitEvent(drop, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_DROP_ITEM, null)
exitwhen cjlocgn_00000000 == 15
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddCondition(pick, Condition(function FICS__PickActions))
call TriggerAddCondition(drop, Condition(function FICS__DropActions))
endfunction

//library FICS ends
//library Forest:
function DrakeMove takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit d=LoadUnitHandle(hash, h, 1)
local real R=250.
local real angle=LoadReal(hash, h, 2)
local real dphi=120.
local real cjlocgn_00000000
local real cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
if d != null then
if GetUnitCurrentOrder(d) != 851983 and GetUnitCurrentOrder(d) != 851986 then
set angle=angle + ( dphi )
call SaveReal(hash, h, 2, angle)
set cjlocgn_00000000=LoadReal(hash, h, 3)
set cjlocgn_00000001=LoadReal(hash, h, 4)
set cjlocgn_00000002=cjlocgn_00000000 + R * Cos(angle)
set cjlocgn_00000003=cjlocgn_00000001 + R * Sin(angle)
call IssuePointOrder(d, "attack", cjlocgn_00000002, cjlocgn_00000003)
call SaveUnitHandle(hash, h, 1, d)
endif
else
call DestroyTimer(t)
call FlushChildHashtable(hash, h)
endif
set t=null
set d=null
endfunction
function Forest_ForestSpawn takes nothing returns nothing
local boolean cjlocgn_00000000=false
local boolean cjlocgn_00000001=false
local unit cjlocgn_00000002
local integer cjlocgn_00000003
local timer cjlocgn_00000004
local integer cjlocgn_00000005
local real cjlocgn_00000006
local real cjlocgn_00000007
local real cjlocgn_00000008
local integer array cjlocgn_00000009
local integer array cjlocgn_0000000a
local real cjlocgn_0000000b
local integer cjlocgn_0000000c
local real cjlocgn_0000000d
local real cjlocgn_0000000e
set forestspk=forestspk + 1
call GroupEnumUnitsInRect(cjgrfgn_00000008, gg_rct_Left_Moonwell, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000008)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000008, cjlocgn_00000002)
set cjlocgn_00000000=true
endloop
call GroupEnumUnitsInRect(cjgrfgn_00000008, gg_rct_Right_Moonwell, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000008)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000008, cjlocgn_00000002)
set cjlocgn_00000001=true
endloop
if not ( cjlocgn_00000000 and cjlocgn_00000001 ) then
set cjlocgn_00000004=CreateTimer()
set cjlocgn_00000005=GetHandleId(cjlocgn_00000004)
set cjlocgn_00000006=250.
set cjlocgn_00000009[1]=- 5634
set cjlocgn_00000009[2]=4412
set cjlocgn_0000000a[1]=- 4151
set cjlocgn_0000000a[2]=- 4188
set cjlocgn_0000000b=0.
if not cjlocgn_00000000 and not cjlocgn_00000001 then
set cjlocgn_0000000c=GetRandomInt(1, 2)
set cjlocgn_00000007=cjlocgn_00000009[cjlocgn_0000000c] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[cjlocgn_0000000c]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[cjlocgn_0000000c]
set cjlocgn_0000000e=cjlocgn_0000000a[cjlocgn_0000000c]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
elseif cjlocgn_00000000 then
set cjlocgn_00000007=cjlocgn_00000009[2] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[2]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[2]
set cjlocgn_0000000e=cjlocgn_0000000a[2]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
elseif cjlocgn_00000001 then
set cjlocgn_00000007=cjlocgn_00000009[1] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[1]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[1]
set cjlocgn_0000000e=cjlocgn_0000000a[1]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303036, cjlocgn_00000007, cjlocgn_00000008, 90.)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
call SaveUnitHandle(hash, cjlocgn_00000005, 1, cjlocgn_00000002)
call SaveReal(hash, cjlocgn_00000005, 2, cjlocgn_0000000b)
set cjlocgn_00000003=( forestspk - 1 ) * 3
loop
exitwhen cjlocgn_00000003 <= 0
call UnitAddAbility(cjlocgn_00000002, 0x41303234)
call SetUnitAbilityLevel(cjlocgn_00000002, 0x41303234, 3)
call UnitRemoveAbility(cjlocgn_00000002, 0x41303234)
set cjlocgn_00000003=cjlocgn_00000003 - 1
endloop
if forestspk - 1 > 0 then
call UnitAddAbility(cjlocgn_00000002, 0x41303336)
call SetUnitAbilityLevel(cjlocgn_00000002, 0x41303336, ( ( forestspk - 1 ) * 2 ) + 1)
endif
set cjlocgn_00000002=null
set cjlocgn_00000004=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_runekeeper , null))) == 0 then
set lrunekeep=GetRandomInt(0, 2)
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303038, - 5957.00, - 2330.00, 306.68), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303039, - 6029.00, - 2590.00, 336.17), 0x41486164)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303037, - 6123.00, - 2391.00, 339.56)
set cjlocgn_00000006=GetUnitX(cjlocgn_00000002)
set cjlocgn_00000007=GetUnitY(cjlocgn_00000002)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
if lrunekeep == 0 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 0, 255)
endif
if lrunekeep == 2 then
call SetUnitVertexColor(cjlocgn_00000002, 25, 255, 25, 255)
endif
if lrunekeep == 1 then
call SetUnitVertexColor(cjlocgn_00000002, 0, 75, 255, 255)
endif
if lrunekeep == 3 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 255, 255, 180)
endif
if lrunekeep == 4 then
call SetUnitVertexColor(cjlocgn_00000002, 175, 175, 0, 255)
endif
if lrunekeep == 5 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 255, 255)
endif
set cjlocgn_00000002=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_runekeeper , null))) == 0 then
set rrunekeep=GetRandomInt(0, 2)
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303038, 4535, - 2029.00, 261.67), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303039, 4793, - 2177.00, 233.85), 0x41486164)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303037, 4749, - 2047.00, 220.70)
set cjlocgn_00000006=GetUnitX(cjlocgn_00000002)
set cjlocgn_00000007=GetUnitY(cjlocgn_00000002)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
if rrunekeep == 0 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 0, 255)
endif
if rrunekeep == 2 then
call SetUnitVertexColor(cjlocgn_00000002, 25, 255, 25, 255)
endif
if rrunekeep == 1 then
call SetUnitVertexColor(cjlocgn_00000002, 0, 75, 255, 255)
endif
if rrunekeep == 3 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 255, 255, 180)
endif
if rrunekeep == 4 then
call SetUnitVertexColor(cjlocgn_00000002, 175, 175, 0, 255)
endif
if rrunekeep == 5 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 255, 255)
endif
set cjlocgn_00000002=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_mid_2_liz_1_ner , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 845.00, - 3521.00, 273.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 426.00, - 3535.00, 278.52), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 641.00, - 3652.00, 272.17), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_mid_2_trea_1_liz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 867.00, - 1576.00, 89.38), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 648.00, - 1628.00, 88.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 462.00, - 1579.00, 117.32), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_liz_1_cob , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 4167.00, - 2751.0, 271.50), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 3665.00, - 2816.0, 260.73), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, - 3933.00, - 2962.0, 287.91), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_inca_1_ro , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, - 7284.00, - 5573.0, 56.05), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, - 7092.00, - 5866.0, 334.36), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303031, - 7160.00, - 5580.0, 17.82), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_ner_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, - 8074.00, - 3422.5, 83.12), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 8272.00, - 3202.0, 82.95), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 7888.00, - 3269.5, 94.40), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_ghou_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, - 10654.00, - 1879.7, 284.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10780.00, - 2060.0, 285.54), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10484.00, - 1931.0, 278.79), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_3_trea , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5975.00, - 424.10, 321.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5723.90, - 362.80, 317.68), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5845.8, - 623.50, 359.31), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_gia_1_ghou , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 10037.00, - 6742.0, 65.92), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 9882.00, - 6915.0, 16.66), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10071.00, - 6885.0, 44.65), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2__liz_1_cob , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, 2342.00, - 2919.0, 281.63), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, 2782.00, - 2949.0, 257.64), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, 2604.40, - 3082.0, 275.06), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_inca_1_ro , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, 6342.00, - 5164.0, 151.71), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, 6356.00, - 5455.0, 206.16), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303031, 6288.00, - 5268.7, 170.55), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_ner_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, 6958.00, - 3094.0, 96.30), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, 7104.00, - 2946.0, 88.11), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, 6744.00, - 2918.0, 95.01), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_ghou_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, 10255.00, - 1824.0, 263.56), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 10046.00, - 1929.0, 293.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 10453.00, - 1930.0, 249.74), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_3_trea , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5838.9, 142, 185.64), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5679.90, 297.20, 197.03), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5675.0, 33.60, 155.00), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_gia_1_ghou , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 8888.00, - 6917.00, 131.19), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 9068.00, - 6778.00, 111.97), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 9043.00, - 6922.00, 140.80), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_1_trea_1_cob_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 6117.7, 6202.80, 312.58), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, - 6053, 6462.2, 308.23), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, - 6420.00, 6311.50, 313.17), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_gia_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 7968, 3314, 345.53), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 7978, 3021.7, 14.97), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, - 7756.0, 3189.00, 347.12), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_1_trea_1_cob_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5816.7, 5937.20, 229.21), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, 6070, 5990.2, 232.04), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, 5794.20, 6241.0, 243.21), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_gia_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 7801, 3480, 197.23), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 7747, 3166, 179.47), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, 7567.9, 3363.00, 159.45), 0x41486164)
endif
endif
endfunction

//library Forest ends
//library Musicka:
function Musicka__musiclistOn takes nothing returns nothing
local timer t
call SetMapMusic("Sound\\Music\\mp3Music\\BloodElfTheme.mp3;Sound\\Music\\mp3Music\\Mainscreen.mp3;Sound\\Music\\mp3Music\\Orc1.mp3;Sound\\Music\\mp3Music\\Orc2.mp3;Sound\\Music\\mp3Music\\Orc3.mp3; \\n            Sound\\Music\\mp3Music\\OrcDefeat.mp3;Sound\\Music\\mp3Music\\NagaTheme.mp3;Sound\\Music\\mp3Music\\LichKingTheme.mp3;Sound\\Music\\mp3Music\\DarkVictory.mp3;Sound\\Music\\mp3Music\\IllidansTheme.mp3;Sound\\Music\\mp3Music\\ArthasTheme.mp3", true, 0)
call SetMusicVolume(120)
call PlayMusic("Sound\\Music\\mp3Music\\BloodElfTheme.mp3;Sound\\Music\\mp3Music\\Mainscreen.mp3;Sound\\Music\\mp3Music\\Orc1.mp3;Sound\\Music\\mp3Music\\Orc2.mp3;Sound\\Music\\mp3Music\\Orc3.mp3; \\n            Sound\\Music\\mp3Music\\OrcDefeat.mp3;Sound\\Music\\mp3Music\\NagaTheme.mp3;Sound\\Music\\mp3Music\\LichKingTheme.mp3;Sound\\Music\\mp3Music\\DarkVictory.mp3;Sound\\Music\\mp3Music\\IllidansTheme.mp3;Sound\\Music\\mp3Music\\ArthasTheme.mp3")
set t=GetExpiredTimer()
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function Musicka_startgamemusic takes nothing returns nothing
call ClearMapMusic()
call TimerStart(CreateTimer(), 1., false, function Musicka__musiclistOn)
call TimerStart(CreateTimer(), 5. * 75, false, function Musicka__musiclistOn)
endfunction
function cj_callback_00000004 takes nothing returns nothing
//# optional
call PlayMusic("Sound\\Music\\mp3Music\\Comradeship.mp3")
endfunction

//library Musicka ends
//library PosohSili:
function s__Posoh_Remove takes integer this returns nothing
call DestroyTrigger(s__Posoh_trig[this])
set s__Posoh_trig[this]=null
set s__Posoh_c[this]=null
set s__Posoh_b[this]=false
set s__Posoh_tt[this]=0
call sc__Posoh_RemoveStruct(s__Posoh_u[this])
endfunction
function s__Posoh_GetUnitR takes integer this returns nothing
if ( not IsUnitInRange(s__Posoh_c[this], s__Posoh_u[this], 500) ) then
call s__Posoh_Remove(this)
call DestroyEffect(s__Posoh_Eff[this])
set s__Posoh_Eff[this]=null
endif
endfunction
function s__Posoh_Awake takes integer this returns nothing
if ( s__Posoh_b[this] ) then
call sc__Posoh_GetUnitMp(this)
endif
call s__Posoh_GetUnitR(this)
endfunction
function s__Posoh_GetUnitMp takes integer this returns nothing
local real cjlocgn_00000000
local real cjlocgn_00000001
set s__Posoh_tt[this]=s__Posoh_tt[this] + 1
if ( s__Posoh_tt[this] > 1 ) then
set cjlocgn_00000000=GetUnitState(s__Posoh_u[this], UNIT_STATE_MANA)
if ( s__Posoh_mp[this] <= cjlocgn_00000000 ) then
return
endif
set cjlocgn_00000001=( s__Posoh_mp[this] - cjlocgn_00000000 ) * ( 50 * .01 )
set s__Posoh_mp[this]=cjlocgn_00000000
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", s__Posoh_c[this], "origin"))
set IsTriggerDamage=true
call UnitDamageTarget(s__Posoh_u[this], s__Posoh_c[this], cjlocgn_00000001, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call DestroyEffect(s__Posoh_Eff[this])
set s__Posoh_Eff[this]=null
set s__Posoh_b[this]=false
endif
endfunction
function s__Posoh_SetDamage takes nothing returns nothing
local integer l__i=sc__Posoh_Proverka(GetTriggerUnit())
set s__Posoh_b[s__Posoh_Name[l__i]]=true
endfunction
function s__Posoh_Create takes integer this returns nothing
set s__Posoh_mp[this]=GetUnitState(s__Posoh_u[this], UNIT_STATE_MANA)
set s__Posoh_trig[this]=CreateTrigger()
call TriggerRegisterUnitEvent(s__Posoh_trig[this], s__Posoh_u[this], EVENT_UNIT_SPELL_CAST)
call TriggerAddAction(s__Posoh_trig[this], function s__Posoh_SetDamage)
endfunction
function s__Posoh_AddUnitStruct takes unit u,unit c returns nothing
local integer l__i=sc__Posoh_Proverka(u)
if ( l__i != - 1 ) then
set s__Posoh_c[s__Posoh_Name[l__i]]=c
else
set s__Posoh_Name[s__Posoh_count]=s__Posoh__allocate()
set s__Posoh_count=s__Posoh_count + 1
set s__Posoh_u[s__Posoh_Name[s__Posoh_count - 1]]=u
set s__Posoh_c[s__Posoh_Name[s__Posoh_count - 1]]=c
call s__Posoh_Create(s__Posoh_Name[s__Posoh_count - 1])
set s__Posoh_Eff[s__Posoh_Name[s__Posoh_count - 1]]=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl", c, "overhead")
endif
if ( s__Posoh_t == null ) then
set s__Posoh_t=CreateTimer()
call TimerStart(s__Posoh_t, 0.025, true, function sc__Posoh_Update)
endif
endfunction
function s__Posoh_Proverka takes unit u returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < s__Posoh_count ) )
if ( s__Posoh_u[s__Posoh_Name[l__i]] == u ) then
return l__i
endif
set l__i=l__i + 1
endloop
return - 1
endfunction
function s__Posoh_RemoveStruct takes unit u returns nothing
local integer l__i=s__Posoh_Proverka(u)
if ( l__i == - 1 ) then
return
endif
set s__Posoh_count=s__Posoh_count - 1
set s__Posoh_u[s__Posoh_Name[l__i]]=null
call s__Posoh_deallocate(s__Posoh_Name[l__i])
loop
exitwhen not ( ( l__i < s__Posoh_count ) )
set s__Posoh_Name[l__i]=s__Posoh_Name[l__i + 1]
set l__i=l__i + 1
endloop
endfunction
function s__Posoh_Update takes nothing returns nothing
local integer l__i=0
loop
exitwhen not ( ( l__i < s__Posoh_count ) )
call s__Posoh_Awake(s__Posoh_Name[l__i])
set l__i=l__i + 1
endloop
if ( s__Posoh_count == 0 ) then
call DestroyTimer(s__Posoh_t)
set s__Posoh_t=null
endif
endfunction
function PosohSili_PosohSpell takes nothing returns nothing
local unit u
local unit targ
if ( GetSpellAbilityId() != 0x41697444 ) then
return
endif
set u=GetSpellAbilityUnit()
set targ=GetSpellTargetUnit()
call s__Posoh_AddUnitStruct(u , targ)
set targ=null
set u=null
endfunction
function PosohSili___init takes nothing returns nothing
local trigger tr=CreateTrigger()
local integer l__i=0
loop
exitwhen not ( ( l__i < 12 ) )
call TriggerRegisterPlayerUnitEvent(tr, Player(l__i), EVENT_PLAYER_UNIT_SPELL_CAST, null)
set l__i=l__i + 1
endloop
call TriggerAddAction(tr, function PosohSili_PosohSpell)
set tr=null
endfunction

//library PosohSili ends
//library ProjectileArt:

//library ProjectileArt ends
//library Table:
function s__Table__GTable_reset takes integer this returns nothing
call FlushChildHashtable(Table__ht, (this))
endfunction
function s__Table__GTable_onDestroy takes integer this returns nothing
call s__Table__GTable_reset(this)
endfunction
function s__Table__getindex takes integer this,integer key returns integer
return LoadInteger(Table__ht, (this), key)
endfunction
function s__Table__setindex takes integer this,integer key,integer value returns nothing
call SaveInteger(Table__ht, (this), key, value)
endfunction
function s__Table_flush takes integer this,integer key returns nothing
call RemoveSavedInteger(Table__ht, (this), key)
endfunction
function s__Table_exists takes integer this,integer key returns boolean
return HaveSavedInteger(Table__ht, (this), key)
endfunction
function s__Table_flush2D takes string firstkey returns nothing
call s__Table__GTable_reset((- StringHash(firstkey)))
endfunction
function s__Table__staticgetindex takes string firstkey returns integer
return (- StringHash(firstkey))
endfunction
function s__StringTable__getindex takes integer this,string key returns integer
return LoadInteger(Table__ht, (this), StringHash(key))
endfunction
function s__StringTable__setindex takes integer this,string key,integer value returns nothing
call SaveInteger(Table__ht, (this), StringHash(key), value)
endfunction
function s__StringTable_flush takes integer this,string key returns nothing
call RemoveSavedInteger(Table__ht, (this), StringHash(key))
endfunction
function s__StringTable_exists takes integer this,string key returns boolean
return HaveSavedInteger(Table__ht, (this), StringHash(key))
endfunction
function s__StringTable_flush2D takes string firstkey returns nothing
call s__Table__GTable_reset((- StringHash(firstkey)))
endfunction
function s__StringTable__staticgetindex takes string firstkey returns integer
return (- StringHash(firstkey))
endfunction
function s__HandleTable__getindex takes integer this,handle key returns integer
return LoadInteger(Table__ht, (this), GetHandleId(key))
endfunction
function s__HandleTable__setindex takes integer this,handle key,integer value returns nothing
call SaveInteger(Table__ht, (this), GetHandleId(key), value)
endfunction
function s__HandleTable_flush takes integer this,handle key returns nothing
call RemoveSavedInteger(Table__ht, (this), GetHandleId(key))
endfunction
function s__HandleTable_exists takes integer this,handle key returns boolean
return HaveSavedInteger(Table__ht, (this), GetHandleId(key))
endfunction
function s__HandleTable_flush2D takes string firstkey returns nothing
call s__Table__GTable_reset((- StringHash(firstkey)))
endfunction
function s__HandleTable__staticgetindex takes string firstkey returns integer
return (- StringHash(firstkey))
endfunction

//library Table ends
//library TimerUtils:
function SetTimerData takes timer t,integer value returns nothing
//# static if TimerUtils__USE_HASH_TABLE then
    call SaveInteger(TimerUtils__ht, 0, GetHandleId(t), value)
//# elseif(TimerUtils__USE_FLEXIBLE_OFFSET)then
//# static if true then
//# if            (GetHandleId(t)-TimerUtils__VOFFSET<0)then
//# call BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")
//# endif
//# endif
//# set TimerUtils__data[GetHandleId(t)-TimerUtils__VOFFSET]=value
//# else
//# static if true then
//# if            (GetHandleId(t)-TimerUtils__OFFSET<0)then
//# call BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")
//# endif
//# endif
//# set TimerUtils__data[GetHandleId(t)-TimerUtils__OFFSET]=value
//# endif
endfunction
function GetTimerData takes timer t returns integer
//# static if TimerUtils__USE_HASH_TABLE then
    return LoadInteger(TimerUtils__ht, 0, GetHandleId(t))
//# elseif(TimerUtils__USE_FLEXIBLE_OFFSET)then
//# static if true then
//# if            (GetHandleId(t)-TimerUtils__VOFFSET<0)then
//# call BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")
//# endif
//# endif
//# return         TimerUtils__data[GetHandleId(t)-TimerUtils__VOFFSET]
//# else
//# static if true then
//# if            (GetHandleId(t)-TimerUtils__OFFSET<0)then
//# call BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")
//# endif
//# endif
//# return         TimerUtils__data[GetHandleId(t)-TimerUtils__OFFSET]
//# endif
endfunction
function NewTimerEx takes integer value returns timer
if ( TimerUtils__tN == 0 ) then
if ( not TimerUtils__didinit ) then
call sc___prototype1_evaluate(1)
set TimerUtils__tN=TimerUtils__tN - 1
else
call BJDebugMsg("NewTimer: Warning, Exceeding TimerUtils_QUANTITY, make sure all timers are getting recycled correctly")
set s__TimerUtils__tT[0]= CreateTimer()
//# static if not TimerUtils__USE_HASH_TABLE then
//# call BJDebugMsg("In case of errors, please increase it accordingly, or set TimerUtils_USE_HASH_TABLE to true")
//# static if TimerUtils__USE_FLEXIBLE_OFFSET then
//# if            (GetHandleId(TimerUtils__tT[0])-TimerUtils__VOFFSET<0)or(GetHandleId(TimerUtils__tT[0])-TimerUtils__VOFFSET>=TimerUtils__ARRAY_SIZE)then
//# call BJDebugMsg("NewTimer: Unable to allocate a timer, you should probably set TimerUtils_USE_HASH_TABLE to true or fix timer leaks.")
//# return         null
//# endif
//# else
//# if            (GetHandleId(TimerUtils__tT[0])-TimerUtils__OFFSET<0)or(GetHandleId(TimerUtils__tT[0])-TimerUtils__OFFSET>=TimerUtils__ARRAY_SIZE)then
//# call BJDebugMsg("NewTimer: Unable to allocate a timer, you should probably set TimerUtils_USE_HASH_TABLE to true or fix timer leaks.")
//# return         null
//# endif
//# endif
//# endif
endif
else
set TimerUtils__tN=TimerUtils__tN - 1
endif
call SetTimerData(s__TimerUtils__tT[TimerUtils__tN] , value)
return s__TimerUtils__tT[TimerUtils__tN]
endfunction
function NewTimer takes nothing returns timer
return NewTimerEx(0)
endfunction
function ReleaseTimer takes timer t returns nothing
if ( t == null ) then
call BJDebugMsg("Warning: attempt to release a null timer")
return
endif
if ( TimerUtils__tN == TimerUtils__ARRAY_SIZE ) then
call BJDebugMsg("Warning: Timer stack is full, destroying timer!!")
call DestroyTimer(t)
else
call PauseTimer(t)
if ( GetTimerData(t) == TimerUtils__HELD ) then
call BJDebugMsg("Warning: ReleaseTimer: Double free!")
return
endif
call SetTimerData(t , TimerUtils__HELD)
set s__TimerUtils__tT[TimerUtils__tN]= t
set TimerUtils__tN=TimerUtils__tN + 1
endif
endfunction
function TimerUtils__init takes nothing returns nothing
local integer l__i=0
local integer o=- 1
local boolean oops=false
if ( TimerUtils__didinit ) then
return
else
set TimerUtils__didinit=true
endif
//# static if TimerUtils__USE_HASH_TABLE then
    set TimerUtils__ht=InitHashtable()
    loop
    exitwhen ( l__i == TimerUtils__QUANTITY )
    set s__TimerUtils__tT[l__i]= CreateTimer()
    call SetTimerData(s__TimerUtils__tT[l__i] , TimerUtils__HELD)
    set l__i=l__i + 1
    endloop
    set TimerUtils__tN=TimerUtils__QUANTITY
//# else
//# loop
//# set i=0
//# loop
//# exitwhen      (i==TimerUtils__QUANTITY)
//# set TimerUtils__tT[i]=CreateTimer()
//# if            (i==0)then
//# set TimerUtils__VOFFSET=GetHandleId(TimerUtils__tT[i])
//# static if TimerUtils__USE_FLEXIBLE_OFFSET then
//# set o=TimerUtils__VOFFSET
//# else
//# set o=TimerUtils__OFFSET
//# endif
//# endif
//# if            (GetHandleId(TimerUtils__tT[i])-o>=TimerUtils__ARRAY_SIZE)then
//# exitwhen       true
//# endif
//# if            (GetHandleId(TimerUtils__tT[i])-o>=0)then
//# set i=i+1
//# endif
//# endloop
//# set TimerUtils__tN=i
//# exitwhen      (TimerUtils__tN==TimerUtils__QUANTITY)
//# set oops=true
//# exitwhen       not TimerUtils__USE_FLEXIBLE_OFFSET
//# call BJDebugMsg("TimerUtils_init: Failed a initialization attempt, will try again")
//# endloop
//# if            (oops)then
//# static if TimerUtils__USE_FLEXIBLE_OFFSET then
//# call BJDebugMsg("The problem has been fixed.")
//# elseif true then
//# call BJDebugMsg("There were problems and the new timer limit is "+I2S(i))
//# call BJDebugMsg("This is a rare ocurrence, if the timer limit is too low:")
//# call BJDebugMsg("a) Change USE_FLEXIBLE_OFFSET to true (reduces performance a little)")
//# call BJDebugMsg("b) or try changing OFFSET to "+I2S(TimerUtils__VOFFSET))
//# endif
//# endif
//# endif
endfunction

//library TimerUtils ends
//library definitelynotcheats:
function onRefreshUnit takes nothing returns nothing
call UnitResetCooldown(definitelynotcheats__localunit)
call SetUnitState(definitelynotcheats__localunit, UNIT_STATE_MANA, GetUnitState(definitelynotcheats__localunit, UNIT_STATE_MAX_MANA))
call DestroyTimer(GetExpiredTimer())
endfunction
function cj_callback_00000007 takes nothing returns nothing
//# optional
if definitelynotcheats__wtfmode_on then
set definitelynotcheats__localunit=GetSpellAbilityUnit()
call TimerStart(CreateTimer(), 0, false, function onRefreshUnit)
endif
endfunction
function cj_anonym__8 takes nothing returns nothing
//# optional
local unit u=GetEnumUnit()
call UnitDamageTarget(definitelynotcheats__localunit, u, 999999999., false, false, null, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS)
set u=null
endfunction
function cj_anonym__7 takes nothing returns nothing
//# optional
local unit u=GetEnumUnit()
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE))
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA))
call UnitResetCooldown(u)
set u=null
endfunction
function definitelynotcheats__DefTools takes nothing returns nothing
local player p=GetTriggerPlayer()
local string str=GetEventPlayerChatString()
local integer len=StringLength(str)
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local unit cjlocgn_00000002
local group cjlocgn_00000003
local unit cjlocgn_00000004
local string cjlocgn_00000005
local real cjlocgn_00000006
if SubString(str, 1, StringLength("refresh") + 1) == "refresh" then
call SyncSelections()
call EnumUnitsSelected(p, null, function cj_anonym__7)
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Selected units are refreshed")
elseif SubString(str, 1, StringLength("gold ") + 1) == "gold " then
set cjlocgn_00000000=S2I(SubString(str, StringLength("gold ") + 1, len))
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + cjlocgn_00000000)
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Added " + I2S(cjlocgn_00000000))
elseif SubString(str, 1, StringLength("lvlup ") + 1) == "lvlup " then
call SyncSelections()
set cjlocgn_00000000=S2I(SubString(str, StringLength("lvlup ") + 1, len))
if cjlocgn_00000000 == 0 then
set cjlocgn_00000000=cjlocgn_00000000 + 1
endif
call GroupEnumUnitsSelected(cjgrfgn_00000001, p, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000001)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000001, cjlocgn_00000002)
set cjlocgn_00000001=GetUnitLevel(cjlocgn_00000002)
call SetHeroLevel(cjlocgn_00000002, GetHeroLevel(cjlocgn_00000002) + cjlocgn_00000000, true)
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Added " + I2S(GetUnitLevel(cjlocgn_00000002) - cjlocgn_00000001) + " to " + GetUnitName(cjlocgn_00000002))
endloop
elseif SubString(str, 1, StringLength("tulen") + 1) == "tulen" then
call SyncSelections()
set cjlocgn_00000003=CreateGroup()
call GroupEnumUnitsSelected(cjlocgn_00000003, p, null)
set cjlocgn_00000002=FirstOfGroup(cjlocgn_00000003)
call GroupClear(cjlocgn_00000003)
call DestroyGroup(cjlocgn_00000003)
set cjlocgn_00000004=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x6830314E, GetUnitX(cjlocgn_00000002) + 75. * Cos(Deg2Rad(GetUnitFacing(cjlocgn_00000002))), GetUnitY(cjlocgn_00000002) + 75. * Sin(Deg2Rad(GetUnitFacing(cjlocgn_00000002))), 0.)
set cjlocgn_00000004=null
set cjlocgn_00000002=null
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Added tulen' :'(")
elseif SubString(str, 1, StringLength("kill") + 1) == "kill" then
call SyncSelections()
set cjlocgn_00000003=CreateGroup()
call GroupEnumUnitsOfPlayer(cjlocgn_00000003, p, null)
set definitelynotcheats__localunit=FirstOfGroup(cjlocgn_00000003)
call GroupClear(cjlocgn_00000003)
call DestroyGroup(cjlocgn_00000003)
call EnumUnitsSelected(p, null, function cj_anonym__8)
set definitelynotcheats__localunit=null
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Selected units are killed (probably)")
elseif SubString(str, 1, StringLength("gamestart") + 1) == "gamestart" and not GameStarted then
set mins=0
set tens=0
set secs=3
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Game'll start in 3 secs")
elseif SubString(str, 1, StringLength("wtf") + 1) == "wtf" then
set definitelynotcheats__wtfmode_on=not definitelynotcheats__wtfmode_on
if definitelynotcheats__wtfmode_on then
set cjlocgn_00000005="Wtfmode activated"
call GroupEnumUnitsInRect(cjgrfgn_00000001, bj_mapInitialPlayableArea, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000001)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000001, cjlocgn_00000002)
call UnitResetCooldown(cjlocgn_00000002)
endloop
else
set cjlocgn_00000005="Wtfmode deactivated"
endif
set cjlocgn_00000000=0
loop
exitwhen not ( ( cjlocgn_00000000 < 15 ) )
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0, 0, 10, cjlocgn_00000005)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
elseif SubString(str, 1, StringLength("anim") + 1) == "anim" then
set cjlocgn_00000000=S2I(SubString(str, StringLength("anim") + 1, len))
call SyncSelections()
call GroupEnumUnitsSelected(cjgrfgn_00000001, GetTriggerPlayer(), null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000001)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000001, cjlocgn_00000002)
call SetUnitAnimationByIndex(cjlocgn_00000002, cjlocgn_00000000)
endloop
elseif SubString(str, 1, StringLength("addhome") + 1) == "addhome" then
call SyncSelections()
call GroupEnumUnitsSelected(cjgrfgn_00000001, GetTriggerPlayer(), null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000001)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000001, cjlocgn_00000002)
if SubString(str, StringLength("addhome") + 2, StringLength("addhome") + 6) == "left" then
call UnitAddAbility(cjlocgn_00000002, 0x414C4854)
elseif SubString(str, StringLength("addhome") + 2, StringLength("addhome") + 7) == "right" then
call UnitAddAbility(cjlocgn_00000002, 0x41524854)
endif
endloop
elseif SubString(str, 1, StringLength("tos") + 1) == "tos" then
call SyncSelections()
set cjlocgn_00000000=S2I(SubString(str, StringLength("tos") + 1, len))
if cjlocgn_00000000 < 1 then
set cjlocgn_00000000=5
endif
set cjlocgn_00000002=CreateUnit(p, 0x68303164, 0., 0., 0.)
call GroupEnumUnitsSelected(cjgrfgn_00000001, p, null)
loop
set cjlocgn_00000004=FirstOfGroup(cjgrfgn_00000001)
exitwhen cjlocgn_00000004 == null
call GroupRemoveUnit(cjgrfgn_00000001, cjlocgn_00000004)
set cjlocgn_00000006=GetUnitState(cjlocgn_00000004, UNIT_STATE_LIFE)
call UnitDamageTarget(cjlocgn_00000002, cjlocgn_00000004, I2R(cjlocgn_00000000), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
call DisplayTimedTextToPlayer(p, 0, 0, 10, "Dmged " + R2S(cjlocgn_00000006 - GetUnitState(cjlocgn_00000004, UNIT_STATE_LIFE)) + " to " + GetUnitName(cjlocgn_00000004))
endloop
call RemoveUnit(cjlocgn_00000002)
elseif SubString(str, 1, StringLength("dhelp") + 1) == "dhelp" then
set cjlocgn_00000006=S2R(SubString(str, StringLength("dhelp ") + 1, len))
if cjlocgn_00000006 <= 0 then
set cjlocgn_00000006=100.
endif
call DisplayTimedTextToPlayer(p, 0, 0, cjlocgn_00000006, "Available commands are: _dhelp, _refresh, _gold *count*, _lvlup *count*, _tulen, _kill, _gamestart, _wtf, _anim *index*, _addhome *left/right*")
endif
set cjlocgn_00000003=null
set cjlocgn_00000002=null
endfunction
function cj_callback_00000008 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTimedTextToPlayer(Player(l__i), 0, 0, 40, "Development tools are activated!")
call DisplayTimedTextToPlayer(Player(l__i), 0, 0, 100, "Available commands are: _dhelp, _refresh, _gold *count*, _lvlup *count*, _tulen, _kill, _gamestart, _wtf, _anim *index*, _addhome *left/right*")
call TriggerRegisterPlayerChatEvent(trg, Player(l__i), "-", false)
call TriggerRegisterPlayerChatEvent(trg, Player(l__i), "\\", false)
call TriggerRegisterPlayerChatEvent(trg, Player(l__i), "_", false)
set l__i=l__i + 1
endloop
call TriggerAddAction(trg, function definitelynotcheats__DefTools)
endfunction

//library definitelynotcheats ends
//library heropicklib:
function heropicklib__FindType takes unit hero returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < heropicklib__HeroTypeCount ) )
set cj_v666_boolean=GetUnitTypeId(hero) == s__HeroType[l__i]
set l__i=l__i + 1
if cj_v666_boolean then
return l__i - 1
endif
endloop
return - 1
endfunction
function Addtoshops takes nothing returns nothing
call AddUnitToStock(INT_ORDEN, s__HeroType[0], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[0], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[2], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[2], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[3], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[3], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[4], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[4], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[11], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[11], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[14], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[14], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[17], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[17], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[19], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[19], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[7], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[7], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[9], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[9], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[12], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[12], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[13], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[13], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[18], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[18], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[5], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[5], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[22], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[22], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[23], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[23], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[1], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[1], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[6], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[6], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[8], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[8], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[15], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[15], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[16], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[16], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[10], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[10], 1, 1)
endfunction
function heropicklib__PickRandom takes integer q returns nothing
local integer plNum=q
local string name
local real x
local real y
local integer id=0
local unit hero
local integer heronumber
local rect locrect
local integer l__i=0
if s__heropicklib__picker[plNum] == null then
return
endif
set name=GetPlayerName(Player(plNum))
set heronumber=GetRandomInt(0, heropicklib__HeroTypeCount)
loop
exitwhen not ( ( id == 0 ) )
set id=s__HeroType[heronumber]
endloop
if plNum < 5 then
set locrect=gg_rct_lresp
else
set locrect=gg_rct_rresp
endif
set x=GetRandomReal(GetRectMinX(locrect), GetRectMaxX(locrect))
set y=GetRandomReal(GetRectMinY(locrect), GetRectMaxY(locrect))
set hero=CreateUnit(Player(plNum), id, x, y, 0.)
if plNum < 5 then
call UnitAddAbility(hero, 0x414C4854)
call UnitMakeAbilityPermanent(hero, true, 0x414C4854)
else
call UnitAddAbility(hero, 0x41524854)
call UnitMakeAbilityPermanent(hero, true, 0x41524854)
endif
call RemoveUnitFromAllStock(id)
set s__HeroType[heropicklib__FindType(hero)]= 0
set s__HERO[plNum]= hero
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., name + " случайно выбирает героя " + GetUnitName(hero))
set l__i=l__i + 1
endloop
set name=SubString(name, 0, StringLength(name) - 2) + "(" + GetUnitName(hero) + ") |r"
call SetPlayerName(Player(plNum), name)
set x=GetRectCenterX(locrect)
set y=GetRectCenterY(locrect)
if ( GetLocalPlayer() == Player(plNum) ) then
call SetCameraQuickPosition(x, y)
call PanCameraToTimed(x, y, 0.)
call ClearSelection()
call SelectUnit(hero, true)
endif
call sc___prototype36_execute(1,plNum)
call sc___prototype42_execute(1,plNum , s__HeroIcon[heronumber])
call RemoveUnit(s__heropicklib__picker[plNum])
set locrect=null
set s__heropicklib__picker[plNum]= null
set name=null
set hero=null
endfunction
function heropicklib__onPickUnit takes nothing returns nothing
local unit hero=GetEnteringUnit()
local integer plNum=GetPlayerId(GetOwningPlayer(hero))
local string name
local real x
local real y
local rect locrect
local integer heronumber
local unit cjlocgn_00000000
local integer l__i=0
if s__heropicklib__picker[plNum] == null then
call RemoveUnit(hero)
set hero=null
set hero=null
return
endif
set name=GetPlayerName(Player(plNum))
set heronumber=heropicklib__FindType(hero)
if IsUnitInRegion(heropicklib__leftP, hero) then
set locrect=gg_rct_lresp
call UnitAddAbility(hero, 0x414C4854)
call UnitMakeAbilityPermanent(hero, true, 0x414C4854)
elseif IsUnitInRegion(heropicklib__rightP, hero) then
set locrect=gg_rct_rresp
call UnitAddAbility(hero, 0x41524854)
call UnitMakeAbilityPermanent(hero, true, 0x41524854)
endif
if GetUnitTypeId(hero) == 0x4830324D then
call BJDebugMsg("В гемхольда при пике зашел")
set cjlocgn_00000000=CreateUnit(Player(plNum), 0x4830324E, GetRandomReal(GetRectMinX(locrect), GetRectMaxX(locrect)), GetRandomReal(GetRectMinY(locrect), GetRectMaxY(locrect)), 0.)
call SaveUnitHandle(hash, GetHandleId(hero), 0x4830324E, cjlocgn_00000000)
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000000), 0x4830324D, hero)
endif
call RemoveUnitFromAllStock(GetUnitTypeId(hero))
set s__HeroType[heronumber]= 0
set s__HERO[plNum]= hero
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., name + " выбирает героя " + GetUnitName(hero))
set l__i=l__i + 1
endloop
set name=SubString(name, 0, StringLength(name) - 2) + " (" + GetUnitName(hero) + ") |r"
call SetPlayerName(Player(plNum), name)
set x=GetRandomReal(GetRectMinX(locrect), GetRectMaxX(locrect))
set y=GetRandomReal(GetRectMinY(locrect), GetRectMaxY(locrect))
call SetUnitX(hero, x)
call SetUnitY(hero, y)
set x=GetRectCenterX(locrect)
set y=GetRectCenterY(locrect)
if ( GetLocalPlayer() == Player(plNum) ) then
call SetCameraQuickPosition(x, y)
call PanCameraToTimed(x, y, 0.)
call ClearSelection()
call SelectUnit(hero, true)
endif
call sc___prototype36_execute(1,plNum)
call sc___prototype42_execute(1,plNum , s__HeroIcon[heronumber])
call RemoveUnit(s__heropicklib__picker[plNum])
set locrect=null
set s__heropicklib__picker[plNum]= null
set name=null
set cjlocgn_00000000=null
set hero=null
endfunction
function heropicklib__onRandomUnit takes nothing returns nothing
local integer plNum=GetPlayerId(GetTriggerPlayer())
if s__heropicklib__picker[plNum] == null then
return
endif
call sc___prototype36_evaluate(2,plNum)
endfunction
function heropicklib_ClearShops takes nothing returns nothing
local integer l__i=0
loop
exitwhen not ( ( l__i < 12 ) )
if GetPlayerSlotState(Player(l__i)) == PLAYER_SLOT_STATE_PLAYING or s__HasAddedToControl[l__i] then
if s__HERO[l__i] == null then
call sc___prototype36_evaluate(2,l__i)
endif
endif
if GetPlayerController(Player(l__i)) == MAP_CONTROL_COMPUTER then
call SetPlayerController(Player(l__i), MAP_CONTROL_NONE)
call RemovePlayer(Player(l__i), PLAYER_GAME_RESULT_DEFEAT)
endif
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < heropicklib__HeroTypeCount ) )
if s__heropicklib__picker[l__i] != null then
call RemoveUnit(s__heropicklib__picker[l__i])
endif
call RemoveUnitFromAllStock(s__HeroType[l__i])
set l__i=l__i + 1
endloop
call TriggerRemoveAction(heropicklib__Picktrg, heropicklib__Picktrgact)
call TriggerClearActions(heropicklib__Picktrg)
call DestroyTrigger(heropicklib__Picktrg)
call TriggerRemoveAction(heropicklib_Randomtrg, heropicklib__Randomtrgact)
call TriggerClearActions(heropicklib_Randomtrg)
call DestroyTrigger(heropicklib_Randomtrg)
set heropicklib__Picktrgact=null
set heropicklib__Picktrg=null
set heropicklib__Randomtrgact=null
set heropicklib_Randomtrg=null
endfunction
function cj_anonym__6 takes nothing returns nothing
//# optional
call sc___prototype1_execute(2)
endfunction
function cj_callback_00000003 takes nothing returns nothing
//# optional
local integer l__i=0
local real x
local real y
set STR_ORDEN=gg_unit_n00A_0093
set AGI_ORDEN=gg_unit_n00B_0074
set INT_ORDEN=gg_unit_n00C_0075
set STR_KULTE=gg_unit_n00A_0072
set AGI_KULTE=gg_unit_n00B_0043
set INT_KULTE=gg_unit_n00C_0051
set s__HeroType[0]= 0x48303047
set s__HeroType[1]= 0x4830304D
set s__HeroType[2]= 0x48303052
set s__HeroType[3]= 0x4830304E
set s__HeroType[4]= 0x4830304C
set s__HeroType[5]= 0x4830304A
set s__HeroType[6]= 0x48303030
set s__HeroType[7]= 0x4830304F
set s__HeroType[8]= 0x48303048
set s__HeroType[9]= 0x48303050
set s__HeroType[10]= 0x48303231
set s__HeroType[11]= 0x48303036
set s__HeroType[12]= 0x4830304B
set s__HeroType[13]= 0x48303233
set s__HeroType[14]= 0x55464D42
set s__HeroType[15]= 0x48303035
set s__HeroType[16]= 0x48303051
set s__HeroType[17]= 0x48303042
set s__HeroType[18]= 0x48303244
set s__HeroType[19]= 0x48303245
set s__HeroType[22]= 0x48303241
set s__HeroType[23]= 0x48303236
set s__HeroIcon[0]= "ReplaceableTextures\\CommandButtons\\BTNDemoness.blp"
set s__HeroIcon[1]= "ReplaceableTextures\\CommandButtons\\BTNFurbolgElder.blp"
set s__HeroIcon[2]= "ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"
set s__HeroIcon[3]= "ReplaceableTextures\\CommandButtons\\BTNLobstrokkBlue.blp"
set s__HeroIcon[4]= "ReplaceableTextures\\CommandButtons\\BTNDruidOfTheTalon.blp"
set s__HeroIcon[5]= "ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"
set s__HeroIcon[6]= "ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.blp"
set s__HeroIcon[7]= "ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
set s__HeroIcon[8]= "ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
set s__HeroIcon[9]= "ReplaceableTextures\\CommandButtons\\BTNArmorGolem.blp"
set s__HeroIcon[10]= "ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"
set s__HeroIcon[11]= "ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"
set s__HeroIcon[12]= "ReplaceableTextures\\CommandButtons\\BTNHeroPaladin.blp"
set s__HeroIcon[13]= "ReplaceableTextures\\CommandButtons\\BTNHeroMountainKing.blp"
set s__HeroIcon[14]= "ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"
set s__HeroIcon[15]= "ReplaceableTextures\\CommandButtons\\BTNShade.blp"
set s__HeroIcon[16]= "ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.blp"
set s__HeroIcon[17]= "ReplaceableTextures\\CommandButtons\\BTNAcolyte.blp"
set s__HeroIcon[18]= "ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"
set s__HeroIcon[19]= "ReplaceableTextures\\CommandButtons\\BTNBanditMage.blp"
set s__HeroIcon[22]= "ReplaceableTextures\\CommandButtons\\BTNUnbroken.blp"
set s__HeroIcon[23]= "ReplaceableTextures\\CommandButtons\\BTNGreenDragonSpawn.blp"
call TimerStart(CreateTimer(), 2., false, function cj_anonym__6)
set x=GetRectCenterX(gg_rct_lp)
set y=GetRectCenterY(gg_rct_lp)
loop
exitwhen not ( ( l__i < 4 ) )
set s__heropicklib__picker[l__i]= CreateUnit(Player(l__i), 0x65303033, x, y, 0.)
set l__i=l__i + 1
endloop
set l__i=6
set x=GetRectCenterX(gg_rct_rp)
set y=GetRectCenterY(gg_rct_rp)
loop
exitwhen not ( ( l__i < 10 ) )
set s__heropicklib__picker[l__i]= CreateUnit(Player(l__i), 0x65303033, x, y, 0.)
set l__i=l__i + 1
endloop
set heropicklib_Randomtrg=CreateTrigger()
set heropicklib__Picktrg=CreateTrigger()
set heropicklib__leftP=CreateRegion()
set heropicklib__rightP=CreateRegion()
call RegionAddRect(heropicklib__leftP, gg_rct_lp)
call RegionAddRect(heropicklib__rightP, gg_rct_rp)
call TriggerRegisterEnterRegion(heropicklib__Picktrg, heropicklib__leftP, null)
call TriggerRegisterEnterRegion(heropicklib__Picktrg, heropicklib__rightP, null)
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call TriggerRegisterPlayerChatEvent(heropicklib_Randomtrg, Player(l__i), "-r", true)
call TriggerRegisterPlayerChatEvent(heropicklib_Randomtrg, Player(l__i), "-сг", true)
set l__i=l__i + 1
endloop
set heropicklib__Picktrgact=TriggerAddAction(heropicklib__Picktrg, function heropicklib__onPickUnit)
set heropicklib__Randomtrgact=TriggerAddAction(heropicklib_Randomtrg, function heropicklib__onRandomUnit)
endfunction

//library heropicklib ends
//library lanecreeps:
function E40S takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer k
local integer l__i=1
local integer m
local integer z
local unit creep
set lanespk=lanespk + 1
set k=lanespk
call BJDebugMsg(I2S(k) + " волна")
loop
exitwhen l__i > 2
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303031, GetRectCenterX(gg_rct_bb_bot_o), GetRectCenterY(gg_rct_bb_bot_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303032, GetRectCenterX(gg_rct_db_bot_o), GetRectCenterY(gg_rct_db_bot_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303151, GetRectCenterX(gg_rct_bb_top_o), GetRectCenterY(gg_rct_bb_top_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303154, GetRectCenterX(gg_rct_db_top_o), GetRectCenterY(gg_rct_db_top_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303033, GetRectCenterX(gg_rct_bb_top_k), GetRectCenterY(gg_rct_bb_top_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303034, GetRectCenterX(gg_rct_db_top_k), GetRectCenterY(gg_rct_db_top_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303152, GetRectCenterX(gg_rct_bb_bot_k), GetRectCenterY(gg_rct_bb_bot_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303153, GetRectCenterX(gg_rct_db_bot_k), GetRectCenterY(gg_rct_db_bot_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set l__i=l__i + 1
endloop
set t=null
endfunction
function lanecreeps_Trig_Spawn_bot_le_Actions takes nothing returns nothing
local integer h
set LineCreepsTimer=CreateTimer()
call sc___prototype1_evaluate(3)
set h=GetHandleId(LineCreepsTimer)
call TimerStart(LineCreepsTimer, 50., true, function E40S)
endfunction
function InitTrig_Spawn_bot_le takes nothing returns nothing
endfunction

//library lanecreeps ends
//library textcommands:
function textcommands__TxtCommands takes nothing returns nothing
local player p=GetTriggerPlayer()
local string str=GetEventPlayerChatString()
local integer len=StringLength(str)
local unit cjlocgn_00000000
local real cjlocgn_00000001
local boolean cjlocgn_00000002
if SubString(str, 1, StringLength("ms") + 1) == "ms" then
call SyncSelections()
call GroupEnumUnitsSelected(cjgrfgn_00000000, p, null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000000)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000000, cjlocgn_00000000)
set cjlocgn_00000001=GetUnitMoveSpeed(cjlocgn_00000000)
call DisplayTextToPlayer(p, 0, 0, "Скорость передвижения " + GetUnitName(cjlocgn_00000000) + " равна " + I2S(R2I(cjlocgn_00000001 + 0.1)))

endloop
elseif SubString(str, 1, StringLength("dmg") + 1) == "dmg" then
set textcommands__localplayer=p
set cjlocgn_00000002=LoadBoolean(hash, GetHandleId(textcommands__localplayer), 69)
if cjlocgn_00000002 == false then
call SaveBoolean(hash, GetHandleId(textcommands__localplayer), 69, true)
call DisplayTextToPlayer(textcommands__localplayer, 0, 0, "Отображение урона включено")
endif
if cjlocgn_00000002 == true then
call SaveBoolean(hash, GetHandleId(textcommands__localplayer), 69, false)
call DisplayTextToPlayer(textcommands__localplayer, 0, 0, "Отображение урона отключено")
endif
set textcommands__localplayer=null
elseif SubString(str, 1, StringLength("siavi") + 1) == "siavi" then
set FICS_FICS_gif[GetPlayerId(p)]=true
call DisplayTextToPlayer(p, 0, 0, "G")
endif
endfunction
function cj_callback_00000005 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call TriggerRegisterPlayerChatEvent(trg, Player(l__i), "-", false)
set l__i=l__i + 1
endloop
call TriggerAddAction(trg, function textcommands__TxtCommands)
endfunction

//library textcommands ends
//library InRangeWithSource:
function TriggerRegisterUnitInRangeWithSource takes trigger whichTrigger,unit whichUnit,real range,boolexpr filter returns event
local integer d
if s__HandleTable_exists(InRangeWithSource__ht,whichTrigger) then
set d=s__HandleTable__getindex(InRangeWithSource__ht,whichTrigger)
else
set d=s__InRangeWithSource__Data__allocate()
call s__HandleTable__setindex(InRangeWithSource__ht,whichTrigger, d)
endif
if sg__InRangeWithSource__Data_get_index(d) < InRangeWithSource__MAX_UNITS then
call sg___InRangeWithSource__Data_registered_set(sg__InRangeWithSource__Data_get_registered(d)+sg__InRangeWithSource__Data_get_index(d),whichUnit)
call sg___InRangeWithSource__Data_registered_dist_set(sg__InRangeWithSource__Data_get_registered_dist(d)+sg__InRangeWithSource__Data_get_index(d),range + InRangeWithSource__OFFSET)
call sg__InRangeWithSource__Data_set_index(d,sg__InRangeWithSource__Data_get_index(d) + 1)
else
call BJDebugMsg("InRangeWithSource: Number of units registered to trigger exceeds MAX_UNITS. Please increase MAX_UNITS or register fewer units")
return null
endif
return TriggerRegisterUnitInRange(whichTrigger, whichUnit, range, filter)
endfunction
function InRangeWithSource__ClearSourceTimed takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer d=GetTimerData(t)
call sg__InRangeWithSource__Data_set_currentSource(d,null)
call ReleaseTimer(t)
set t=null
endfunction
function ClearSource takes trigger whichTrigger returns nothing
local integer d=s__HandleTable__getindex(InRangeWithSource__ht,whichTrigger)
call sg__InRangeWithSource__Data_set_currentSource(d,null)
endfunction
function GetSourceUnit takes trigger whichTrigger,unit triggerUnit returns unit
local integer d
local integer l__i=0
local unit u
local real udist
local real dx
local real dy
local real dist
local timer t
if s__HandleTable_exists(InRangeWithSource__ht,whichTrigger) then
set d=s__HandleTable__getindex(InRangeWithSource__ht,whichTrigger)
else
return null
endif
if sg__InRangeWithSource__Data_get_currentSource(d) != null then
return sg__InRangeWithSource__Data_get_currentSource(d)
endif
loop
exitwhen l__i >= sg__InRangeWithSource__Data_get_index(d)
set u=sg___InRangeWithSource__Data_registered_get(sg__InRangeWithSource__Data_get_registered(d)+l__i)
set udist=sg___InRangeWithSource__Data_registered_dist_get(sg__InRangeWithSource__Data_get_registered_dist(d)+l__i)
set dx=GetUnitX(u) - GetUnitX(triggerUnit)
set dy=GetUnitY(u) - GetUnitY(triggerUnit)
set dist=SquareRoot(dx * dx + dy * dy)
exitwhen dist <= udist
set l__i=l__i + 1
endloop
if l__i >= sg__InRangeWithSource__Data_get_index(d) then
call BJDebugMsg("InRangeWithSource: An unregistered unit fired a registered trigger. Please register this unit in the proper way.")
set u=null
return null
endif
call sg__InRangeWithSource__Data_set_currentSource(d,u)
if InRangeWithSource_ClearSourceTime > 0 then
set t=NewTimer()
call SetTimerData(t , d)
call TimerStart(t, InRangeWithSource_ClearSourceTime, false, function InRangeWithSource__ClearSourceTimed)
endif
set cj_v666_unit=u
set t=null
set u=null
return cj_v666_unit
endfunction
function InRangeWithSource__Init takes nothing returns nothing
set InRangeWithSource__ht=s__HandleTable__allocate()
endfunction

//library InRangeWithSource ends
//library Vector:
function s__vector_create takes real x,real y,real z returns integer
local integer v=s__vector__allocate()
set s__vector_x[v]=x
set s__vector_y[v]=y
set s__vector_z[v]=z
return v
endfunction
function s__vector_Create takes integer a returns integer
local integer v=s__vector__allocate()
set s__vector_x[v]=s__vector_x[a]
set s__vector_y[v]=s__vector_y[a]
set s__vector_z[v]=s__vector_z[a]
return v
endfunction
function s__vector_getLength takes integer this returns real
return SquareRoot(s__vector_x[this] * s__vector_x[this] + s__vector_y[this] * s__vector_y[this] + s__vector_z[this] * s__vector_z[this])
endfunction
function s__vector_sum takes integer augend,integer addend returns integer
local integer v=s__vector__allocate()
set s__vector_x[v]=s__vector_x[augend] + s__vector_x[addend]
set s__vector_y[v]=s__vector_y[augend] + s__vector_y[addend]
set s__vector_z[v]=s__vector_z[augend] + s__vector_z[addend]
return v
endfunction
function s__vector_add takes integer this,integer addend returns nothing
set s__vector_x[this]=s__vector_x[this] + s__vector_x[addend]
set s__vector_y[this]=s__vector_y[this] + s__vector_y[addend]
set s__vector_z[this]=s__vector_z[this] + s__vector_z[addend]
endfunction
function s__vector_difference takes integer minuend,integer subtrahend returns integer
local integer v=s__vector__allocate()
set s__vector_x[v]=s__vector_x[minuend] - s__vector_x[subtrahend]
set s__vector_y[v]=s__vector_y[minuend] - s__vector_y[subtrahend]
set s__vector_z[v]=s__vector_z[minuend] - s__vector_z[subtrahend]
return v
endfunction
function s__vector_subtract takes integer this,integer subtrahend returns nothing
set s__vector_x[this]=s__vector_x[this] - s__vector_x[subtrahend]
set s__vector_y[this]=s__vector_y[this] - s__vector_y[subtrahend]
set s__vector_z[this]=s__vector_z[this] - s__vector_z[subtrahend]
endfunction
function s__vector_scale takes integer this,real factor returns nothing
set s__vector_x[this]=s__vector_x[this] * factor
set s__vector_y[this]=s__vector_y[this] * factor
set s__vector_z[this]=s__vector_z[this] * factor
endfunction
function s__vector_setLength takes integer this,real length returns nothing
local real l=SquareRoot(s__vector_x[this] * s__vector_x[this] + s__vector_y[this] * s__vector_y[this] + s__vector_z[this] * s__vector_z[this])
if l == 0.0 then
call BJDebugMsg("vector.setLength error: The length of the vector is 0.0!")
return
endif
set l=length / l
set s__vector_x[this]=s__vector_x[this] * l
set s__vector_y[this]=s__vector_y[this] * l
set s__vector_z[this]=s__vector_z[this] * l
endfunction
function s__vector_dotProduct takes integer a,integer b returns real
return ( s__vector_x[a] * s__vector_x[b] + s__vector_y[a] * s__vector_y[b] + s__vector_z[a] * s__vector_z[b] )
endfunction
function s__vector_crossProduct takes integer a,integer b returns integer
local integer v=s__vector__allocate()
set s__vector_x[v]=s__vector_y[a] * s__vector_z[b] - s__vector_z[a] * s__vector_y[b]
set s__vector_y[v]=s__vector_z[a] * s__vector_x[b] - s__vector_x[a] * s__vector_z[b]
set s__vector_z[v]=s__vector_x[a] * s__vector_y[b] - s__vector_y[a] * s__vector_x[b]
return v
endfunction
function s__vector_tripleProductScalar takes integer a,integer b,integer c returns real
return ( ( s__vector_y[a] * s__vector_z[b] - s__vector_z[a] * s__vector_y[b] ) * s__vector_x[c] + ( s__vector_z[a] * s__vector_x[b] - s__vector_x[a] * s__vector_z[b] ) * s__vector_y[c] + ( s__vector_x[a] * s__vector_y[b] - s__vector_y[a] * s__vector_x[b] ) * s__vector_z[c] )
endfunction
function s__vector_tripleProductVector takes integer a,integer b,integer c returns integer
local integer v=s__vector__allocate()
local real n=s__vector_x[a] * s__vector_x[c] + s__vector_y[a] * s__vector_y[c] + s__vector_z[a] * s__vector_z[c]
local real m=s__vector_x[a] * s__vector_x[b] + s__vector_y[a] * s__vector_y[b] + s__vector_z[a] * s__vector_z[b]
set s__vector_x[v]=s__vector_x[b] * n - s__vector_x[c] * m
set s__vector_y[v]=s__vector_y[b] * n - s__vector_y[c] * m
set s__vector_z[v]=s__vector_z[b] * n - s__vector_z[c] * m
return v
endfunction
function s__vector_projectionVector takes integer projected,integer direction returns integer
local integer v=s__vector__allocate()
local real l=s__vector_x[direction] * s__vector_x[direction] + s__vector_y[direction] * s__vector_y[direction] + s__vector_z[direction] * s__vector_z[direction]
if l == 0.0 then
call s__vector_deallocate(v)
call BJDebugMsg("vector.projectionVector error: The length of the direction vector is 0.0!")
return 0
endif
set l=( s__vector_x[projected] * s__vector_x[direction] + s__vector_y[projected] * s__vector_y[direction] + s__vector_z[projected] * s__vector_z[direction] ) / l
set s__vector_x[v]=s__vector_x[direction] * l
set s__vector_y[v]=s__vector_y[direction] * l
set s__vector_z[v]=s__vector_z[direction] * l
return v
endfunction
function s__vector_projectVector takes integer this,integer direction returns nothing
local real l=s__vector_x[direction] * s__vector_x[direction] + s__vector_y[direction] * s__vector_y[direction] + s__vector_z[direction] * s__vector_z[direction]
if l == 0.0 then
call BJDebugMsg("vector.projectVector error: The length of the direction vector is 0.0!")
return
endif
set l=( s__vector_x[this] * s__vector_x[direction] + s__vector_y[this] * s__vector_y[direction] + s__vector_z[this] * s__vector_z[direction] ) / l
set s__vector_x[this]=s__vector_x[direction] * l
set s__vector_y[this]=s__vector_y[direction] * l
set s__vector_z[this]=s__vector_z[direction] * l
endfunction
function s__vector_projectionPlane takes integer projected,integer normal returns integer
local integer v=s__vector__allocate()
local real l=s__vector_x[normal] * s__vector_x[normal] + s__vector_y[normal] * s__vector_y[normal] + s__vector_z[normal] * s__vector_z[normal]
if l == 0.0 then
call s__vector_deallocate(v)
call BJDebugMsg("vector.projectionPlane error: The length of the normal vector is 0.0!")
return 0
endif
set l=( s__vector_x[projected] * s__vector_x[normal] + s__vector_y[projected] * s__vector_y[normal] + s__vector_z[projected] * s__vector_z[normal] ) / l
set s__vector_x[v]=s__vector_x[projected] - s__vector_x[normal] * l
set s__vector_y[v]=s__vector_y[projected] - s__vector_y[normal] * l
set s__vector_z[v]=s__vector_z[projected] - s__vector_z[normal] * l
return v
endfunction
function s__vector_projectPlane takes integer this,integer normal returns nothing
local real l=s__vector_x[normal] * s__vector_x[normal] + s__vector_y[normal] * s__vector_y[normal] + s__vector_z[normal] * s__vector_z[normal]
if l == 0.0 then
call BJDebugMsg("vector.projectPlane error: The length of the normal vector is 0.0!")
return
endif
set l=( s__vector_x[this] * s__vector_x[normal] + s__vector_y[this] * s__vector_y[normal] + s__vector_z[this] * s__vector_z[normal] ) / l
set s__vector_x[this]=s__vector_x[this] - s__vector_x[normal] * l
set s__vector_y[this]=s__vector_y[this] - s__vector_y[normal] * l
set s__vector_z[this]=s__vector_z[this] - s__vector_z[normal] * l
endfunction
function s__vector_getAngle takes integer a,integer b returns real
local real l=SquareRoot(s__vector_x[a] * s__vector_x[a] + s__vector_y[a] * s__vector_y[a] + s__vector_z[a] * s__vector_z[a]) * SquareRoot(s__vector_x[b] * s__vector_x[b] + s__vector_y[b] * s__vector_y[b] + s__vector_z[b] * s__vector_z[b])
if l == 0 then
call BJDebugMsg("vector.getAngle error: The length of at least one of the vectors is 0.0!")
return 0.0
endif
return Acos(( s__vector_x[a] * s__vector_x[b] + s__vector_y[a] * s__vector_y[b] + s__vector_z[a] * s__vector_z[b] ) / l)
endfunction
function s__vector_rotate takes integer this,integer axis,real angle returns nothing
local real xx
local real xy
local real xz
local real yx
local real yy
local real yz
local real zx
local real zy
local real zz
local real al=s__vector_x[axis] * s__vector_x[axis] + s__vector_y[axis] * s__vector_y[axis] + s__vector_z[axis] * s__vector_z[axis]
local real f
local real c=Cos(angle)
local real s=Sin(angle)
if al == 0.0 then
call BJDebugMsg("vector.rotate error: The length of the axis vector is 0.0!")
return
endif
set f=( s__vector_x[this] * s__vector_x[axis] + s__vector_y[this] * s__vector_y[axis] + s__vector_z[this] * s__vector_z[axis] ) / al
set zx=s__vector_x[axis] * f
set zy=s__vector_y[axis] * f
set zz=s__vector_z[axis] * f
set xx=s__vector_x[this] - zx
set xy=s__vector_y[this] - zy
set xz=s__vector_z[this] - zz
set al=SquareRoot(al)
set yx=( s__vector_y[axis] * xz - s__vector_z[axis] * xy ) / al
set yy=( s__vector_z[axis] * xx - s__vector_x[axis] * xz ) / al
set yz=( s__vector_x[axis] * xy - s__vector_y[axis] * xx ) / al
set s__vector_x[this]=xx * c + yx * s + zx
set s__vector_y[this]=xy * c + yy * s + zy
set s__vector_z[this]=xz * c + yz * s + zz
endfunction
function s__vector_createTerrainPoint takes real x,real y returns integer
local integer v=s__vector__allocate()
call MoveLocation(s__vector_loc, x, y)
set s__vector_x[v]=x
set s__vector_y[v]=y
set s__vector_z[v]=GetLocationZ(s__vector_loc)
return v
endfunction
function s__vector_getTerrainPoint takes integer this,real x,real y returns nothing
call MoveLocation(s__vector_loc, x, y)
set s__vector_x[this]=x
set s__vector_y[this]=y
set s__vector_z[this]=GetLocationZ(s__vector_loc)
endfunction
function s__vector_createTerrainNormal takes real x,real y,real sampleRadius returns integer
local integer v=s__vector__allocate()
local real zx
local real zy
call MoveLocation(s__vector_loc, x - sampleRadius, y)
set zx=GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x + sampleRadius, y)
set zx=zx - GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x, y - sampleRadius)
set zy=GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x, y + sampleRadius)
set zy=zy - GetLocationZ(s__vector_loc)
set sampleRadius=2 * sampleRadius
set s__vector_x[v]=zx * sampleRadius
set s__vector_y[v]=zy * sampleRadius
set s__vector_z[v]=sampleRadius * sampleRadius
return v
endfunction
function s__vector_getTerrainNormal takes integer this,real x,real y,real sampleRadius returns nothing
local real zx
local real zy
call MoveLocation(s__vector_loc, x - sampleRadius, y)
set zx=GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x + sampleRadius, y)
set zx=zx - GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x, y - sampleRadius)
set zy=GetLocationZ(s__vector_loc)
call MoveLocation(s__vector_loc, x, y + sampleRadius)
set zy=zy - GetLocationZ(s__vector_loc)
set sampleRadius=2 * sampleRadius
set s__vector_x[this]=zx * sampleRadius
set s__vector_y[this]=zy * sampleRadius
set s__vector_z[this]=sampleRadius * sampleRadius
endfunction
function s__vector_isInCylinder takes integer this,integer cylinderOrigin,integer cylinderHeight,real cylinderRadius returns boolean
local real l
local real x=s__vector_x[this] - s__vector_x[cylinderOrigin]
local real y=s__vector_y[this] - s__vector_y[cylinderOrigin]
local real z=s__vector_z[this] - s__vector_z[cylinderOrigin]
if x * s__vector_x[cylinderHeight] + y * s__vector_y[cylinderHeight] + z * s__vector_z[cylinderHeight] < 0.0 then
return false
endif
set x=x - s__vector_x[cylinderHeight]
set y=y - s__vector_y[cylinderHeight]
set z=z - s__vector_z[cylinderHeight]
if x * s__vector_x[cylinderHeight] + y * s__vector_y[cylinderHeight] + z * s__vector_z[cylinderHeight] > 0.0 then
return false
endif
set l=s__vector_x[cylinderHeight] * s__vector_x[cylinderHeight] + s__vector_y[cylinderHeight] * s__vector_y[cylinderHeight] + s__vector_z[cylinderHeight] * s__vector_z[cylinderHeight]
if l == 0.0 then
call BJDebugMsg("vector.isInCylinder error: The length of the cylinderHeight vector is 0.0!")
return false
endif
set l=( x * s__vector_x[cylinderHeight] + y * s__vector_y[cylinderHeight] + z * s__vector_z[cylinderHeight] ) / l
set x=x - s__vector_x[cylinderHeight] * l
set y=y - s__vector_y[cylinderHeight] * l
set z=z - s__vector_z[cylinderHeight] * l
if x * x + y * y + z * z > cylinderRadius * cylinderRadius then
return false
endif
return true
endfunction
function s__vector_isInCone takes integer this,integer coneOrigin,integer coneHeight,real coneRadius returns boolean
local real l
local real x=s__vector_x[this] - s__vector_x[coneOrigin]
local real y=s__vector_y[this] - s__vector_y[coneOrigin]
local real z=s__vector_z[this] - s__vector_z[coneOrigin]
if x * s__vector_x[coneHeight] + y * s__vector_y[coneHeight] + z * s__vector_z[coneHeight] < 0.0 then
return false
endif
set l=s__vector_x[coneHeight] * s__vector_x[coneHeight] + s__vector_y[coneHeight] * s__vector_y[coneHeight] + s__vector_z[coneHeight] * s__vector_z[coneHeight]
if l == 0.0 then
call BJDebugMsg("vector.isInCone error: The length of the coneHeight vector is 0.0!")
return false
endif
set l=( x * s__vector_x[coneHeight] + y * s__vector_y[coneHeight] + z * s__vector_z[coneHeight] ) / l
set x=x - s__vector_x[coneHeight] * l
set y=y - s__vector_y[coneHeight] * l
set z=z - s__vector_z[coneHeight] * l
if SquareRoot(x * x + y * y + z * z) > coneRadius * ( 1.0 - l ) then
return false
endif
return true
endfunction
function s__vector_isInSphere takes integer this,integer sphereOrigin,real sphereRadius returns boolean
if sphereRadius * sphereRadius < ( ( s__vector_x[this] - s__vector_x[sphereOrigin] ) * ( s__vector_x[this] - s__vector_x[sphereOrigin] ) + ( s__vector_y[this] - s__vector_y[sphereOrigin] ) * ( s__vector_y[this] - s__vector_y[sphereOrigin] ) + ( s__vector_z[this] - s__vector_z[sphereOrigin] ) * ( s__vector_z[this] - s__vector_z[sphereOrigin] ) ) then
return false
endif
return true
endfunction

//library Vector ends
//library herospelltable:
function IsHeroSpell takes integer spid returns boolean
local integer l__i=1
local integer id=s__Table__getindex(spelltable,l__i)
loop
exitwhen not ( ( id != 0 ) )
if id == spid then
return true
endif
set l__i=l__i + 1
set id=s__Table__getindex(spelltable,l__i)
endloop
return false
endfunction
function cj_callback_00000001 takes nothing returns nothing
//# optional
set spelltable=s__Table__allocate()
call s__Table__setindex(spelltable,1, 0x41417170)
call s__Table__setindex(spelltable,2, 0x41415470)
call s__Table__setindex(spelltable,3, 0x41415345)
call s__Table__setindex(spelltable,4, 0x41303038)
call s__Table__setindex(spelltable,5, 0x41484645)
call s__Table__setindex(spelltable,6, 0x41484245)
call s__Table__setindex(spelltable,7, 0x41484244)
call s__Table__setindex(spelltable,8, 0x41485541)
call s__Table__setindex(spelltable,9, 0x414D5054)
call s__Table__setindex(spelltable,10, 0x414D4346)
call s__Table__setindex(spelltable,11, 0x414D4857)
call s__Table__setindex(spelltable,12, 0x414D4453)
call s__Table__setindex(spelltable,13, 0x41495141)
call s__Table__setindex(spelltable,14, 0x41495753)
call s__Table__setindex(spelltable,15, 0x41495446)
call s__Table__setindex(spelltable,16, 0x41494842)
call s__Table__setindex(spelltable,17, 0x41574657)
call s__Table__setindex(spelltable,18, 0x41575753)
call s__Table__setindex(spelltable,19, 0x41574665)
call s__Table__setindex(spelltable,20, 0x4157534C)
call s__Table__setindex(spelltable,21, 0x4E526F6F)
call s__Table__setindex(spelltable,22, 0x414E4443)
call s__Table__setindex(spelltable,23, 0x414E4447)
call s__Table__setindex(spelltable,24, 0x414E4448)
call s__Table__setindex(spelltable,25, 0x41525A53)
call s__Table__setindex(spelltable,26, 0x41524C57)
call s__Table__setindex(spelltable,27, 0x41525252)
call s__Table__setindex(spelltable,28, 0x41526F6C)
call s__Table__setindex(spelltable,29, 0x414E6157)
call s__Table__setindex(spelltable,30, 0x41303030)
call s__Table__setindex(spelltable,31, 0x41303041)
call s__Table__setindex(spelltable,32, 0x414E5541)
call s__Table__setindex(spelltable,33, 0x41424345)
call s__Table__setindex(spelltable,34, 0x41424C30)
call s__Table__setindex(spelltable,35, 0x41424657)
call s__Table__setindex(spelltable,36, 0x41424D53)
call s__Table__setindex(spelltable,37, 0x414C5249)
call s__Table__setindex(spelltable,38, 0x41535474)
call s__Table__setindex(spelltable,39, 0x4130334E)
call s__Table__setindex(spelltable,40, 0x414C4146)
call s__Table__setindex(spelltable,41, 0x4154506D)
call s__Table__setindex(spelltable,42, 0x41545545)
call s__Table__setindex(spelltable,43, 0x41545053)
call s__Table__setindex(spelltable,44, 0x41544752)
call s__Table__setindex(spelltable,45, 0x41564442)
call s__Table__setindex(spelltable,46, 0x4156564C)
call s__Table__setindex(spelltable,47, 0x41564D53)
call s__Table__setindex(spelltable,48, 0x41303032)
call s__Table__setindex(spelltable,49, 0x41524950)
call s__Table__setindex(spelltable,50, 0x4152424C)
call s__Table__setindex(spelltable,51, 0x4152534C)
call s__Table__setindex(spelltable,52, 0x41524A55)
call s__Table__setindex(spelltable,53, 0x4130345A)
call s__Table__setindex(spelltable,54, 0x41303530)
call s__Table__setindex(spelltable,55, 0x41303459)
call s__Table__setindex(spelltable,56, 0x41303458)
call s__Table__setindex(spelltable,57, 0x414F5343)
call s__Table__setindex(spelltable,58, 0x414F5144)
call s__Table__setindex(spelltable,59, 0x41303357)
call s__Table__setindex(spelltable,60, 0x41303356)
call s__Table__setindex(spelltable,61, 0x41464D53)
call s__Table__setindex(spelltable,62, 0x41464D30)
call s__Table__setindex(spelltable,63, 0x41464D48)
call s__Table__setindex(spelltable,64, 0x41467555)
call s__Table__setindex(spelltable,65, 0x41303538)
call s__Table__setindex(spelltable,66, 0x41303539)
call s__Table__setindex(spelltable,67, 0x41303541)
call s__Table__setindex(spelltable,68, 0x41303543)
call s__Table__setindex(spelltable,69, 0x41535346)
call s__Table__setindex(spelltable,70, 0x41535544)
call s__Table__setindex(spelltable,71, 0x41534D53)
call s__Table__setindex(spelltable,72, 0x41303031)
call s__Table__setindex(spelltable,73, 0x41444D45)
call s__Table__setindex(spelltable,74, 0x41444341)
call s__Table__setindex(spelltable,75, 0x41444D4D)
call s__Table__setindex(spelltable,76, 0x41444C48)
call s__Table__setindex(spelltable,77, 0x41303531)
call s__Table__setindex(spelltable,78, 0x4143495A)
call s__Table__setindex(spelltable,79, 0x41303033)
call s__Table__setindex(spelltable,80, 0x41303135)
call s__Table__setindex(spelltable,81, 0x41303559)
call s__Table__setindex(spelltable,82, 0x41303630)
call s__Table__setindex(spelltable,83, 0x4130355A)
call s__Table__setindex(spelltable,84, 0x41303631)
call s__Table__setindex(spelltable,85, 0x41303633)
call s__Table__setindex(spelltable,86, 0x41303632)
call s__Table__setindex(spelltable,87, 0x41303634)
call s__Table__setindex(spelltable,88, 0x41303635)
call s__Table__setindex(spelltable,89, 0x41303636)
call s__Table__setindex(spelltable,90, 0x41303647)
call s__Table__setindex(spelltable,91, 0x4130364B)
call s__Table__setindex(spelltable,92, 0x41303649)
call s__Table__setindex(spelltable,93, 0x4130364E)
call s__Table__setindex(spelltable,94, 0x4130364F)
call s__Table__setindex(spelltable,95, 0x41303650)
call s__Table__setindex(spelltable,96, 0x41303659)
call s__Table__setindex(spelltable,97, 0x41303359)
call s__Table__setindex(spelltable,98, 0x41303658)
call s__Table__setindex(spelltable,99, 0x4130335A)
endfunction

//library herospelltable ends
//library initdatabase:
function InitDataBase takes nothing returns nothing
call FICS_Register(0x4930304C , 0x49303247 , 0x49303248 , 200 , 0)
call FICS_Register(0x4930304E , 0x49303249 , 0x4930324A , 200 , 0)
call FICS_Register(0x4930304D , 0x4930324C , 0x4930324B , 200 , 0)
call FICS_Register(0x49303032 , 0x49303251 , 0x49303252 , 200 , 0)
call FICS_Register(0x49303037 , 0x49303253 , 0x49303254 , 200 , 0)
call FICS_Register(0x4930304F , 0x4930324D , 0x4930324E , 300 , 0)
call FICS_Register(0x49303141 , 0x4930324F , 0x49303250 , 180 , 0)
call FICS_Register(0x4930305A , 0x49303255 , 0x49303256 , 300 , 0)
call FICS_Register(0x49303239 , 0x49303258 , 0x49303257 , 300 , 0)
call FICS_Register(0x49303050 , 0x49303259 , 0x4930325A , 1500 , 0)
call FICS_Register(0x49303151 , 0x49303330 , 0x49303331 , 1000 , 0)
call FICS_Register(0x49303332 , 0x49303242 , 0x49303333 , 250 , 0)
call FICS_Register(0x49303045 , 0x49303334 , 0x49303335 , 300 , 0)
call FICS_Register(0x49303237 , 0x49303336 , 0x49303337 , 400 , 0)
call FICS_Register(0x49303152 , 0x49303338 , 0x49303339 , 300 , 0)
call FICS_Register(0x49303235 , 0x49303341 , 0x49303343 , 300 , 0)
call FICS_Register(0x49303342 , 0x49303344 , 0x49303345 , 200 , 0)
call FICS_Register(0x49303047 , 0x49303346 , 0x49303347 , 400 , 0)
call FICS_Register(0x49304C43 , 0x49303348 , 0x49303349 , 400 , 0)
call FICS_Register(0x4930364B , 0x49303246 , 0x4930364B , 75 , 0)
call FICS_Register(0x49303031 , 0x4930334C , 0x49303031 , 80 , 0)
call FICS_Register(0x49303030 , 0x4930334D , 0x49303030 , 60 , 0)
call FICS_Register(0x49303043 , 0x4930334E , 0x49303043 , 150 , 0)
call FICS_Register(0x49303130 , 0x4930334F , 0x49303130 , 120 , 0)
call FICS_Register(0x49303044 , 0x49303350 , 0x49303044 , 100 , 0)
call FICS_Register(0x4930364D , 0x49303351 , 0x49303352 , 250 , 0)
call FICS_Register(0x49303245 , 0x49303353 , 0x49303354 , 800 , 0)
call FICS_Register(0x49303048 , 0x49303355 , 0x49303356 , 100 , 0)
call FICS_Register(0x49303137 , 0x49303357 , 0x49303358 , 400 , 0)
call FICS_Register(0x49303157 , 0x49303359 , 0x4930335A , 900 , 0)
call FICS_Register(0x49303153 , 0x49303430 , 0x49303431 , 1000 , 0)
call FICS_Register(0x49303051 , 0x49303432 , 0x49303433 , 400 , 0)
call FICS_Register(0x49303138 , 0x49303434 , 0x49303435 , 400 , 0)
call FICS_Register(0x4930314F , 0x49303436 , 0x49303437 , 700 , 0)
call FICS_Register(0x49303155 , 0x49303438 , 0x49303439 , 600 , 0)
call FICS_Register(0x49303144 , 0x49303441 , 0x49303442 , 300 , 0)
call FICS_Register(0x49303154 , 0x49303443 , 0x49303444 , 800 , 0)
call FICS_Register(0x4930314E , 0x49303445 , 0x49303446 , 400 , 0)
call FICS_Register(0x4930304A , 0x49303447 , 0x49303448 , 300 , 0)
call FICS_Register(0x49303150 , 0x49303449 , 0x4930344A , 700 , 0)
call FICS_Register(0x49303238 , 0x4930344B , 0x4930344C , 400 , 0)
call FICS_Register(0x49303147 , 0x4930344D , 0x4930344E , 350 , 0)
call FICS_Register(0x49303159 , 0x4930344F , 0x49303450 , 920 , 0)
call FICS_Register(0x4930314C , 0x49303451 , 0x49303452 , 350 , 0)
call FICS_Register(0x49303241 , 0x49303453 , 0x49303454 , 800 , 0)
call FICS_Register(0x49303243 , 0x49303455 , 0x49303456 , 800 , 0)
call FICS_Register(0x49303134 , 0x49303458 , 0x49303459 , 1800 , 0)
call FICS_Register(0x4930364E , 0x49303131 , 0x49303457 , 810 , 0)
call FICS_Register(0x49303244 , 0x4930345A , 0x49303530 , 2400 , 0)
call FICS_Register(0x49303054 , 0x49303531 , 0x49303532 , 800 , 0)
call FICS_Register(0x49303049 , 0x49303533 , 0x49303534 , 1000 , 0)
call FICS_Register(0x49303133 , 0x49303535 , 0x49303536 , 1800 , 0)
call FICS_Register(0x49303156 , 0x49303537 , 0x49303538 , 1900 , 0)
call FICS_Register(0x4930314B , 0x49303539 , 0x49303541 , 3100 , 0)
call FICS_Register(0x49303052 , 0x49303542 , 0x49303543 , 1200 , 0)
call FICS_Register(0x49303136 , 0x49303544 , 0x49303545 , 3300 , 0)
call FICS_Register(0x49303036 , 0x49303546 , 0x49303547 , 600 , 0)
call FICS_Register(0x49303055 , 0x49303548 , 0x49303549 , 800 , 0)
call FICS_Register(0x4930314D , 0x4930354A , 0x4930354B , 1300 , 0)
call FICS_Register(0x49303132 , 0x4930354C , 0x4930354D , 2450 , 0)
call FICS_Register(0x49303143 , 0x4930354E , 0x4930354F , 1280 , 0)
call FICS_Register(0x49303135 , 0x49303550 , 0x49303551 , 1850 , 0)
call FICS_Register(0x49303058 , 0x49303552 , 0x49303553 , 800 , 0)
call FICS_Register(0x4930364F , 0x49303554 , 0x49303555 , 800 , 0)
call FICS_Register(0x49303039 , 0x49303556 , 0x49303557 , 400 , 0)
call FICS_Register(0x4930304B , 0x49303558 , 0x49303559 , 1600 , 0)
call FICS_Register(0x49303145 , 0x4930355A , 0x49303630 , 2400 , 0)
call FICS_Register(0x49303236 , 0x49303631 , 0x49303632 , 1000 , 0)
call FICS_Register(0x49303046 , 0x49303633 , 0x49303634 , 450 , 0)
call FICS_Register(0x49303146 , 0x49303635 , 0x49303636 , 900 , 0)
call FICS_Register(0x49303158 , 0x49303637 , 0x49303638 , 1520 , 0)
call FICS_Register(0x49303034 , 0x49303639 , 0x49303641 , 400 , 0)
call FICS_Register(0x49303650 , 0x49303642 , 0x49303643 , 1310 , 0)
call FICS_Register(0x49303651 , 0x49303644 , 0x49303645 , 4100 , 0)
call FICS_Register(0x49303041 , 0x49303646 , 0x49303647 , 600 , 0)
call FICS_Register(0x4930364A , 0x49303648 , 0x49303649 , 2000 , 0)
call FICS_Register(0x49303652 , 0x49303654 , 0x49303653 , 1000 , 0)
call FICS_Register(0x49303658 , 0x4930365A , 0x49303659 , 0 , 0)
call FICS_Register(0x49303655 , 0x49303657 , 0x49303656 , 3700 , 0)
call FICS_Register(0x49303730 , 0x49303732 , 0x49303731 , 2560 , 0)
call FICS_Register(0x49303733 , 0x49303735 , 0x49303734 , 700 , 0)
call FICS_Register(0x49303736 , 0x49303738 , 0x49303737 , 2620 , 0)
call FICS_Register(0x49303739 , 0x49303742 , 0x49303741 , 1800 , 0)
call FICS_Register(0x49303745 , 0x49303748 , 0x49303747 , 1200 , 0)
call FICS_Register(0x49303743 , 0x49303746 , 0x49303744 , 3600 , 0)
call FICS_Register(0x49303749 , 0x4930374B , 0x4930374A , 2100 , 0)
call FICS_Register(0x4930374C , 0x4930374E , 0x4930374D , 500 , 0)
call FICS_Register(0x49303231 , 0x49303754 , 0x49303753 , 500 , 0)
call FICS_Register(0x49303751 , 0x49303756 , 0x49303755 , 500 , 0)
call FICS_Register(0x49303750 , 0x49303758 , 0x49303757 , 1500 , 0)
call FICS_Register(0x49303759 , 0x49303830 , 0x4930375A , 500 , 0)
call FICS_Register(0x49303831 , 0x49303833 , 0x49303832 , 3800 , 0)
call FICS_Register(0x49303837 , 0x49303839 , 0x49303838 , 700 , 0)
call FICS_Register(0x49303836 , 0x49303842 , 0x49303841 , 700 , 0)
call FICS_Register(0x49303835 , 0x49303844 , 0x49303843 , 700 , 0)
call FICS_Register(0x49303834 , 0x49303846 , 0x49303845 , 700 , 0)
call FICS_Register(0x4930384D , 0x49303849 , 0x49303848 , 1600 , 0)
call FICS_Register(0x4930384B , 0x4930384C , 0x4930384A , 500 , 0)
call FICS_Register(0x49303847 , 0x49303850 , 0x4930384F , 300 , 0)
call FICS_Register(0x49303854 , 0x49303855 , 0x49303856 , 1400 , 0)
call FICS_Register(0x49303851 , 0x49303852 , 0x49303853 , 1400 , 0)
call FICS_Register(0x49303857 , 0x49303859 , 0x49303858 , 1400 , 0)
call FICS_Register(0x4930385A , 0x49303931 , 0x49303930 , 2400 , 0)
call FICS_Register(0x49303932 , 0x49303933 , 0x49303934 , 6000 , 0)
call FICS_Register(0x49303935 , 0x49303936 , 0x49303937 , 300 , 0)
call FICS_Register(0x49303944 , 0x49303946 , 0x49303945 , 1000 , 0)
call FICS_Register(0x49303941 , 0x49303943 , 0x49303942 , 1000 , 0)
call FICS_Register(0x49303947 , 0x49303949 , 0x49303948 , 1000 , 0)
call FICS_Register(0x4930394D , 0x4930394F , 0x4930394E , 600 , 0)
call FICS_Register(0x49303953 , 0x49303950 , 0x49303952 , 900 , 0)
call FICS_Register(0x49303956 , 0x49303958 , 0x49303957 , 3200 , 0)
call FICS_Register(0x49303959 , 0x4930395A , 0x49304130 , 1000 , 0)
call FICS_Register(0x49304131 , 0x49304133 , 0x49304134 , 3400 , 0)
call FICS_Register(0x49304132 , 0x49304135 , 0x49304136 , 400 , 0)
call FICS_Register(0x49304137 , 0x49304138 , 0x49304139 , 4700 , 0)
call FICS_Register(0x49304141 , 0x49304142 , 0x49304143 , 700 , 0)
call FICS_Register(0x49303951 , 0x49303955 , 0x49304144 , 2500 , 0)
call FICS_Register(0x49304145 , 0x49304146 , 0x49304147 , 700 , 0)
call FICS_Register(0x4930414A , 0x4930414C , 0x4930414D , 5600 , 0)
call FICS_Register(0x4930414B , 0x4930414E , 0x4930414F , 5600 , 0)
call FICS_Register(0x49304150 , 0x49304151 , 0x49304152 , 1040 , 0)
call FICS_Register(0x49304153 , 0x49304154 , 0x49304155 , 1600 , 0)
call FICS_Register(0x49304156 , 0x49304157 , 0x49304158 , 400 , 0)
call FICS_Register(0x49304159 , 0x49304230 , 0x4930415A , 500 , 0)
call FICS_Register(0x49303148 , 0x49304232 , 0x49304231 , 1000 , 0)
call FICS_Register(0x49304234 , 0x49304233 , 0x49304235 , 3600 , 0)
call FICS_Register7(47 , 8 , 124 , 125 , 0 , 0 , 0 , 0)
call FICS_Register7(48 , 7 , 7 , 4 , 26 , 0 , 0 , 0)
call FICS_Register7(49 , 27 , 75 , 11 , 0 , 0 , 0 , 0)
call FICS_Register7(50 , 1 , 1 , 2 , 2 , 0 , 0 , 0)
call FICS_Register7(51 , 69 , 69 , 28 , 0 , 0 , 0 , 0)
call FICS_Register7(52 , 51 , 29 , 17 , 17 , 0 , 0 , 0)
call FICS_Register7(53 , 6 , 6 , 65 , 30 , 0 , 0 , 0)
call FICS_Register7(54 , 57 , 57 , 94 , 31 , 0 , 0 , 0)
call FICS_Register7(55 , 57 , 32 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(56 , 66 , 11 , 13 , 33 , 0 , 0 , 0)
call FICS_Register7(57 , 4 , 72 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(58 , 2 , 2 , 3 , 3 , 0 , 0 , 0)
call FICS_Register7(59 , 1 , 2 , 3 , 34 , 0 , 0 , 0)
call FICS_Register7(60 , 51 , 69 , 3 , 3 , 35 , 0 , 0)
call FICS_Register7(61 , 63 , 7 , 36 , 0 , 0 , 0 , 0)
call FICS_Register7(62 , 69 , 75 , 37 , 0 , 0 , 0 , 0)
call FICS_Register7(63 , 1 , 1 , 3 , 3 , 0 , 0 , 0)
call FICS_Register7(64 , 18 , 38 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(65 , 5 , 5 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(66 , 72 , 110 , 39 , 0 , 0 , 0 , 0)
call FICS_Register7(67 , 18 , 10 , 40 , 0 , 0 , 0 , 0)
call FICS_Register7(68 , 6 , 16 , 41 , 0 , 0 , 0 , 0)
call FICS_Register7(69 , 17 , 12 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(70 , 6 , 12 , 42 , 0 , 0 , 0 , 0)
call FICS_Register7(71 , 1 , 2 , 3 , 43 , 0 , 0 , 0)
call FICS_Register7(72 , 4 , 4 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(73 , 7 , 7 , 57 , 44 , 0 , 0 , 0)
call FICS_Register7(74 , 110 , 110 , 10 , 45 , 0 , 0 , 0)
call FICS_Register7(75 , 5 , 65 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(76 , 75 , 75 , 46 , 0 , 0 , 0 , 0)
call FICS_Register7(77 , 15 , 95 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(79 , 62 , 62 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(80 , 61 , 61 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(82 , 73 , 73 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(83 , 70 , 70 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(85 , 57 , 57 , 55 , 84 , 0 , 0 , 0)
call FICS_Register7(86 , 87 , 50 , 58 , 0 , 0 , 0 , 0)
call FICS_Register7(90 , 11 , 91 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(97 , 94 , 18 , 98 , 0 , 0 , 0 , 0)
call FICS_Register7(100 , 106 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(101 , 107 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(102 , 108 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(103 , 14 , 14 , 14 , 14 , 14 , 14 , 0)
call FICS_Register7(109 , 13 , 13 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(110 , 109 , 13 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(111 , 66 , 66 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(113 , 110 , 112 , 1 , 4 , 93 , 114 , 0)
call FICS_Register7(115 , 116 , 112 , 112 , 68 , 68 , 0 , 0)
call FICS_Register7(117 , 118 , 112 , 50 , 0 , 0 , 0 , 0)
call FICS_Register7(119 , 112 , 112 , 11 , 11 , 4 , 7 , 121)
call FICS_Register7(122 , 123 , 63 , 5 , 17 , 0 , 0 , 0)
call FICS_Register7(126 , 47 , 47 , 0 , 0 , 0 , 0 , 0)
endfunction

//library initdatabase ends
//library Preload:
function Preload__Convert2ASCII takes integer l__i returns string
local string str="'"
local string endnum=""
local integer curchar=0
loop
exitwhen not ( ( l__i > 0 ) )
set curchar=ModuloInteger(l__i, 256) - 48
if curchar > 9 then
set curchar=curchar - ( 7 )
endif
if curchar > 42 then
set curchar=curchar - ( 6 )
endif
if curchar <= 74 then
set str=SubString(Preload__charMap, curchar, curchar + 1) + str
endif
set l__i=l__i / ( 256 )
endloop
set str="'" + str
return str
endfunction
function Preload__AbilityPreload_Once takes integer abilityid returns nothing
call BJDebugMsg(Preload__Convert2ASCII(abilityid))
call UnitAddAbility(Preload__preload, abilityid)
endfunction
function Preload__AbilityPreload takes integer s,integer e returns nothing
local integer l__i=0
if s > e then
set l__i=s
set e=s
set s=l__i
endif
loop
exitwhen s > e
if s != 0x4130324F then
call UnitAddAbility(Preload__preload, s)
endif
call BJDebugMsg(Preload__Convert2ASCII(s))
set s=s + 1
endloop
endfunction
function Preload__PreloadUnit takes integer id returns nothing
local unit u=CreateUnit(Player(15), id, 0., 0., 0.)
call ShowUnit(u, false)
call KillUnit(u)
call RemoveUnit(u)
set u=null
endfunction
function Preload__PreloadUnit_multiple takes integer s,integer e returns nothing
local integer l__i=0
if s > e then
set l__i=s
set e=s
set s=l__i
endif
loop
exitwhen s > e
call Preload__PreloadUnit(s)
set s=s + 1
endloop
endfunction
function Preload__PreloadEffects takes nothing returns nothing
call Preload("Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
call Preload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl")
call Preload("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl")
call Preload("Objects\\Spawnmodels\\Undead\\UCancelDeath\\UCancelDeath.mdl")
call Preload("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call Preload("UI\\Feedback\\GoldCredit\\GoldCredit.mdl")
call Preload("Abilities\\Spells\\Undead\\UnholyFrenzy\\UnholyFrenzyTarget.mdl")
call Preload("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call Preload("Abilities\\Spells\\Human\\Polymorph\\PolyMorphTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl")
call Preload("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call Preload("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl")
call Preload("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl")
call Preload("Abilities\\Spells\\NightElf\\shadowstrike\\shadowstrike.mdl")
call Preload("Units\\NightElf\\Wisp\\WispExplode.mdl")
call Preload("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\RegenerationAura\\ObsidianRegenAura.mdl")
call Preload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl")
call Preload("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl")
call Preload("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl")
call Preload("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl")
call Preload("Abilities\\Spells\\Other\\Drain\\ManaDrainTarget.mdl")
call Preload("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl")
call Preload("Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl")
call Preload("Objects\\Spawnmodels\\Demon\\DemonSmallDeathExplode\\DemonSmallDeathExplode.mdl")
call Preload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl")
call Preload("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl")
call Preload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call Preload("Abilities\\Spells\\Undead\\UnholyFrenzy\\UnholyFrenzyTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\Possession\\PossessionCaster.mdl")
call Preload("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl")
call Preload("Abilities\\Spells\\NightElf\\Tranquility\\TranquilityTarget.mdl")
call Preload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl")
call Preload("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
call Preload("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
call Preload("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl")
call Preload("Abilities\\Spells\\Items\\AIfb\\AIfbTarget.mdl")
call Preload("Units\\Human\\Gyrocopter\\GyrocopterDeath1.wav")
call Preload("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav")
call Preload("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call Preload("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl")
call Preload("Doodads\\BlackCitadel\\Props\\RuneArt\\RuneArt2.mdl")
call Preload("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call Preload("Units\\Demon\\Infernal\\InfernalBirth.mdl")
call Preload("Objects\\Spawnmodels\\Undead\\UCancelDeath\\UCancelDeath.mdl")
call Preload("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster.mdl")
call Preload("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl")
set Preload__currentPreloadFunc=null
set Preload__isWorking=false
endfunction
function Preload__Preload_units_start takes nothing returns nothing
call Preload__PreloadUnit(0x65626234)
call Preload__PreloadUnit(0x6830314F)
call Preload__PreloadUnit(0x68303149)
call Preload__PreloadUnit(0x68303153)
call Preload__PreloadUnit(0x68303034)
call Preload__PreloadUnit(0x68303151)
call Preload__PreloadUnit(0x68303031)
call Preload__PreloadUnit(0x68303152)
call Preload__PreloadUnit(0x68303256)
call Preload__PreloadUnit(0x68303033)
call Preload__PreloadUnit(0x68303154)
call Preload__PreloadUnit(0x68303032)
call Preload__PreloadUnit(0x68303142)
call Preload__PreloadUnit(0x68303158)
call Preload__PreloadUnit(0x68303234)
call Preload__PreloadUnit(0x68303237)
call Preload__PreloadUnit(0x68303164)
call Preload__PreloadUnit(0x6830314C)
call Preload__PreloadUnit(0x68303139)
call Preload__PreloadUnit(0x68303145)
call Preload__PreloadUnit(0x68303157)
call Preload__PreloadUnit(0x6830314A)
call Preload__PreloadUnit(0x6872314A)
call Preload__PreloadUnit(0x6872314B)
call Preload__PreloadUnit(0x68303156)
call Preload__PreloadUnit(0x68303155)
call Preload__PreloadUnit(0x68303257)
call Preload__PreloadUnit(0x68303253)
call Preload__PreloadUnit(0x68303149)
call Preload__PreloadUnit(0x68303148)
call Preload__PreloadUnit(0x68303236)
call Preload__PreloadUnit(0x68315050)
call Preload__PreloadUnit(0x6830314F)
call Preload__PreloadUnit(0x68303232)
call Preload__PreloadUnit(0x68303143)
call Preload__PreloadUnit(0x686C7472)
call Preload__PreloadUnit(0x68303146)
call Preload__PreloadUnit(0x6830314D)
call Preload__PreloadUnit(0x68775577)
call Preload__PreloadUnit(0x68726C77)
call Preload__PreloadUnit(0x68303147)
call Preload__PreloadUnit(0x6F305452)
call Preload__PreloadUnit(0x68545564)
call Preload__PreloadUnit(0x6F4F5757)
call Preload__PreloadUnit(0x6F303030)
call Preload__PreloadUnit(0x48485542)
call Preload__PreloadUnit(0x48303159)
call Preload__PreloadUnit(0x4830315A)
call Preload__PreloadUnit(0x6E637A31)
call Preload__PreloadUnit(0x6E637A32)
call Preload__PreloadUnit(0x6E637A33)
call Preload__PreloadUnit(0x6E637A34)
call Preload__PreloadUnit(0x6E637A35)
call Preload__PreloadUnit(0x6E303049)
call Preload__PreloadUnit(0x6E30304A)
call Preload__PreloadUnit(0x6E30304B)
call Preload__PreloadUnit(0x6E30304C)
call Preload__PreloadUnit(0x6E30304D)
call Preload__PreloadUnit(0x6E30304E)
call Preload__PreloadUnit(0x6E30304F)
call Preload__PreloadUnit(0x6E464831)
call Preload__PreloadUnit(0x6E464832)
call Preload__PreloadUnit(0x6E464833)
call Preload__PreloadUnit(0x6E464834)
call Preload__PreloadUnit(0x6E464835)
call Preload__PreloadUnit(0x65303030)
call Preload__PreloadUnit(0x65303036)
call Preload__PreloadUnit(0x65303032)
call Preload__PreloadUnit(0x65303031)
call Preload__PreloadUnit(0x65626262)
call Preload__PreloadUnit(0x68303043)
call Preload__PreloadUnit(0x68303044)
call Preload__PreloadUnit(0x68303046)
call Preload__PreloadUnit(0x68303049)
call Preload__PreloadUnit(0x68303138)
call Preload__PreloadUnit(0x68303137)
call Preload__PreloadUnit(0x68303141)
set Preload__currentPreloadFunc="Preload___PreloadEffects"
set Preload__isWorking=false
endfunction
function Preload__preloadAbilitiesCycle takes nothing returns nothing
local integer curID
local integer l__i
call BJDebugMsg("preloadAbilitiesCycle " + I2S(prelcounter))
set curID=baseID + offset
call Preload__AbilityPreload_Once(curID)
set offset=offset + 1
set l__i=ModuloInteger(offset, 256)
if prelcounter == 140 then
set offset=offset + ( 26 )
elseif l__i > 42 and l__i < 48 then
set offset=offset + ( 6 )
elseif l__i > 74 then
set offset=offset + ( 181 )
set l__i=ModuloInteger(offset / 256, 256)
if l__i > 9 and l__i < 17 then
set offset=offset + ( 256 * 7 )
elseif l__i > 42 and l__i < 48 then
set offset=offset + ( 256 * 6 )
elseif l__i > 74 then
set Preload__currentPreloadFunc="Preload___preloadAbilitiesSpecified"
endif
endif
set prelcounter=prelcounter + 1
set Preload__isWorking=false
endfunction
function Preload__preloadAbilitiesSpecified takes nothing returns nothing
call Preload__AbilityPreload_Once(0x41565644)
call Preload__AbilityPreload_Once(0x416D6470)
call Preload__AbilityPreload_Once(0x41564D52)
call Preload__AbilityPreload_Once(0x41735346)
call Preload__AbilityPreload_Once(0x416D6476)
call Preload__AbilityPreload_Once(0x414C6472)
call Preload__AbilityPreload_Once(0x41623161)
call Preload__AbilityPreload_Once(0x41623164)
call Preload__AbilityPreload_Once(0x41417062)
call Preload__AbilityPreload_Once(0x4143425A)
call Preload__AbilityPreload_Once(0x41544753)
call Preload__AbilityPreload_Once(0x4154556F)
call Preload__AbilityPreload_Once(0x41484242)
call Preload__AbilityPreload_Once(0x41774663)
call Preload__AbilityPreload_Once(0x414C5541)
call Preload__AbilityPreload_Once(0x41444443)
call Preload__AbilityPreload_Once(0x41456E53)
call Preload__AbilityPreload_Once(0x414F5343)
call Preload__AbilityPreload_Once(0x41737473)
call Preload__AbilityPreload_Once(0x41627742)
call Preload__AbilityPreload_Once(0x41484253)
call Preload__AbilityPreload_Once(0x41667573)
call Preload__AbilityPreload_Once(0x41623166)
call Preload__AbilityPreload_Once(0x41575362)
call Preload__AbilityPreload_Once(0x41547044)
call Preload__AbilityPreload_Once(0x41547553)
call Preload__AbilityPreload_Once(0x41444D42)
call Preload__AbilityPreload_Once(0x414C7273)
call Preload__AbilityPreload_Once(0x41623277)
call Preload__AbilityPreload_Once(0x4142534C)
call Preload__AbilityPreload_Once(0x41654352)
call Preload__AbilityPreload_Once(0x414C4265)
call Preload__AbilityPreload_Once(0x41415042)
call Preload__AbilityPreload_Once(0x41726269)
call Preload__AbilityPreload_Once(0x414B5549)
call Preload__AbilityPreload_Once(0x41576473)
call Preload__AbilityPreload_Once(0x414C4854)
call Preload__AbilityPreload_Once(0x41524854)
call Preload__AbilityPreload_Once(0x41534D54)
call Preload__AbilityPreload_Once(0x414C4854)
call Preload__AbilityPreload_Once(0x41526462)
call Preload__AbilityPreload_Once(0x41525062)
call Preload__AbilityPreload_Once(0x41525061)
call Preload__AbilityPreload_Once(0x41526D72)
call Preload__AbilityPreload_Once(0x41524A62)
call Preload__AbilityPreload_Once(0x41666865)
call Preload__AbilityPreload_Once(0x53303030)
call Preload__AbilityPreload_Once(0x414B5541)
call Preload__AbilityPreload_Once(0x414B6554)
call Preload__AbilityPreload_Once(0x414D4857)
call Preload__AbilityPreload_Once(0x41526F6C)
call Preload__AbilityPreload_Once(0x41525252)
call Preload__AbilityPreload_Once(0x4156564C)
call Preload__AbilityPreload_Once(0x41464D48)
call Preload__AbilityPreload_Once(0x41544752)
call Preload__AbilityPreload_Once(0x41574657)
call Preload__AbilityPreload_Once(0x41545545)
call Preload__AbilityPreload_Once(0x414B6D54)
call Preload__AbilityPreload_Once(0x41535544)
call Preload__AbilityPreload_Once(0x41495446)
call Preload__AbilityPreload_Once(0x41444D4D)
call Preload__AbilityPreload_Once(0x41524C57)
call Preload__AbilityPreload_Once(0x414D4346)
call Preload__AbilityPreload_Once(0x41525A53)
call Preload__AbilityPreload_Once(0x4143495A)
call Preload__AbilityPreload_Once(0x41524950)
call Preload__AbilityPreload_Once(0x41485541)
call Preload__AbilityPreload_Once(0x41495753)
call Preload__AbilityPreload_Once(0x41484245)
call Preload__AbilityPreload_Once(0x41484244)
call Preload__AbilityPreload_Once(0x41564442)
call Preload__AbilityPreload_Once(0x41574665)
call Preload__AbilityPreload_Once(0x41424657)
call Preload__AbilityPreload_Once(0x414C4146)
call Preload__AbilityPreload_Once(0x414E4443)
call Preload__AbilityPreload_Once(0x41564D53)
call Preload__AbilityPreload_Once(0x41534D53)
call Preload__AbilityPreload_Once(0x41545053)
call Preload__AbilityPreload_Once(0x414D5054)
call Preload__AbilityPreload_Once(0x41415345)
call Preload__AbilityPreload_Once(0x4154506D)
call Preload__AbilityPreload_Once(0x41424C30)
call Preload__AbilityPreload_Once(0x4157534C)
call Preload__AbilityPreload_Once(0x414E6157)
call Preload__AbilityPreload_Once(0x41494842)
call Preload__AbilityPreload_Once(0x41417170)
call Preload__AbilityPreload_Once(0x4152534C)
call Preload__AbilityPreload_Once(0x41444D45)
call Preload__AbilityPreload_Once(0x41415470)
call Preload__AbilityPreload_Once(0x41524A55)
call Preload__AbilityPreload_Once(0x41535346)
call Preload__AbilityPreload_Once(0x414D4453)
call Preload__AbilityPreload_Once(0x414C5249)
call Preload__AbilityPreload_Once(0x41434255)
call Preload__AbilityPreload_Once(0x414F5144)
call Preload__AbilityPreload_Once(0x41444C48)
call Preload__AbilityPreload_Once(0x41535474)
call Preload__AbilityPreload_Once(0x41424D53)
call Preload__AbilityPreload_Once(0x4152424C)
call Preload__AbilityPreload_Once(0x41464D53)
call Preload__AbilityPreload_Once(0x41666873)
call Preload__AbilityPreload_Once(0x414E5541)
call Preload__AbilityPreload_Once(0x41467555)
call Preload__AbilityPreload_Once(0x41526D72)
call Preload__AbilityPreload_Once(0x41424345)
call Preload__AbilityPreload_Once(0x414E4448)
call Preload__AbilityPreload_Once(0x41575753)
call Preload__AbilityPreload_Once(0x41484645)
call Preload__AbilityPreload_Once(0x41444341)
call Preload__AbilityPreload_Once(0x414E4447)
call Preload__AbilityPreload_Once(0x4E526F6F)
call Preload__AbilityPreload_Once(0x41464D30)
call Preload__AbilityPreload_Once(0x41697444)
call Preload__AbilityPreload_Once(0x41733362)
call Preload__AbilityPreload_Once(0x41474D31)
call Preload__AbilityPreload_Once(0x41626761)
call Preload__AbilityPreload_Once(0x41626764)
call Preload__AbilityPreload_Once(0x41536851)
call Preload__AbilityPreload_Once(0x414E6477)
call Preload__AbilityPreload_Once(0x414E5569)
call Preload__AbilityPreload_Once(0x41526F41)
call Preload__AbilityPreload_Once(0x414D4C42)
call Preload__AbilityPreload_Once(0x414D4445)
call Preload__AbilityPreload_Once(0x41526162)
call Preload__AbilityPreload_Once(0x41527362)
call Preload__AbilityPreload_Once(0x41526962)
call Preload__AbilityPreload_Once(0x41533042)
set Preload__currentPreloadFunc="Preload___preloadAbilitiesHeroSpecified"
set Preload__isWorking=false
endfunction
function Preload__preloadAbilitiesHeroSpecified takes nothing returns nothing
local integer l__i=1
local integer id=s__Table__getindex(spelltable,l__i)
loop
exitwhen not ( ( id != 0 ) )
call Preload__AbilityPreload_Once(id)
set l__i=l__i + 1
set id=s__Table__getindex(spelltable,l__i)
endloop
set Preload__currentPreloadFunc="Preload___Preload_units_start"
set Preload__isWorking=false
endfunction
function Preload__Preload_abilities_start takes nothing returns nothing
call BJDebugMsg("Current preload func is " + Preload__currentPreloadFunc)
if not Preload__isWorking then
set Preload__isWorking=true
call ExecuteFunc(Preload__currentPreloadFunc)
endif
set Preload__timerExecCount=Preload__timerExecCount + 1
if Preload__timerExecCount > 1500 or Preload__currentPreloadFunc == null then
call BJDebugMsg("Preload time is " + R2S(( 0.01 ) * Preload__timerExecCount) + "  " + R2S(currenttimeL))
call DestroyTimer(GetExpiredTimer())
call KillUnit(Preload__preload)
call RemoveUnit(Preload__preload)
endif
endfunction
function cj_anonym__1 takes nothing returns nothing
//# optional
set currenttimeL=currenttimeL + ( 0.01 )
endfunction
function MapPreloadStart takes nothing returns nothing
call Preload__PreloadEffects()
set Preload__preload=CreateUnit(Player(15), 0x68303164, 0., 0., 0.)
call ShowUnit(Preload__preload, false)
call UnitAddAbility(Preload__preload, 0x416C6F63)
set Preload__currentPreloadFunc="Preload___preloadAbilitiesSpecified"
call TimerStart(CreateTimer(), ( 0.01 ), true, function Preload__Preload_abilities_start)
call TimerStart(CreateTimer(), 0.01, true, function cj_anonym__1)
endfunction

//library Preload ends
//library Projectile:
function GetTotalProjectiles takes nothing returns integer
return Projectile__totalProjectiles
endfunction
function s__projectilegroup__getindex takes integer this,integer index returns integer
return LoadInteger(s__projectilegroup_table, this + 8092, index)
endfunction
function s__projectilegroup_inGroup takes integer this,integer p returns boolean
return HaveSavedInteger(s__projectilegroup_table, this, p)
endfunction
function s__projectilegroup_add takes integer this,integer p returns boolean
local integer indexOfLast
if not s__projectilegroup_inGroup(this,p) then
call SaveInteger(s__projectilegroup_table, this, p, s__projectilegroup_size[this])
call SaveInteger(s__projectilegroup_table, this + 8092, s__projectilegroup_size[this], p)
set s__projectilegroup_size[this]=s__projectilegroup_size[this] + 1
set indexOfLast=0
if HaveSavedInteger(Projectile__projGroupTable, p, - 1) then
set indexOfLast=LoadInteger(Projectile__projGroupTable, p, - 1)
endif
call SaveInteger(Projectile__projGroupTable, p, indexOfLast, this)
call SaveInteger(Projectile__projGroupTable, p + 8092, this, indexOfLast)
call SaveInteger(Projectile__projGroupTable, p, - 1, indexOfLast + 1)
return true
endif
return false
endfunction
function s__projectilegroup_remove takes integer this,integer p returns boolean
local integer indexOfLast
local integer indexOfThis
if s__projectilegroup_inGroup(this,p) then
set s__projectilegroup_size[this]=s__projectilegroup_size[this] - 1
set indexOfThis=LoadInteger(s__projectilegroup_table, this, p)
call SaveInteger(s__projectilegroup_table, this + 8092, indexOfThis, LoadInteger(s__projectilegroup_table, this + 8092, s__projectilegroup_size[this]))
call SaveInteger(s__projectilegroup_table, this, LoadInteger(s__projectilegroup_table, this + 8092, indexOfThis), indexOfThis)
call RemoveSavedInteger(s__projectilegroup_table, this + 8092, s__projectilegroup_size[this])
call RemoveSavedInteger(s__projectilegroup_table, this, p)
set indexOfLast=LoadInteger(Projectile__projGroupTable, p, - 1) - 1
set indexOfThis=LoadInteger(Projectile__projGroupTable, p + 8092, this)
call SaveInteger(Projectile__projGroupTable, p, - 1, indexOfLast)
call SaveInteger(Projectile__projGroupTable, p, indexOfThis, LoadInteger(Projectile__projGroupTable, p, indexOfLast))
call SaveInteger(Projectile__projGroupTable, p + 8092, LoadInteger(Projectile__projGroupTable, p, indexOfThis), indexOfThis)
if indexOfLast < 1 then
call FlushChildHashtable(Projectile__projGroupTable, p)
call FlushChildHashtable(Projectile__projGroupTable, p + 8092)
endif
return true
endif
return false
endfunction
function s__projectilegroup_clear takes integer this returns nothing
local integer l__i=s__projectilegroup_size[this] - 1
loop
exitwhen l__i < 0
call s__projectilegroup_remove(this,LoadInteger(s__projectilegroup_table, this + 8092, l__i))
set l__i=l__i - 1
endloop
endfunction
function s__projectilegroup_onDestroy takes integer this returns nothing
local integer l__i=s__projectilegroup_size[this] - 1
loop
exitwhen l__i < 0
call s__projectilegroup_remove(this,LoadInteger(s__projectilegroup_table, this + 8092, l__i))
set l__i=l__i - 1
endloop
endfunction

//Generated destructor of projectilegroup
function s__projectilegroup_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: projectilegroup")
        return
    elseif (si__projectilegroup_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: projectilegroup")
        return
    endif
    call s__projectilegroup_onDestroy(this)
    set si__projectilegroup_V[this]=si__projectilegroup_F
    set si__projectilegroup_F=this
endfunction
function s__projectile_killModel takes integer this returns boolean
if s__projectile_ART__model[this] != null then
call DestroyEffect(s__projectile_ART__model[this])
return true
endif
return false
endfunction
function s__projectile_setModel takes integer this,string filepath returns nothing
call s__projectile_killModel(this)
set s__projectile_ART__model[this]=AddSpecialEffectTarget(filepath, s__projectile_toUnit[this], "origin")
set s__projectile_ART__path[this]=filepath
endfunction
function s__projectile__get_x takes integer this returns real
return s__vector_x[s__projectile_VECTOR__position[this]]
endfunction
function s__projectile__get_y takes integer this returns real
return s__vector_y[s__projectile_VECTOR__position[this]]
endfunction
function s__projectile__get_z takes integer this returns real
return s__vector_z[s__projectile_VECTOR__position[this]]
endfunction
function s__projectile__get_timescale takes integer this returns real
if s__projectile_FLAG__isPaused[this] then
return 0.00
endif
return s__projectile_PROP__timescale[this]
endfunction
function s__projectile__set_timescale takes integer this,real r returns nothing
if ( r == 0 ) then
set s__projectile_FLAG__isPaused[this]=true
else
set s__projectile_FLAG__isPaused[this]=false
set s__projectile_PROP__timescale[this]=r
endif
endfunction
function s__projectile__get_collision takes integer this returns real
return s__projectile_PROP__collision[this]
endfunction
function s__projectile__set_collision takes integer this,real r returns nothing
if r > Projectile_COLLISION__sizeMax then
set r=Projectile_COLLISION__sizeMax
elseif r < 0 then
set r=0
endif
set s__projectile_PROP__collision[this]=r
endfunction
function s__projectile__get_source takes integer this returns unit
return s__projectile_PROP__source[this]
endfunction
function s__projectile__set_source takes integer this,unit who returns nothing
set s__projectile_PROP__source[this]=who
endfunction
function s__projectile__get_target takes integer this returns unit
return s__projectile_PROP__target[this]
endfunction
function s__projectile__set_target takes integer this,unit who returns nothing
if GetUnitTypeId(who) != 0 then
set s__projectile_PROP__target[this]=who
set s__projectile_FLAG__followUnit[this]=true
else
set s__projectile_PROP__target[this]=null
set s__projectile_FLAG__followUnit[this]=false
endif
endfunction
function s__projectile__get_targetX takes integer this returns real
return s__vector_x[s__projectile_VECTOR__target[this]]
endfunction
function s__projectile__get_targetY takes integer this returns real
return s__vector_y[s__projectile_VECTOR__target[this]]
endfunction
function s__projectile__get_targetZ takes integer this returns real
return s__vector_z[s__projectile_VECTOR__target[this]]
endfunction
function s__projectile__get_targetZOffset takes integer this returns real
return s__projectile_PROP__targetHeight[this]
endfunction
function s__projectile__set_targetZOffset takes integer this,real r returns nothing
if r < 0 then
set r=0
endif
set s__projectile_PROP__targetHeight[this]=r
endfunction
function s__projectile_setTargetPos takes integer this,real x1,real y1,real z1 returns boolean
local real xA
local real yA
local integer v=s__projectile_VECTOR__velocity[this]
if ( x1 != s__vector_x[s__projectile_VECTOR__target[this]] ) or ( y1 != s__vector_y[s__projectile_VECTOR__target[this]] ) or ( z1 != s__vector_z[s__projectile_VECTOR__target[this]] ) then
set s__vector_x[s__projectile_VECTOR__target[this]]=x1
set s__vector_y[s__projectile_VECTOR__target[this]]=y1
set s__vector_z[s__projectile_VECTOR__target[this]]=z1 + s__projectile_PROP__targetHeight[this]
set xA=s__vector_x[s__projectile_VECTOR__position[this]]
set yA=s__vector_y[s__projectile_VECTOR__position[this]]
set xA=( x1 - xA ) * ( x1 - xA ) + ( y1 - yA ) * ( y1 - yA )
set yA=( s__vector_x[v] * s__vector_x[v] + s__vector_y[v] * s__vector_y[v] ) / ( s__projectile_DATA__loopRef * s__projectile_DATA__loopRef )
set s__projectile_DATA__timeLeft[this]=SquareRoot(xA / yA)
set s__projectile_FLAG__targetFollow[this]=true
return true
endif
return false
endfunction
function s__projectile_onDestroy takes integer this returns nothing
local integer l__i
if not ( s__projectile_destroyed[this] ) then
set s__projectile_DATA__size=s__projectile_DATA__size - 1
set s__projectile_DATA__stack[s__projectile_DATA__index[this]]=s__projectile_DATA__stack[s__projectile_DATA__size]
set s__projectile_DATA__index[s__projectile_DATA__stack[s__projectile_DATA__index[this]]]=s__projectile_DATA__index[this]
if ( s__projectile_DATA__size == 0 ) then
call PauseTimer(s__projectile_DATA__loop)
endif
set Projectile__totalProjectiles=Projectile__totalProjectiles - 1
//# static if LIBRARY_ProjectileArt then
    call s__projectile_killModel(this)
//# endif
if s__projectile_toRemove[this] then
call RemoveUnit(s__projectile_toUnit[this])
elseif s__projectile_toKill[this] then
call KillUnit(s__projectile_toUnit[this])
endif
call s__vector_deallocate(s__projectile_VECTOR__position[this])
call s__vector_deallocate(s__projectile_VECTOR__velocity[this])
call s__vector_deallocate(s__projectile_VECTOR__acceleration[this])
call s__vector_deallocate(s__projectile_VECTOR__target[this])
call s__vector_deallocate(s__projectile_VECTOR__start[this])
if HaveSavedInteger(Projectile__projGroupTable, this, - 1) then
set l__i=LoadInteger(Projectile__projGroupTable, this, - 1) - 1
loop
exitwhen l__i < 0
call s__projectilegroup_remove((LoadInteger(Projectile__projGroupTable, this, l__i)),this)
set l__i=l__i - 1
endloop
call FlushChildHashtable(Projectile__projGroupTable, this)
call FlushChildHashtable(Projectile__projGroupTable, this + 8092)
endif
set s__projectile_destroyed[this]=true
endif
endfunction
function s__projectile_enumNearby takes integer g,real x,real y,real z,real radius returns nothing
local integer l__i=0
local real x2
local real y2
local real z2
local real r2=radius * radius
local integer p
local integer v
loop
exitwhen l__i == s__projectile_DATA__size
set p=s__projectile_DATA__stack[l__i]
set v=s__projectile_VECTOR__position[p]
set x2=s__vector_x[v]
set y2=s__vector_y[v]
set z2=s__vector_z[v]
if ( ( x2 - x ) * ( x2 - x ) + ( y2 - y ) * ( y2 - y ) + ( z2 - z ) * ( z2 - z ) ) <= ( r2 ) then
call s__projectilegroup_add(g,s__projectile_DATA__stack[l__i])
endif
set l__i=l__i + 1
endloop
endfunction
function s__projectile_launch takes integer this,integer start,integer finish,real speed,real arc returns boolean
local real d
local real a
local boolean instant=false
if ( start != 0 ) and ( finish != 0 ) and not ( s__projectile_FLAG__active[this] ) then
set s__vector_x[s__projectile_VECTOR__position[this]]=s__vector_x[start]
set s__vector_y[s__projectile_VECTOR__position[this]]=s__vector_y[start]
set s__vector_z[s__projectile_VECTOR__position[this]]=s__vector_z[start]
set s__vector_x[s__projectile_VECTOR__target[this]]=s__vector_x[finish]
set s__vector_y[s__projectile_VECTOR__target[this]]=s__vector_y[finish]
set s__vector_z[s__projectile_VECTOR__target[this]]=s__vector_z[finish] + s__projectile_PROP__targetHeight[this]
set s__vector_x[s__projectile_VECTOR__start[this]]=s__vector_x[start]
set s__vector_y[s__projectile_VECTOR__start[this]]=s__vector_y[start]
set s__vector_z[s__projectile_VECTOR__start[this]]=s__vector_z[start]
set s__projectile_speed[this]=speed
set s__projectile_arc[this]=arc
set d=SquareRoot(( s__vector_x[finish] - s__vector_x[start] ) * ( s__vector_x[finish] - s__vector_x[start] ) + ( s__vector_y[finish] - s__vector_y[start] ) * ( s__vector_y[finish] - s__vector_y[start] ))
set a=Atan2(s__vector_y[finish] - s__vector_y[start], s__vector_x[finish] - s__vector_x[start])
if ( d == 0 ) or ( speed == 0 ) then
set s__vector_x[s__projectile_VECTOR__position[this]]=s__vector_x[s__projectile_VECTOR__target[this]]
set s__vector_y[s__projectile_VECTOR__position[this]]=s__vector_y[s__projectile_VECTOR__target[this]]
set s__vector_z[s__projectile_VECTOR__position[this]]=s__vector_z[s__projectile_VECTOR__target[this]]
set s__projectile_DATA__timeLeft[this]=0.00
set instant=true
else
set s__projectile_DATA__timeLeft[this]=d / speed
set s__vector_z[s__projectile_VECTOR__acceleration[this]]=( - 8 * arc * speed * speed / d )
set s__vector_x[s__projectile_VECTOR__velocity[this]]=speed * Cos(a) * s__projectile_DATA__loopRef
set s__vector_y[s__projectile_VECTOR__velocity[this]]=speed * Sin(a) * s__projectile_DATA__loopRef
set s__vector_z[s__projectile_VECTOR__velocity[this]]=( - s__vector_z[s__projectile_VECTOR__acceleration[this]] * ( d / speed ) / 2 + ( s__vector_z[s__projectile_VECTOR__target[this]] - s__vector_z[start] ) / ( d / speed ) ) * s__projectile_DATA__loopRef
set s__vector_z[s__projectile_VECTOR__acceleration[this]]=s__vector_z[s__projectile_VECTOR__acceleration[this]] * s__projectile_DATA__loopRef * s__projectile_DATA__loopRef
endif
call SetUnitX(s__projectile_toUnit[this], s__vector_x[s__projectile_VECTOR__position[this]])
call SetUnitY(s__projectile_toUnit[this], s__vector_y[s__projectile_VECTOR__position[this]])
call MoveLocation(Projectile__loc, s__vector_x[s__projectile_VECTOR__position[this]], s__vector_y[s__projectile_VECTOR__position[this]])
call SetUnitFlyHeight(s__projectile_toUnit[this], s__vector_z[s__projectile_VECTOR__position[this]] - GetLocationZ(Projectile__loc), 0)
call sc__projectileinterface_onStart(this)
set s__projectile_FLAG__active[this]=true
if instant then
set s__projectile_FLAG__active[this]=false
call sc__projectileinterface_onFinish(this)
if ( s__projectile_toDestroy[this] and not s__projectile_destroyed[this] ) then
call sc__projectileinterface_deallocate(this)
endif
endif
return true
endif
return false
endfunction
function s__projectile_doLoopDestFilter takes nothing returns boolean
local destructable d=GetFilterDestructable()
local real x=GetDestructableX(d)
local real y=GetDestructableY(d)
local real z=50.
local real xB=s__vector_x[s__projectile_VECTOR__position[Projectile__projRef]]
local real yB=s__vector_y[s__projectile_VECTOR__position[Projectile__projRef]]
local real zB=s__vector_z[s__projectile_VECTOR__position[Projectile__projRef]]
local real dist
if not s__projectile_activeZcollision[Projectile__projRef] then
set dist=( xB - x ) * ( xB - x ) + ( yB - y ) * ( yB - y )
else
set dist=( xB - x ) * ( xB - x ) + ( yB - y ) * ( yB - y ) + ( zB - z ) * ( zB - z )
endif
if ( dist ) <= s__projectile_PROP__collision[Projectile__projRef] * s__projectile_PROP__collision[Projectile__projRef] then
if sc__projectileinterface_isValidTargetDest(Projectile__projRef,d) then
call sc__projectileinterface_onDestCollision(Projectile__projRef,d)
endif
endif
set d=null
return false
endfunction
function s__projectile_doLoopEnum takes nothing returns boolean
local unit filt=GetFilterUnit()
local real xA=GetUnitX(filt)
local real yA=GetUnitY(filt)
local real zA=GetUnitFlyHeight(filt)
local real xB=s__vector_x[s__projectile_VECTOR__position[Projectile__projRef]]
local real yB=s__vector_y[s__projectile_VECTOR__position[Projectile__projRef]]
local real zB=s__vector_z[s__projectile_VECTOR__position[Projectile__projRef]]
local real dist
if not s__projectile_activeZcollision[Projectile__projRef] then
set dist=( xB - xA ) * ( xB - xA ) + ( yB - yA ) * ( yB - yA )
else
set dist=( xB - xA ) * ( xB - xA ) + ( yB - yA ) * ( yB - yA ) + ( zB - zA ) * ( zB - zA )
endif
if ( ( dist ) <= s__projectile_PROP__collision[Projectile__projRef] * s__projectile_PROP__collision[Projectile__projRef] ) then
if ( sc__projectileinterface_isValidTargetUnit(Projectile__projRef,filt) ) then
call sc__projectileinterface_onUnitCollision(Projectile__projRef,filt)
endif
endif
set filt=null
return false
endfunction
function s__projectile_doLoop takes nothing returns nothing
local integer l__i=s__projectile_DATA__size - 1
local integer dat
local integer vA
local integer vB
local integer vC
local real x
local real y
local real z
local real x2
local real y2
local real z2
local real e
local unit u
loop
exitwhen ( l__i < 0 )
set dat=s__projectile_DATA__stack[l__i]
if ( dat != 0 ) then
if s__projectile_FLAG__active[dat] then
set e=s__projectile__get_timescale(dat)
set vA=s__projectile_VECTOR__velocity[dat]
set vB=s__projectile_VECTOR__acceleration[dat]
set s__vector_x[vA]=s__vector_x[vA] + s__vector_x[vB] * e
set s__vector_y[vA]=s__vector_y[vA] + s__vector_y[vB] * e
set s__vector_z[vA]=s__vector_z[vA] + s__vector_z[vB] * e
set vB=s__projectile_VECTOR__position[dat]
set s__vector_x[vB]=s__vector_x[vB] + s__vector_x[vA] * e
set s__vector_y[vB]=s__vector_y[vB] + s__vector_y[vA] * e
set s__vector_z[vB]=s__vector_z[vB] + s__vector_z[vA] * e
else
set vA=s__projectile_VECTOR__velocity[dat]
set vB=s__projectile_VECTOR__position[dat]
endif
set u=s__projectile_toUnit[dat]
set x=s__vector_x[vB]
set y=s__vector_y[vB]
set z=s__vector_z[vB]
call SetUnitX(u, x)
call SetUnitY(u, y)
call MoveLocation(Projectile__loc, x, y)
call SetUnitFlyHeight(u, z - GetLocationZ(Projectile__loc), 0)
set x2=s__vector_x[vA]
set y2=s__vector_y[vA]
set z2=s__vector_z[vA]
if ( s__projectile_FLAG__active[dat] ) and ( x2 != 0 or y2 != 0 or z2 != 0 ) then
if s__projectile_activePitch[dat] then
call SetUnitAnimationByIndex(u, R2I(bj_RADTODEG * Atan2(z2, s__projectile_speed[dat] * s__projectile_DATA__loopRef) + 0.5) + 90)
endif
if s__projectile_activeRotation[dat] then
call SetUnitFacingTimed(u, Atan2(y2, x2) * bj_RADTODEG, 0)
endif
endif
if dat != 0 then
call sc__projectileinterface_onIteration(dat)
if ( z <= GetLocationZ(Projectile__loc) ) then
if not ( s__projectile_FLAG__onGround[dat] ) then
set s__projectile_FLAG__onGround[dat]=true
call sc__projectileinterface_onGround(dat)
endif
else
if ( s__projectile_FLAG__onGround[dat] ) then
set s__projectile_FLAG__onGround[dat]=false
endif
endif
endif
if ( s__projectile_activeUnitCollision[dat] ) and dat != 0 then
set Projectile__projRef=dat
call GroupEnumUnitsInRange(Projectile__grp, x, y, s__projectile_PROP__collision[dat], s__projectile_FUNC__enumUnits)
endif
if ( s__projectile_activeDestCollision[dat] ) and dat != 0 then
set Projectile__projRef=dat
call SetRect(Projectile__rct, 0, 0, s__projectile_PROP__collision[dat], s__projectile_PROP__collision[dat])
call MoveRectTo(Projectile__rct, x, y)
call EnumDestructablesInRect(Projectile__rct, s__projectile_FUNC__enumDests, null)
endif
if ( dat != 0 ) and ( s__projectile_FLAG__active[dat] ) and ( s__projectile_activeTargetFollow[dat] ) then
if ( s__projectile_FLAG__followUnit[dat] ) and GetUnitTypeId(s__projectile__get_target(dat)) != 0 then
set x=GetUnitX(s__projectile__get_target(dat))
set y=GetUnitY(s__projectile__get_target(dat))
call MoveLocation(Projectile__loc, x, y)
set z=GetLocationZ(Projectile__loc) + GetUnitFlyHeight(s__projectile__get_target(dat))
call s__projectile_setTargetPos(dat,x , y , z)
endif
if ( s__projectile_FLAG__targetFollow[dat] ) then
set vC=s__projectile_VECTOR__target[dat]
set x=Atan2(s__vector_y[vC] - s__vector_y[vB], s__vector_x[vC] - s__vector_x[vB])
set y=SquareRoot(( s__vector_x[vC] - s__vector_x[vB] ) * ( s__vector_x[vC] - s__vector_x[vB] ) + ( s__vector_y[vC] - s__vector_y[vB] ) * ( s__vector_y[vC] - s__vector_y[vB] ))
set z2=s__vector_z[vC] - s__vector_z[vB]
set s__vector_x[vA]=s__projectile_speed[dat] * Cos(x) * s__projectile_DATA__loopRef
set s__vector_y[vA]=s__projectile_speed[dat] * Sin(x) * s__projectile_DATA__loopRef
set vB=s__projectile_VECTOR__start[dat]
set x=SquareRoot(( s__vector_x[vB] - s__vector_x[vC] ) * ( s__vector_x[vB] - s__vector_x[vC] ) + ( s__vector_y[vB] - s__vector_y[vC] ) * ( s__vector_y[vB] - s__vector_y[vC] ))
set s__vector_z[s__projectile_VECTOR__acceleration[dat]]=- 8 * s__projectile_arc[dat] * s__projectile_speed[dat] * s__projectile_speed[dat] / x
set s__vector_z[vA]=- s__vector_z[s__projectile_VECTOR__acceleration[dat]] * y / ( s__projectile_speed[dat] * 2 ) + s__projectile_speed[dat] * z2 / y
set s__vector_z[s__projectile_VECTOR__acceleration[dat]]=s__vector_z[s__projectile_VECTOR__acceleration[dat]] * s__projectile_DATA__loopRef * s__projectile_DATA__loopRef
set s__vector_z[vA]=s__vector_z[vA] * s__projectile_DATA__loopRef
endif
endif
if s__projectile_FLAG__active[dat] then
if not s__projectile_FLAG__isPaused[dat] then
set s__projectile_DATA__timeLeft[dat]=s__projectile_DATA__timeLeft[dat] - ( s__projectile_DATA__loopRef * s__projectile__get_timescale(dat) )
endif
if s__projectile_DATA__timeLeft[dat] <= 0.00 then
set s__projectile_FLAG__active[dat]=false
call sc__projectileinterface_onFinish(dat)
if ( s__projectile_toDestroy[dat] and not s__projectile_destroyed[dat] ) then
call sc__projectileinterface_deallocate(dat)
endif
endif
endif
endif
set l__i=l__i - 1
endloop
set u=null
endfunction
function s__projectile_create takes unit u returns integer
local integer dat=s__projectile__allocate()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call UnitAddAbility(u, Projectile_ID__flyHeightModifier)
call UnitRemoveAbility(u, Projectile_ID__flyHeightModifier)
if s__projectile_DATA__size == 0 then
call TimerStart(s__projectile_DATA__loop, s__projectile_DATA__loopRef, true, function s__projectile_doLoop)
endif
call MoveLocation(Projectile__loc, x, y)
set Projectile__totalProjectiles=Projectile__totalProjectiles + 1
set s__projectile_toUnit[dat]=u
set s__projectile_DATA__index[dat]=s__projectile_DATA__size
set s__projectile_VECTOR__position[dat]=s__vector_create(x , y , GetLocationZ(Projectile__loc) + GetUnitFlyHeight(u))
set s__projectile_VECTOR__target[dat]=s__vector_create(0 , 0 , 0)
set s__projectile_VECTOR__velocity[dat]=s__vector_create(0 , 0 , 0)
set s__projectile_VECTOR__acceleration[dat]=s__vector_create(0 , 0 , 0)
set s__projectile_VECTOR__start[dat]=s__vector_create(0 , 0 , 0)
set s__projectile_DATA__stack[s__projectile_DATA__size]=dat
set s__projectile_DATA__size=s__projectile_DATA__size + 1
return dat
endfunction
function s__projectile_onInit takes nothing returns nothing
set Projectile__rct=ALL_RemoveRect(Rect(0, 0, Projectile_COLLISION__sizeMax, Projectile_COLLISION__sizeMax))
set s__projectile_FUNC__enumUnits=Filter(function s__projectile_doLoopEnum)
set s__projectile_FUNC__enumDests=Filter(function s__projectile_doLoopDestFilter)
endfunction

//library Projectile ends
//library Initbwlib:
function Initbwlib__PN_Dec2Hex takes integer dec returns string
local integer r=ModuloInteger(dec, 16)
if dec - r == 0 then
return "0" + ToHex(r)
else
return ToHex(( dec - r ) / 16) + ToHex(r)
endif
return ""
endfunction
function Initbwlib_GetCurrentTime takes nothing returns integer
if GameStarted then
return mins * 60 + tens * 10 + secs
endif
return 0
endfunction
function Initbwlib__GameTime_tick takes nothing returns nothing
set secs=secs + 1
if secs >= 10 then
set secs=0
set tens=tens + 1
endif
if tens >= 6 then
set tens=0
set mins=mins + 1
endif
call MultiboardSetTitleText(table, title + I2S(mins) + ":" + I2S(tens) + I2S(secs))
endfunction
function Initbwlib_MultiAddHeroIcon takes integer plNum,string path returns nothing
local multiboarditem q
if plNum < 5 then
set q=MultiboardGetItem(table, plNum + 1, 0)
elseif plNum > 5 and plNum < 10 then
set q=MultiboardGetItem(table, plNum, 0)
endif
call MultiboardSetItemIcon(q, path)
set q=null
endfunction
function Initbwlib_MultiUpdateStatus takes integer plNum returns nothing
local multiboarditem cjlocgn_00000000
if not Initbwlib_GameEnded then
if plNum < 5 then
set cjlocgn_00000000=MultiboardGetItem(table, plNum + 1, 1)
elseif plNum > 5 and plNum < 10 then
set cjlocgn_00000000=MultiboardGetItem(table, plNum, 1)
endif
if GetUnitState(s__HERO[plNum], UNIT_STATE_LIFE) > .405 then
call MultiboardSetItemValueColor(cjlocgn_00000000, 0, 255, 0, 255)
call MultiboardSetItemValue(cjlocgn_00000000, "      Жив")
else
call MultiboardSetItemValueColor(cjlocgn_00000000, 128, 0, 0, 255)
call MultiboardSetItemValue(cjlocgn_00000000, "     Мертв")
endif
endif
set cjlocgn_00000000=null
endfunction
function Initbwlib__Takemymoney takes nothing returns nothing
local integer l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call SetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD) + 1)
set l__i=l__i + 1
endloop
endfunction
function cj_anonym__2 takes nothing returns nothing
//# optional
call sc___prototype1_execute(4)
endfunction
function Initbwlib__GameStart takes nothing returns nothing
local integer l__i=0
call PauseTimer(GameTime)
set mins=0
set tens=0
set secs=0
call MultiboardSetTitleText(table, pretitle + I2S(mins) + ":" + I2S(tens) + I2S(secs))
call TimerStart(GameTime, 1., true, function Initbwlib__GameTime_tick)
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., gamestartmessage)
set l__i=l__i + 1
endloop
call StartSound(gg_snd_NewTournament)
call SetUnitInvulnerable(gg_unit_n00D_0159, false)
call sc___prototype1_evaluate(5)
call sc___prototype1_execute(6)
call sc___prototype1_execute(4)
call sc___prototype1_execute(7)
call sc___prototype1_execute(8)
set ForestTime=CreateTimer()
set MoneyTime=CreateTimer()
call TimerStart(ForestTime, 120., true, function cj_anonym__2)
call TimerStart(MoneyTime, 1.5, true, function Initbwlib__Takemymoney)
set GameStarted=true
endfunction
function Initbwlib__Pregame_tick takes nothing returns nothing
if ( secs - 1 ) == 0 and mins == 0 and tens == 0 then
call sc___prototype1_execute(9)
return
endif
set secs=secs - 1
if secs < 0 then
set secs=9
set tens=tens - 1
endif
if tens < 0 then
set tens=5
set mins=mins - 1
endif
call MultiboardSetTitleText(table, pretitle + I2S(mins) + ":" + I2S(tens) + I2S(secs))
endfunction
function InitMulti takes nothing returns nothing
local timer t=GetExpiredTimer()
local multiboarditem q
local integer l__i=0
local integer j=0
set table=CreateMultiboard()
set GameTime=CreateTimer()
set table=CreateMultiboard()
call MultiboardSetRowCount(table, 10)
call MultiboardSetColumnCount(table, 2)
call MultiboardSetItemsWidth(table, 0.10)
call MultiboardDisplay(table, true)
call MultiboardMinimize(table, false)
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemStyle(q, true, false)
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemStyle(q, true, false)
set l__i=0
loop
exitwhen not ( ( l__i < MultiboardGetRowCount(table) ) )
set q=MultiboardGetItem(table, l__i, 1)
set l__i=l__i + 1
call MultiboardSetItemStyle(q, true, false)
if l__i != 6 then
call MultiboardSetItemValue(q, "Не активен")
endif
call MultiboardSetItemValueColor(q, 128, 128, 128, 255)
endloop
set q=MultiboardGetItem(table, 0, 1)
call MultiboardSetItemValue(q, "    Статус")
call MultiboardSetItemStyle(q, true, false)
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemValue(q, " " + GetPlayerName(Player(5)))
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemValue(q, " " + GetPlayerName(Player(10)))
set l__i=1
loop
exitwhen not ( ( l__i < 5 ) )
set q=MultiboardGetItem(table, l__i, 0)
call MultiboardSetItemValue(q, GetPlayerName(Player(l__i - 1)))
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen not ( ( l__i < 10 ) )
set q=MultiboardGetItem(table, l__i, 0)
call MultiboardSetItemValue(q, GetPlayerName(Player(l__i)))
set l__i=l__i + 1
endloop
set q=null
set mins=1
set tens=3
set secs=0
call MultiboardSetTitleText(table, pretitle + I2S(mins) + ":" + I2S(tens) + I2S(secs))
call TimerStart(GameTime, 1., true, function Initbwlib__Pregame_tick)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function cj_anonym__5 takes nothing returns nothing
//# optional
call MapPreloadStart()
call DestroyTimer(GetExpiredTimer())
endfunction
function cj_anonym__4 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer l__i
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., mapinitMsg3)
set l__i=l__i + 1
endloop
call StartSound(gg_snd_CreepAggroWhat1)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function cj_anonym__3 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer l__i
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., mapinitMsg2)
set l__i=l__i + 1
endloop
call StartSound(gg_snd_Hint)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
endfunction
function cj_callback_00000002 takes nothing returns nothing
//# optional
local integer l__i=0
local timer MultiTimer
local string name
local integer cjlocgn_00000000
set hash=InitHashtable()
set LOC=ALL_RemoveLocation(Location(0, 0))
set s__color[0]= 0xFF0000
set s__color[1]= 0x0042FF
set s__color[2]= 0x00E5B9
set s__color[3]= 0x540291
set s__color[4]= 0xFFFF00
set s__color[5]= 0xFE8A00
set s__color[6]= 0x21C000
set s__color[7]= 0xE45BB0
set s__color[8]= 0x959697
set s__color[9]= 0x7EBFF1
set s__color[10]= 0x116246
set s__color[11]= 0x4E2B05
loop
exitwhen ( l__i > 4 )
call ForceAddPlayer(uteam_1, Player(l__i))
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen ( l__i > 9 )
call ForceAddPlayer(uteam_2, Player(l__i))
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYER_SLOTS ) )
call SetPlayerAbilityAvailable(Player(l__i), 0x41303244, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303147, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303148, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303146, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x4130334B, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x414B5573, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303450, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303536, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303535, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41527362, false)
set l__i=l__i + 1
endloop
call sc___prototype1_execute(10)
call FogMaskEnable(false)
call FogEnable(true)
set MultiTimer=CreateTimer()
call TimerStart(MultiTimer, 0.01, false, function InitMulti)
set l__i=0
call SetPlayerName(Player(5), "Орден")
call SetPlayerName(Player(10), "Культ")
call SetPlayerName(Player(PLAYER_NEUTRAL_AGGRESSIVE), "|cff190E03Монстры|r")
call sc___prototype1_evaluate(11)
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 6 )
call SetPlayerAllianceStateAllyBJ(Player(5), Player(cjlocgn_00000000), true)
call SetPlayerAllianceStateAllyBJ(Player(cjlocgn_00000000), Player(5), true)
call SetPlayerAlliance(Player(5), Player(cjlocgn_00000000), ALLIANCE_SHARED_VISION_FORCED, true)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000000=6
loop
exitwhen not ( cjlocgn_00000000 < 12 )
call SetPlayerAllianceStateAllyBJ(Player(10), Player(cjlocgn_00000000), true)
call SetPlayerAllianceStateAllyBJ(Player(cjlocgn_00000000), Player(10), true)
call SetPlayerAlliance(Player(10), Player(cjlocgn_00000000), ALLIANCE_SHARED_VISION_FORCED, true)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call SetPlayerName(Player(l__i), "|c00" + Initbwlib__PN_Dec2Hex(s__color[l__i] / ( 0x10000 )) + Initbwlib__PN_Dec2Hex(ModuloInteger(s__color[l__i] / ( 0x100 ), ( 0x100 ))) + Initbwlib__PN_Dec2Hex(ModuloInteger(s__color[l__i], ( 0x100 ))) + GetPlayerName(Player(l__i)) + " |r")
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., mapinitMsg0)
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., mapinitMsg1)
set l__i=l__i + 1
endloop
call TimerStart(CreateTimer(), 2., false, function cj_anonym__3)
call TimerStart(CreateTimer(), 60., false, function cj_anonym__4)
call TimerStart(CreateTimer(), 0.01, false, function cj_anonym__5)
endfunction

//library Initbwlib ends
function InitGlobals takes nothing returns nothing
local integer l__i=0
set udg_L=0
set udg_TPC=0
set udg_swi=0
set udg_CCollect=0
set udg_fmcsam=0
set udg_UDex=0
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_UnitIndexLock[l__i]=0
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_UDexPrev[l__i]=0
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_UDexNext[l__i]=0
set l__i=l__i + 1
endloop
set udg_UnitIndexEvent=0
set udg_UDexRecycle=0
set udg_UnitIndexerEnabled=false
set udg_UDexWasted=0
set udg_UDexGen=0
set udg_DamageTypeExplosive=0
set udg_DamageTypeCriticalStrike=0
set udg_DamageTypeHeal=0
set udg_DamageTypeReduced=0
set udg_DamageTypeBlocked=0
set udg_DAMAGE_FACTOR_BRACERS=0
set udg_DAMAGE_FACTOR_ELUNES=0
set udg_DAMAGE_FACTOR_ETHEREAL=0
set udg_DamageEventAOE=0
set udg_DamageEventLevel=0
set udg_AfterDamageEvent=0
set udg_DamageEvent=0
set udg_AOEDamageEvent=0
set udg_DamageModifierEvent=0
set udg_ClearDamageEvent=CreateTrigger()
set udg_DamageEventAmount=0
set udg_DamageEventPrevAmt=0
set udg_DamageEventOverride=false
set udg_NextDamageOverride=false
set udg_DamageEventTrigger=CreateTrigger()
set udg_DmgEvTrig=CreateTrigger()
set udg_DamageEventType=0
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_LastDmgPrevType[l__i]=0
set l__i=l__i + 1
endloop
set udg_NextDamageType=0
set udg_DamageEventsWasted=0
set udg_DmgEvRecursionN=0
set udg_DmgEvRunning=false
set udg_DmgEvStarted=false
set udg_IsDamageSpell=false
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_LastDmgWasSpell[l__i]=false
set l__i=l__i + 1
endloop
set udg_LastDamageHP=0
set udg_DmgEvTimer=CreateTimer()
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_LastDmgPrevAmount[l__i]=0
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_LastDmgValue[l__i]=0
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_HideDamageFrom[l__i]=false
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen ( l__i > 1 )
set udg_UnitDamageRegistered[l__i]=false
set l__i=l__i + 1
endloop
set udg_DamageEventAOEGroup=CreateGroup()
set udg_DamageTypeSpell=0
endfunction
function InitSounds takes nothing returns nothing
set gg_snd_MuradinTaunt1=CreateSound("Sound\\Dialogue\\Extra\\MuradinTaunt1.mp3", false, false, false, 10, 10, "")
call SetSoundParamsFromLabel(gg_snd_MuradinTaunt1, "MuradinTaunt1")
set gg_snd_StasisTotem=CreateSound("Units\\Orc\\StasisTotem\\StasisTotem.wav", false, true, false, 10, 10, "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StasisTotem, "StasisTotemDeath")
call SetSoundDuration(gg_snd_StasisTotem, 1858)
set gg_snd_ArthasYesAttack1=CreateSound("Units\\Human\\Arthas\\ArthasYesAttack1.wav", false, false, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_ArthasYesAttack1, "ArthasYesAttack")
call SetSoundDuration(gg_snd_ArthasYesAttack1, 1036)
set gg_snd_N01Archimonde30=CreateSound("Sound\\Dialogue\\NightElfCampaign\\NightElf01\\N01Archimonde30.mp3", false, false, false, 10, 10, "")
call SetSoundParamsFromLabel(gg_snd_N01Archimonde30, "N01Archimonde30")
set gg_snd_CaptainYesAttack1=CreateSound("Units\\Human\\TheCaptain\\CaptainYesAttack1.wav", false, false, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_CaptainYesAttack1, "CaptainYesAttack")
call SetSoundDuration(gg_snd_CaptainYesAttack1, 1238)
set gg_snd_PeasantYes4=CreateSound("Units\\Human\\Peasant\\PeasantYes4.wav", false, false, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_PeasantYes4, "PeasantYes")
call SetSoundDuration(gg_snd_PeasantYes4, 1002)
set gg_snd_HeroBladeMasterPissed1=CreateSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav", false, false, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroBladeMasterPissed1, "HeroBladeMasterPissed")
call SetSoundDuration(gg_snd_HeroBladeMasterPissed1, 5959)
set gg_snd_ArthasTheme="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
set gg_snd_IllidansTheme="Sound\\Music\\mp3Music\\IllidansTheme.mp3"
set gg_snd_LichKingTheme="Sound\\Music\\mp3Music\\LichKingTheme.mp3"
set gg_snd_NagaTheme="Sound\\Music\\mp3Music\\NagaTheme.mp3"
set gg_snd_NewTournament=CreateSound("Sound\\Interface\\NewTournament.wav", false, false, false, 10, 10, "")
call SetSoundParamsFromLabel(gg_snd_NewTournament, "NewTournament")
call SetSoundDuration(gg_snd_NewTournament, 7988)
set gg_snd_DarkVictory=CreateSound("Sound\\Music\\mp3Music\\DarkVictory.mp3", false, false, false, 10, 10, "DefaultEAXON")
call SetSoundChannel(gg_snd_DarkVictory, 0)
call SetSoundVolume(gg_snd_DarkVictory, 115)
call SetSoundPitch(gg_snd_DarkVictory, 1.0)
set gg_snd_PursuitTheme=CreateSound("Sound\\Music\\mp3Music\\PursuitTheme.mp3", false, false, false, 10, 10, "DefaultEAXON")
call SetSoundChannel(gg_snd_PursuitTheme, 0)
call SetSoundVolume(gg_snd_PursuitTheme, 115)
call SetSoundPitch(gg_snd_PursuitTheme, 1.0)
set gg_snd_GoblinSapperYes5=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYes5.wav", false, false, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GoblinSapperYes5, "GoblinSapperYes")
call SetSoundDuration(gg_snd_GoblinSapperYes5, 2811)
set gg_snd_GoblinZeppelinYes3=CreateSound("Units\\Creeps\\GoblinZeppelin\\GoblinZeppelinYes3.wav", false, false, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GoblinZeppelinYes3, "GoblinZeppelinYes")
call SetSoundDuration(gg_snd_GoblinZeppelinYes3, 2499)
set gg_snd_HeroTinkerYes4=CreateSound("Units\\Creeps\\HeroTinker\\HeroTinkerYes4.wav", false, false, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroTinkerYes4, "HeroTinkerYes")
call SetSoundDuration(gg_snd_HeroTinkerYes4, 1702)
set gg_snd_ThunderClapCaster=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav", false, false, true, 10, 10, "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ThunderClapCaster, "ThunderClap")
call SetSoundDuration(gg_snd_ThunderClapCaster, 3451)
set gg_snd_GyrocopterDeath1=CreateSound("Units\\Human\\Gyrocopter\\GyrocopterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GyrocopterDeath1, "GyrocopterDeath")
call SetSoundDuration(gg_snd_GyrocopterDeath1, 3879)
set gg_snd_Comradeship="Sound\\Music\\mp3Music\\Comradeship.mp3"
set gg_snd_NightElfDefeat="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"
set gg_snd_OrcDefeat="Sound\\Music\\mp3Music\\OrcDefeat.mp3"
set gg_snd_Orc1="Sound\\Music\\mp3Music\\Orc1.mp3"
set gg_snd_Orc2="Sound\\Music\\mp3Music\\Orc2.mp3"
set gg_snd_Orc3="Sound\\Music\\mp3Music\\Orc3.mp3"
set gg_snd_Mainscreen="Sound\\Music\\mp3Music\\Mainscreen.mp3"
set gg_snd_BloodElfTheme="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"
set gg_snd_Human1="Sound\\Music\\mp3Music\\Human1.mp3"
set gg_snd_CreepAggroWhat1=CreateSound("Sound\\Interface\\CreepAggroWhat1.wav", false, false, false, 10, 10, "")
call SetSoundParamsFromLabel(gg_snd_CreepAggroWhat1, "CreepAggro")
call SetSoundDuration(gg_snd_CreepAggroWhat1, 1236)
set gg_snd_Hint=CreateSound("Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "")
call SetSoundParamsFromLabel(gg_snd_Hint, "Hint")
call SetSoundDuration(gg_snd_Hint, 2006)
set gg_snd_DarkVictory01="Sound\\Music\\mp3Music\\DarkVictory.mp3"
set gg_snd_EarthquakeLoop1=CreateSound("Abilities\\Spells\\Orc\\Earthquake\\EarthquakeLoop1.wav", false, true, true, 10, 10, "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_EarthquakeLoop1, "EarthquakeLoop")
call SetSoundDuration(gg_snd_EarthquakeLoop1, 1962)
set gg_snd_CrippleTarget1=CreateSound("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget1.wav", false, true, true, 10, 10, "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CrippleTarget1, "Cripple")
call SetSoundDuration(gg_snd_CrippleTarget1, 2316)
set gg_snd_NerubianCryptLordYesAttack2=CreateSound("Units\\Undead\\HeroCryptLord\\NerubianCryptLordYesAttack2.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_NerubianCryptLordYesAttack2, "HeroCryptLordYesAttack")
call SetSoundDuration(gg_snd_NerubianCryptLordYesAttack2, 4534)
set gg_snd_EvilArthasYesAttack5=CreateSound("Units\\Undead\\EvilArthas\\EvilArthasYesAttack5.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_EvilArthasYesAttack5, "EvilArthasYesAttack")
call SetSoundDuration(gg_snd_EvilArthasYesAttack5, 1947)
set gg_snd_HeroDreadlordYesAttack2=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordYesAttack2.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroDreadlordYesAttack2, "HeroDreadLordYesAttack")
call SetSoundDuration(gg_snd_HeroDreadlordYesAttack2, 1985)
set gg_snd_HeroDreadlordYesAttack3=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordYesAttack3.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroDreadlordYesAttack3, "HeroDreadLordYesAttack")
call SetSoundDuration(gg_snd_HeroDreadlordYesAttack3, 934)
set gg_snd_DeathKnightYesAttack1=CreateSound("Units\\Undead\\HeroDeathKnight\\DeathKnightYesAttack1.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_DeathKnightYesAttack1, "HeroDeathKnightYesAttack")
call SetSoundDuration(gg_snd_DeathKnightYesAttack1, 3298)
set gg_snd_TrollbatriderYesAttack3=CreateSound("Units\\Orc\\BatTroll\\TrollbatriderYesAttack3.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_TrollbatriderYesAttack3, "TrollBatriderYesAttack")
call SetSoundDuration(gg_snd_TrollbatriderYesAttack3, 2486)
set gg_snd_WarlordWarcry1=CreateSound("Units\\Demon\\ChaosWarlord\\WarlordWarcry1.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_WarlordWarcry1, "ChaosWarlordWarcry")
call SetSoundDuration(gg_snd_WarlordWarcry1, 2024)
set gg_snd_WarlordYesAttack1=CreateSound("Units\\Demon\\ChaosWarlord\\WarlordYesAttack1.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_WarlordYesAttack1, "ChaosWarlordYesAttack")
call SetSoundDuration(gg_snd_WarlordYesAttack1, 3893)
set gg_snd_HPitLordYesAttack3=CreateSound("Units\\Demon\\HeroPitLord\\HPitLordYesAttack3.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HPitLordYesAttack3, "HeroPitLordYesAttack")
call SetSoundDuration(gg_snd_HPitLordYesAttack3, 3066)
set gg_snd_HeroMountainKingReady1=CreateSound("Units\\Human\\HeroMountainKing\\HeroMountainKingReady1.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroMountainKingReady1, "HeroMountainKingReady")
call SetSoundDuration(gg_snd_HeroMountainKingReady1, 1449)
set gg_snd_HeroMountainKingYesAttack3=CreateSound("Units\\Human\\HeroMountainKing\\HeroMountainKingYesAttack3.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroMountainKingYesAttack3, "HeroMountainKingYesAttack")
call SetSoundDuration(gg_snd_HeroMountainKingYesAttack3, 1311)
set gg_snd_HeroPaladinYesAttack3=CreateSound("Units\\Human\\HeroPaladin\\HeroPaladinYesAttack3.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroPaladinYesAttack3, "HeroPaladinYesAttack")
call SetSoundDuration(gg_snd_HeroPaladinYesAttack3, 1718)
set gg_snd_TaurenYesAttack1=CreateSound("Units\\Orc\\Tauren\\TaurenYesAttack1.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_TaurenYesAttack1, "TaurenYesAttack")
call SetSoundDuration(gg_snd_TaurenYesAttack1, 1759)
set gg_snd_HeroLichYesAttack1=CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, true, true, 10, 10, "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1, "HeroLichYesAttack")
call SetSoundDuration(gg_snd_HeroLichYesAttack1, 2636)
set gg_snd_NaishaYesAttack3=CreateSound("Units\\NightElf\\Naisha\\NaishaYesAttack3.wav", false, true, true, 10, 10, "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_NaishaYesAttack3, "NaishaYesAttack")
call SetSoundDuration(gg_snd_NaishaYesAttack3, 2201)
set gg_snd_Coin8=CreateSound("war3mapImported\\Coin8.mp3", false, false, true, 10, 10, "DefaultEAXON")
call SetSoundChannel(gg_snd_Coin8, 0)
call SetSoundVolume(gg_snd_Coin8, 127)
call SetSoundPitch(gg_snd_Coin8, 1.0)
endfunction
function CreateAllItems takes nothing returns nothing
local integer itemID
call CreateItem(0x49303047, - 1087.1, - 404.7)
call CreateItem(0x49303145, - 1070.0, - 482.1)
call CreateItem(0x49303644, - 721.2, - 771.8)
call CreateItem(0x49304159, - 1055.5, - 515.9)
call CreateItem(0x49304236, - 1227.6, - 487.2)
call CreateItem(0x49304236, - 10391.8, - 247.7)
endfunction
function CreateBuildingsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, - 11072.0, 192.0, 270.000)
set u=null
endfunction
function CreateUnitsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x48303233, - 803.7, - 327.0, 315.251)
set u=CreateUnit(p, 0x48303042, - 717.4, - 980.8, 131.150)
call SetHeroLevel(u, 12, false)
call SetUnitState(u, UNIT_STATE_MANA, 882)
set u=CreateUnit(p, 0x4830304E, - 965.7, - 390.2, 267.415)
set u=CreateUnit(p, 0x4830304A, - 501.6, - 580.8, 138.450)
call SetHeroLevel(u, 12, false)
call SetUnitState(u, UNIT_STATE_MANA, 483)
set u=CreateUnit(p, 0x48303245, - 505.6, - 420.8, 225.130)
set u=CreateUnit(p, 0x48303231, - 1190.4, - 743.7, 358.989)
set u=CreateUnit(p, 0x48303236, - 2571.8, - 1377.3, 194.620)
call SetHeroLevel(u, 6, false)
call SetUnitState(u, UNIT_STATE_MANA, 676)
set u=CreateUnit(p, 0x48303047, - 371.2, - 756.4, 272.711)
set u=CreateUnit(p, 0x48303241, - 2629.3, - 1560.2, 220.081)
set u=null
endfunction
function CreateBuildingsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, - 10944.0, 192.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, - 10816.0, 192.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, - 10688.0, 192.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer5 takes nothing returns nothing
local player p=Player(5)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_h00V_0010=CreateUnit(p, 0x68303056, - 5184.0, 1408.0, 270.000)
set gg_unit_h007_0023=CreateUnit(p, 0x68303037, - 9408.0, 896.0, 270.000)
set gg_unit_h007_0024=CreateUnit(p, 0x68303037, - 10048.0, 384.0, 270.000)
set u=CreateUnit(p, 0x68303247, - 8960.0, - 320.0, 270.000)
set gg_unit_h00W_0036=CreateUnit(p, 0x68303057, - 4224.0, 2304.0, 270.000)
set u=CreateUnit(p, 0x68303247, - 8448.0, 320.0, 270.000)
set gg_unit_h008_0040=CreateUnit(p, 0x68303038, - 10176.0, 1088.0, 270.000)
set u=CreateUnit(p, 0x68303247, - 9408.0, - 128.0, 270.000)
set u=CreateUnit(p, 0x68303247, - 8832.0, 768.0, 270.000)
set gg_unit_h00A_0048=CreateUnit(p, 0x68303041, - 5632.0, 1728.0, 270.000)
set gg_unit_h00U_0049=CreateUnit(p, 0x68303055, - 7424.0, 640.0, 270.000)
set gg_unit_h00Y_0052=CreateUnit(p, 0x68303059, - 9600.0, 512.0, 270.000)
set gg_unit_h00T_0054=CreateUnit(p, 0x68303054, - 7936.0, - 256.0, 270.000)
set gg_unit_h00X_0055=CreateUnit(p, 0x68303058, - 8000.0, 576.0, 270.000)
set u=CreateUnit(p, 0x6E303034, - 10752.0, - 448.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer6 takes nothing returns nothing
local player p=Player(6)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, 10432.0, 512.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, 10560.0, 512.0, 270.000)
set u=null
endfunction
function CreateUnitsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x6830314E, - 2561.3, - 688.5, 41.782)
set u=CreateUnit(p, 0x6830314E, - 2501.0, - 509.5, 60.504)
set u=CreateUnit(p, 0x6830314E, - 2320.1, - 471.0, 227.973)
set u=CreateUnit(p, 0x6830314E, - 2203.1, - 645.7, 82.389)
set u=CreateUnit(p, 0x6830314E, - 2280.4, - 769.7, 167.931)
set u=CreateUnit(p, 0x6830314E, - 2427.4, - 856.2, 346.794)
set u=CreateUnit(p, 0x6830314E, - 2497.3, - 781.2, 128.533)
set u=CreateUnit(p, 0x6830314E, - 2409.6, - 702.7, 68.007)
set u=CreateUnit(p, 0x6830314E, - 2374.7, - 569.0, 19.238)
set u=CreateUnit(p, 0x6830314E, - 2410.6, - 551.6, 319.723)
set u=CreateUnit(p, 0x6830314E, - 2437.2, - 607.6, 63.986)
set u=CreateUnit(p, 0x48303047, - 3231.7, - 1814.4, 13.786)
set u=null
endfunction
function CreateBuildingsForPlayer8 takes nothing returns nothing
local player p=Player(8)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, 10688.0, 512.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x68303258, 10816.0, 512.0, 270.000)
set u=null
endfunction
function CreateBuildingsForPlayer10 takes nothing returns nothing
local player p=Player(10)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_h00Z_0025=CreateUnit(p, 0x6830305A, 5504.0, 1536.0, 270.000)
set gg_unit_h010_0027=CreateUnit(p, 0x68303130, 8192.0, 960.0, 270.000)
set gg_unit_h013_0028=CreateUnit(p, 0x68303133, 5376.0, 1152.0, 270.000)
set gg_unit_h016_0029=CreateUnit(p, 0x68303136, 9920.0, 320.0, 270.000)
set gg_unit_h016_0030=CreateUnit(p, 0x68303136, 9472.0, - 448.0, 270.000)
set gg_unit_h011_0031=CreateUnit(p, 0x68303131, 9664.0, 0.0, 270.000)
set gg_unit_h012_0033=CreateUnit(p, 0x68303132, 3328.0, 2560.0, 270.000)
set gg_unit_h015_0034=CreateUnit(p, 0x68303135, 8192.0, 256.0, 270.000)
set gg_unit_h014_0038=CreateUnit(p, 0x68303134, 7552.0, 1024.0, 270.000)
set gg_unit_h009_0041=CreateUnit(p, 0x68303039, 10304.0, - 448.0, 270.000)
set u=CreateUnit(p, 0x68303248, 9472.0, 832.0, 270.000)
set u=CreateUnit(p, 0x68303248, 8832.0, - 256.0, 270.000)
set u=CreateUnit(p, 0x68303248, 8896.0, 832.0, 270.000)
set u=CreateUnit(p, 0x68303248, 8704.0, 320.0, 270.000)
set u=CreateUnit(p, 0x6E303034, 10496.0, 1088.0, 270.000)
set u=null
endfunction
function CreateNeutralHostileBuildings takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00D_0159=CreateUnit(p, 0x6E303044, - 128.0, 6080.0, 270.000)
endfunction
function CreateNeutralHostile takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x65626262, - 637.8, - 6637.4, 88.220)
set u=null
endfunction
function CreateNeutralPassiveBuildings takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x6E303045, - 11264.0, - 512.0, 270.000)
set u=CreateUnit(p, 0x6E303032, - 11264.0, - 256.0, 270.000)
set u=CreateUnit(p, 0x6E303030, - 11072.0, - 896.0, 270.000)
set u=CreateUnit(p, 0x6E303033, - 11264.0, - 768.0, 270.000)
set u=CreateUnit(p, 0x6E303057, - 10176.0, - 896.0, 270.000)
set u=CreateUnit(p, 0x6E303057, 9984.0, 1600.0, 270.000)
set u=CreateUnit(p, 0x6E303045, 11008.0, 1152.0, 270.000)
set u=CreateUnit(p, 0x6E303051, - 10368.0, - 896.0, 270.000)
set u=CreateUnit(p, 0x6E303051, 10176.0, 1600.0, 270.000)
set gg_unit_n00B_0043=CreateUnit(p, 0x6E303042, 10176.0, 3648.0, 270.000)
call SetUnitColor(gg_unit_n00B_0043, ConvertPlayerColor(11))
set u=CreateUnit(p, 0x6E303033, 11008.0, 1344.0, 270.000)
set gg_unit_n00C_0051=CreateUnit(p, 0x6E303043, 10432.0, 3264.0, 270.000)
call SetUnitColor(gg_unit_n00C_0051, ConvertPlayerColor(11))
set u=CreateUnit(p, 0x6E303048, - 2624.0, 6272.0, 270.000)
call WaygateSetDestination(u, GetRectCenterX(gg_rct________________060_____________________u), GetRectCenterY(gg_rct________________060_____________________u))
call WaygateActivate(u, true)
call SetUnitColor(u, ConvertPlayerColor(4))
set u=CreateUnit(p, 0x6E303048, 2496.0, 6272.0, 270.000)
call WaygateSetDestination(u, GetRectCenterX(gg_rct________________060), GetRectCenterY(gg_rct________________060))
call WaygateActivate(u, true)
call SetUnitColor(u, ConvertPlayerColor(4))
set u=CreateUnit(p, 0x6E303046, 7744.0, - 3456.0, 270.000)
call WaygateSetDestination(u, GetRectCenterX(gg_rct_Portal_left), GetRectCenterY(gg_rct_Portal_left))
call WaygateActivate(u, true)
call SetUnitColor(u, ConvertPlayerColor(1))
set u=CreateUnit(p, 0x6E303046, - 8704.0, - 3776.0, 270.000)
call WaygateSetDestination(u, GetRectCenterX(gg_rct_Portal_right), GetRectCenterY(gg_rct_Portal_right))
call WaygateActivate(u, true)
call SetUnitColor(u, ConvertPlayerColor(1))
set u=CreateUnit(p, 0x6E303047, 10432.0, 1600.0, 270.000)
set u=CreateUnit(p, 0x6E303047, - 10560.0, - 896.0, 270.000)
set gg_unit_n00A_0072=CreateUnit(p, 0x6E303041, 9920.0, 3264.0, 270.000)
call SetUnitColor(gg_unit_n00A_0072, ConvertPlayerColor(11))
set gg_unit_n00B_0074=CreateUnit(p, 0x6E303042, - 10560.0, 3584.0, 270.000)
call SetUnitColor(gg_unit_n00B_0074, ConvertPlayerColor(11))
set gg_unit_n00C_0075=CreateUnit(p, 0x6E303043, - 10304.0, 3200.0, 270.000)
call SetUnitColor(gg_unit_n00C_0075, ConvertPlayerColor(11))
set gg_unit_n00A_0093=CreateUnit(p, 0x6E303041, - 10816.0, 3200.0, 270.000)
call SetUnitColor(gg_unit_n00A_0093, ConvertPlayerColor(11))
set u=CreateUnit(p, 0x6E627365, - 1248.0, - 6240.0, 270.000)
set u=CreateUnit(p, 0x6E303030, 10944.0, 1536.0, 270.000)
set u=CreateUnit(p, 0x6E303032, 11008.0, 896.0, 270.000)
set u=CreateUnit(p, 0x6E303039, - 10816.0, - 896.0, 270.000)
set u=CreateUnit(p, 0x6E303039, 10688.0, 1600.0, 270.000)
set u=null
endfunction
function CreateNeutralPassive takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x6E303036, 669.3, - 5564.1, 284.190)
set u=CreateUnit(p, 0x6E303035, - 2121.7, - 3715.8, 131.440)
set u=CreateUnit(p, 0x6E303038, - 5362.1, - 2489.6, 300.160)
set u=CreateUnit(p, 0x6E303038, - 9567.3, - 3686.8, 210.540)
set u=CreateUnit(p, 0x6E303036, - 10870.1, 1162.1, 275.370)
set u=CreateUnit(p, 0x6E303035, - 9845.9, - 263.7, 312.043)
set u=CreateUnit(p, 0x6E303035, - 9474.9, 1452.6, 132.598)
set u=CreateUnit(p, 0x6E303037, - 8786.9, 419.4, 164.196)
set u=CreateUnit(p, 0x6E303038, - 9048.4, 1195.3, 346.146)
set u=CreateUnit(p, 0x6E303038, - 10067.3, 47.8, 346.937)
set u=CreateUnit(p, 0x6E303038, 9557.1, - 841.9, 6.021)
set u=CreateUnit(p, 0x6E303038, 9631.9, 593.0, 215.899)
set u=CreateUnit(p, 0x6E303035, 9100.6, 1292.6, 203.967)
set u=CreateUnit(p, 0x6E303035, 8636.3, - 363.9, 132.752)
set u=CreateUnit(p, 0x6E303037, 9082.5, 315.0, 144.200)
set u=CreateUnit(p, 0x6E303037, 10030.6, 724.4, 169.403)
set u=CreateUnit(p, 0x6E303036, 10348.0, 807.9, 165.042)
set u=CreateUnit(p, 0x6E303036, 8650.6, 179.4, 32.532)
set gg_unit_H021_0158=CreateUnit(p, 0x48303231, - 11002.9, - 3881.7, 359.000)
call SetHeroLevel(gg_unit_H021_0158, 20, false)
call SetUnitState(gg_unit_H021_0158, UNIT_STATE_MANA, 740)
call SelectHeroSkill(gg_unit_H021_0158, 0x41495141)
call SelectHeroSkill(gg_unit_H021_0158, 0x41495141)
call SelectHeroSkill(gg_unit_H021_0158, 0x41495141)
call IssueImmediateOrder(gg_unit_H021_0158, "")
set u=null
endfunction
function CreatePlayerBuildings takes nothing returns nothing
call CreateBuildingsForPlayer0()
call CreateBuildingsForPlayer1()
call CreateBuildingsForPlayer2()
call CreateBuildingsForPlayer3()
call CreateBuildingsForPlayer5()
call CreateBuildingsForPlayer6()
call CreateBuildingsForPlayer7()
call CreateBuildingsForPlayer8()
call CreateBuildingsForPlayer9()
call CreateBuildingsForPlayer10()
endfunction
function CreatePlayerUnits takes nothing returns nothing
call CreateUnitsForPlayer0()
call CreateUnitsForPlayer7()
endfunction
function CreateAllUnits takes nothing returns nothing
call CreateNeutralHostileBuildings()
call CreateNeutralPassiveBuildings()
call CreatePlayerBuildings()
call CreateNeutralHostile()
call CreateNeutralPassive()
call CreatePlayerUnits()
endfunction
function CreateRegions takes nothing returns nothing
local weathereffect we
set gg_rct_left_2_ghou_1_ooz=Rect(- 11232.0, - 2176.0, - 10080.0, - 1440.0)
set gg_rct_left_3_drake=Rect(- 9120.0, - 4256.0, - 8448.0, - 3392.0)
set gg_rct_left_2_ner_1_spid=Rect(- 8416.0, - 3712.0, - 7488.0, - 2720.0)
set gg_rct_left_2_gia_1_ghou=Rect(- 10272.0, - 7424.0, - 9472.0, - 6368.0)
set gg_rct_left_2_inca_1_ro=Rect(- 7584.0, - 5984.0, - 6624.0, - 5248.0)
set gg_rct________________006=Rect(- 5472.0, - 6976.0, - 4384.0, - 6496.0)
set gg_rct_left_3_trea=Rect(- 6400.0, - 896.0, - 5472.0, - 32.0)
set gg_rct_left_2_liz_1_cob=Rect(- 4512.0, - 3232.0, - 3456.0, - 2336.0)
set gg_rct_right_3_trea=Rect(5152.0, - 160.0, 6048.0, 512.0)
set gg_rct_right_2_ghou_1_ooz=Rect(9664.0, - 2208.0, 10784.0, - 1408.0)
set gg_rct_right_2_gia_1_ghou=Rect(8544.0, - 7296.0, 9472.0, - 6592.0)
set gg_rct_mid_2_liz_1_ner=Rect(- 1152.0, - 4032.0, - 96.0, - 3136.0)
set gg_rct_mid_2_trea_1_liz=Rect(- 1248.0, - 1984.0, - 128.0, - 1152.0)
set gg_rct_right_2__liz_1_cob=Rect(2016.0, - 3360.0, 3008.0, - 2496.0)
set gg_rct_right_2_ner_1_spid=Rect(6432.0, - 3584.0, 7328.0, - 2624.0)
set gg_rct_right_3_drake=Rect(7392.0, - 3840.0, 8032.0, - 2976.0)
set gg_rct_right_2_inca_1_ro=Rect(5920.0, - 5632.0, 6784.0, - 4832.0)
set gg_rct________________017=Rect(2720.0, - 7040.0, 3552.0, - 6208.0)
set gg_rct_Right_Moonwell=Rect(4000.0, - 4544.0, 4864.0, - 3808.0)
set gg_rct_Left_Moonwell=Rect(- 6048.0, - 4544.0, - 5216.0, - 3776.0)
set gg_rct_left_1_trea_1_cob_1_spid=Rect(- 6752.0, 5792.0, - 5760.0, 6720.0)
set gg_rct_right_1_trea_1_cob_1_spid=Rect(5472.0, 5728.0, 6400.0, 6496.0)
set gg_rct_right_2_gia_1_ooz=Rect(7232.0, 2976.0, 8096.0, 3776.0)
set gg_rct_left_2_gia_1_ooz=Rect(- 8384.0, 2656.0, - 7456.0, 3616.0)
set gg_rct_rresp=Rect(10208.0, 768.0, 10784.0, 1408.0)
set gg_rct_lresp=Rect(- 11040.0, - 768.0, - 10464.0, - 128.0)
set gg_rct_1=Rect(- 256.0, 3072.0, 0.0, 3328.0)
set gg_rct_2=Rect(- 736.0, 576.0, - 416.0, 800.0)
set gg_rct_r1s=Rect(10624.0, - 96.0, 11040.0, 256.0)
set gg_rct_r2s=Rect(8832.0, - 1120.0, 9152.0, - 736.0)
set gg_rct_rm2=Rect(8032.0, 480.0, 8288.0, 736.0)
set gg_rct_lm2=Rect(- 8064.0, 64.0, - 7840.0, 320.0)
set gg_rct_l2s=Rect(- 9568.0, - 1056.0, - 9216.0, - 672.0)
set gg_rct_l1s=Rect(- 11264.0, 576.0, - 10816.0, 896.0)
set gg_rct_lm1=Rect(- 8064.0, 64.0, - 7840.0, 288.0)
set gg_rct_rm1=Rect(8352.0, 352.0, 8736.0, 800.0)
set gg_rct_rthr=Rect(10080.0, - 640.0, 10528.0, - 224.0)
set gg_rct_lthr=Rect(- 10400.0, 896.0, - 9984.0, 1216.0)
set gg_rct_llhello=Rect(3264.0, 2304.0, 4064.0, 3072.0)
set gg_rct_rrhello=Rect(- 4992.0, 2240.0, - 4192.0, 2880.0)
set gg_rct_rp=Rect(9696.0, 2976.0, 10656.0, 3936.0)
set gg_rct_lp=Rect(- 11040.0, 2848.0, - 10080.0, 3808.0)
set gg_rct_llll=Rect(- 2784.0, 832.0, - 2624.0, 992.0)
set gg_rct_rrrr=Rect(1824.0, 960.0, 2208.0, 1280.0)
set gg_rct________________045=Rect(- 2976.0, 3200.0, - 2752.0, 3424.0)
set gg_rct________________046=Rect(1760.0, 3232.0, 1984.0, 3488.0)
set gg_rct_bb_bot_k=Rect(10656.0, - 64.0, 10816.0, 192.0)
set gg_rct_db_bot_k=Rect(10880.0, - 64.0, 11008.0, 192.0)
set gg_rct_db_top_k=Rect(8832.0, - 1120.0, 9152.0, - 992.0)
set gg_rct_bb_top_k=Rect(8832.0, - 896.0, 9152.0, - 768.0)
set gg_rct_bb_top_o=Rect(- 10944.0, 576.0, - 10816.0, 864.0)
set gg_rct_db_top_o=Rect(- 11264.0, 576.0, - 11072.0, 864.0)
set gg_rct_bb_bot_o=Rect(- 9568.0, - 832.0, - 9248.0, - 704.0)
set gg_rct_db_bot_o=Rect(- 9568.0, - 1056.0, - 9216.0, - 928.0)
set gg_rct_anit_verh=Rect(- 3072.0, 608.0, 2688.0, 1408.0)
set gg_rct_anti_niz=Rect(- 2496.0, 2784.0, 2688.0, 3904.0)
set gg_rct_Portal_right=Rect(8288.0, - 4128.0, 8448.0, - 3968.0)
set gg_rct_Portal_left=Rect(- 9312.0, - 4416.0, - 9152.0, - 4288.0)
set gg_rct________________060=Rect(- 2816.0, 5600.0, - 2464.0, 5760.0)
set gg_rct________________060_____________________u=Rect(2304.0, 5536.0, 2656.0, 5664.0)
set gg_rct_right_runekeeper=Rect(4256.0, - 2368.0, 5312.0, - 1632.0)
set gg_rct_left_runekeeper=Rect(- 6560.0, - 2880.0, - 5472.0, - 1952.0)
endfunction
function CreateCameras takes nothing returns nothing
set gg_cam_Camera_EndGameCult=CreateCameraSetup()
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_ZOFFSET, 247.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_ROTATION, 128.3, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_ANGLE_OF_ATTACK, 339.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_TARGET_DISTANCE, 2106.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_ROLL, 0.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_FIELD_OF_VIEW, 77.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameCult, CAMERA_FIELD_FARZ, 5000.0, 0.0)
call CameraSetupSetDestPosition(gg_cam_Camera_EndGameCult, 10403.5, - 508.5, 0.0)
set gg_cam_Camera_EndGameOrden=CreateCameraSetup()
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_ZOFFSET, 247.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_ROTATION, 312.3, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_ANGLE_OF_ATTACK, 339.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_TARGET_DISTANCE, 2106.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_ROLL, 0.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_FIELD_OF_VIEW, 77.0, 0.0)
call CameraSetupSetField(gg_cam_Camera_EndGameOrden, CAMERA_FIELD_FARZ, 5000.0, 0.0)
call CameraSetupSetDestPosition(gg_cam_Camera_EndGameOrden, - 10205.5, 1118.4, 0.0)
endfunction
function Always_True takes nothing returns boolean
return true
endfunction
function Text takes string text,unit u,real size,real red,real green,real blue,real alpha returns nothing
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagTextBJ(bj_lastCreatedTextTag, text, size)
call SetTextTagPosUnitBJ(bj_lastCreatedTextTag, u, 0.00)
call SetTextTagColorBJ(bj_lastCreatedTextTag, red, green, blue, alpha)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2)
call SetTextTagLifespan(bj_lastCreatedTextTag, 4)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0., 0.027)
endfunction
function TimerStartEx takes timer whichTimer,real period,boolean isPeriodic,code handlerFunc,integer userData returns nothing
call TimerStart(whichTimer, I2R(userData), false, null)
call PauseTimer(whichTimer)
call TimerStart(whichTimer, period, isPeriodic, handlerFunc)
endfunction
function TimerGetUserData takes timer whichTimer returns integer
return R2I(TimerGetRemaining(whichTimer) + 0.5)
endfunction
function GetTerrainZ takes real x,real y returns real
call MoveLocation(LOC, x, y)
return GetLocationZ(LOC)
endfunction
function PlayerTeam takes player pla returns force
if IsPlayerInForce(pla, uteam_1) then
return uteam_1
endif
if IsPlayerInForce(pla, uteam_2) then
return uteam_2
endif
return null
endfunction
function UnitAddPowerUpItem takes unit u,integer id returns boolean
local item it
local boolean invAdded=false
local boolean added=true
set it=CreateItem(id, 0, 0)
if GetUnitAbilityLevel(u, 0x41496E76) == 0 then
set invAdded=true
call UnitAddAbility(u, 0x41496E76)
endif
if UnitAddItem(u, it) == false then
set added=false
elseif GetWidgetLife(it) > 0.00 then
set added=false
endif
call RemoveItem(it)
if invAdded then
call UnitRemoveAbility(u, 0x41496E76)
endif
set it=null
return added
endfunction
function IsUnitDead takes unit u returns boolean
return IsUnitType(u, UNIT_TYPE_DEAD) or GetUnitTypeId(u) < 1
endfunction
function AddSpecialEffectZ takes string path,real x,real y,real z returns effect
local destructable d=CreateDestructableZ(0x4F546970, x, y, z, 0, 1, 0)
set Zeffect=AddSpecialEffect(path, x, y)
call RemoveDestructable(d)
set d=null
return Zeffect
endfunction
function Error takes player p,string s returns nothing
local sound m=CreateSoundFromLabel("InterfaceError", false, false, false, 10, 10)
if ( GetLocalPlayer() == p ) then
if ( s != "" ) and ( p != null ) then
call ClearTextMessages()
call DisplayTimedTextToPlayer(p, 0., 0., 1.5, "\n\n\n\n                                                  |cffffcc00" + s + "|r\n\n\n\n\n\n\n\n\n\n\n\n")
endif
call StartSound(m)
endif
call KillSoundWhenDone(m)
set m=null
endfunction
function IsUnitInvulnerable takes unit Unit returns boolean
local real Health_Current=GetWidgetLife(Unit)
local real Mana_Current=GetUnitState(Unit, UNIT_STATE_MANA)
local boolean Check_Health
call SetWidgetLife(Unit, Health_Current + 0.001)
if Health_Current != GetWidgetLife(Unit) then
call UnitDamageTarget(Unit, Unit, 0.001, false, true, null, null, null)
set Check_Health=( GetWidgetLife(Unit) == Health_Current + 0.001 )
else
call UnitDamageTarget(Unit, Unit, 0.001, false, true, null, null, null)
set Check_Health=( GetWidgetLife(Unit) == Health_Current )
call SetWidgetLife(Unit, Health_Current)
endif
if Check_Health then
return not ( GetUnitState(Unit, UNIT_STATE_MANA) != Mana_Current )
endif
return Check_Health
endfunction
function DamagePoint takes unit source,real delay,real radius,real x,real y,unit targ,real amount,boolean attack,attacktype attackType,damagetype damageType returns boolean
local boolean b
set IsTriggerDamage=true
set b=UnitDamagePoint(source, delay, radius, x, y, amount, attack, false, attackType, damageType, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
return b
endfunction
function DamageTarget takes unit source,unit targ,real amount,boolean attack,attacktype attackType,damagetype damageType returns boolean
local boolean b
set IsTriggerDamage=true
set b=UnitDamageTarget(source, targ, amount, attack, false, attackType, damageType, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
return b
endfunction
function CastSpellOnTargetTimed takes unit source,unit targ,integer idspell,integer lvl,string orderstr,real dummylifespan returns boolean
local unit dummy=CreateUnit(GetOwningPlayer(source), 0x68303164, GetUnitX(targ), GetUnitY(targ), 0.)
local boolean b
call UnitAddAbility(dummy, idspell)
call SetUnitAbilityLevel(dummy, idspell, lvl)
set b=IssueTargetOrder(dummy, orderstr, targ)
call UnitApplyTimedLife(dummy, 0x42544C46, dummylifespan)
set dummy=null
return b
endfunction
function CastSpellOnPointTimed takes unit source,real x,real y,integer idspell,integer lvl,string orderstr,real dummylifespan returns boolean
local unit dummy=CreateUnit(GetOwningPlayer(source), 0x68303164, x, y, 0.)
local boolean b
call UnitAddAbility(dummy, idspell)
call SetUnitAbilityLevel(dummy, idspell, lvl)
set b=IssuePointOrder(dummy, orderstr, x, y)
call UnitApplyTimedLife(dummy, 0x42544C46, dummylifespan)
set dummy=null
return b
endfunction
function GroupAddUnitsInTriangle_AngleCheck takes real angle,real angle1,real angle2,real PI2 returns boolean
local real x
if ( angle1 > angle2 ) then
set x=angle1
set angle1=angle2
set angle2=x
endif
if ( angle2 - angle1 > angle1 - ( angle2 - PI2 ) ) then
set angle2=angle2 - PI2
if ( angle < bj_PI ) then
set angle=angle - PI2
endif
return ( angle >= angle2 ) and ( angle <= angle1 )
endif
return ( angle >= angle1 ) and ( angle <= angle2 )
endfunction
function GetRectThatLimitsTriangle takes real x1,real y1,real x2,real y2,real x3,real y3 returns rect
local real maxx
local real minx
if ( x1 > x2 ) then
if ( x2 > x3 ) then
set maxx=x1
set minx=x3
elseif ( x3 > x1 ) then
set maxx=x3
set minx=x2
else
set maxx=x1
set minx=x2
endif
elseif ( x1 > x3 ) then
set maxx=x2
set minx=x3
elseif ( x3 > x2 ) then
set maxx=x3
set minx=x1
else
set maxx=x2
set minx=x1
endif
if ( y1 > y2 ) then
if ( y2 > y3 ) then
return ALL_RemoveRect(Rect(minx, y3, maxx, y1))
elseif ( y3 > y1 ) then
return ALL_RemoveRect(Rect(minx, y2, maxx, y3))
else
return ALL_RemoveRect(Rect(minx, y2, maxx, y1))
endif
elseif ( y1 > y3 ) then
return ALL_RemoveRect(Rect(minx, y3, maxx, y2))
elseif ( y3 > y2 ) then
return ALL_RemoveRect(Rect(minx, y1, maxx, y3))
endif
return ALL_RemoveRect(Rect(minx, y1, maxx, y2))
endfunction
function GroupAddUnitsInTriangle takes group whichGroup,real x1,real y1,real x2,real y2,real x3,real y3 returns nothing
local rect semi=GetRectThatLimitsTriangle(x1 , y1 , x2 , y2 , x3 , y3)
local group inrect=CreateGroup()
local unit picked
local real x
local real y
local real alpha=Atan2(y2 - y1, x2 - x1)
local real beta=Atan2(y3 - y1, x3 - x1)
local real gama=Atan2(y1 - y2, x1 - x2)
local real delta=Atan2(y3 - y2, x3 - x2)
local real PI2=bj_PI + bj_PI
call GroupEnumUnitsInRect(inrect, semi, null)
loop
set picked=FirstOfGroup(inrect)
exitwhen picked == null
set x=GetUnitX(picked)
set y=GetUnitY(picked)
if IsUnitInGroup(picked, whichGroup) then
elseif ( GroupAddUnitsInTriangle_AngleCheck(Atan2(y - y1, x - x1) , alpha , beta , PI2) and GroupAddUnitsInTriangle_AngleCheck(Atan2(y - y2, x - x2) , gama , delta , PI2) ) then
call GroupAddUnit(whichGroup, picked)
endif
call GroupRemoveUnit(inrect, picked)
endloop
call RemoveRect(semi)
call DestroyGroup(inrect)
set whichGroup=null
set picked=null
set semi=null
set inrect=null
endfunction
function DistanceBetweenCord takes real AX,real AY,real BX,real BY returns real
local real dx=BX - AX
local real dy=BY - AY
return SquareRoot(dx * dx + dy * dy)
endfunction
function AngleBetweenCord takes real AX,real AY,real BX,real BY returns real
return bj_RADTODEG * Atan2(BY - AY, BX - AX)
endfunction
function UnitAddGroupOnLine takes group gr2,real X1,real Y1,real X2,real Y2,real Size returns group
local integer Count=R2I(DistanceBetweenCord(X1 , Y1 , X2 , Y2) / 10 + 0.9)
local real Angle=AngleBetweenCord(X1 , Y1 , X2 , Y2) * bj_DEGTORAD
local group gr=CreateGroup()
local unit u
loop
exitwhen Count < 0
set X1=X1 + 10 * Cos(Angle)
set Y1=Y1 + 10 * Sin(Angle)
call GroupEnumUnitsInRange(gr, X1, Y1, Size, null)
loop
set u=FirstOfGroup(gr)
exitwhen u == null
call GroupAddUnit(gr2, u)
call GroupRemoveUnit(gr, u)
endloop
call GroupClear(gr)
set Count=Count - 1
endloop
call DestroyGroup(gr)
set gr=null
set u=null
return gr2
endfunction
function Trig_Info_Actions takes nothing returns nothing
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_7853", "TRIGSTR_7854", "ReplaceableTextures\\CommandButtons\\BTNMarksmanship.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_7855", "TRIGSTR_7856", "ReplaceableTextures\\CommandButtons\\BTNTaunt.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_7857", "TRIGSTR_7858", "ReplaceableTextures\\CommandButtons\\BTNSorceressMaster.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_7859", "TRIGSTR_7860", "ReplaceableTextures\\CommandButtons\\BTNGenericCreepBuilding.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_7861", "TRIGSTR_7862", "ReplaceableTextures\\CommandButtons\\BTNHeal.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_7863", "TRIGSTR_7864", "ReplaceableTextures\\CommandButtons\\BTNDryadDispelMagic.blp")
endfunction
function InitTrig_Info takes nothing returns nothing
set gg_trg_Info=CreateTrigger()
call TriggerAddAction(gg_trg_Info, function Trig_Info_Actions)
endfunction
// scope crafthouse begins
function TEND1 takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call SetUnitInvulnerable(u, false)
call PauseTimer(t)
call FlushChildHashtable(hash, GetHandleId(t))
call DestroyTimer(t)
set u=null
set t=null
endfunction
function Trig_CHDmgCheckACT_Actions takes nothing returns nothing
local unit u=udg_DamageEventTarget
local unit a=udg_DamageEventSource
local timer cjlocgn_00000000
local integer cjlocgn_00000001
if GetUnitTypeId(u) == 0x6E303044 then
if IsUnitType(a, UNIT_TYPE_HERO) and not IsUnitIllusion(a) and IsUnitEnemy(a, GetOwningPlayer(u)) and GetUnitAbilityLevel(a, 0x416C6F63) == 0 and udg_DamageEventAmount >= 1. then
if GetUnitState(u, UNIT_STATE_LIFE) > 1. then
set udg_DamageEventAmount=1.
else
call SetUnitInvulnerable(u, true)
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE))
set cjlocgn_00000000=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000000), 0, u)
call TimerStart(cjlocgn_00000000, 10.01, false, function TEND1)
set cjlocgn_00000001=GetRandomInt(1, 4)
if cjlocgn_00000001 == 1 then
call StartSound(gg_snd_GoblinSapperYes5)
elseif cjlocgn_00000001 == 2 then
call StartSound(gg_snd_GoblinZeppelinYes3)
elseif cjlocgn_00000001 == 3 then
call StartSound(gg_snd_N01Archimonde30)
elseif cjlocgn_00000001 == 4 then
call StartSound(gg_snd_HeroTinkerYes4)
endif
if PlayerTeam(GetOwningPlayer(a)) == uteam_1 then
call SetUnitOwner(u, Player(5), true)
call UnitAddAbility(u, 0x41303338)
call DisplayTextToForce(uteam_1, "|c00FE8A00Силы Ордена|r захватили Мастерскую!")
call DisplayTextToForce(uteam_2, "|c00FE8A00Силы Ордена|r захватили Мастерскую!")
else
call SetUnitOwner(u, Player(10), true)
call UnitAddAbility(u, 0x41303338)
call DisplayTextToForce(uteam_1, "|c00116246Силы Культа|r захватили Мастерскую!")
call DisplayTextToForce(uteam_2, "|c00116246Силы Культа|r захватили Мастерскую!")
endif
set cjlocgn_00000000=null
endif
else
set udg_DamageEventAmount=0.
endif
elseif GetUnitAbilityLevel(a, 0x42303045) > 0 and IsUnitType(udg_DamageEventTarget, UNIT_TYPE_STRUCTURE) then
set udg_DamageEventAmount=udg_DamageEventAmount * ( 1.2 )
endif
set u=null
set a=null
endfunction
function cj_callback_00000000 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Trig_CHDmgCheckACT_Actions)
endfunction
// scope crafthouse ends
function Trig_rly_ez_money_Actions takes nothing returns nothing
call AdjustPlayerStateBJ(400, Player(0), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(1), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(2), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(3), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(6), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(7), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(8), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(400, Player(9), PLAYER_STATE_RESOURCE_GOLD)
endfunction
function InitTrig_rly_ez_money takes nothing returns nothing
set gg_trg_rly_ez_money=CreateTrigger()
call TriggerAddAction(gg_trg_rly_ez_money, function Trig_rly_ez_money_Actions)
endfunction
function Trig_Dont_touch_ally_Actions takes nothing returns nothing
local unit trig=GetTriggerUnit()
local unit at=GetAttacker()
if GetUnitTypeId(trig) != 0x68303164 and ( ( IsUnitAlly(at, GetOwningPlayer(trig)) or GetOwningPlayer(at) == GetOwningPlayer(trig) ) and ( IsUnitType(trig, UNIT_TYPE_STRUCTURE) or IsUnitType(trig, UNIT_TYPE_HERO) or ( not IsUnitType(trig, UNIT_TYPE_STRUCTURE) and not IsUnitType(trig, UNIT_TYPE_HERO) and GetUnitState(trig, UNIT_STATE_LIFE) >= GetUnitState(trig, UNIT_STATE_MAX_LIFE) * 0.20 ) ) ) then
call IssueImmediateOrder(GetAttacker(), "stop")
endif
set at=null
set trig=null
endfunction
function InitTrig_Dont_touch_ally takes nothing returns nothing
set gg_trg_Dont_touch_ally=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Dont_touch_ally, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_Dont_touch_ally, function Trig_Dont_touch_ally_Actions)
endfunction
// scope datdamooge begins
function damooge_text takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local boolean is_on1=LoadBoolean(hash, GetHandleId(GetOwningPlayer(u)), 69)
local boolean is_on2=LoadBoolean(hash, GetHandleId(GetOwningPlayer(t)), 69)
local real dmg
if not IsUnitVisible(t, GetOwningPlayer(u)) or ( not is_on1 and not is_on2 ) then
set t=null
set u=null
return
endif
set dmg=udg_DamageEventAmount
if dmg < 1 then
set t=null
set u=null
return
endif
if udg_IsDamageSpell == true then
call CreateTextTagUnitBJ(I2S(R2I(dmg)), t, - 10., 10.00, 200, 0, 200, 0)
else
call CreateTextTagUnitBJ(I2S(R2I(dmg)), t, - 10., 10.00, 200, 0, 0, 0)
endif
call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 15, GetRandomInt(45, 135))
call SetTextTagPermanentBJ(bj_lastCreatedTextTag, false)
call SetTextTagLifespanBJ(bj_lastCreatedTextTag, 1.)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag, 0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
if 1 == 1 then
call SetTextTagVisibility(bj_lastCreatedTextTag, true)
endif
set t=null
set u=null
endfunction
function InitTrig_DAMAGE_REPORT takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function damooge_text)
set trg=null
endfunction
// scope datdamooge ends
// scope LeaversAxaxa begins
function Gold_Distribution takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer gold=GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)
local integer startcount=0
local integer endcount=0
local integer l__i=0
local integer amountpl=0
if GetPlayerId(p) <= 5 then
set startcount=0
else
set startcount=6
endif
set endcount=startcount + 5
set l__i=startcount
loop
exitwhen not ( l__i < endcount )
if GetPlayerSlotState(Player(l__i)) == PLAYER_SLOT_STATE_PLAYING then
set amountpl=amountpl + 1
endif
set l__i=l__i + 1
endloop
if amountpl != 0 then
set gold=gold / ( amountpl )
endif
set l__i=startcount
loop
exitwhen not ( l__i < endcount )
if GetPlayerSlotState(Player(l__i)) == PLAYER_SLOT_STATE_PLAYING then
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) - gold)
call SetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD) + gold)
endif
set l__i=l__i + 1
endloop
set p=null
endfunction
function LeaverSelected takes nothing returns nothing
local player owner
local player selecter
local integer l__i=0
local integer j
local integer gold
if not ( not s__HasAddedToControl[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetOwningPlayer(GetTriggerUnit()) != Player(5) and GetOwningPlayer(GetTriggerUnit()) != Player(10) and IsUnitAlly(GetTriggerUnit(), GetTriggerPlayer()) and GetPlayerSlotState(GetOwningPlayer(GetTriggerUnit())) != PLAYER_SLOT_STATE_PLAYING ) then
return
endif
set owner=GetOwningPlayer(GetTriggerUnit())
set selecter=GetTriggerPlayer()
set s__HasAddedToControl[GetPlayerId(owner)]= true
if GetPlayerId(selecter) > 5 then
set l__i=6
endif
set j=l__i + 5
set gold=GetPlayerState(owner, PLAYER_STATE_RESOURCE_GOLD)
set gold=gold / ( 3 )
call BJDebugMsg("Gold4lefthero = " + I2S(gold))
loop
exitwhen not ( ( l__i < j ) )
call SetPlayerState(owner, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(owner, PLAYER_STATE_RESOURCE_GOLD) - gold)
call SetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD) + gold)
call SetPlayerAlliance(owner, Player(l__i), ALLIANCE_SHARED_CONTROL, true)
set l__i=l__i + 1
endloop
call SetPlayerController(owner, MAP_CONTROL_COMPUTER)
call TriggerRegisterPlayerStateEvent(leavergoldtrigger, owner, PLAYER_STATE_RESOURCE_GOLD, GREATER_THAN_OR_EQUAL, 10.)
set owner=null
set selecter=null
endfunction
function Trig_Left_smbd_Actions takes nothing returns nothing
local player sourcePlayer=GetTriggerPlayer()
local integer l__i=GetRandomInt(1, 5)
local integer endi
local integer gold
if l__i == 1 then
call StartSound(gg_snd_MuradinTaunt1)
elseif l__i == 2 then
call StartSound(gg_snd_ArthasYesAttack1)
elseif l__i == 3 then
call StartSound(gg_snd_CaptainYesAttack1)
elseif l__i == 4 then
call StartSound(gg_snd_PeasantYes4)
elseif l__i == 5 then
call StartSound(gg_snd_HeroBladeMasterPissed1)
endif
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., GetPlayerName(GetTriggerPlayer()) + " трусливо сбежал с поля битвы!")
set l__i=l__i + 1
endloop
if GetPlayerId(sourcePlayer) <= 5 then
set l__i=0
else
set l__i=6
endif
set endi=l__i + 5
set gold=GetPlayerState(sourcePlayer, PLAYER_STATE_RESOURCE_GOLD)
set gold=gold / ( 3 )
call BJDebugMsg("Gold4lefthero = " + I2S(gold))
loop
exitwhen not ( ( l__i <= endi ) )
call SetPlayerState(sourcePlayer, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(sourcePlayer, PLAYER_STATE_RESOURCE_GOLD) - gold)
call SetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(l__i), PLAYER_STATE_RESOURCE_GOLD) + gold)
call SetPlayerAlliance(sourcePlayer, Player(l__i), ALLIANCE_SHARED_CONTROL, true)
set l__i=l__i + 1
endloop
if GetPlayerController(sourcePlayer) != MAP_CONTROL_COMPUTER then
set s__HasAddedToControl[GetPlayerId(sourcePlayer)]= true
endif
call SetPlayerController(sourcePlayer, MAP_CONTROL_COMPUTER)
call TriggerRegisterPlayerStateEvent(leavergoldtrigger, sourcePlayer, PLAYER_STATE_RESOURCE_GOLD, GREATER_THAN_OR_EQUAL, 10.)
set sourcePlayer=null
endfunction
function cj_callback_00000006 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local trigger trgsel=CreateTrigger()
local integer l__i=0
set leavergoldtrigger=CreateTrigger()
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call TriggerRegisterPlayerEvent(trg, Player(l__i), EVENT_PLAYER_LEAVE)
call TriggerRegisterPlayerUnitEvent(trgsel, Player(l__i), EVENT_PLAYER_UNIT_SELECTED, null)
set l__i=l__i + 1
endloop
call TriggerAddAction(trg, function Trig_Left_smbd_Actions)
call TriggerAddAction(trgsel, function LeaverSelected)
call TriggerAddAction(leavergoldtrigger, function Gold_Distribution)
set trg=null
endfunction
// scope LeaversAxaxa ends
// scope endgame begins
function endgame__endscore takes nothing returns nothing
local integer l__i
set bj_changeLevelShowScores=true
if endgame__WonOrder then
set l__i=0
loop
exitwhen not ( ( l__i < 5 ) )
call CustomVictorySkipBJ(Player(l__i))
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen not ( ( l__i < 11 ) )
call CustomDefeatDialogBJ(Player(l__i), "Вы проиграли!")
set l__i=l__i + 1
endloop
else
set l__i=0
loop
exitwhen not ( ( l__i < 5 ) )
call CustomDefeatDialogBJ(Player(l__i), "Вы проиграли!")
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen not ( ( l__i < 11 ) )
call CustomVictorySkipBJ(Player(l__i))
set l__i=l__i + 1
endloop
endif
endfunction
function cj_anonym__9 takes nothing returns nothing
//# optional
call PauseAllUnitsBJ(true)
endfunction
function endgame_EndGame takes integer win,integer lose returns nothing
local multiboarditem q
local integer l__i=0
local trigger trigenter
if win == 0 then
set endgame__WonOrder=true
else
set endgame__WonOrder=false
endif
set q=MultiboardGetItem(table, 0, 1)
call MultiboardSetItemValue(q, "")
call MultiboardSetItemWidth(q, 0.)
set q=MultiboardGetItem(table, 5, 1)
call MultiboardSetItemValue(q, "")
call MultiboardSetItemWidth(q, 0.)
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemWidth(q, 0.2)
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemWidth(q, 0.2)
if endgame__WonOrder then
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemValue(q, "|c00FE8A00ОРДЕН ОДЕРЖАЛ ПОБЕДУ!|r")
call CameraSetupApplyForceDuration(gg_cam_Camera_EndGameCult, true, 6.00)
else
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemValue(q, "|c00116246КУЛЬТ ОДЕРЖАЛ ПОБЕДУ!|r")
call CameraSetupApplyForceDuration(gg_cam_Camera_EndGameOrden, true, 6.00)
endif
call MultiboardDisplay(table, false)
call MultiboardDisplay(table, true)
set l__i=1
loop
exitwhen not ( l__i < 5 )
set q=MultiboardGetItem(table, l__i, 1)
call MultiboardSetItemValue(q, I2S(s__deaths[l__i - 1]) + " смертей")
call MultiboardSetItemValueColor(q, 255, 255, 255, 255)
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen not ( l__i < 10 )
set q=MultiboardGetItem(table, l__i, 1)
call MultiboardSetItemValue(q, I2S(s__deaths[l__i]) + " смертей")
call MultiboardSetItemValueColor(q, 255, 255, 255, 255)
set l__i=l__i + 1
endloop
set Initbwlib_GameEnded=true
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., endgame__endmsg)
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., endgame__endmsg2)
set l__i=l__i + 1
endloop
call TimerStart(CreateTimer(), 120., false, function endgame__endscore)
call PauseAllUnitsBJ(true)
set trigenter=CreateTrigger()
set l__i=0
loop
exitwhen not ( l__i < 15 )
call TriggerRegisterEnterRectSimple(trigenter, GetWorldBounds())
set l__i=l__i + 1
endloop
call TriggerAddAction(trigenter, function cj_anonym__9)
call FogMaskEnable(false)
call FogEnable(false)
call PauseTimer(GameTime)
call DestroyTrigger(KRS)
call PauseTimer(ForestTime)
call PauseTimer(MoneyTime)
call PauseTimer(LineCreepsTimer)
set trigenter=null
set q=null
endfunction
// scope endgame ends
// scope KillingRewardSystem begins
constant function KillingRewardSystem__Resp_Time takes unit u returns real
return 15 + 5. * ( GetHeroLevel(u) )
endfunction
function KillingRewardSystem__Hero_Death_Cost takes player pl returns real
return 100 + GetPlayerState(pl, PLAYER_STATE_RESOURCE_GOLD) * 0.1
endfunction
function KillingRewardSystem__Exp_Filter takes nothing returns boolean
return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) and GetUnitAbilityLevel(GetFilterUnit(), 0x416C6F63) == 0
endfunction
function KillingRewardSystem__Reward_Team4KillHero takes unit killer,unit victim,integer goldlh,integer goldaoe,integer goldmap,integer expaoe,integer expmap returns nothing
local player pl=GetOwningPlayer(killer)
local rect map=GetWorldBounds()
local integer array gold
local integer exp
local integer id
local unit cjlocgn_00000000
local texttag cjlocgn_00000001
local integer cjlocgn_00000002=0
call GroupEnumUnitsInRect(cjgrfgn_00000006, map, null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000006)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000006, cjlocgn_00000000)
if GetUnitAbilityLevel(cjlocgn_00000000, 0x416C6F63) == 0 and IsUnitAlly(cjlocgn_00000000, pl) then
set id=GetPlayerId(GetOwningPlayer(cjlocgn_00000000))
if IsUnitInRange(cjlocgn_00000000, victim, 1000.) then
if GetOwningPlayer(cjlocgn_00000000) == killer then
if gold[id] < goldaoe + goldlh then
set gold[id]=goldaoe + goldlh
endif
endif
if gold[id] < goldaoe then
set gold[id]=goldaoe
endif
set exp=expaoe
else
if gold[id] < goldmap then
set gold[id]=goldmap
endif
set exp=expmap
endif
if IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) then
if GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 then
set cjlocgn_00000001=CreateTextTag()
call SetTextTagVisibility(cjlocgn_00000001, false)
if ( GetLocalPlayer() == GetOwningPlayer(cjlocgn_00000000) ) then
call SetTextTagVisibility(cjlocgn_00000001, true)
endif
call SetTextTagPermanent(cjlocgn_00000001, false)
call SetTextTagFadepoint(cjlocgn_00000001, 0.2)
call SetTextTagLifespan(cjlocgn_00000001, 2.5)
call SetTextTagVelocityBJ(cjlocgn_00000001, 12, 90)
call SetTextTagPos(cjlocgn_00000001, GetUnitX(cjlocgn_00000000) + - 60., GetUnitY(cjlocgn_00000000) + ( - 16. ), 15.)
call SetTextTagText(cjlocgn_00000001, ( "+" + I2S(exp) ), 7 * 0.03 / 10)
call SetTextTagColor(cjlocgn_00000001, 230, 0, 230, 0)
set cjlocgn_00000001=null
call AddHeroXP(cjlocgn_00000000, exp, true)
else
call AddHeroXP(cjlocgn_00000000, exp, false)
endif
endif
endif
endloop
loop
exitwhen not ( cjlocgn_00000002 < bj_MAX_PLAYERS )
if ( Player(cjlocgn_00000002) == pl or IsPlayerAlly(Player(cjlocgn_00000002), pl) ) and gold[cjlocgn_00000002] > 0 then
call GroupEnumUnitsOfPlayer(cjgrfgn_00000006, Player(cjlocgn_00000002), null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000006)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000006, cjlocgn_00000000)
if IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) and GetUnitAbilityLevel(cjlocgn_00000000, 0x416C6F63) == 0 then
set cjlocgn_00000001=CreateTextTag()
call SetTextTagVisibility(cjlocgn_00000001, false)
if ( GetLocalPlayer() == GetOwningPlayer(cjlocgn_00000000) ) then
call SetTextTagVisibility(cjlocgn_00000001, true)
endif
call SetTextTagPermanent(cjlocgn_00000001, false)
call SetTextTagFadepoint(cjlocgn_00000001, 0.2)
call SetTextTagLifespan(cjlocgn_00000001, 2.5)
call SetTextTagVelocityBJ(cjlocgn_00000001, 12, 90)
call SetTextTagPos(cjlocgn_00000001, GetUnitX(cjlocgn_00000000) + ( - 60 ), GetUnitY(cjlocgn_00000000) + 16., 15.)
call SetTextTagText(cjlocgn_00000001, ( "+" + I2S(gold[cjlocgn_00000002]) ), 7 * 0.03 / 10)
call SetTextTagColor(cjlocgn_00000001, 255, 204, 0, 0)
set cjlocgn_00000001=null
endif
endloop
call SetPlayerState(Player(cjlocgn_00000002), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(cjlocgn_00000002), PLAYER_STATE_RESOURCE_GOLD) + gold[cjlocgn_00000002])
endif
set cjlocgn_00000002=cjlocgn_00000002 + 1
endloop
set map=null
set pl=null
endfunction
function cj_anonym__10 takes nothing returns nothing
//# optional
call SetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + KillingRewardSystem__Bounty_Raiskoe)
endfunction
function KillingRewardSystem__Reward_Team takes unit u,integer bounty,integer exp returns nothing
local player pl=GetOwningPlayer(u)
local unit first
local integer l__i=0
local force Team=PlayerTeam(pl)
local rect map=GetWorldBounds()
local group gro
local texttag cjlocgn_00000000
if bounty > 0 then
set gro=CreateGroup()
call GroupEnumUnitsInRect(gro, map, Filter(function KillingRewardSystem__Exp_Filter))
loop
set first=FirstOfGroup(gro)
exitwhen first == null
if IsUnitAlly(first, pl) and GetUnitState(first, UNIT_STATE_LIFE) > .405 then
set cjlocgn_00000000=CreateTextTag()
call SetTextTagVisibility(cjlocgn_00000000, false)
if ( GetLocalPlayer() == GetOwningPlayer(first) ) then
call SetTextTagVisibility(cjlocgn_00000000, true)
endif
call SetTextTagPermanent(cjlocgn_00000000, false)
call SetTextTagFadepoint(cjlocgn_00000000, 0.2)
call SetTextTagLifespan(cjlocgn_00000000, 2.5)
call SetTextTagVelocityBJ(cjlocgn_00000000, 12, 90)
call SetTextTagPos(cjlocgn_00000000, GetUnitX(first) + ( - 60 ), GetUnitY(first) + 16., 15.)
call SetTextTagText(cjlocgn_00000000, ( "+" + I2S(bounty) ), 7 * 0.03 / 10)
call SetTextTagColor(cjlocgn_00000000, 255, 204, 0, 0)
set cjlocgn_00000000=null
endif
call GroupRemoveUnit(gro, first)
endloop
call DestroyGroup(gro)
set KillingRewardSystem__Bounty_Raiskoe=bounty
call ForForce(Team, function cj_anonym__10)
endif
if exp > 0 then
set gro=CreateGroup()
call GroupEnumUnitsInRect(gro, map, Filter(function KillingRewardSystem__Exp_Filter))
loop
set first=FirstOfGroup(gro)
exitwhen first == null
if IsUnitAlly(first, pl) then
if GetUnitState(first, UNIT_STATE_LIFE) > 0 then
call AddHeroXP(first, exp, true)
set cjlocgn_00000000=CreateTextTag()
call SetTextTagVisibility(cjlocgn_00000000, false)
if ( GetLocalPlayer() == GetOwningPlayer(first) ) then
call SetTextTagVisibility(cjlocgn_00000000, true)
endif
call SetTextTagPermanent(cjlocgn_00000000, false)
call SetTextTagFadepoint(cjlocgn_00000000, 0.2)
call SetTextTagLifespan(cjlocgn_00000000, 2.5)
call SetTextTagVelocityBJ(cjlocgn_00000000, 12, 90)
call SetTextTagPos(cjlocgn_00000000, GetUnitX(first) + - 60., GetUnitY(first) + ( - 16. ), 15.)
call SetTextTagText(cjlocgn_00000000, ( "+" + I2S(exp) ), 7 * 0.03 / 10)
call SetTextTagColor(cjlocgn_00000000, 230, 0, 230, 0)
set cjlocgn_00000000=null
else
call AddHeroXP(first, exp, false)
endif
endif
call GroupRemoveUnit(gro, first)
endloop
call DestroyGroup(gro)
endif
set pl=null
set first=null
set Team=null
set map=null
set gro=null
endfunction
function KillingRewardSystem__Respawn_Hero takes nothing returns nothing
local integer qxA
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local integer l__i=0
local unit u=LoadUnitHandle(hash, h, 1)
local timerdialog td=LoadTimerDialogHandle(hash, h, 2)
local player pl=GetOwningPlayer(u)
local boolean Order=false
local boolean Chaos=false
local real x
local real y
local item newitem112
local integer itemri
loop
exitwhen l__i > 3
if pl == Player(l__i) then
set Order=true
endif
set l__i=l__i + 1
endloop
if Order then
set x=GetRandomReal(GetRectMinX(gg_rct_lresp), GetRectMaxX(gg_rct_lresp))
set y=GetRandomReal(GetRectMinY(gg_rct_lresp), GetRectMaxY(gg_rct_lresp))
else
set x=GetRandomReal(GetRectMinX(gg_rct_rresp), GetRectMaxX(gg_rct_rresp))
set y=GetRandomReal(GetRectMinY(gg_rct_rresp), GetRectMaxY(gg_rct_rresp))
endif
call ReviveHero(u, x, y, true)
set qxA=GetPlayerId(pl)
set s__deaths[qxA]= s__deaths[qxA] + 1
call sc___prototype36_execute(1,GetPlayerId(pl))
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA))
call sc__bootsofgon_Activate(u)
set itemri=0
set itemri=0
loop
set newitem112=UnitItemInSlot(u, itemri)
exitwhen itemri > 5
if GetItemTypeId(newitem112) == 0x49303232 then
call RemoveItem(newitem112)
set newitem112=CreateItem(0x49303231, 0., 0.)
call SetItemPlayer(newitem112, GetOwningPlayer(u), false)
call UnitAddItem(u, newitem112)
call IssueTargetOrderById(u, 852002 + itemri, newitem112)
set newitem112=null
endif
set itemri=itemri + 1
set newitem112=null
endloop
set itemri=0
loop
set newitem112=UnitItemInSlot(u, itemri)
exitwhen itemri > 5
if GetItemTypeId(newitem112) == 0x49303939 then
call RemoveItem(newitem112)
set newitem112=CreateItem(0x49303938, 0., 0.)
call SetItemPlayer(newitem112, GetOwningPlayer(u), false)
call UnitAddItem(u, newitem112)
call IssueTargetOrderById(u, 852002 + itemri, newitem112)
set newitem112=null
endif
set itemri=itemri + 1
set newitem112=null
endloop
if ( GetLocalPlayer() == pl ) then
call TimerDialogDisplay(td, false)
call SetCameraPosition(x, y)
call ClearSelection()
call SelectUnit(u, true)
endif
call DestroyTimerDialog(td)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
set td=null
endfunction
function KillingRewardSystem__Reward_Get takes nothing returns nothing
local unit killed=GetDyingUnit()
local unit killerUn=GetKillingUnit()
local player owner=GetOwningPlayer(killed)
local player killerPl=GetOwningPlayer(killerUn)
local integer l__i=0
local integer gold_rew
local integer exp_rew
local boolean IsKillerPlayer=false
local boolean IsKillerBaseBot=false
local force Team=PlayerTeam(killerPl)
local string str=""
local timer cjlocgn_00000000
local integer cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
local integer cjlocgn_00000004
local integer cjlocgn_00000005
local real cjlocgn_00000006
local integer cjlocgn_00000007
local integer cjlocgn_00000008
local integer cjlocgn_00000009
local timerdialog cjlocgn_0000000a
local group cjlocgn_0000000b
if Team != null then
set IsKillerPlayer=true
elseif killerPl == Player(5) or killerPl == Player(10) then
set IsKillerBaseBot=true
endif
if ( GetUnitAbilityLevel(killed, 0x416C6F63) == 0 ) then
if GetLocalPlayer() == killerPl and IsPlayerEnemy(owner, killerPl) then
call PlaySoundOnUnitBJ(gg_snd_Coin8, 100, killerUn)
set str="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(str, killerUn, "overhead"))
if ( IsUnitType(killed, UNIT_TYPE_HERO) == true ) then
set cjlocgn_00000000=CreateTimer()
set cjlocgn_00000001=GetHandleId(cjlocgn_00000000)
set cjlocgn_00000002=KillingRewardSystem__Resp_Time(killed)
set cjlocgn_00000003=KillingRewardSystem__Hero_Death_Cost(owner)
set cjlocgn_00000004=sc___prototype24_evaluate(1)
set cjlocgn_00000005=0
set cjlocgn_00000006=0.
set cjlocgn_00000007=0
set cjlocgn_00000008=0
set cjlocgn_00000009=0
call SetPlayerState(owner, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(owner, PLAYER_STATE_RESOURCE_GOLD) - R2I(cjlocgn_00000003))
call sc___prototype36_execute(1,GetPlayerId(owner))
set l__i=0
if killerPl == owner then
loop
exitwhen l__i > 15
call DisplayTextToPlayer(Player(l__i), 0, 0, GetPlayerName(killerPl) + " убил сам себя!")
set l__i=l__i + 1
endloop
elseif IsKillerPlayer then
set cjlocgn_00000004=sc___prototype24_evaluate(1)
set cjlocgn_00000005=10
set cjlocgn_00000007=R2I(75. + RMaxBJ(0., 25. + I2R(cjlocgn_00000004) / 2700. * 250 - ( 5. + GetHeroLevel(killed) ) * s__deaths[GetPlayerId(owner)]) * RMaxBJ(1.2, I2R(GetHeroLevel(killed))) / IMaxBJ(GetHeroLevel(s__HERO[GetPlayerId(killerPl)]), 1) + .5)
set cjlocgn_00000008=75 + 15 * GetHeroLevel(killed) - 5 * s__deaths[GetPlayerId(owner)]
set cjlocgn_00000009=38 + 12 * GetHeroLevel(killed)
set cjlocgn_00000006=75. + RMaxBJ(0., 25. + I2R(cjlocgn_00000004) / 2700. * 250 - ( 5. + GetHeroLevel(killed) ) * s__deaths[GetPlayerId(owner)]) * RMaxBJ(1.2, I2R(GetHeroLevel(killed))) / IMaxBJ(GetHeroLevel(s__HERO[GetPlayerId(killerPl)]), 1)
loop
exitwhen l__i > 15
call DisplayTextToPlayer(Player(l__i), 0, 0, GetPlayerName(killerPl) + " прикончил " + GetPlayerName(owner) + " и заработал своей команде по (|cffffff00" + I2S(R2I(cjlocgn_00000006)) + "|r) золота")
set l__i=l__i + 1
endloop
elseif IsKillerBaseBot then
set cjlocgn_00000004=sc___prototype24_evaluate(1)
set cjlocgn_00000005=10
set cjlocgn_00000007=15
set cjlocgn_00000008=75 + 15 * GetHeroLevel(killed) - 5 * s__deaths[GetPlayerId(owner)]
set cjlocgn_00000009=38 + 12 * GetHeroLevel(killed)
set cjlocgn_00000006=75. + RMaxBJ(0., 25. + I2R(cjlocgn_00000004) / 2700. * 250 - ( 5. + GetHeroLevel(killed) ) * s__deaths[GetPlayerId(owner)])
loop
exitwhen l__i > 15
call DisplayTextToPlayer(Player(l__i), 0, 0, GetPlayerName(killerPl) + " нейтрализовал " + GetPlayerName(owner))
set l__i=l__i + 1
endloop
else
set cjlocgn_00000008=75 + 15 * GetHeroLevel(killed) - 5 * s__deaths[GetPlayerId(owner)]
loop
exitwhen l__i > 15
call DisplayTextToPlayer(Player(l__i), 0, 0, GetPlayerName(owner) + " растерзан |cFF4B4035Монстрами|r")
set l__i=l__i + 1
endloop
endif
call KillingRewardSystem__Reward_Team4KillHero(killerUn , killed , cjlocgn_00000005 , R2I(cjlocgn_00000006) , cjlocgn_00000007 , cjlocgn_00000008 , cjlocgn_00000009)
set cjlocgn_0000000a=CreateTimerDialog(cjlocgn_00000000)
call TimerDialogSetTitle(cjlocgn_0000000a, "Время до воскрешения: ")
if GetLocalPlayer() == owner then
call TimerDialogDisplay(cjlocgn_0000000a, true)
endif
call SaveUnitHandle(hash, cjlocgn_00000001, 1, killed)
call SaveTimerDialogHandle(hash, cjlocgn_00000001, 2, cjlocgn_0000000a)
call TimerStart(cjlocgn_00000000, cjlocgn_00000002, false, function KillingRewardSystem__Respawn_Hero)
set cjlocgn_0000000a=null
set cjlocgn_00000000=null
elseif IsUnitType(killed, UNIT_TYPE_STRUCTURE) == true and GetOwningPlayer(killed) != Player(15) then
if killed == gg_unit_h008_0040 then
call sc___prototype41_execute(1,6 , 0)
elseif killed == gg_unit_h009_0041 then
call sc___prototype41_execute(1,0 , 6)
endif
set l__i=GetUnitTypeId(killed)
if ( l__i == 0x68303057 ) or ( l__i == 0x68303056 ) or ( l__i == 0x68303055 ) or ( l__i == 0x68303054 ) or ( l__i == 0x68303037 ) or ( l__i == 0x68303041 ) or ( l__i == 0x68303058 ) or ( l__i == 0x68303059 ) then
set cjlocgn_00000001=0
loop
exitwhen cjlocgn_00000001 > 15
call DisplayTextToPlayer(Player(cjlocgn_00000001), 0, 0, "|cff006400Культ|r уничтожает " + GetUnitName(killed) + " и получают по |cFFFFDC00" + I2S(150) + " золота|r")
set cjlocgn_00000001=cjlocgn_00000001 + 1
endloop
call KillingRewardSystem__Reward_Team(killerUn , 150 , 0)
elseif ( l__i == 0x68303132 ) or ( l__i == 0x68303133 ) or ( l__i == 0x68303134 ) or ( l__i == 0x68303135 ) or ( l__i == 0x68303136 ) or ( l__i == 0x6830305A ) or ( l__i == 0x68303131 ) or ( l__i == 0x68303130 ) then
set cjlocgn_00000001=0
loop
exitwhen cjlocgn_00000001 > 15
call DisplayTextToPlayer(Player(cjlocgn_00000001), 0, 0, "|cffEE9A00Силы Ордена|r уничтожают " + GetUnitName(killed) + " и получают по |cFFFFDC00" + I2S(150) + " золота|r")
set cjlocgn_00000001=cjlocgn_00000001 + 1
endloop
call KillingRewardSystem__Reward_Team(killerUn , 150 , 0)
endif
else
if ( IsKillerPlayer or IsKillerBaseBot ) and IsPlayerEnemy(owner, killerPl) then
set l__i=GetUnitTypeId(killed)
if l__i == 0x68303141 then
set gold_rew=29
set exp_rew=57
elseif l__i == 0x68303151 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303152 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303154 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303153 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303031 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303033 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303032 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x68303034 then
set gold_rew=8 + lanespk / 3
set exp_rew=11 + 2 * lanespk / 3
elseif l__i == 0x65303035 then
set gold_rew=0
set exp_rew=15
elseif l__i == 0x68303137 then
set gold_rew=22
set exp_rew=43
elseif l__i == 0x68303138 then
set gold_rew=22
set exp_rew=43
elseif l__i == 0x65303032 then
set gold_rew=16
set exp_rew=31
elseif l__i == 0x65303031 then
set gold_rew=16
set exp_rew=31
elseif l__i == 0x65303030 then
set gold_rew=8
set exp_rew=15
elseif l__i == 0x68303044 then
set gold_rew=10
set exp_rew=15
elseif l__i == 0x68303043 then
set gold_rew=8
set exp_rew=12
elseif l__i == 0x68303046 then
set gold_rew=11
set exp_rew=22
elseif l__i == 0x68303049 then
set gold_rew=11
set exp_rew=22
elseif l__i == 0x65303037 then
set gold_rew=15
set exp_rew=30
elseif l__i == 0x65303038 then
set gold_rew=8
set exp_rew=15
elseif l__i == 0x65303039 then
set gold_rew=10
set exp_rew=15
elseif l__i == 0x65626262 then
set gold_rew=250
set exp_rew=250
elseif l__i == 0x6E637A31 then
set gold_rew=12
set exp_rew=10
elseif l__i == 0x6E637A32 then
set gold_rew=12
set exp_rew=15
elseif l__i == 0x6E637A33 then
set gold_rew=12
set exp_rew=20
elseif l__i == 0x6E637A34 then
set gold_rew=12
set exp_rew=25
elseif l__i == 0x6E637A35 then
set gold_rew=12
set exp_rew=30
elseif l__i == 0x6E464831 then
set gold_rew=15
set exp_rew=10
elseif l__i == 0x6E464832 then
set gold_rew=20
set exp_rew=15
elseif l__i == 0x6E464833 then
set gold_rew=25
set exp_rew=20
elseif l__i == 0x6E464834 then
set gold_rew=30
set exp_rew=25
elseif l__i == 0x6E464835 then
set gold_rew=35
set exp_rew=30
elseif l__i == 0x6E303052 then
set gold_rew=10
set exp_rew=10
elseif l__i == 0x6E303053 then
set gold_rew=15
set exp_rew=15
elseif l__i == 0x6E303054 then
set gold_rew=20
set exp_rew=20
elseif l__i == 0x6E303055 then
set gold_rew=25
set exp_rew=25
elseif l__i == 0x6E303056 then
set gold_rew=30
set exp_rew=30
elseif l__i == 0x6E303059 then
set gold_rew=10
set exp_rew=10
elseif l__i == 0x6E30305A then
set gold_rew=15
set exp_rew=15
elseif l__i == 0x6E303130 then
set gold_rew=20
set exp_rew=20
elseif l__i == 0x6E303131 then
set gold_rew=25
set exp_rew=25
elseif l__i == 0x6E303132 then
set gold_rew=30
set exp_rew=30
elseif l__i == 0x6E666775 then
set gold_rew=10
set exp_rew=10
elseif l__i == 0x6E303133 then
set gold_rew=15
set exp_rew=15
elseif l__i == 0x6E303134 then
set gold_rew=20
set exp_rew=20
elseif l__i == 0x6E303135 then
set gold_rew=25
set exp_rew=25
elseif l__i == 0x6E303136 then
set gold_rew=30
set exp_rew=30
endif
if IsKillerBaseBot then
set cjlocgn_0000000b=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_0000000b, GetUnitX(killed), GetUnitY(killed), 1000., Filter(function KillingRewardSystem__Exp_Filter))
loop
set killerUn=FirstOfGroup(cjlocgn_0000000b)
exitwhen killerUn == null
if IsUnitEnemy(killed, GetOwningPlayer(killerUn)) and ( IsUnitInForce(killerUn, uteam_1) or IsUnitInForce(killerUn, uteam_2) ) then
exitwhen true
endif
call GroupRemoveUnit(cjlocgn_0000000b, killerUn)
endloop
if killerUn != null then
set gold_rew=0
endif
call DestroyGroup(cjlocgn_0000000b)
set cjlocgn_0000000b=null
endif
call KillingRewardSystem__Reward_Team(killerUn , gold_rew , exp_rew)
endif
endif
endif
set Team=null
set killerUn=null
set killed=null
endfunction
function KillingRewardSystem__Init takes nothing returns nothing
local integer l__i=0
set KRS=CreateTrigger()
loop
exitwhen ( l__i > 15 )
call TriggerRegisterPlayerUnitEvent(KRS, Player(l__i), EVENT_PLAYER_UNIT_DEATH, null)
set l__i=l__i + 1
endloop
call TriggerAddAction(KRS, function KillingRewardSystem__Reward_Get)
endfunction
// scope KillingRewardSystem ends
function CodeNames takes nothing returns nothing
local integer cjlocgn_00000000=0
local string cjlocgn_00000001
local integer cjlocgn_00000002=GetRandomInt(1, 100)
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "dova3"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "dova3" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошэльный20!8")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "20!8")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошэн")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "Пропуск_в_трусики")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "Имба")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "322")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Я знаю где читы")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "Читы активированы")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "CheatsEnabled")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "Язнаюгдетыфармишь")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Крадущийся тигр")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошальный")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "Раздвигай Ноги")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "Похоронный-Коронный")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "Le_Chapulta")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "0clona")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "Def_Uranus")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "define_ty_pidor")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошик")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Жукофоб")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошенваген")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Во Имя Баланса")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Афк,прон,брб")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошпиталь")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Пригорин")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Ииииигорь")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Игорный автомат")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Вождь горяжопых")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "GOSHANI?!")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "Огогоша")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "Go PvP")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "ГОШЭНГОШЭН")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "605h4n")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
set cjlocgn_00000000=0
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "redobivan" or cjlocgn_00000001 == "Ob_Ivan"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000002=GetRandomInt(1, 100)
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "redobivan" or cjlocgn_00000001 == "Ob_Ivan" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "Вандершафт")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "D_Ivan")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "D.van")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "Ivan_tuz")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванилин")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "Падаван")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванесса")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "мамина_принцесса")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "Фея Вынкс")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "Об_рыган")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Затаившийся дракон")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Жеван")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "Вазилин")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванндерхаузен")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "Le_Chapulta")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "Ван Клод ОбИван")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванедикт Кибербенч")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "Человек-Абуз")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "ЕГЭ с третьей попытки")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Трехлетняя девочка")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Третий ничего не делает")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Обивангох")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Зато у меня есть лефрут")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Сикруфомейнер")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Nerf this")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Водомут не герой")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Розовый слот")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Рваня")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "Баланс не пострадал")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "zerg rush kekeke")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "3 в лесу, не считая Артема")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "081v4n")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "Квант был лучше")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
set cjlocgn_00000000=0
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "temariys" or cjlocgn_00000001 == "temariys"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000002=GetRandomInt(1, 100)
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "temariys" or cjlocgn_00000001 == "temariys" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "tremaiys")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "tremasiy")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "Сын шалавы")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "stremaiy")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "matresiy")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "srematiy")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Маме привет")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "artemiys")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "tremaiys")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "amretiys")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Детдомовец")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Люблю рандом")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "amteriys")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "5 см")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "сладкий петушок")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "atesriym")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "mistreya")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "asretiym")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "retamiys")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Пчетаю Бзе Галз")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Артемон")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Артишок")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Артемонд")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Самый умный")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Паркуюсь где хочу")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Артельный")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Артикул")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Баланс пострадал")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "73m4r1y5")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "АнАлЬнЫй УгНеТаТеЛь")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "Вуди Вудкекер")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "кекаем вместо патчей")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "Артур Пирожков")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
endfunction
function Trig_Unit_Indexer_Func006Func002C takes nothing returns boolean
if ( not ( udg_UnitIndexLock[udg_UDex] == 0 ) ) then
return false
endif
return true
endfunction
function Trig_Unit_Indexer_Func006C takes nothing returns boolean
if ( not ( GetUnitUserData(udg_UDexUnits[udg_UDex]) == 0 ) ) then
return false
endif
return true
endfunction
function Trig_Unit_Indexer_Func015Func003C takes nothing returns boolean
if ( not ( udg_UDexWasted == 32 ) ) then
return false
endif
return true
endfunction
function Trig_Unit_Indexer_Func015Func005C takes nothing returns boolean
if ( not ( udg_UDexRecycle == 0 ) ) then
return false
endif
return true
endfunction
function Trig_Unit_Indexer_Func015C takes nothing returns boolean
if ( not ( udg_UnitIndexerEnabled == true ) ) then
return false
endif
if ( not ( GetUnitUserData(GetFilterUnit()) == 0 ) ) then
return false
endif
return true
endfunction
function Trig_Unit_Indexer_Actions takes nothing returns nothing
call SetPlayerAllianceStateBJ(Player(0), Player(1), bj_ALLIANCE_ALLIED_VISION)
call ExecuteFunc("InitializeUnitIndexer")
endfunction
function ClearUnitIndex takes nothing returns nothing
if ( Trig_Unit_Indexer_Func006C() ) then
set udg_UnitIndexLock[udg_UDex]=( udg_UnitIndexLock[udg_UDex] - 1 )
if ( Trig_Unit_Indexer_Func006Func002C() ) then
set udg_UDexNext[udg_UDexPrev[udg_UDex]]=udg_UDexNext[udg_UDex]
set udg_UDexPrev[udg_UDexNext[udg_UDex]]=udg_UDexPrev[udg_UDex]
set udg_UDexPrev[udg_UDex]=0
set udg_UnitIndexEvent=0.00
set udg_UnitIndexEvent=2.00
set udg_UnitIndexEvent=0.00
set udg_UDexUnits[udg_UDex]=null
set udg_UDexNext[udg_UDex]=udg_UDexRecycle
set udg_UDexRecycle=udg_UDex
else
endif
else
endif
endfunction
function IndexUnit takes nothing returns boolean
local integer pdex=udg_UDex
local integer ndex
if ( Trig_Unit_Indexer_Func015C() ) then
set udg_UDexWasted=( udg_UDexWasted + 1 )
if ( Trig_Unit_Indexer_Func015Func003C() ) then
set udg_UDexWasted=0
set udg_UDex=udg_UDexNext[0]
loop
exitwhen udg_UDex == 0
set ndex=udg_UDexNext[udg_UDex]
call ClearUnitIndex()
set udg_UDex=ndex
endloop
else
endif
if ( Trig_Unit_Indexer_Func015Func005C() ) then
set udg_UDex=( udg_UDexGen + 1 )
set udg_UDexGen=udg_UDex
else
set udg_UDex=udg_UDexRecycle
set udg_UDexRecycle=udg_UDexNext[udg_UDex]
endif
set udg_UDexUnits[udg_UDex]=GetFilterUnit()
call SetUnitUserData(udg_UDexUnits[udg_UDex], udg_UDex)
set udg_UDexPrev[udg_UDexNext[0]]=udg_UDex
set udg_UDexNext[udg_UDex]=udg_UDexNext[0]
set udg_UDexNext[0]=udg_UDex
set udg_UnitIndexLock[udg_UDex]=1
set udg_UnitIndexEvent=0.00
set udg_UnitIndexEvent=1.00
set udg_UnitIndexEvent=0.00
set udg_UDex=pdex
else
endif
return false
endfunction
function InitializeUnitIndexer takes nothing returns nothing
local integer l__i=16
local boolexpr b=Filter(function IndexUnit)
local region re=CreateRegion()
local trigger t=GetTriggeringTrigger()
local rect r=GetWorldBounds()
call RegionAddRect(re, r)
call TriggerRegisterEnterRegion(t, re, b)
call TriggerClearActions(t)
call TriggerAddAction(t, function ClearUnitIndex)
set udg_UnitIndexerEnabled=true
loop
set l__i=l__i - 1
call GroupEnumUnitsOfPlayer(bj_lastCreatedGroup, Player(l__i), b)
exitwhen l__i == 0
endloop
call RemoveRect(r)
set re=null
set r=null
set t=null
set b=null
set udg_UnitIndexEvent=3.00
set udg_UnitIndexEvent=0.00
endfunction
function InitTrig_Unit_Indexer takes nothing returns nothing
set gg_trg_Unit_Indexer=CreateTrigger()
call TriggerAddAction(gg_trg_Unit_Indexer, function Trig_Unit_Indexer_Actions)
endfunction
function Trig_Damage_Engine_Config_Actions takes nothing returns nothing
set udg_DamageBlockingAbility=0x41303447
set udg_SpellDamageAbility=0x41303448
set udg_DamageTypeExplosive=- 1
set udg_DamageTypeCriticalStrike=1
set udg_DamageTypeHeal=2
set udg_DamageTypeReduced=3
set udg_DamageTypeBlocked=4
set udg_DamageTypeSpell=5
set udg_DmgEvBracers=0x62726163
set udg_DAMAGE_FACTOR_BRACERS=0.67
set udg_DAMAGE_FACTOR_ELUNES=0.80
set udg_DAMAGE_FACTOR_ETHEREAL=1.67
set udg_DamageEventAOE=1
set udg_DamageEventLevel=1
endfunction
function InitTrig_Damage_Engine_Config takes nothing returns nothing
set gg_trg_Damage_Engine_Config=CreateTrigger()
call TriggerAddAction(gg_trg_Damage_Engine_Config, function Trig_Damage_Engine_Config_Actions)
endfunction
function DmgEvResetVars takes nothing returns nothing
local integer l__i=udg_DmgEvRecursionN - 2
set udg_DmgEvRecursionN=l__i + 1
if l__i >= 0 then
set udg_DamageEventPrevAmt=udg_LastDmgPrevAmount[l__i]
set udg_DamageEventAmount=udg_LastDmgValue[l__i]
set udg_DamageEventSource=udg_LastDmgSource[l__i]
set udg_DamageEventTarget=udg_LastDmgTarget[l__i]
set udg_IsDamageSpell=udg_LastDmgWasSpell[l__i]
set udg_DamageEventType=udg_LastDmgPrevType[l__i]
endif
endfunction
function CheckDamagedLifeEvent takes boolean clear returns nothing
if clear then
set udg_NextDamageOverride=false
set udg_NextDamageType=0
endif
if udg_DmgEvTrig != null then
call DestroyTrigger(udg_DmgEvTrig)
set udg_DmgEvTrig=null
if udg_IsDamageSpell then
call SetWidgetLife(udg_DamageEventTarget, RMaxBJ(udg_LastDamageHP, 0.41))
if udg_LastDamageHP <= 0.405 then
if udg_DamageEventType < 0 then
call SetUnitExploded(udg_DamageEventTarget, true)
endif
call DisableTrigger(udg_DamageEventTrigger)
call UnitDamageTarget(udg_DamageEventSource, udg_DamageEventTarget, - 999, false, false, null, DAMAGE_TYPE_UNIVERSAL, null)
call EnableTrigger(udg_DamageEventTrigger)
endif
elseif GetUnitAbilityLevel(udg_DamageEventTarget, udg_DamageBlockingAbility) > 0 then
call UnitRemoveAbility(udg_DamageEventTarget, udg_DamageBlockingAbility)
call SetWidgetLife(udg_DamageEventTarget, udg_LastDamageHP)
endif
if udg_DamageEventAmount != 0.00 and not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
set udg_AfterDamageEvent=0.00
set udg_AfterDamageEvent=1.00
set udg_AfterDamageEvent=0.00
endif
call DmgEvResetVars()
endif
endfunction
function DmgEvOnAOEEnd takes nothing returns nothing
if udg_DamageEventAOE > 1 then
set udg_AOEDamageEvent=0.00
set udg_AOEDamageEvent=1.00
set udg_AOEDamageEvent=0.00
set udg_DamageEventAOE=1
endif
set udg_DamageEventLevel=1
set udg_EnhancedDamageTarget=null
call GroupClear(udg_DamageEventAOEGroup)
endfunction
function DmgEvOnExpire takes nothing returns nothing
set udg_DmgEvStarted=false
call CheckDamagedLifeEvent(true)
call DmgEvOnAOEEnd()
set udg_DamageEventTarget=null
set udg_DamageEventSource=null
endfunction
function PreCheckDamagedLifeEvent takes nothing returns boolean
call CheckDamagedLifeEvent(true)
return false
endfunction
function OnUnitDamage takes nothing returns boolean
local boolean override=udg_DamageEventOverride
local integer l__i
local integer e=udg_DamageEventLevel
local integer a=udg_DamageEventAOE
local string s
local real prevAmount
local real life
local real prevLife
local unit u
local unit f
call CheckDamagedLifeEvent(false)
set l__i=udg_DmgEvRecursionN - 1
if l__i < 0 then
set u=udg_DamageEventTarget
set f=udg_DamageEventSource
elseif l__i < 16 then
set udg_LastDmgPrevAmount[l__i]=udg_DamageEventPrevAmt
set udg_LastDmgValue[l__i]=udg_DamageEventAmount
set udg_LastDmgSource[l__i]=udg_DamageEventSource
set udg_LastDmgTarget[l__i]=udg_DamageEventTarget
set udg_LastDmgWasSpell[l__i]=udg_IsDamageSpell
set udg_LastDmgPrevType[l__i]=udg_DamageEventType
else
set s="WARNING: Recursion error when dealing damage! Make sure when you deal damage from within a DamageEvent trigger, do it like this:\n\n"
set s=s + "Trigger - Turn off (This Trigger)\n"
set s=s + "Unit - Cause...\n"
set s=s + "Trigger - Turn on (This Trigger)"
call ClearTextMessages()
call DisplayTimedTextToPlayer(GetLocalPlayer(), 0.00, 0.00, 999.00, s)
set f=null
set u=null
return false
endif
set udg_DmgEvRecursionN=l__i + 2
set prevAmount=GetEventDamage()
set udg_DamageEventTarget=GetTriggerUnit()
set udg_DamageEventSource=GetEventDamageSource()
set udg_DamageEventAmount=prevAmount
set udg_DamageEventType=udg_NextDamageType
set udg_NextDamageType=0
set udg_DamageEventOverride=udg_NextDamageOverride
set udg_NextDamageOverride=false
if l__i < 0 then
if udg_DamageEventType == 0 then
if f == udg_DamageEventSource then
if IsUnitInGroup(udg_DamageEventTarget, udg_DamageEventAOEGroup) then
set udg_DamageEventLevel=udg_DamageEventLevel + 1
set udg_EnhancedDamageTarget=udg_DamageEventTarget
else
set udg_DamageEventAOE=udg_DamageEventAOE + 1
endif
else
set u=udg_DamageEventSource
set udg_DamageEventSource=f
call DmgEvOnAOEEnd()
set udg_DamageEventSource=u
endif
call GroupAddUnit(udg_DamageEventAOEGroup, udg_DamageEventTarget)
endif
if not udg_DmgEvStarted then
set udg_DmgEvStarted=true
call TimerStart(udg_DmgEvTimer, 0.00, false, function DmgEvOnExpire)
endif
endif
if prevAmount == 0.00 then
if not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
set udg_DamageEventPrevAmt=0.00
set udg_DamageEvent=0.00
set udg_DamageEvent=2.00
set udg_DamageEvent=0.00
endif
call DmgEvResetVars()
else
set u=udg_DamageEventTarget
set udg_IsDamageSpell=prevAmount < 0.00
if udg_IsDamageSpell then
set prevAmount=- udg_DamageEventAmount
set life=1.00
if IsUnitType(u, UNIT_TYPE_ETHEREAL) and not IsUnitType(u, UNIT_TYPE_HERO) then
set life=life * udg_DAMAGE_FACTOR_ETHEREAL
endif
if GetUnitAbilityLevel(u, 0x41656772) > 0 then
set life=life * udg_DAMAGE_FACTOR_ELUNES
endif
if udg_DmgEvBracers != 0 and IsUnitType(u, UNIT_TYPE_HERO) then
set l__i=6
loop
set l__i=l__i - 1
if GetItemTypeId(UnitItemInSlot(u, l__i)) == udg_DmgEvBracers then
set life=life * udg_DAMAGE_FACTOR_BRACERS
exitwhen true
endif
exitwhen l__i == 0
endloop
endif
set udg_DamageEventAmount=prevAmount * life
endif
set udg_DamageEventPrevAmt=prevAmount
set udg_DamageModifierEvent=0.00
if not udg_DamageEventOverride then
set udg_DamageModifierEvent=1.00
if not udg_DamageEventOverride then
set udg_DamageModifierEvent=2.00
set udg_DamageModifierEvent=3.00
endif
endif
set udg_DamageEventOverride=override
if udg_DamageEventAmount > 0.00 then
set udg_DamageModifierEvent=4.00
endif
set udg_DamageModifierEvent=0.00
if not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
set udg_DamageEvent=0.00
set udg_DamageEvent=1.00
set udg_DamageEvent=0.00
endif
call CheckDamagedLifeEvent(true)
set life=GetWidgetLife(u)
set udg_DmgEvTrig=CreateTrigger()
call TriggerAddCondition(udg_DmgEvTrig, Filter(function PreCheckDamagedLifeEvent))
if not udg_IsDamageSpell then
if udg_DamageEventAmount != prevAmount then
set life=life + prevAmount - udg_DamageEventAmount
if GetUnitState(u, UNIT_STATE_MAX_LIFE) < life then
set udg_LastDamageHP=life - prevAmount
call UnitAddAbility(u, udg_DamageBlockingAbility)
endif
call SetWidgetLife(u, RMaxBJ(life, 0.42))
endif
call TriggerRegisterUnitStateEvent(udg_DmgEvTrig, u, UNIT_STATE_LIFE, LESS_THAN, RMaxBJ(0.41, life - prevAmount / 2.00))
else
set udg_LastDamageHP=GetUnitState(u, UNIT_STATE_MAX_LIFE)
set prevLife=life
if life + prevAmount * 0.75 > udg_LastDamageHP then
set life=RMaxBJ(udg_LastDamageHP - prevAmount / 2.00, 1.00)
call SetWidgetLife(u, life)
set life=( life + udg_LastDamageHP ) / 2.00
else
set life=life + prevAmount * 0.50
endif
set udg_LastDamageHP=prevLife - ( prevAmount - ( prevAmount - udg_DamageEventAmount ) )
call TriggerRegisterUnitStateEvent(udg_DmgEvTrig, u, UNIT_STATE_LIFE, GREATER_THAN, life)
endif
endif
set u=null
set f=null
return false
endfunction
function CreateDmgEvTrg takes nothing returns nothing
set udg_DamageEventTrigger=CreateTrigger()
call TriggerAddCondition(udg_DamageEventTrigger, Filter(function OnUnitDamage))
endfunction
function SetupDmgEv takes nothing returns boolean
local integer l__i=udg_UDex
local unit u
if udg_UnitIndexEvent == 1.00 then
set u=udg_UDexUnits[l__i]
if GetUnitAbilityLevel(u, 0x416C6F63) == 0 and TriggerEvaluate(gg_trg_Damage_Engine_Config) then
set udg_UnitDamageRegistered[l__i]=true
call TriggerRegisterUnitEvent(udg_DamageEventTrigger, u, EVENT_UNIT_DAMAGED)
call UnitAddAbility(u, udg_SpellDamageAbility)
call UnitMakeAbilityPermanent(u, true, udg_SpellDamageAbility)
endif
set u=null
else
set udg_HideDamageFrom[l__i]=false
if udg_UnitDamageRegistered[l__i] then
set udg_UnitDamageRegistered[l__i]=false
set udg_DamageEventsWasted=udg_DamageEventsWasted + 1
if udg_DamageEventsWasted == 32 then
set udg_DamageEventsWasted=0
call DestroyTrigger(udg_DamageEventTrigger)
call CreateDmgEvTrg()
set l__i=udg_UDexNext[0]
loop
exitwhen l__i == 0
if udg_UnitDamageRegistered[l__i] then
call TriggerRegisterUnitEvent(udg_DamageEventTrigger, udg_UDexUnits[l__i], EVENT_UNIT_DAMAGED)
endif
set l__i=udg_UDexNext[l__i]
endloop
endif
endif
endif
return false
endfunction
function InitTrig_Damage_Engine takes nothing returns nothing
local unit u=CreateUnit(Player(15), 0x756C6F63, 0, 0, 0)
local integer l__i=16
local trigger t=CreateTrigger()
call TriggerRegisterVariableEvent(t, "udg_UnitIndexEvent", EQUAL, 1.00)
call TriggerRegisterVariableEvent(t, "udg_UnitIndexEvent", EQUAL, 2.00)
call TriggerAddCondition(t, Filter(function SetupDmgEv))
set t=null
if gg_trg_Damage_Engine_Config == null then
call ExecuteFunc("Trig_Damage_Engine_Config_Actions")
else
call TriggerExecute(gg_trg_Damage_Engine_Config)
endif
call CreateDmgEvTrg()
set udg_ClearDamageEvent=CreateTrigger()
call TriggerAddCondition(udg_ClearDamageEvent, Filter(function PreCheckDamagedLifeEvent))
loop
set l__i=l__i - 1
call SetPlayerAbilityAvailable(Player(l__i), udg_SpellDamageAbility, false)
exitwhen l__i == 0
endloop
call UnitAddAbility(u, udg_DamageBlockingAbility)
call UnitAddAbility(u, udg_SpellDamageAbility)
call RemoveUnit(u)
set u=null
endfunction
// scope HomeTP begins
function s__hometper_Find takes unit source returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__hometper_count )
if s__hometper_source[s__hometper_me[cjlocgn_00000000]] == source then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__hometper_create takes unit source returns integer
local integer l__i=s__hometper_Find(source)
local integer this
if l__i != - 1 then
set this=s__hometper_me[l__i]
else
set this=s__hometper__allocate()
set s__hometper_index[this]=s__hometper_count
set s__hometper_source[this]=source
call TriggerRegisterUnitEvent(s__hometper_trigfinish, source, EVENT_UNIT_SPELL_FINISH)
call TriggerRegisterUnitEvent(s__hometper_triginterrupt, source, EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(s__hometper_triginterrupt, source, EVENT_UNIT_DAMAGED)
set s__hometper_me[s__hometper_count]=this
set s__hometper_count=s__hometper_count + 1
endif
set s__hometper_finished[this]=false
set s__hometper_active[this]=true
call BJDebugMsg("Created home tp for " + GetUnitName(source) + " i = " + I2S(l__i) + " this = " + I2S(this))
call DestroyEffect(s__hometper_portalanim[this])
call SetUnitAnimation(s__hometper_source[this], "spell")
set s__hometper_portalanim[this]=AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl", source, "origin")
return this
endfunction
function s__hometper_onFinish takes nothing returns nothing
local unit cjlocgn_00000000
local integer cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
if GetSpellAbilityId() == 0x414C4854 or GetSpellAbilityId() == 0x41524854 then
set cjlocgn_00000000=GetSpellAbilityUnit()
set cjlocgn_00000001=s__hometper_Find(cjlocgn_00000000)
if s__hometper_active[s__hometper_me[cjlocgn_00000001]] then
set s__hometper_finished[s__hometper_me[cjlocgn_00000001]]=true
set s__hometper_active[s__hometper_me[cjlocgn_00000001]]=false
call DestroyEffect(s__hometper_portalanim[s__hometper_me[cjlocgn_00000001]])
set s__hometper_portalanim[s__hometper_me[cjlocgn_00000001]]=null
call BJDebugMsg("Finished home tp")
if GetSpellAbilityId() == 0x414C4854 then
set cjlocgn_00000002=GetRandomReal(GetRectMinX(gg_rct_lresp), GetRectMaxX(gg_rct_lresp))
set cjlocgn_00000003=GetRandomReal(GetRectMinY(gg_rct_lresp), GetRectMaxY(gg_rct_lresp))
elseif GetSpellAbilityId() == 0x41524854 then
set cjlocgn_00000002=GetRandomReal(GetRectMinX(gg_rct_rresp), GetRectMaxX(gg_rct_rresp))
set cjlocgn_00000003=GetRandomReal(GetRectMinY(gg_rct_rresp), GetRectMaxY(gg_rct_rresp))
endif
call SetUnitX(cjlocgn_00000000, cjlocgn_00000002)
call SetUnitY(cjlocgn_00000000, cjlocgn_00000003)
endif
endif
set cjlocgn_00000000=null
endfunction
function s__hometper_onInterrupt takes nothing returns nothing
local unit cjlocgn_00000000
local integer cjlocgn_00000001
if GetSpellAbilityId() == 0x414C4854 or GetSpellAbilityId() == 0x41524854 or GetTriggerEventId() == EVENT_UNIT_DAMAGED then
set cjlocgn_00000000=GetTriggerUnit()
set cjlocgn_00000001=s__hometper_Find(cjlocgn_00000000)
if not s__hometper_finished[s__hometper_me[cjlocgn_00000001]] and s__hometper_active[s__hometper_me[cjlocgn_00000001]] then
call BJDebugMsg("Interrupted home tp")
call DestroyEffect(s__hometper_portalanim[s__hometper_me[cjlocgn_00000001]])
set s__hometper_portalanim[s__hometper_me[cjlocgn_00000001]]=null
call IssueImmediateOrder(cjlocgn_00000000, "stop")
set s__hometper_active[s__hometper_me[cjlocgn_00000001]]=false
endif
endif
set cjlocgn_00000000=null
endfunction
function s__hometper_onSpellChannel takes nothing returns nothing
local unit cjlocgn_00000000
if GetSpellAbilityId() == 0x414C4854 or GetSpellAbilityId() == 0x41524854 then
set cjlocgn_00000000=GetSpellAbilityUnit()
call BJDebugMsg("Channeling home tp " + I2S(GetUnitAbilityLevel(cjlocgn_00000000, 0x414C4854)) + "-" + I2S(GetUnitAbilityLevel(cjlocgn_00000000, 0x41524854)))
call s__hometper_create(cjlocgn_00000000)
endif
set cjlocgn_00000000=null
endfunction
function s__hometper_cj_callback_0000000a takes nothing returns nothing
//# optional
local integer j=0
set s__hometper_trigchannel=CreateTrigger()
set s__hometper_triginterrupt=CreateTrigger()
set s__hometper_trigfinish=CreateTrigger()
loop
exitwhen ( j > 15 )
call TriggerRegisterPlayerUnitEvent(s__hometper_trigchannel, Player(j), EVENT_PLAYER_UNIT_SPELL_CHANNEL, null)
set j=j + 1
endloop
call TriggerAddAction(s__hometper_trigchannel, function s__hometper_onSpellChannel)
call TriggerAddAction(s__hometper_triginterrupt, function s__hometper_onInterrupt)
call TriggerAddAction(s__hometper_trigfinish, function s__hometper_onFinish)
endfunction
// scope HomeTP ends
// scope Backdoor begins
function rad_ch takes nothing returns boolean
local integer u=GetUnitTypeId(GetFilterUnit())
return ( u == 0x68303151 or u == 0x68303031 or u == 0x68303154 or u == 0x68303032 or u == 0x68303152 or u == 0x68303033 or u == 0x68303153 or u == 0x68303034 ) and ( GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 )
endfunction
function Backdoor_Actions takes nothing returns nothing
local unit u=udg_DamageEventTarget
local unit a=udg_DamageEventSource
local group cjlocgn_00000000
local unit cjlocgn_00000001
if GetUnitTypeId(u) != 0x6E303044 and ( GetOwningPlayer(u) == Player(5) or GetOwningPlayer(u) == Player(10) ) and IsUnitEnemy(a, GetOwningPlayer(u)) and IsUnitType(u, UNIT_TYPE_STRUCTURE) then
set cjlocgn_00000000=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_00000000, GetUnitX(u), GetUnitY(u), 2000., Filter(function rad_ch))
loop
set cjlocgn_00000001=FirstOfGroup(cjlocgn_00000000)
exitwhen cjlocgn_00000001 == null or IsUnitAlly(cjlocgn_00000001, GetOwningPlayer(a))
call GroupRemoveUnit(cjlocgn_00000000, cjlocgn_00000001)
endloop
if cjlocgn_00000001 == null then
set udg_DamageEventAmount=udg_DamageEventAmount * 0.2
else
endif
call GroupClear(cjlocgn_00000000)
call DestroyGroup(cjlocgn_00000000)
endif
set cjlocgn_00000001=null
set cjlocgn_00000000=null
set a=null
set u=null
endfunction
function cj_callback_0000000b takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Backdoor_Actions)
endfunction
// scope Backdoor ends
function Trig_Invulnerable_Towers_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_n00D_0159, true)
call SetUnitInvulnerable(gg_unit_h00A_0048, true)
call SetUnitInvulnerable(gg_unit_h00V_0010, true)
call SetUnitInvulnerable(gg_unit_h00U_0049, true)
call SetUnitInvulnerable(gg_unit_h00X_0055, true)
call SetUnitInvulnerable(gg_unit_h00T_0054, true)
call SetUnitInvulnerable(gg_unit_h00Y_0052, true)
call SetUnitInvulnerable(gg_unit_h007_0023, true)
call SetUnitInvulnerable(gg_unit_h007_0024, true)
call SetUnitInvulnerable(gg_unit_h008_0040, true)
call SetUnitInvulnerable(gg_unit_h00Z_0025, true)
call SetUnitInvulnerable(gg_unit_h013_0028, true)
call SetUnitInvulnerable(gg_unit_h014_0038, true)
call SetUnitInvulnerable(gg_unit_h010_0027, true)
call SetUnitInvulnerable(gg_unit_h015_0034, true)
call SetUnitInvulnerable(gg_unit_h016_0029, true)
call SetUnitInvulnerable(gg_unit_h016_0030, true)
call SetUnitInvulnerable(gg_unit_h011_0031, true)
call SetUnitInvulnerable(gg_unit_h009_0041, true)
endfunction
function InitTrig_Invulnerable_Towers takes nothing returns nothing
set gg_trg_Invulnerable_Towers=CreateTrigger()
call TriggerAddAction(gg_trg_Invulnerable_Towers, function Trig_Invulnerable_Towers_Actions)
endfunction
function Trig_LDefMod_Tier1_Func001C takes nothing returns boolean
return true
endfunction
function Trig_LDefMod_Tier1_Conditions takes nothing returns boolean
if ( not Trig_LDefMod_Tier1_Func001C() ) then
return false
endif
return true
endfunction
function Trig_LDefMod_Tier1_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h00V_0010, false)
call SetUnitInvulnerable(gg_unit_h00A_0048, false)
endfunction
function InitTrig_LDefMod_Tier1 takes nothing returns nothing
set gg_trg_LDefMod_Tier1=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier1, gg_unit_h00W_0036, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_LDefMod_Tier1, Condition(function Trig_LDefMod_Tier1_Conditions))
call TriggerAddAction(gg_trg_LDefMod_Tier1, function Trig_LDefMod_Tier1_Actions)
endfunction
function Trig_LDefTree1_Tier1_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h00A_0048) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h00V_0010) == true ) ) then
return false
endif
return true
endfunction
function Trig_LDefTree1_Tier1_Conditions takes nothing returns boolean
if ( not Trig_LDefTree1_Tier1_Func001C() ) then
return false
endif
return true
endfunction
function Trig_LDefTree1_Tier1_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h00U_0049, false)
endfunction
function InitTrig_LDefTree1_Tier1 takes nothing returns nothing
set gg_trg_LDefTree1_Tier1=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_LDefTree1_Tier1, gg_unit_h00A_0048, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_LDefTree1_Tier1, gg_unit_h00V_0010, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_LDefTree1_Tier1, Condition(function Trig_LDefTree1_Tier1_Conditions))
call TriggerAddAction(gg_trg_LDefTree1_Tier1, function Trig_LDefTree1_Tier1_Actions)
endfunction
function Trig_LDefMod_Tier_3_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h00X_0055, false)
call SetUnitInvulnerable(gg_unit_h00T_0054, false)
endfunction
function InitTrig_LDefMod_Tier_3 takes nothing returns nothing
set gg_trg_LDefMod_Tier_3=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier_3, gg_unit_h00U_0049, EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_LDefMod_Tier_3, function Trig_LDefMod_Tier_3_Actions)
endfunction
function Trig_LDefMod_Tier4_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h00X_0055) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h00T_0054) == true ) ) then
return false
endif
return true
endfunction
function Trig_LDefMod_Tier4_Conditions takes nothing returns boolean
if ( not Trig_LDefMod_Tier4_Func001C() ) then
return false
endif
return true
endfunction
function Trig_LDefMod_Tier4_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h00Y_0052, false)
call SetUnitInvulnerable(gg_unit_h007_0023, false)
call SetUnitInvulnerable(gg_unit_h007_0024, false)
endfunction
function InitTrig_LDefMod_Tier4 takes nothing returns nothing
set gg_trg_LDefMod_Tier4=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier4, gg_unit_h00X_0055, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier4, gg_unit_h00T_0054, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_LDefMod_Tier4, Condition(function Trig_LDefMod_Tier4_Conditions))
call TriggerAddAction(gg_trg_LDefMod_Tier4, function Trig_LDefMod_Tier4_Actions)
endfunction
function Trig_LDefMod_Tier5_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h007_0023) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h00Y_0052) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h007_0024) == true ) ) then
return false
endif
return true
endfunction
function Trig_LDefMod_Tier5_Conditions takes nothing returns boolean
if ( not Trig_LDefMod_Tier5_Func001C() ) then
return false
endif
return true
endfunction
function Trig_LDefMod_Tier5_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h008_0040, false)
endfunction
function InitTrig_LDefMod_Tier5 takes nothing returns nothing
set gg_trg_LDefMod_Tier5=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier5, gg_unit_h007_0023, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier5, gg_unit_h00Y_0052, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_LDefMod_Tier5, gg_unit_h007_0024, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_LDefMod_Tier5, Condition(function Trig_LDefMod_Tier5_Conditions))
call TriggerAddAction(gg_trg_LDefMod_Tier5, function Trig_LDefMod_Tier5_Actions)
endfunction
function Trig_RDefMod_Tier1_Func001C takes nothing returns boolean
return true
endfunction
function Trig_RDefMod_Tier1_Conditions takes nothing returns boolean
if ( not Trig_RDefMod_Tier1_Func001C() ) then
return false
endif
return true
endfunction
function Trig_RDefMod_Tier1_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h00Z_0025, false)
call SetUnitInvulnerable(gg_unit_h013_0028, false)
endfunction
function InitTrig_RDefMod_Tier1 takes nothing returns nothing
set gg_trg_RDefMod_Tier1=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier1, gg_unit_h012_0033, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RDefMod_Tier1, Condition(function Trig_RDefMod_Tier1_Conditions))
call TriggerAddAction(gg_trg_RDefMod_Tier1, function Trig_RDefMod_Tier1_Actions)
endfunction
function Trig_RDefTree1_Tier1_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h00Z_0025) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h013_0028) == true ) ) then
return false
endif
return true
endfunction
function Trig_RDefTree1_Tier1_Conditions takes nothing returns boolean
if ( not Trig_RDefTree1_Tier1_Func001C() ) then
return false
endif
return true
endfunction
function Trig_RDefTree1_Tier1_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h014_0038, false)
endfunction
function InitTrig_RDefTree1_Tier1 takes nothing returns nothing
set gg_trg_RDefTree1_Tier1=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefTree1_Tier1, gg_unit_h00Z_0025, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_RDefTree1_Tier1, gg_unit_h013_0028, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RDefTree1_Tier1, Condition(function Trig_RDefTree1_Tier1_Conditions))
call TriggerAddAction(gg_trg_RDefTree1_Tier1, function Trig_RDefTree1_Tier1_Actions)
endfunction
function Trig_RDefModTree2_Func001C takes nothing returns boolean
return true
endfunction
function Trig_RDefModTree2_Conditions takes nothing returns boolean
if ( not Trig_RDefModTree2_Func001C() ) then
return false
endif
return true
endfunction
function Trig_RDefModTree2_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h010_0027, false)
call SetUnitInvulnerable(gg_unit_h015_0034, false)
endfunction
function InitTrig_RDefModTree2 takes nothing returns nothing
set gg_trg_RDefModTree2=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefModTree2, gg_unit_h014_0038, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RDefModTree2, Condition(function Trig_RDefModTree2_Conditions))
call TriggerAddAction(gg_trg_RDefModTree2, function Trig_RDefModTree2_Actions)
endfunction
function Trig_RDefMod_Tier_3_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h010_0027, false)
call SetUnitInvulnerable(gg_unit_h015_0034, false)
endfunction
function InitTrig_RDefMod_Tier_3 takes nothing returns nothing
set gg_trg_RDefMod_Tier_3=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier_3, gg_unit_h014_0038, EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_RDefMod_Tier_3, function Trig_RDefMod_Tier_3_Actions)
endfunction
function Trig_RDefMod_Tier4_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h010_0027) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h015_0034) == true ) ) then
return false
endif
return true
endfunction
function Trig_RDefMod_Tier4_Conditions takes nothing returns boolean
if ( not Trig_RDefMod_Tier4_Func001C() ) then
return false
endif
return true
endfunction
function Trig_RDefMod_Tier4_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h011_0031, false)
call SetUnitInvulnerable(gg_unit_h016_0030, false)
call SetUnitInvulnerable(gg_unit_h016_0029, false)
endfunction
function InitTrig_RDefMod_Tier4 takes nothing returns nothing
set gg_trg_RDefMod_Tier4=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier4, gg_unit_h010_0027, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier4, gg_unit_h015_0034, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RDefMod_Tier4, Condition(function Trig_RDefMod_Tier4_Conditions))
call TriggerAddAction(gg_trg_RDefMod_Tier4, function Trig_RDefMod_Tier4_Actions)
endfunction
function Trig_RDefMod_Tier5_Func001C takes nothing returns boolean
if ( not ( IsUnitDeadBJ(gg_unit_h016_0030) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h011_0031) == true ) ) then
return false
endif
if ( not ( IsUnitDeadBJ(gg_unit_h016_0029) == true ) ) then
return false
endif
return true
endfunction
function Trig_RDefMod_Tier5_Conditions takes nothing returns boolean
if ( not Trig_RDefMod_Tier5_Func001C() ) then
return false
endif
return true
endfunction
function Trig_RDefMod_Tier5_Actions takes nothing returns nothing
call SetUnitInvulnerable(gg_unit_h009_0041, false)
endfunction
function InitTrig_RDefMod_Tier5 takes nothing returns nothing
set gg_trg_RDefMod_Tier5=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier5, gg_unit_h016_0030, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier5, gg_unit_h011_0031, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_RDefMod_Tier5, gg_unit_h016_0029, EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RDefMod_Tier5, Condition(function Trig_RDefMod_Tier5_Conditions))
call TriggerAddAction(gg_trg_RDefMod_Tier5, function Trig_RDefMod_Tier5_Actions)
endfunction
function Trig_l2s___lm2_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_l2s___lm2_Conditions takes nothing returns boolean
if ( not Trig_l2s___lm2_Func002C() ) then
return false
endif
return true
endfunction
function Trig_l2s___lm2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lm2)))
endfunction
function InitTrig_l2s___lm2 takes nothing returns nothing
set gg_trg_l2s___lm2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_l2s___lm2, gg_rct_l2s)
call TriggerAddCondition(gg_trg_l2s___lm2, Condition(function Trig_l2s___lm2_Conditions))
call TriggerAddAction(gg_trg_l2s___lm2, function Trig_l2s___lm2_Actions)
endfunction
function Trig_lm2____llll_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_lm2____llll_Conditions takes nothing returns boolean
if ( not Trig_lm2____llll_Func002C() ) then
return false
endif
return true
endfunction
function Trig_lm2____llll_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrhello)))
endfunction
function InitTrig_lm2____llll takes nothing returns nothing
set gg_trg_lm2____llll=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lm2____llll, gg_rct_lm2)
call TriggerAddCondition(gg_trg_lm2____llll, Condition(function Trig_lm2____llll_Conditions))
call TriggerAddAction(gg_trg_lm2____llll, function Trig_lm2____llll_Actions)
endfunction
function Trig_llll____2_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_llll____2_Conditions takes nothing returns boolean
if ( not Trig_llll____2_Func002C() ) then
return false
endif
return true
endfunction
function Trig_llll____2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llll)))
endfunction
function InitTrig_llll____2 takes nothing returns nothing
set gg_trg_llll____2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_llll____2, gg_rct_rrhello)
call TriggerAddCondition(gg_trg_llll____2, Condition(function Trig_llll____2_Conditions))
call TriggerAddAction(gg_trg_llll____2, function Trig_llll____2_Actions)
endfunction
function Trig_bot_rrrr_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_bot_rrrr_Conditions takes nothing returns boolean
if ( not Trig_bot_rrrr_Func002C() ) then
return false
endif
return true
endfunction
function Trig_bot_rrrr_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_2)))
endfunction
function InitTrig_bot_rrrr takes nothing returns nothing
set gg_trg_bot_rrrr=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_bot_rrrr, gg_rct_llll)
call TriggerAddCondition(gg_trg_bot_rrrr, Condition(function Trig_bot_rrrr_Conditions))
call TriggerAddAction(gg_trg_bot_rrrr, function Trig_bot_rrrr_Actions)
endfunction
function Trig_rrrr_lhello_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_rrrr_lhello_Conditions takes nothing returns boolean
if ( not Trig_rrrr_lhello_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rrrr_lhello_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrrr)))
endfunction
function InitTrig_rrrr_lhello takes nothing returns nothing
set gg_trg_rrrr_lhello=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rrrr_lhello, gg_rct_2)
call TriggerAddCondition(gg_trg_rrrr_lhello, Condition(function Trig_rrrr_lhello_Conditions))
call TriggerAddAction(gg_trg_rrrr_lhello, function Trig_rrrr_lhello_Actions)
endfunction
function Trig_lhelo_rm2_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_lhelo_rm2_Conditions takes nothing returns boolean
if ( not Trig_lhelo_rm2_Func002C() ) then
return false
endif
return true
endfunction
function Trig_lhelo_rm2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llhello)))
endfunction
function InitTrig_lhelo_rm2 takes nothing returns nothing
set gg_trg_lhelo_rm2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lhelo_rm2, gg_rct_rrrr)
call TriggerAddCondition(gg_trg_lhelo_rm2, Condition(function Trig_lhelo_rm2_Conditions))
call TriggerAddAction(gg_trg_lhelo_rm2, function Trig_lhelo_rm2_Actions)
endfunction
function Trig_lthrone2_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_lthrone2_Conditions takes nothing returns boolean
if ( not Trig_lthrone2_Func002C() ) then
return false
endif
return true
endfunction
function Trig_lthrone2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rm1)))
endfunction
function InitTrig_lthrone2 takes nothing returns nothing
set gg_trg_lthrone2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lthrone2, gg_rct_llhello)
call TriggerAddCondition(gg_trg_lthrone2, Condition(function Trig_lthrone2_Conditions))
call TriggerAddAction(gg_trg_lthrone2, function Trig_lthrone2_Actions)
endfunction
function Trig_final_atack_Orden_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_final_atack_Orden_Conditions takes nothing returns boolean
if ( not Trig_final_atack_Orden_Func002C() ) then
return false
endif
return true
endfunction
function Trig_final_atack_Orden_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rthr)))
endfunction
function InitTrig_final_atack_Orden takes nothing returns nothing
set gg_trg_final_atack_Orden=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_final_atack_Orden, gg_rct_rm1)
call TriggerAddCondition(gg_trg_final_atack_Orden, Condition(function Trig_final_atack_Orden_Conditions))
call TriggerAddAction(gg_trg_final_atack_Orden, function Trig_final_atack_Orden_Actions)
endfunction
function Trig_l1s___lm1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303151 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303154 ) ) then
return true
endif
return false
endfunction
function Trig_l1s___lm1_Conditions takes nothing returns boolean
if ( not Trig_l1s___lm1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_l1s___lm1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lm1)))
endfunction
function InitTrig_l1s___lm1 takes nothing returns nothing
set gg_trg_l1s___lm1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_l1s___lm1, gg_rct_l1s)
call TriggerAddCondition(gg_trg_l1s___lm1, Condition(function Trig_l1s___lm1_Conditions))
call TriggerAddAction(gg_trg_l1s___lm1, function Trig_l1s___lm1_Actions)
endfunction
function Trig_lm1___1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303151 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303154 ) ) then
return true
endif
return false
endfunction
function Trig_lm1___1_Conditions takes nothing returns boolean
if ( not Trig_lm1___1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_lm1___1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_1)))
endfunction
function InitTrig_lm1___1 takes nothing returns nothing
set gg_trg_lm1___1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lm1___1, gg_rct_lm1)
call TriggerAddCondition(gg_trg_lm1___1, Condition(function Trig_lm1___1_Conditions))
call TriggerAddAction(gg_trg_lm1___1, function Trig_lm1___1_Actions)
endfunction
function Trig_top_rm1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303151 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303154 ) ) then
return true
endif
return false
endfunction
function Trig_top_rm1_Conditions takes nothing returns boolean
if ( not Trig_top_rm1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_top_rm1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rm1)))
endfunction
function InitTrig_top_rm1 takes nothing returns nothing
set gg_trg_top_rm1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_top_rm1, gg_rct_1)
call TriggerAddCondition(gg_trg_top_rm1, Condition(function Trig_top_rm1_Conditions))
call TriggerAddAction(gg_trg_top_rm1, function Trig_top_rm1_Actions)
endfunction
function Trig_lthrone1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303151 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303154 ) ) then
return true
endif
return false
endfunction
function Trig_lthrone1_Conditions takes nothing returns boolean
if ( not Trig_lthrone1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_lthrone1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rthr)))
endfunction
function InitTrig_lthrone1 takes nothing returns nothing
set gg_trg_lthrone1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lthrone1, gg_rct_rm1)
call TriggerAddCondition(gg_trg_lthrone1, Condition(function Trig_lthrone1_Conditions))
call TriggerAddAction(gg_trg_lthrone1, function Trig_lthrone1_Actions)
endfunction
function Trig_r1s___rm1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_r1s___rm1_Conditions takes nothing returns boolean
if ( not Trig_r1s___rm1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_r1s___rm1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rm2)))
endfunction
function InitTrig_r1s___rm1 takes nothing returns nothing
set gg_trg_r1s___rm1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_r1s___rm1, gg_rct_r1s)
call TriggerAddCondition(gg_trg_r1s___rm1, Condition(function Trig_r1s___rm1_Conditions))
call TriggerAddAction(gg_trg_r1s___rm1, function Trig_r1s___rm1_Actions)
endfunction
function Trig_rm1___1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_rm1___1_Conditions takes nothing returns boolean
if ( not Trig_rm1___1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rm1___1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llhello)))
endfunction
function InitTrig_rm1___1 takes nothing returns nothing
set gg_trg_rm1___1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rm1___1, gg_rct_rm2)
call TriggerAddCondition(gg_trg_rm1___1, Condition(function Trig_rm1___1_Conditions))
call TriggerAddAction(gg_trg_rm1___1, function Trig_rm1___1_Actions)
endfunction
function Trig_top_lm1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_top_lm1_Conditions takes nothing returns boolean
if ( not Trig_top_lm1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_top_lm1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct________________046)))
endfunction
function InitTrig_top_lm1 takes nothing returns nothing
set gg_trg_top_lm1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_top_lm1, gg_rct_llhello)
call TriggerAddCondition(gg_trg_top_lm1, Condition(function Trig_top_lm1_Conditions))
call TriggerAddAction(gg_trg_top_lm1, function Trig_top_lm1_Actions)
endfunction
function Trig_rthrone_1_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_rthrone_1_Conditions takes nothing returns boolean
if ( not Trig_rthrone_1_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rthrone_1_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_1)))
endfunction
function InitTrig_rthrone_1 takes nothing returns nothing
set gg_trg_rthrone_1=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rthrone_1, gg_rct________________046)
call TriggerAddCondition(gg_trg_rthrone_1, Condition(function Trig_rthrone_1_Conditions))
call TriggerAddAction(gg_trg_rthrone_1, function Trig_rthrone_1_Actions)
endfunction
function Trig_rthrone_1_____________________u_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_rthrone_1_____________________u_Conditions takes nothing returns boolean
if ( not Trig_rthrone_1_____________________u_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rthrone_1_____________________u_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct________________045)))
endfunction
function InitTrig_rthrone_1_____________________u takes nothing returns nothing
set gg_trg_rthrone_1_____________________u=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rthrone_1_____________________u, gg_rct_1)
call TriggerAddCondition(gg_trg_rthrone_1_____________________u, Condition(function Trig_rthrone_1_____________________u_Conditions))
call TriggerAddAction(gg_trg_rthrone_1_____________________u, function Trig_rthrone_1_____________________u_Actions)
endfunction
function Trig_rthrone_1__________________________________________u_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_rthrone_1__________________________________________u_Conditions takes nothing returns boolean
if ( not Trig_rthrone_1__________________________________________u_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rthrone_1__________________________________________u_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrhello)))
endfunction
function InitTrig_rthrone_1__________________________________________u takes nothing returns nothing
set gg_trg_rthrone_1__________________________________________u=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rthrone_1__________________________________________u, gg_rct________________045)
call TriggerAddCondition(gg_trg_rthrone_1__________________________________________u, Condition(function Trig_rthrone_1__________________________________________u_Conditions))
call TriggerAddAction(gg_trg_rthrone_1__________________________________________u, function Trig_rthrone_1__________________________________________u_Actions)
endfunction
function Trig_rthrone_1_______________________________________________________________u_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_rthrone_1_______________________________________________________________u_Conditions takes nothing returns boolean
if ( not Trig_rthrone_1_______________________________________________________________u_Func002C() ) then
return false
endif
return true
endfunction
function Trig_rthrone_1_______________________________________________________________u_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lm1)))
endfunction
function InitTrig_rthrone_1_______________________________________________________________u takes nothing returns nothing
set gg_trg_rthrone_1_______________________________________________________________u=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rthrone_1_______________________________________________________________u, gg_rct_rrhello)
call TriggerAddCondition(gg_trg_rthrone_1_______________________________________________________________u, Condition(function Trig_rthrone_1_______________________________________________________________u_Conditions))
call TriggerAddAction(gg_trg_rthrone_1_______________________________________________________________u, function Trig_rthrone_1_______________________________________________________________u_Actions)
endfunction
function Trig_final_atack_kult_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_final_atack_kult_Conditions takes nothing returns boolean
if ( not Trig_final_atack_kult_Func002C() ) then
return false
endif
return true
endfunction
function Trig_final_atack_kult_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lthr)))
endfunction
function InitTrig_final_atack_kult takes nothing returns nothing
set gg_trg_final_atack_kult=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_final_atack_kult, gg_rct_lm1)
call TriggerAddCondition(gg_trg_final_atack_kult, Condition(function Trig_final_atack_kult_Conditions))
call TriggerAddAction(gg_trg_final_atack_kult, function Trig_final_atack_kult_Actions)
endfunction
function Trig_r2s___rm2_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_r2s___rm2_Conditions takes nothing returns boolean
if ( not Trig_r2s___rm2_Func002C() ) then
return false
endif
return true
endfunction
function Trig_r2s___rm2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rm2)))
endfunction
function InitTrig_r2s___rm2 takes nothing returns nothing
set gg_trg_r2s___rm2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_r2s___rm2, gg_rct_r2s)
call TriggerAddCondition(gg_trg_r2s___rm2, Condition(function Trig_r2s___rm2_Conditions))
call TriggerAddAction(gg_trg_r2s___rm2, function Trig_r2s___rm2_Actions)
endfunction
function Trig_rm2_rrrr_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_rm2_rrrr_Conditions takes nothing returns boolean
if ( not Trig_rm2_rrrr_Func001C() ) then
return false
endif
return true
endfunction
function Trig_rm2_rrrr_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrrr)))
endfunction
function InitTrig_rm2_rrrr takes nothing returns nothing
set gg_trg_rm2_rrrr=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rm2_rrrr, gg_rct_rm2)
call TriggerAddCondition(gg_trg_rm2_rrrr, Condition(function Trig_rm2_rrrr_Conditions))
call TriggerAddAction(gg_trg_rm2_rrrr, function Trig_rm2_rrrr_Actions)
endfunction
function Trig_rrrr_2_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_rrrr_2_Conditions takes nothing returns boolean
if ( not Trig_rrrr_2_Func001C() ) then
return false
endif
return true
endfunction
function Trig_rrrr_2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_2)))
endfunction
function InitTrig_rrrr_2 takes nothing returns nothing
set gg_trg_rrrr_2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rrrr_2, gg_rct_rrrr)
call TriggerAddCondition(gg_trg_rrrr_2, Condition(function Trig_rrrr_2_Conditions))
call TriggerAddAction(gg_trg_rrrr_2, function Trig_rrrr_2_Actions)
endfunction
function Trig_bot_llll_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_bot_llll_Conditions takes nothing returns boolean
if ( not Trig_bot_llll_Func001C() ) then
return false
endif
return true
endfunction
function Trig_bot_llll_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llll)))
endfunction
function InitTrig_bot_llll takes nothing returns nothing
set gg_trg_bot_llll=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_bot_llll, gg_rct_2)
call TriggerAddCondition(gg_trg_bot_llll, Condition(function Trig_bot_llll_Conditions))
call TriggerAddAction(gg_trg_bot_llll, function Trig_bot_llll_Actions)
endfunction
function Trig_llll_rhello_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_llll_rhello_Conditions takes nothing returns boolean
if ( not Trig_llll_rhello_Func001C() ) then
return false
endif
return true
endfunction
function Trig_llll_rhello_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrhello)))
endfunction
function InitTrig_llll_rhello takes nothing returns nothing
set gg_trg_llll_rhello=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_llll_rhello, gg_rct_llll)
call TriggerAddCondition(gg_trg_llll_rhello, Condition(function Trig_llll_rhello_Conditions))
call TriggerAddAction(gg_trg_llll_rhello, function Trig_llll_rhello_Actions)
endfunction
function Trig_rhello_lm2_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_rhello_lm2_Conditions takes nothing returns boolean
if ( not Trig_rhello_lm2_Func001C() ) then
return false
endif
return true
endfunction
function Trig_rhello_lm2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lm2)))
endfunction
function InitTrig_rhello_lm2 takes nothing returns nothing
set gg_trg_rhello_lm2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rhello_lm2, gg_rct_rrhello)
call TriggerAddCondition(gg_trg_rhello_lm2, Condition(function Trig_rhello_lm2_Conditions))
call TriggerAddAction(gg_trg_rhello_lm2, function Trig_rhello_lm2_Actions)
endfunction
function Trig_rthrone2_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_rthrone2_Conditions takes nothing returns boolean
if ( not Trig_rthrone2_Func001C() ) then
return false
endif
return true
endfunction
function Trig_rthrone2_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_lthr)))
endfunction
function InitTrig_rthrone2 takes nothing returns nothing
set gg_trg_rthrone2=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rthrone2, gg_rct_lm2)
call TriggerAddCondition(gg_trg_rthrone2, Condition(function Trig_rthrone2_Conditions))
call TriggerAddAction(gg_trg_rthrone2, function Trig_rthrone2_Actions)
endfunction
function Trig_Orden_debag_verh_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303031 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303032 ) ) then
return true
endif
return false
endfunction
function Trig_Orden_debag_verh_Conditions takes nothing returns boolean
if ( not Trig_Orden_debag_verh_Func002C() ) then
return false
endif
return true
endfunction
function Trig_Orden_debag_verh_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrhello)))
endfunction
function InitTrig_Orden_debag_verh takes nothing returns nothing
set gg_trg_Orden_debag_verh=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Orden_debag_verh, gg_rct_anti_niz)
call TriggerAddCondition(gg_trg_Orden_debag_verh, Condition(function Trig_Orden_debag_verh_Conditions))
call TriggerAddAction(gg_trg_Orden_debag_verh, function Trig_Orden_debag_verh_Actions)
endfunction
function Trig_Orden_debag_niz_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303151 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303154 ) ) then
return true
endif
return false
endfunction
function Trig_Orden_debag_niz_Conditions takes nothing returns boolean
if ( not Trig_Orden_debag_niz_Func002C() ) then
return false
endif
return true
endfunction
function Trig_Orden_debag_niz_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_rrhello)))
endfunction
function InitTrig_Orden_debag_niz takes nothing returns nothing
set gg_trg_Orden_debag_niz=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Orden_debag_niz, gg_rct_anit_verh)
call TriggerAddCondition(gg_trg_Orden_debag_niz, Condition(function Trig_Orden_debag_niz_Conditions))
call TriggerAddAction(gg_trg_Orden_debag_niz, function Trig_Orden_debag_niz_Actions)
endfunction
function Trig_Kult_debag_niz_Func002C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303152 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303153 ) ) then
return true
endif
return false
endfunction
function Trig_Kult_debag_niz_Conditions takes nothing returns boolean
if ( not Trig_Kult_debag_niz_Func002C() ) then
return false
endif
return true
endfunction
function Trig_Kult_debag_niz_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llhello)))
endfunction
function InitTrig_Kult_debag_niz takes nothing returns nothing
set gg_trg_Kult_debag_niz=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Kult_debag_niz, gg_rct_anit_verh)
call TriggerAddCondition(gg_trg_Kult_debag_niz, Condition(function Trig_Kult_debag_niz_Conditions))
call TriggerAddAction(gg_trg_Kult_debag_niz, function Trig_Kult_debag_niz_Actions)
endfunction
function Trig_Kult_debag_verh_Func001C takes nothing returns boolean
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303033 ) ) then
return true
endif
if ( ( GetUnitTypeId(GetTriggerUnit()) == 0x68303034 ) ) then
return true
endif
return false
endfunction
function Trig_Kult_debag_verh_Conditions takes nothing returns boolean
if ( not Trig_Kult_debag_verh_Func001C() ) then
return false
endif
return true
endfunction
function Trig_Kult_debag_verh_Actions takes nothing returns nothing
call IssuePointOrderLocBJ(GetTriggerUnit(), "attack", ALL_RemoveLocation(GetRectCenter(gg_rct_llhello)))
endfunction
function InitTrig_Kult_debag_verh takes nothing returns nothing
set gg_trg_Kult_debag_verh=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Kult_debag_verh, gg_rct_anti_niz)
call TriggerAddCondition(gg_trg_Kult_debag_verh, Condition(function Trig_Kult_debag_verh_Conditions))
call TriggerAddAction(gg_trg_Kult_debag_verh, function Trig_Kult_debag_verh_Actions)
endfunction
// scope VolyaLes begins
function Volya takes nothing returns nothing
local unit a=udg_DamageEventTarget
local effect cjlocgn_00000000
if forestspk > 2 or not ( GetUnitTypeId(a) == 0x65303036 or GetUnitTypeId(a) == 0x65303035 or GetUnitTypeId(a) == 0x65303030 or GetUnitTypeId(a) == 0x68303046 or GetUnitTypeId(a) == 0x68303043 or GetUnitTypeId(a) == 0x68303044 or GetUnitTypeId(a) == 0x65303032 or GetUnitTypeId(a) == 0x65303031 or GetUnitTypeId(a) == 0x68303049 or GetUnitTypeId(a) == 0x68303137 or GetUnitTypeId(a) == 0x65303038 or GetUnitTypeId(a) == 0x65303039 or GetUnitTypeId(a) == 0x65303037 or GetUnitTypeId(a) == 0x68303138 or GetUnitTypeId(a) == 0x68303141 ) or GetUnitState(a, UNIT_STATE_LIFE) <= GetUnitState(a, UNIT_STATE_MAX_LIFE) * .85 then
set a=null
return
endif
if udg_DamageEventAmount > GetUnitState(a, UNIT_STATE_MAX_LIFE) * .85 then
set udg_DamageEventAmount=GetUnitState(a, UNIT_STATE_MAX_LIFE) * .85
if LoadEffectHandle(hash, GetHandleId(a), 0x42486164) == null then
set cjlocgn_00000000=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\HealingWave\\HealingWaveTarget.mdl", a, "origin")
call SaveEffectHandle(hash, GetHandleId(a), 0x42486164, cjlocgn_00000000)
call DestroyEffect(cjlocgn_00000000)
endif
endif
set cjlocgn_00000000=null
set a=null
endfunction
function cj_callback_0000000c takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Volya)
endfunction
// scope VolyaLes ends
function Trig_BlueDrakeDeath_Conditions takes nothing returns boolean
if ( not ( GetUnitTypeId(GetTriggerUnit()) == 0x65303036 ) ) then
return false
endif
return true
endfunction
function Trig_BlueDrakeDeath_Actions takes nothing returns nothing
call CreateItemLoc(0x49303234, ALL_RemoveLocation(GetUnitLoc(GetTriggerUnit())))
endfunction
function InitTrig_BlueDrakeDeath takes nothing returns nothing
set gg_trg_BlueDrakeDeath=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BlueDrakeDeath, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_BlueDrakeDeath, Condition(function Trig_BlueDrakeDeath_Conditions))
call TriggerAddAction(gg_trg_BlueDrakeDeath, function Trig_BlueDrakeDeath_Actions)
endfunction
function Trig_DragonRune_Conditions takes nothing returns boolean
if ( not ( GetItemTypeId(GetManipulatedItem()) == 0x49303234 ) ) then
return false
endif
return true
endfunction
function Trig_DragonRune_Actions takes nothing returns nothing
call SetUnitState(GetTriggerUnit(), UNIT_STATE_MANA, GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) + 8 * GetHeroInt(GetTriggerUnit(), true))
endfunction
function InitTrig_DragonRune takes nothing returns nothing
set gg_trg_DragonRune=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_DragonRune, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_DragonRune, Condition(function Trig_DragonRune_Conditions))
call TriggerAddAction(gg_trg_DragonRune, function Trig_DragonRune_Actions)
endfunction
function REF_Conditions takes nothing returns boolean
local unit u=udg_DamageEventSource
set cj_v666_boolean=not udg_IsDamageSpell and ( GetUnitAbilityLevel(u, 0x42303150) > 0 or GetUnitAbilityLevel(u, 0x42303151) > 0 or GetUnitAbilityLevel(u, 0x42303152) > 0 )
set u=null
return cj_v666_boolean
endfunction
function cj_anonym__12 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function REF_Actions takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local player p=GetOwningPlayer(u)
local real X=GetUnitX(u)
local real Y=GetUnitY(u)
local timer Timer=LoadTimerHandle(hash, GetHandleId(u), 1)
local unit cjlocgn_00000000
if GetUnitAbilityLevel(u, 0x42303150) > 0 then
set cjlocgn_00000000=CreateUnit(p, 0x68303164, X, Y, 0)
call UnitAddAbility(cjlocgn_00000000, 0x4130354C)
call IssueTargetOrder(cjlocgn_00000000, "acidbomb", t)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1)
endif
if GetUnitAbilityLevel(u, 0x42303151) > 0 then
call SetUnitState(t, UNIT_STATE_MANA, GetUnitState(t, UNIT_STATE_MANA) - 30)
call DisableTrigger(GetTriggeringTrigger())
call UnitDamageTarget(u, t, 30, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call EnableTrigger(GetTriggeringTrigger())
endif
if GetUnitAbilityLevel(u, 0x42303152) > 0 and Timer == null then
set Timer=CreateTimer()
call TimerStart(Timer, 5., false, function cj_anonym__12)
set cjlocgn_00000000=CreateUnit(p, 0x68303164, X, Y, 0)
call UnitAddAbility(cjlocgn_00000000, 0x4130354D)
call IssueTargetOrder(cjlocgn_00000000, "ensnare", t)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1)
call SaveTimerHandle(hash, GetHandleId(u), 1, Timer)
endif
set cjlocgn_00000000=null
set Timer=null
set t=null
set u=null
endfunction
function InitTrig_RuneEffec takes nothing returns nothing
set gg_trg_RuneEffec=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_RuneEffec, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_RuneEffec, Condition(function REF_Conditions))
call TriggerAddAction(gg_trg_RuneEffec, function REF_Actions)
endfunction
// scope RuneTrig begins
function Trig_RunerDeath_Conditions takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit()) == 0x65303037
endfunction
function Trig_RunerDeath_Actions takes nothing returns nothing
local unit u=GetKillingUnit()
local unit t=GetTriggerUnit()
local real x=GetUnitX(t)
local group g=CreateGroup()
local unit cjlocgn_00000000
local player cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
call GroupEnumUnitsOfPlayer(g, GetOwningPlayer(u), null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000000a
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000000a)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000000a, cjlocgn_00000000)
if IsUnitInRange(u, cjlocgn_00000000, 600) and IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) then
set u=cjlocgn_00000000
exitwhen true
endif
endloop
if x > 0 then
set cjlocgn_00000001=GetOwningPlayer(u)
set cjlocgn_00000002=GetUnitX(u)
set cjlocgn_00000003=GetUnitY(u)
set cjlocgn_00000000=CreateUnit(cjlocgn_00000001, 0x68303164, cjlocgn_00000002, cjlocgn_00000003, 0)
call UnitAddAbility(cjlocgn_00000000, 0x4130354B)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x4130354B, rrunekeep + 1)
call IssueTargetOrder(cjlocgn_00000000, "innerfire", u)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1)
if rrunekeep == 0 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes0.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if rrunekeep == 1 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes6.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if rrunekeep == 2 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if rrunekeep == 3 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes2.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if rrunekeep == 4 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes3.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if rrunekeep == 5 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
else
set cjlocgn_00000001=GetOwningPlayer(u)
set cjlocgn_00000002=GetUnitX(u)
set cjlocgn_00000003=GetUnitY(u)
set cjlocgn_00000000=CreateUnit(cjlocgn_00000001, 0x68303164, cjlocgn_00000002, cjlocgn_00000003, 0)
call UnitAddAbility(cjlocgn_00000000, 0x4130354B)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x4130354B, lrunekeep + 1)
call IssueTargetOrder(cjlocgn_00000000, "innerfire", u)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1)
if lrunekeep == 0 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes0.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if lrunekeep == 1 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes6.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if lrunekeep == 2 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if lrunekeep == 3 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes2.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if lrunekeep == 4 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes3.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
if lrunekeep == 5 then
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl", cjlocgn_00000002, cjlocgn_00000003))
endif
endif
set cjlocgn_00000000=null
set g=null
set t=null
set u=null
endfunction
function InitTrig_RunerDeath takes nothing returns nothing
set gg_trg_RunerDeath=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_RunerDeath, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_RunerDeath, Condition(function Trig_RunerDeath_Conditions))
call TriggerAddAction(gg_trg_RunerDeath, function Trig_RunerDeath_Actions)
endfunction
// scope RuneTrig ends
function Trig_Spear_Eff_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41307364
endfunction
function Spear_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local effect e=LoadEffectHandle(hash, h, 2)
call DestroyEffect(e)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set t=null
set e=null
endfunction
function Trig_Spear_Eff_Actions takes nothing returns nothing
local unit s=GetTriggerUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local effect e=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\UnholyFrenzy\\UnholyFrenzyTarget.mdl", s, "overhead")
call SaveUnitHandle(hash, h, 1, s)
call SaveEffectHandle(hash, h, 2, e)
call TimerStart(t, 1.5, false, function Spear_timer_end)
set t=null
set s=null
set e=null
endfunction
function InitTrig_Spear_Eff takes nothing returns nothing
set gg_trg_Spear_Eff=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spear_Eff, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_Spear_Eff, Condition(function Trig_Spear_Eff_Conditions))
call TriggerAddAction(gg_trg_Spear_Eff, function Trig_Spear_Eff_Actions)
endfunction
// scope trollsforestspear begins
function s__trollsforestspear___fspearproj_onUnitCollision takes integer this,unit u returns nothing
local real dmg=250.
call GroupAddUnit(s__trollsforestspear___fspearproj_affected[this], u)
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_CHAOS , DAMAGE_TYPE_DIVINE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Polymorph\\PolyMorphTarget.mdl", u, "origin"))
call sc__projectileinterface_deallocate(this)
endfunction
function s__trollsforestspear___fspearproj_isValidTargetUnit takes integer this,unit u returns boolean
return s__trollsforestspear___fspearproj_affected[this] != null and FirstOfGroup(s__trollsforestspear___fspearproj_affected[this]) == null and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__trollsforestspear___fspearproj_onFinish takes integer this returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
endfunction
function s__trollsforestspear___fspearproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__trollsforestspear___fspearproj_affected[this])
set s__trollsforestspear___fspearproj_affected[this]=null
endfunction
function s__trollsforestspear___fspearproj_create takes unit u,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__trollsforestspear___fspearproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call s__projectile_setModel(d,modelpath)
set s__trollsforestspear___fspearproj_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
call s__projectile__set_collision(d,90.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_0000000d takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local real distance=1000.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 90.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 90.)
set G=s__trollsforestspear___fspearproj_create(source , distance , 700. , A , B , "abilities\\weapons\\WyvernSpear\\WyvernSpearMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope trollsforestspear ends
function Trig_CorpPo_Conditions takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit()) == 0x68303138
endfunction
function CorpPo_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
local unit dm=LoadUnitHandle(hash, h, 2)
call UnitAddAbility(dm, 0x41303141)
call IssueImmediateOrder(dm, "thunderclap")
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set c=null
set dm=null
set t=null
endfunction
function Trig_CorpPo_Actions takes nothing returns nothing
local unit c=GetTriggerUnit()
local timer t=CreateTimer()
local player pl=GetOwningPlayer(c)
local integer h=GetHandleId(t)
local unit dm=CreateUnit(pl, 0x68303145, GetUnitX(c), GetUnitY(c), 0)
call SaveUnitHandle(hash, h, 1, c)
call SaveUnitHandle(hash, h, 2, dm)
call UnitApplyTimedLife(dm, 0x42544C46, 3.75)
call TimerStart(t, 3.0, false, function CorpPo_timer_end)
set dm=null
set c=null
set t=null
endfunction
function InitTrig_CorpPo takes nothing returns nothing
set gg_trg_CorpPo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_CorpPo, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_CorpPo, Condition(function Trig_CorpPo_Conditions))
call TriggerAddAction(gg_trg_CorpPo, function Trig_CorpPo_Actions)
set hash=InitHashtable()
endfunction
// scope BossTP begins
function BossTP___Trig_BossTpItAct_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x4130324B
endfunction
function BossTP___Check takes nothing returns boolean
local trigger tr=GetTriggeringTrigger()
local integer h=GetHandleId(tr)
local player p=GetOwningPlayer(GetFilterUnit())
set tr=null
return ( IsUnitAlly(GetFilterUnit(), BossTP___plown) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) ) and ( ( p != Player(5) ) or ( p != Player(10) ) )
endfunction
function BossTP___TELEP_ACT takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer h=GetHandleId(t)
local triggeraction ta=LoadTriggerActionHandle(hash, h, 2)
local unit ex=LoadUnitHandle(hash, h, 3)
local unit utp=GetTriggerUnit()
call SetUnitX(utp, GetUnitX(ex))
call SetUnitY(utp, GetUnitY(ex))
set t=null
set ta=null
set ex=null
set utp=null
endfunction
function BossTP___Trig_BossTpItAct_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local real x
local real y
local force f1
local unit portalex
local trigger teleport
local integer h
local triggeraction ta
set BossTP___plown=GetOwningPlayer(c)
set x=GetSpellTargetX()
set y=GetSpellTargetY()
set f1=PlayerTeam(BossTP___plown)
if f1 == uteam_1 then
set BossTP___portalent=CreateUnit(BossTP___plown, 0x68303156, - 10377, 1536, 308)
elseif f1 == uteam_2 then
set BossTP___portalent=CreateUnit(BossTP___plown, 0x68303156, 10654, - 893, 131)
endif
set portalex=CreateUnit(BossTP___plown, 0x68303155, x, y, 15)
call UnitAddAbility(BossTP___portalent, 0x416C6F63)
call UnitAddAbility(portalex, 0x416C6F63)
call UnitApplyTimedLife(BossTP___portalent, 0x42544C46, 300.)
call UnitApplyTimedLife(portalex, 0x42544C46, 300.)
set teleport=CreateTrigger()
set h=GetHandleId(teleport)
call GroupAddUnit(Boss_portals, portalex)
call GroupAddUnit(Boss_portals, BossTP___portalent)
call TriggerRegisterUnitInRange(teleport, BossTP___portalent, 100, Filter(function BossTP___Check))
set ta=TriggerAddAction(teleport, function BossTP___TELEP_ACT)
call SaveTriggerActionHandle(hash, h, 2, ta)
call SaveUnitHandle(hash, h, 3, portalex)
set c=null
set portalex=null
set BossTP___portalent=null
set ta=null
set teleport=null
set f1=null
endfunction
function cj_callback_0000000e takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function BossTP___Trig_BossTpItAct_Conditions))
call TriggerAddAction(trg, function BossTP___Trig_BossTpItAct_Actions)
set trg=null
endfunction
// scope BossTP ends
function Trig_Fear_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x4130334D
endfunction
function Tick_Fear takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local real l__i=LoadReal(hash, h, 3)
local player p=LoadPlayerHandle(hash, h, 4)
local real angle=LoadReal(hash, h, 5)
local real cjlocgn_00000000
local real cjlocgn_00000001
local group cjlocgn_00000002
local unit cjlocgn_00000003
if l__i > 0 then
set cjlocgn_00000000=GetUnitX(caster) + 800. * Cos(angle)
set cjlocgn_00000001=GetUnitY(caster) + 800. * Sin(angle)
set l__i=l__i - ( .3 )
call SaveReal(hash, h, 3, l__i)
call IssuePointOrder(target, "move", cjlocgn_00000000, cjlocgn_00000001)
else
set cjlocgn_00000002=LoadGroupHandle(hash, h, 6)
if GetLocalPlayer() == p then
call EnableSelect(true, true)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000000b
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(cjlocgn_00000002, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000003=FirstOfGroup(cjgrfgn_0000000b)
exitwhen cjlocgn_00000003 == null
call GroupRemoveUnit(cjgrfgn_0000000b, cjlocgn_00000003)
call SelectUnit(cjlocgn_00000003, true)
endloop
endif
call DestroyGroup(cjlocgn_00000002)
call PauseTimer(t)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
endif
set t=null
set caster=null
set target=null
set cjlocgn_00000002=null
endfunction
function Trig_Fear_Actions takes nothing returns nothing
local unit caster=GetTriggerUnit()
local unit target=GetSpellTargetUnit()
local player p=GetOwningPlayer(target)
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local real angle=Atan2(GetUnitY(target) - GetUnitY(caster), GetUnitX(target) - GetUnitX(caster))
local real l__i=2.
local group selected=CreateGroup()
call GroupEnumUnitsSelected(selected, p, null)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, l__i)
call SaveReal(hash, h, 5, angle)
call SavePlayerHandle(hash, h, 4, p)
call SaveGroupHandle(hash, h, 6, selected)
if GetLocalPlayer() == p then
call EnableSelect(false, true)
endif
call TimerStart(t, .3, true, function Tick_Fear)
set t=null
set caster=null
set target=null
set selected=null
endfunction
function InitTrig_Fear_____________________u takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function Trig_Fear_Conditions))
call TriggerAddAction(trg, function Trig_Fear_Actions)
set trg=null
endfunction
function Trig_DarkSouls_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41303172
endfunction
function DS_Check takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit caster=LoadUnitHandle(hash, h, 1)
local group tmnt=LoadGroupHandle(hash, h, 2)
local group g=CreateGroup()
local group g1=CreateGroup()
local unit f
call GroupAddGroup(tmnt, g)
loop
set f=FirstOfGroup(g)
exitwhen f == null
if GetUnitState(f, UNIT_STATE_LIFE) > .405 then
call GroupAddUnit(g1, f)
endif
call GroupRemoveUnit(g, f)
endloop
set f=FirstOfGroup(g1)
if f != null then

else
call BJDebugMsg("Rest in Peporonies, черепахи")
call SetUnitInvulnerable(caster, false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", caster, "origin"))
call PauseTimer(t)
call DestroyGroup(tmnt)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
endif
call DestroyGroup(g)
call DestroyGroup(g1)
set f=null
set t=null
set caster=null
set tmnt=null
set g1=null
set g=null
endfunction
function Trig_DarkSouls_Actions takes nothing returns nothing
local unit caster=GetTriggerUnit()
local real x=GetUnitX(caster)
local real y=GetUnitY(caster)
local player splinter=GetOwningPlayer(caster)
local real f=GetUnitFacing(caster)
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local group tmnt=CreateGroup()
local unit don=CreateUnit(splinter, 0x65626234, x + Cos(Deg2Rad(f - 90)) * 250, y + Sin(Deg2Rad(f - 90)) * 250, f)
local unit raph
local unit leo
local unit mike
call GroupAddUnit(tmnt, don)
call UnitApplyTimedLife(don, 0x42544C46, 60)
set raph=CreateUnit(splinter, 0x65626234, x + Cos(Deg2Rad(f - 45)) * 250, y + Sin(Deg2Rad(f - 45)) * 250, f)
call GroupAddUnit(tmnt, raph)
call UnitApplyTimedLife(raph, 0x42544C46, 60)
set leo=CreateUnit(splinter, 0x65626234, x + Cos(Deg2Rad(f + 45)) * 250, y + Sin(Deg2Rad(f + 45)) * 250, f)
call GroupAddUnit(tmnt, leo)
call UnitApplyTimedLife(leo, 0x42544C46, 60)
set mike=CreateUnit(splinter, 0x65626234, x + Cos(Deg2Rad(f + 90)) * 250, y + Sin(Deg2Rad(f + 90)) * 250, f)
call GroupAddUnit(tmnt, mike)
call UnitApplyTimedLife(mike, 0x42544C46, 60)
call SaveUnitHandle(hash, h, 1, caster)
call SaveGroupHandle(hash, h, 2, tmnt)
call SetUnitInvulnerable(caster, true)
call BJDebugMsg(I2S(CountUnitsInGroup(tmnt)) + "виспа-ниндзя")
call TimerStart(t, .2, true, function DS_Check)
set raph=null
set leo=null
set mike=null
set caster=null
set splinter=null
set t=null
set tmnt=null
set don=null
endfunction
function InitTrig_DarkSouls takes nothing returns nothing
set gg_trg_DarkSouls=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_DarkSouls, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_DarkSouls, Condition(function Trig_DarkSouls_Conditions))
call TriggerAddAction(gg_trg_DarkSouls, function Trig_DarkSouls_Actions)
endfunction
// scope BSTUN begins
function BS_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41623161
endfunction
function sfil takes nothing returns boolean
return ( GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(FilUnit)) and IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO)
endfunction
function safil takes nothing returns boolean
return ( GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(FilUnit))
endfunction
function bstuna takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
local player pl=GetOwningPlayer(c)
local group g=LoadGroupHandle(hash, h, 2)
local unit dm
local group bg=CreateGroup()
local unit cjlocgn_00000000
loop
set cjlocgn_00000000=FirstOfGroup(g)
exitwhen cjlocgn_00000000 == null
set dm=CreateUnit(pl, 0x68303164, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 0)
call UnitAddAbility(dm, 0x41303258)
call IssueImmediateOrder(dm, "stomp")
call UnitApplyTimedLife(dm, 0x42544C46, 1.)
call GroupRemoveUnit(g, cjlocgn_00000000)
call KillUnit(cjlocgn_00000000)
endloop
set dm=null
call FlushChildHashtable(hash, h)
set g=null
set c=null
set t=null
set cjlocgn_00000000=null
set bg=null
endfunction
function banime_t_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
local player p=GetOwningPlayer(c)
local group sg=CreateGroup()
local group sc
local unit cjlocgn_00000000
local timer st
local integer sh
set FilUnit=c
call GroupEnumUnitsInRange(sg, GetUnitX(c), GetUnitY(c), 600., Filter(function sfil))
set FilUnit=null
set sc=CreateGroup()
loop
set cjlocgn_00000000=FirstOfGroup(sg)
exitwhen cjlocgn_00000000 == null
call UnitDamageTarget(c, cjlocgn_00000000, 75., true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call UnitDamagePoint(c, 1.55, 150., GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 100., true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call GroupAddUnit(sc, CreateUnit(p, 0x68303149, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 0))
call GroupRemoveUnit(sg, cjlocgn_00000000)
endloop
set st=CreateTimer()
set sh=GetHandleId(st)
call SaveUnitHandle(hash, sh, 1, c)
call SaveGroupHandle(hash, sh, 2, sc)
call TimerStart(st, 1.55, false, function bstuna)
call FlushChildHashtable(hash, h)
set p=null
set sc=null
set sg=null
set c=null
set t=null
set st=null
set cjlocgn_00000000=null
endfunction
function BS_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
call SaveUnitHandle(hash, h, 1, caster)
call TimerStart(t, 0.2, false, function banime_t_end)
set caster=null
set t=null
endfunction
function cj_callback_0000000f takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function BS_Conditions))
call TriggerAddAction(trg, function BS_Actions)
set trg=null
endfunction
// scope BSTUN ends
// scope BSSD begins
function BSSD___BSSD_Conditions takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit()) == 0x65626262
endfunction
function BSSD___BIt_c takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem()) == 0x49303149
endfunction
function BSSD___BIt_a takes nothing returns nothing
local unit ip=GetTriggerUnit()
set ip=null
endfunction
function BSSD___ItemRemFil takes nothing returns boolean
local integer l__i=0
loop
exitwhen l__i > 5
if GetItemTypeId(UnitItemInSlot(GetFilterUnit(), l__i)) == 0x49303149 then
return true
endif
set l__i=l__i + 1
endloop
return false
endfunction
function BSSD___PortFil takes nothing returns boolean
local integer id=GetUnitTypeId(GetFilterUnit())
return ( id == 0x68303156 ) or ( id == 0x68303155 )
endfunction
function cj_anonym__13 takes nothing returns nothing
//# optional
call KillUnit(GetEnumUnit())
endfunction
function BSSD___B_RESP takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local player pl=LoadPlayerHandle(hash, h, 0)
local unit Boss=CreateUnit(pl, 0x65626262, - 641, - 6646, 88.22)
local item hrn
local group removeitem
local group removeportal
local unit f
call BJDebugMsg("Босс реснулся")
set hrn=LoadItemHandle(hash, h, 1)
set removeitem=CreateGroup()
call GroupEnumUnitsInRange(removeitem, 0., 0., 100000., null)
loop
set f=FirstOfGroup(removeitem)
exitwhen f == null or UnitHasItem(f, hrn)
call GroupRemoveUnit(removeitem, f)
endloop
if f != null then
call DisplayTextToPlayer(GetOwningPlayer(f), 0, 0, "Какие-то магические силы забрали Рог Хозяина Леса")
endif
call RemoveItem(hrn)
call ForGroup(Boss_portals, function cj_anonym__13)
call DestroyTimer(t)
call FlushChildHashtable(hash, h)
set t=null
set pl=null
set Boss=null
set removeportal=null
set removeitem=null
set f=null
set hrn=null
endfunction
function BSSD___BSSD_Actions takes nothing returns nothing
local unit Boss=GetTriggerUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local player pl=GetOwningPlayer(Boss)
local unit k
local player plk
local item hrn
call SavePlayerHandle(hash, h, 0, pl)
set k=GetKillingUnit()
set plk=GetOwningPlayer(k)
call DisplayTextToForce(uteam_1, GetPlayerName(plk) + " убивает Хранителя Леса")
call DisplayTextToForce(uteam_2, GetPlayerName(plk) + " убивает Хранителя Леса")
set hrn=CreateItem(0x49303149, GetUnitX(Boss), GetUnitY(Boss))
call BJDebugMsg("Horn of Porn has been created")
call SaveItemHandle(hash, h, 1, hrn)
call TimerStart(t, 420., false, function BSSD___B_RESP)
set k=null
set plk=null
set Boss=null
set t=null
set hrn=null
endfunction
function cj_callback_00000010 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local trigger BIt
local triggercondition bitc
local triggeraction bita
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(trg, Condition(function BSSD___BSSD_Conditions))
call TriggerAddAction(trg, function BSSD___BSSD_Actions)
set trg=null
set BIt=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(BIt, EVENT_PLAYER_UNIT_PICKUP_ITEM)
set bitc=TriggerAddCondition(BIt, Condition(function BSSD___BIt_c))
set bita=TriggerAddAction(BIt, function BSSD___BIt_a)
endfunction
// scope BSSD ends
// scope TitanGladius begins
function cj_callback_00000011 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local group g
local unit cjlocgn_00000000
local unit cjlocgn_00000001
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", GetUnitX(t), GetUnitY(t)))
call CastSpellOnTargetTimed(u , t , 0x41303255 , R2I(.5 / .1 + .1) , "thunderbolt" , 3.5)
call DamageTarget(u , t , 300. , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
set g=CreateGroup()
set g=ALL_DestroyGroup(ALL_GetUnitsInRangeOfLocMatching(300 , ALL_RemoveLocation(GetUnitLoc(t)) , null))
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000000c
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000000c)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000000c, cjlocgn_00000000)
call BJDebugMsg("?" + GetUnitName(cjlocgn_00000000))
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(u)) and GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 and not IsUnitType(cjlocgn_00000000, UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(cjlocgn_00000000, 0x416C6F63) == 0 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(t), GetUnitY(t), 0)
call UnitAddAbility(cjlocgn_00000001, 0x41303349)
call SetUnitAbilityLevel(cjlocgn_00000001, 0x41303349, 3)
call IssueTargetOrder(cjlocgn_00000001, "chainlightning", t)
call UnitApplyTimedLife(cjlocgn_00000001, 0x42544C46, 1.1)
endif
endloop
endfunction
function Trig_Gladius_Conditions takes nothing returns boolean
return not IsTriggerDamage and not udg_IsDamageSpell and UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49304137) == true and IsUnitIdType(GetUnitTypeId(udg_DamageEventTarget), UNIT_TYPE_STRUCTURE) == false and IsUnitIllusionBJ(udg_DamageEventSource) == false and GetUnitTypeId(udg_DamageEventSource) != 0x48303159 and GetUnitTypeId(udg_DamageEventSource) != 0x4830315A
endfunction
function cj_anonym__14 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_Gladius_Actions takes nothing returns nothing
local unit att
local integer h
local unit dam
local timer Timer
local integer cou
local unit cjlocgn_00000000
call BJDebugMsg("зашел в гладиуса")
set att=udg_DamageEventSource
set h=GetHandleId(att)
set dam=udg_DamageEventTarget
set Timer=LoadTimerHandle(hash, h, 0x49304137)
set cou=LoadInteger(hash, h, 2 * 0x49304137)
if ( Timer == null ) and ( cou == 3 ) then
set Timer=CreateTimer()
call TimerStart(Timer, 1.5, false, function cj_anonym__14)
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41303349)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303349, 3)
call IssueTargetOrder(cjlocgn_00000000, "chainlightning", dam)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1.1)
call SaveTimerHandle(hash, h, 0x49304137, Timer)
set cou=0
endif
call SaveInteger(hash, h, 2 * 0x49304137, cou + 1)
set Timer=null
set dam=null
set att=null
set cjlocgn_00000000=null
endfunction
function InitTrig_Gladius takes nothing returns nothing
set gg_trg_Gladius=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_Gladius, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_Gladius, Condition(function Trig_Gladius_Conditions))
call TriggerAddAction(gg_trg_Gladius, function Trig_Gladius_Actions)
endfunction
// scope TitanGladius ends
// scope crush begins
function crush_Conditions takes nothing returns boolean
local unit u=udg_DamageEventSource
local unit a=udg_DamageEventTarget
set cj_v666_boolean=IsUnitType(a, UNIT_TYPE_STRUCTURE) and GetInventoryIndexOfItemTypeBJ(u, 0x49304131) == 1
set a=null
set u=null
return cj_v666_boolean
endfunction
function crush_Actions takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
call BJDebugMsg("зашел в крушителя")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl", udg_DamageEventTarget, "overhead"))
call BJDebugMsg("")
set udg_DamageEventAmount=udg_DamageEventAmount * ( ( 1. + .15 ) )
set t=null
set u=null
endfunction
function InitTrig_crusher takes nothing returns nothing
set gg_trg_crusher=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_crusher, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_crusher, Condition(function crush_Conditions))
call TriggerAddAction(gg_trg_crusher, function crush_Actions)
endfunction
// scope crush ends
// scope DOLL begins
function Doll_Conditions takes nothing returns boolean
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local real mp=GetUnitState(t, UNIT_STATE_MAX_MANA) * 0.1
set cj_v666_boolean=not IsTriggerDamage and GetUnitState(t, UNIT_STATE_MANA) >= mp and not udg_IsDamageSpell and GetUnitAbilityLevel(u, 0x4230314E) > 0
set t=null
set u=null
return cj_v666_boolean
endfunction
function Doll_Actions takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local real mp=GetUnitState(t, UNIT_STATE_MAX_MANA) * 0.1
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", t, "origin"))
call BJDebugMsg(R2S(mp) + "=10% маны")
call BJDebugMsg(R2S(GetUnitState(t, UNIT_STATE_MANA)) + " маны до атаки")
call SetUnitState(t, UNIT_STATE_MANA, GetUnitState(t, UNIT_STATE_MANA) - mp)
call UnitRemoveAbility(u, 0x4230314E)
call BJDebugMsg(R2S(GetUnitState(t, UNIT_STATE_MANA)) + " маны после атаки")
set t=null
set u=null
endfunction
function InitTrig_The_Doll_of_a_Sorcerer takes nothing returns nothing
set gg_trg_The_Doll_of_a_Sorcerer=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_The_Doll_of_a_Sorcerer, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_The_Doll_of_a_Sorcerer, Condition(function Doll_Conditions))
call TriggerAddAction(gg_trg_The_Doll_of_a_Sorcerer, function Doll_Actions)
endfunction
// scope DOLL ends
function Trig_BandeeteeDamaged_Conditions takes nothing returns boolean
if ( not ( not udg_IsDamageSpell ) ) then
return false
endif
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x4930364E) == true ) ) then
return false
endif
if ( not ( IsUnitIdType(GetUnitTypeId(udg_DamageEventTarget), UNIT_TYPE_HERO) == true ) ) then
return false
endif
if ( not ( IsUnitIllusionBJ(udg_DamageEventSource) == false ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventSource) != 0x48303159 ) ) then
return false
endif
return true
endfunction
function cj_anonym__15 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_BandeeteeDamaged_Actions takes nothing returns nothing
local unit att=GetEventDamageSource()
local integer h=GetHandleId(att)
local unit dam=GetTriggerUnit()
local timer Timer=LoadTimerHandle(hash, h, 0x4930364E)
local boolean A=LoadBoolean(hash, h, GetHandleId(dam) + 0x4930364E)
local unit cjlocgn_00000000
if A then
if ( Timer == null ) then
set Timer=CreateTimer()
call TimerStart(Timer, 18., false, function cj_anonym__15)
call SaveTimerHandle(hash, h, 0x4930364E, Timer)
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41303443)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303443, 15)
call IssuePointOrder(cjlocgn_00000000, "silence", GetUnitX(dam), GetUnitY(dam))
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, .8)
set cjlocgn_00000000=null
endif
call SaveBoolean(hash, h, GetHandleId(dam) + 0x4930364E, false)
endif
set Timer=null
set dam=null
set att=null
endfunction
function InitTrig_BandeeteeDamaged takes nothing returns nothing
set gg_trg_BandeeteeDamaged=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_BandeeteeDamaged, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_BandeeteeDamaged, Condition(function Trig_BandeeteeDamaged_Conditions))
call TriggerAddAction(gg_trg_BandeeteeDamaged, function Trig_BandeeteeDamaged_Actions)
endfunction
function Trig_EnslaverDamaged_Conditions takes nothing returns boolean
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( not udg_IsDamageSpell ) ) then
return false
endif
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303239) == true ) ) then
return false
endif
if ( not ( RAbsBJ(( GetUnitFacing(udg_DamageEventTarget) - GetUnitFacing(udg_DamageEventSource) )) <= 105. ) ) then
return false
endif
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303239) == true ) ) then
return false
endif
if ( not ( IsUnitType(udg_DamageEventSource, UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
return false
endif
if ( not ( IsUnitIdType(GetUnitTypeId(udg_DamageEventTarget), UNIT_TYPE_HERO) == true ) ) then
return false
endif
if ( not ( GetUnitLifePercent(udg_DamageEventTarget) <= 40.00 ) ) then
return false
endif
if ( not ( IsUnitIllusionBJ(udg_DamageEventSource) == false ) ) then
return false
endif
return true
endfunction
function cj_anonym__16 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_EnslaverDamaged_Actions takes nothing returns nothing
local unit att=GetEventDamageSource()
local integer h=GetHandleId(att)
local unit dam=GetTriggerUnit()
local real dmg
local timer Timer=LoadTimerHandle(hash, h, 0x49303239)
local unit cjlocgn_00000000
if ( Timer == null ) then
set Timer=CreateTimer()
call TimerStart(Timer, 12., false, function cj_anonym__16)
call SaveTimerHandle(hash, h, 0x49303239, Timer)
set dmg=3
set udg_DamageEventAmount=udg_DamageEventAmount + ( dmg )
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41456E53)
call IssueTargetOrder(cjlocgn_00000000, "entanglingroots", dam)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1.1)
set cjlocgn_00000000=null
endif
set Timer=null
set dam=null
set att=null
endfunction
function InitTrig_EnslaverDamaged takes nothing returns nothing
set gg_trg_EnslaverDamaged=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_EnslaverDamaged, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_EnslaverDamaged, Condition(function Trig_EnslaverDamaged_Conditions))
call TriggerAddAction(gg_trg_EnslaverDamaged, function Trig_EnslaverDamaged_Actions)
endfunction
function Trig_StellSwordS_Func009C takes nothing returns boolean
if ( ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303650) == true ) ) then
return true
endif
if ( ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303736) == true ) ) then
return true
endif
return false
endfunction
function Trig_StellSwordS_Conditions takes nothing returns boolean
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( not udg_IsDamageSpell ) ) then
return false
endif
if ( not ( udg_DamageEventAmount > 0 ) ) then
return false
endif
if ( not Trig_StellSwordS_Func009C() ) then
return false
endif
if ( not ( IsUnitIdType(GetUnitTypeId(udg_DamageEventTarget), UNIT_TYPE_HERO) == true ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventTarget) != 0x4830315A ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventTarget) != 0x48303159 ) ) then
return false
endif
return true
endfunction
function Trig_StellSwordS_Func015C takes nothing returns boolean
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303736) == true ) ) then
return false
endif
return true
endfunction
function cj_anonym__18 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function cj_anonym__17 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_StellSwordS_Actions takes nothing returns nothing
local unit att=udg_DamageEventSource
local integer h=GetHandleId(att)
local unit dam=udg_DamageEventTarget
local real dmg
local timer cjlocgn_00000000
if not IsUnitIllusion(att) then
set dmg=GetUnitState(dam, UNIT_STATE_MAX_LIFE) * .05
else
set dmg=GetUnitState(dam, UNIT_STATE_MAX_LIFE) * .01
endif
if ( Trig_StellSwordS_Func015C() ) then
set cjlocgn_00000000=LoadTimerHandle(hash, h, 0x49303736)
if ( cjlocgn_00000000 == null ) then
set cjlocgn_00000000=CreateTimer()
call TimerStart(cjlocgn_00000000, 4.5, false, function cj_anonym__17)
call SaveTimerHandle(hash, h, 0x49303736, cjlocgn_00000000)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl", dam, "origin"))
set udg_DamageEventAmount=udg_DamageEventAmount + ( dmg )
endif
set cjlocgn_00000000=null
else
set cjlocgn_00000000=LoadTimerHandle(hash, h, 0x49303650)
if ( cjlocgn_00000000 == null ) then
set cjlocgn_00000000=CreateTimer()
call TimerStart(cjlocgn_00000000, 8., false, function cj_anonym__18)
call SaveTimerHandle(hash, h, 0x49303650, cjlocgn_00000000)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl", dam, "origin"))
set udg_DamageEventAmount=udg_DamageEventAmount + ( dmg )
endif
set cjlocgn_00000000=null
endif
set dam=null
set att=null
endfunction
function InitTrig_StellSwordS takes nothing returns nothing
set gg_trg_StellSwordS=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_StellSwordS, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_StellSwordS, Condition(function Trig_StellSwordS_Conditions))
call TriggerAddAction(gg_trg_StellSwordS, function Trig_StellSwordS_Actions)
endfunction
function Trig_BanHammer_Conditions takes nothing returns boolean
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( not udg_IsDamageSpell ) ) then
return false
endif
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x4930314D) == true ) ) then
return false
endif
if ( not ( IsUnitIdType(GetUnitTypeId(udg_DamageEventTarget), UNIT_TYPE_STRUCTURE) == false ) ) then
return false
endif
if ( not ( udg_DamageEventAmount > 0 ) ) then
return false
endif
if ( not ( IsUnitIllusionBJ(udg_DamageEventSource) == false ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventSource) != 0x48303159 ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventSource) != 0x4830315A ) ) then
return false
endif
return true
endfunction
function cj_anonym__19 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_BanHammer_Actions takes nothing returns nothing
local unit att=udg_DamageEventSource
local integer h=GetHandleId(att)
local unit dam=udg_DamageEventTarget
local real cd
local timer Timer=LoadTimerHandle(hash, h, 0x4930314D)
local integer cou=LoadInteger(hash, h, 2 * 0x4930314D)
local real cjlocgn_00000000
local unit cjlocgn_00000001
if ( Timer == null ) then
if IsUnitType(att, UNIT_TYPE_RANGED_ATTACKER) then
set cd=8
else
set cd=6
endif
set cjlocgn_00000000=25
set Timer=CreateTimer()
call TimerStart(Timer, cd, false, function cj_anonym__19)
set udg_DamageEventAmount=udg_DamageEventAmount + ( cjlocgn_00000000 )
set IsTriggerDamage=true
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000001, 0x41303255)
call SetUnitAbilityLevel(cjlocgn_00000001, 0x41303255, 10)
call IssueTargetOrder(cjlocgn_00000001, "thunderbolt", dam)
call UnitApplyTimedLife(cjlocgn_00000001, 0x42544C46, .5)
call SaveTimerHandle(hash, h, 0x4930314D, Timer)
elseif cou == 5 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000001, 0x41303255)
call SetUnitAbilityLevel(cjlocgn_00000001, 0x41303255, 2)
call IssueTargetOrder(cjlocgn_00000001, "thunderbolt", dam)
call UnitApplyTimedLife(cjlocgn_00000001, 0x42544C46, 2.)
set cou=0
endif
call SaveInteger(hash, h, 2 * 0x4930314D, cou + 1)
set Timer=null
set dam=null
set att=null
set cjlocgn_00000001=null
endfunction
function InitTrig_BanHammer takes nothing returns nothing
set gg_trg_BanHammer=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_BanHammer, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_BanHammer, Condition(function Trig_BanHammer_Conditions))
call TriggerAddAction(gg_trg_BanHammer, function Trig_BanHammer_Actions)
endfunction
// scope Windsabre begins
function cj_anonym__21 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call UnitRemoveAbility(u, 0x41303536)
call UnitRemoveAbility(u, 0x42303158)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function cj_anonym__20 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call UnitRemoveAbility(u, 0x41303536)
call UnitRemoveAbility(u, 0x42303158)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function Windsabre___Buff takes nothing returns nothing
local unit u
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local timer cjlocgn_00000002
if ( GetInventoryIndexOfItemTypeBJ(udg_DamageEventSource, 0x4930304B) == 0 and GetInventoryIndexOfItemTypeBJ(udg_DamageEventSource, 0x49303031) == 0 and GetInventoryIndexOfItemTypeBJ(udg_DamageEventSource, 0x49303136) == 0 ) or not IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO) or IsTriggerDamage or udg_IsDamageSpell then
return
endif
set u=udg_DamageEventSource
if GetInventoryIndexOfItemTypeBJ(udg_DamageEventSource, 0x49303031) > 0 then
set cjlocgn_00000000=GetUnitAbilityLevel(u, 0x41303537)
if cjlocgn_00000000 == 0 then
call UnitAddAbility(u, 0x41303536)
endif
set cjlocgn_00000001=IMinBJ(cjlocgn_00000000 + 3, 30)
call SetUnitAbilityLevel(u, 0x41303537, cjlocgn_00000001)
set cjlocgn_00000002=LoadTimerHandle(hash, GetHandleId(u), 0x41303537)
if cjlocgn_00000002 == null then
set cjlocgn_00000002=CreateTimer()
else
call PauseTimer(cjlocgn_00000002)
endif
call SaveTimerHandle(hash, GetHandleId(u), 0x41303537, cjlocgn_00000002)
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000002), 0, u)
call TimerStart(cjlocgn_00000002, 4., false, function cj_anonym__20)
else
set cjlocgn_00000000=GetUnitAbilityLevel(u, 0x41303537)
if cjlocgn_00000000 == 0 then
call UnitAddAbility(u, 0x41303536)
endif
set cjlocgn_00000001=IMinBJ(cjlocgn_00000000 + 2, 20)
call SetUnitAbilityLevel(u, 0x41303537, cjlocgn_00000001)
set cjlocgn_00000002=LoadTimerHandle(hash, GetHandleId(u), 0x41303537)
if cjlocgn_00000002 == null then
set cjlocgn_00000002=CreateTimer()
else
call PauseTimer(cjlocgn_00000002)
endif
call SaveTimerHandle(hash, GetHandleId(u), 0x41303537, cjlocgn_00000002)
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000002), 0, u)
call TimerStart(cjlocgn_00000002, 4., false, function cj_anonym__21)
endif
set cjlocgn_00000002=null
set u=null
endfunction
function cj_anonym__22 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call UnitRemoveAbility(u, 0x41303535)
call UnitRemoveAbility(u, 0x4130324C)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function cj_callback_00000012 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local timer t
call UnitAddAbility(u, 0x41303535)
call UnitAddAbility(u, 0x4130324C)
call SetUnitAbilityLevel(u, 0x4130324C, 1 + 5)
set t=LoadTimerHandle(hash, GetHandleId(u), 0x4130314F)
if t == null then
set t=CreateTimer()
else
call PauseTimer(t)
endif
call SaveTimerHandle(hash, GetHandleId(u), 0x4130314F, t)
call SaveUnitHandle(hash, GetHandleId(t), 0, u)
call TimerStart(t, 8., false, function cj_anonym__22)
endfunction
function cj_callback_00000013 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Windsabre___Buff)
endfunction
// scope Windsabre ends
// scope shurikenitem begins
function s__shurikenitem___shurp_onUnitCollision takes integer this,unit u returns nothing
call DamageTarget(s__projectile__get_source(this) , u , s__shurikenitem___shurp_dmg[this] , true , ATTACK_TYPE_HERO , DAMAGE_TYPE_NORMAL)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", u, "origin"))
call sc__projectileinterface_deallocate(this)
endfunction
function s__shurikenitem___shurp_isValidTargetUnit takes integer this,unit u returns boolean
return u == s__projectile__get_target(this) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__shurikenitem___shurp_create takes unit u,real dmg,unit target,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer this=s__shurikenitem___shurp__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call s__projectile_setModel(this,modelpath)
call s__projectile__set_source(this,u)
call s__projectile__set_target(this,target)
set s__shurikenitem___shurp_dmg[this]=dmg
call s__projectile__set_collision(this,30.)
set s__projectile_activePitch[this]=true
set s__projectile_activeUnitCollision[this]=true
set s__projectile_toDestroy[this]=true
set s__projectile_toRemove[this]=true
set s__projectile_toKill[this]=true
call s__projectile_launch(this,startVector , endVector , speed , 0.)
return this
endfunction
function Trig_ShurikenDamaged_Conditions takes nothing returns boolean
return not IsTriggerDamage and udg_DamageEventAmount > 5. and not udg_IsDamageSpell and UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303651)
endfunction
function ShurTiAct takes nothing returns nothing
local unit u=udg_DamageEventSource
local integer cjlocgn_00000000
local unit cjlocgn_00000001
local real cjlocgn_00000002
local unit cjlocgn_00000003
local real cjlocgn_00000004
local real cjlocgn_00000005
local real cjlocgn_00000006
local real cjlocgn_00000007
local real cjlocgn_00000008
local real cjlocgn_00000009
local unit cjlocgn_0000000a
local real cjlocgn_0000000b
local real cjlocgn_0000000c
local integer cjlocgn_0000000d
local integer cjlocgn_0000000e
if not IsTriggerDamage and udg_DamageEventAmount > 5. and not udg_IsDamageSpell and UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303651) then
set cjlocgn_00000000=LoadInteger(hash, GetHandleId(u), 0x49303651) + 1
if cjlocgn_00000000 == 2 then
set cjlocgn_00000001=udg_DamageEventTarget
set cjlocgn_00000002=udg_DamageEventAmount
if IsUnitIllusion(u) then
set cjlocgn_00000002=0
endif
set cjlocgn_00000003=null
set cjlocgn_00000004=( 500. + 1. ) * ( 500. + 1. )
set cjlocgn_00000005=0.
set cjlocgn_00000006=GetUnitX(cjlocgn_00000001)
set cjlocgn_00000007=GetUnitY(cjlocgn_00000001)
call GroupEnumUnitsInRange(cjgrfgn_0000000d, cjlocgn_00000006, cjlocgn_00000007, 500., null)
loop
set cjlocgn_0000000a=FirstOfGroup(cjgrfgn_0000000d)
exitwhen cjlocgn_0000000a == null
call GroupRemoveUnit(cjgrfgn_0000000d, cjlocgn_0000000a)
if IsUnitEnemy(cjlocgn_0000000a, GetOwningPlayer(u)) and IsUnitVisible(cjlocgn_0000000a, GetOwningPlayer(u)) and ( GetUnitState(cjlocgn_0000000a, UNIT_STATE_LIFE) > .405 ) and cjlocgn_0000000a != cjlocgn_00000001 then
set cjlocgn_00000008=GetUnitX(cjlocgn_0000000a)
set cjlocgn_00000009=GetUnitY(cjlocgn_0000000a)
set cjlocgn_00000005=( cjlocgn_00000008 - cjlocgn_00000006 ) * ( cjlocgn_00000008 - cjlocgn_00000006 ) + ( cjlocgn_00000009 - cjlocgn_00000007 ) * ( cjlocgn_00000009 - cjlocgn_00000007 )
if cjlocgn_00000005 < cjlocgn_00000004 then
set cjlocgn_00000004=cjlocgn_00000005
if IsUnitType(cjlocgn_0000000a, UNIT_TYPE_HERO) then
set cjlocgn_00000003=cjlocgn_0000000a
elseif ( not IsUnitType(cjlocgn_0000000a, UNIT_TYPE_STRUCTURE) and ( not IsUnitType(cjlocgn_00000003, UNIT_TYPE_HERO) ) ) then
set cjlocgn_00000003=cjlocgn_0000000a
endif
endif
endif
endloop
if cjlocgn_00000003 != null then
set cjlocgn_0000000b=GetUnitX(u)
set cjlocgn_0000000c=GetUnitY(u)
set cjlocgn_0000000d=s__vector_create(cjlocgn_0000000b , cjlocgn_0000000c , GetTerrainZ(cjlocgn_0000000b , cjlocgn_0000000c) + GetUnitFlyHeight(u) + 80.)
set cjlocgn_0000000b=GetUnitX(cjlocgn_00000001)
set cjlocgn_0000000c=GetUnitY(cjlocgn_00000001)
set cjlocgn_0000000e=s__vector_create(cjlocgn_0000000b , cjlocgn_0000000c , GetTerrainZ(cjlocgn_0000000b , cjlocgn_0000000c) + GetUnitFlyHeight(cjlocgn_00000001) + 80.)
call sx__shurikenitem___shurp_create(u , cjlocgn_00000002 , cjlocgn_00000003 , 1100. , cjlocgn_0000000d , cjlocgn_0000000e , "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl")
call s__vector_deallocate(cjlocgn_0000000d)
call s__vector_deallocate(cjlocgn_0000000e)
endif
call SaveInteger(hash, GetHandleId(u), 0x49303651, 0)
else
call SaveInteger(hash, GetHandleId(u), 0x49303651, cjlocgn_00000000)
endif
endif
set cjlocgn_00000003=null
set cjlocgn_00000001=null
set u=null
endfunction
function cj_callback_00000014 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function ShurTiAct)
endfunction
// scope shurikenitem ends
function Trig_LivingSparkSparker_Func002C takes nothing returns boolean
if ( ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303235) == true ) ) then
return true
endif
if ( ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303236) == true ) ) then
return true
endif
if ( ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49304137) == true ) ) then
return true
endif
return false
endfunction
function Trig_LivingSparkSparker_Conditions takes nothing returns boolean
if ( not Trig_LivingSparkSparker_Func002C() ) then
return false
endif
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( not udg_IsDamageSpell ) ) then
return false
endif
if ( not ( IsUnitIllusionBJ(udg_DamageEventSource) == false ) ) then
return false
endif
if ( not ( udg_DamageEventAmount > 0 ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventSource) != 0x48303159 ) ) then
return false
endif
if ( not ( GetUnitTypeId(udg_DamageEventSource) != 0x4830315A ) ) then
return false
endif
return true
endfunction
function cj_anonym__24 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function cj_anonym__23 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_LivingSparkSparker_Actions takes nothing returns nothing
local unit att=udg_DamageEventSource
local integer h=GetHandleId(att)
local unit dam=udg_DamageEventTarget
local real dmg
local timer Timer
local unit cjlocgn_00000000
set dmg=3
if UnitHasItemOfTypeBJ(att, 0x49303236) then
set Timer=LoadTimerHandle(hash, h, 0x49303236)
if ( Timer == null ) then
set Timer=CreateTimer()
call TimerStart(Timer, 4., false, function cj_anonym__23)
call SaveTimerHandle(hash, h, 0x49303236, Timer)
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41303349)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303349, 2)
call IssueTargetOrder(cjlocgn_00000000, "chainlightning", dam)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1.1)
endif
elseif UnitHasItemOfTypeBJ(att, 0x49303235) then
set Timer=LoadTimerHandle(hash, h, 0x49303235)
if ( Timer == null ) then
set Timer=CreateTimer()
call TimerStart(Timer, 4., false, function cj_anonym__24)
call SaveTimerHandle(hash, h, 0x49303235, Timer)
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(att), 0x68303164, GetUnitX(dam), GetUnitY(dam), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41303349)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303349, 1)
call IssueTargetOrder(cjlocgn_00000000, "chainlightning", dam)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1.1)
endif
endif
set Timer=null
set dam=null
set att=null
set cjlocgn_00000000=null
endfunction
function InitTrig_LivingSparkSparker takes nothing returns nothing
set gg_trg_LivingSparkSparker=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_LivingSparkSparker, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_LivingSparkSparker, Condition(function Trig_LivingSparkSparker_Conditions))
call TriggerAddAction(gg_trg_LivingSparkSparker, function Trig_LivingSparkSparker_Actions)
endfunction
function Trig_SpiritPiercer_Conditions takes nothing returns boolean
if ( not ( not IsTriggerDamage ) ) then
return false
endif
if ( not ( UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303834) == true ) ) then
return false
endif
return true
endfunction
function Trig_SpiritPiercer_Actions takes nothing returns nothing
local unit att=udg_DamageEventSource
local unit dam=udg_DamageEventTarget
local real dmg=15.
call BJDebugMsg("Уровень героя " + I2S(GetHeroLevel(att)))
call BJDebugMsg(R2S(GetUnitState(dam, UNIT_STATE_LIFE)))
set IsTriggerDamage=true
call UnitDamageTarget(att, dam, dmg, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL, null)
call BJDebugMsg(R2S(GetUnitState(dam, UNIT_STATE_LIFE)))
set IsTriggerDamage=false
set att=null
set dam=null
endfunction
function InitTrig_SpiritPiercer takes nothing returns nothing
set gg_trg_SpiritPiercer=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_SpiritPiercer, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_SpiritPiercer, Condition(function Trig_SpiritPiercer_Conditions))
call TriggerAddAction(gg_trg_SpiritPiercer, function Trig_SpiritPiercer_Actions)
endfunction
// scope bone begins
function cond_bone takes nothing returns boolean
return udg_DamageEventAmount > 0. and not IsTriggerDamage and not udg_IsDamageSpell and UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49303935) and IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO)
endfunction
function act_bone takes nothing returns nothing
local unit u=udg_DamageEventSource
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", u, "origin"))
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + 6.)
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 3.)
set u=null
endfunction
function InitTrig_LuckyBone takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddCondition(trg, Condition(function cond_bone))
call TriggerAddAction(trg, function act_bone)
set trg=null
endfunction
// scope bone ends
function db_cond takes nothing returns boolean
return GetSpellAbilityId() == 0x4130344F
endfunction
function db_act takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local unit dum=CreateUnit(GetOwningPlayer(c), 0x68303164, GetUnitX(t), GetUnitY(t), 0)
call UnitAddAbility(dum, 0x4130344D)
call IssuePointOrder(dum, "silence", GetUnitX(t), GetUnitY(t))
call UnitApplyTimedLife(dum, 0x42544C46, 1.)
set c=null
set t=null
set dum=null
endfunction
function InitTrig_DiverseBoots takes nothing returns nothing
set gg_trg_DiverseBoots=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_DiverseBoots, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_DiverseBoots, Condition(function db_cond))
call TriggerAddAction(gg_trg_DiverseBoots, function db_act)
endfunction
function Trig_StealthBoots_Conditions takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem()) == 0x4930364F
endfunction
function onTicktimer takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
local unit cjlocgn_00000000
call GroupEnumUnitsInRange(cjgrfgn_0000000e, GetUnitX(u), GetUnitY(u), 1000., null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000000e)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000000e, cjlocgn_00000000)
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(u)) and ( GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 ) and IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) then
call SetUnitAbilityLevel(u, 0x41303254, 1)
exitwhen true
else
call SetUnitAbilityLevel(u, 0x41303254, 2)
endif
endloop
set u=null
set t=null
endfunction
function Trig_StealthBoots_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer h=GetHandleId(u)
local timer t=LoadTimerHandle(hash, h, 0x4930364F)
if GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
if t == null then
set t=CreateTimer()
call SaveTimerHandle(hash, h, 0x4930364F, t)
call SaveUnitHandle(hash, GetHandleId(t), 0, u)
call TimerStart(t, 0.4, true, function onTicktimer)
endif
else
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function InitTrig_StealthBoots takes nothing returns nothing
local integer cjlocgn_00000000=0
set gg_trg_StealthBoots=CreateTrigger()
loop
exitwhen not ( cjlocgn_00000000 < 15 )
call TriggerRegisterPlayerUnitEvent(gg_trg_StealthBoots, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_PICKUP_ITEM, null)
call TriggerRegisterPlayerUnitEvent(gg_trg_StealthBoots, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_DROP_ITEM, null)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddCondition(gg_trg_StealthBoots, Condition(function Trig_StealthBoots_Conditions))
call TriggerAddAction(gg_trg_StealthBoots, function Trig_StealthBoots_Actions)
endfunction
// scope bootsofgonec begins
function s__bootsofgon_SwapBoots takes integer this,integer itemIdBefore,integer itemIdAfter returns nothing
local item it
local integer l__i=0
loop
set it=UnitItemInSlot(s__bootsofgon_carrier[this], l__i)
exitwhen l__i > 5
if GetItemTypeId(it) == itemIdBefore then
call RemoveItem(it)
set it=CreateItem(itemIdAfter, 0., 0.)
call SetItemPlayer(it, GetOwningPlayer(s__bootsofgon_carrier[this]), false)
call UnitAddItem(s__bootsofgon_carrier[this], it)
call IssueTargetOrderById(s__bootsofgon_carrier[this], 852002 + l__i, it)
set it=null
endif
set l__i=l__i + 1
endloop
set s__bootsofgon_swapped[this]=not s__bootsofgon_swapped[this]
set it=null
endfunction
function s__bootsofgon_PreSwap takes nothing returns nothing
call s__bootsofgon_SwapBoots(s__bootsofgon_newb,0x49303145 , 0x4930314A)
endfunction
function s__bootsofgon_Activate takes unit caster returns boolean
local integer l__i=sc__bootsofgon_Find(caster)
local integer this
if l__i == - 1 then
return false
else
set this=s__bootsofgon_me[l__i]
if s__bootsofgon_swapped[this] then
call s__bootsofgon_SwapBoots(this,0x4930314A , 0x49303145)
if ( GetUnitState(caster, UNIT_STATE_LIFE) > .405 ) and s__bootsofgon_projecti[this] > 0 then
call DestroyEffect(AddSpecialEffect("HolyBlast.mdl", GetUnitX(caster), GetUnitY(caster)))
call SetUnitX(caster, s__projectile__get_x(s__bootsofgon_projecti[this]))
call SetUnitY(caster, s__projectile__get_y(s__bootsofgon_projecti[this]))
call DestroyEffect(AddSpecialEffectTarget("HolyBlast.mdl", caster, "origin"))
call sc__projectileinterface_deallocate(s__bootsofgon_projecti[this])
endif
call sc__bootsofgon_deallocate(this)
return true
endif
return false
endif
endfunction
function s__bootsofgon_Find takes unit a returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < s__bootsofgon_count ) )
if ( s__bootsofgon_carrier[s__bootsofgon_me[l__i]] == a ) then
return l__i
endif
set l__i=l__i + 1
endloop
return - 1
endfunction
function s__bootsofgon_onDestroy takes integer this returns nothing
local integer l__i=s__bootsofgon_index[this]
set s__bootsofgon_count=s__bootsofgon_count - 1
set s__bootsofgon_me[s__bootsofgon_index[this]]=s__bootsofgon_me[s__bootsofgon_count]
set s__bootsofgon_index[s__bootsofgon_me[s__bootsofgon_index[this]]]=s__bootsofgon_index[this]
if ( s__bootsofgon_count == 0 ) then
call DestroyTimer(s__bootsofgon_swapper)
endif
endfunction

//Generated destructor of bootsofgon
function s__bootsofgon_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: bootsofgon")
        return
    elseif (si__bootsofgon_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: bootsofgon")
        return
    endif
    call s__bootsofgon_onDestroy(this)
    set si__bootsofgon_V[this]=si__bootsofgon_F
    set si__bootsofgon_F=this
endfunction
function s__bootsofgon_create takes unit affected returns integer
local integer l__i=s__bootsofgon_Find(affected)
local integer this
if l__i == - 1 then
set this=s__bootsofgon__allocate()
set s__bootsofgon_index[this]=s__bootsofgon_count
set s__bootsofgon_carrier[this]=affected
if ( s__bootsofgon_count == 0 ) then
set s__bootsofgon_swapper=CreateTimer()
endif
set s__bootsofgon_me[s__bootsofgon_count]=this
set s__bootsofgon_count=s__bootsofgon_count + 1
set s__bootsofgon_newb=this
call TimerStart(s__bootsofgon_swapper, .001, false, function s__bootsofgon_PreSwap)
else
set this=s__bootsofgon_me[l__i]
endif
return this
endfunction
function s__bogproj_onFinish takes integer this returns nothing
if ( GetUnitState(s__bootsofgon_carrier[s__bogproj_boots[this]], UNIT_STATE_LIFE) > .405 ) then
call s__bootsofgon_SwapBoots(s__bogproj_boots[this],0x4930314A , 0x49303145)
call s__bootsofgon_deallocate(s__bogproj_boots[this])
else
set s__bootsofgon_projecti[s__bogproj_boots[this]]=0
endif
call sc__projectileinterface_deallocate(this)
endfunction
function s__bogproj_onDestroy takes integer this returns nothing
endfunction
function s__bogproj_create takes unit u,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__bogproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call SetUnitScale(s__projectile_toUnit[d], .75, .75, .75)
call s__projectile_setModel(d,modelpath)
call s__projectile__set_source(d,u)
set s__bogproj_boots[d]=s__bootsofgon_create(u)
set s__bootsofgon_projecti[s__bogproj_boots[d]]=d
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=false
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000015 takes nothing returns nothing
//# optional
call s__bootsofgon_Activate(GetSpellAbilityUnit())
endfunction
function cj_callback_00000016 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local real distance=1100.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 80.)
set G=s__bogproj_create(source , 700. , A , B , "Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope bootsofgonec ends
// scope SilentBoots begins
function SB_Conditions takes nothing returns boolean
return UnitHasItemOfTypeBJ(GetTriggerUnit(), 0x49303751) == true
endfunction
function SB_Actions takes nothing returns nothing
local unit c=GetTriggerUnit()
set bj_lastCreatedItem=CreateItem(0x49303752, GetUnitX(c), GetUnitY(c))
call UnitAddItem(c, bj_lastCreatedItem)
call RemoveItem(bj_lastCreatedItem)
set c=null
endfunction
function InitTrig_SilentBoots takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function SB_Conditions))
call TriggerAddAction(trg, function SB_Actions)
set trg=null
endfunction
// scope SilentBoots ends
// scope actmagres begins
function cj_anonym__28 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call UnitRemoveAbility(u, 0x41303147)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function cj_anonym__27 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call UnitRemoveAbility(u, 0x41303735)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function cj_anonym__26 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call UnitRemoveAbility(u, 0x41303148)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function cj_anonym__25 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call UnitRemoveAbility(u, 0x41303147)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function cj_callback_00000017 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local integer id=GetSpellAbilityId()
local timer t
local integer h
if id != 0x41303733 or id != 0x41303144 or id != 0x41303734 or id != 0x4130314A then
set u=null
return
endif
set t=CreateTimer()
set h=GetHandleId(t)
if id == 0x41303144 then
call UnitAddAbility(u, 0x41303147)
call SetUnitAbilityLevel(u, 0x41303130, 1)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(t, 3., false, function cj_anonym__25)
set u=null
set t=null
elseif id == 0x41303733 then
call UnitAddAbility(u, 0x41303148)
call SetUnitAbilityLevel(u, 0x41303149, 1)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(t, 3., false, function cj_anonym__26)
set u=null
set t=null
elseif id == 0x41303734 then
call UnitAddAbility(u, 0x41303735)
call SetUnitAbilityLevel(u, 0x41303736, 1)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(t, 3., false, function cj_anonym__27)
set u=null
set t=null
elseif id == 0x4130314A then
call UnitAddAbility(u, 0x41303147)
call SetUnitAbilityLevel(u, 0x41303149, 1)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(t, 3., false, function cj_anonym__28)
set u=null
set t=null
endif
endfunction
// scope actmagres ends
// scope DeepArmor begins
function cj_callback_00000018 takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
call CastSpellOnTargetTimed(u , u , 0x41303556 , 1 , "drunkenhaze" , 3.5)
if false then
call DamageTarget(u , u , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endfunction
function Deep_DisAtck takes nothing returns nothing
local unit u=udg_DamageEventTarget
if GetUnitAbilityLevel(u, 0x42303232) > 0 then
set udg_DamageEventAmount=0
endif
set u=null
endfunction
function cj_callback_00000019 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function Deep_DisAtck)
endfunction
// scope DeepArmor ends
// scope SwordArmor begins
function cj_callback_0000001a takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local integer l__i=0
loop
exitwhen l__i > 5
if GetItemTypeId(UnitItemInSlot(u, l__i)) == 0x4930414A then
call RemoveItem(GetItemOfTypeFromUnitBJ(u, 0x4930414A))
call UnitAddItemToSlotById(u, 0x4930414B, l__i)
endif
set l__i=l__i + 1
endloop
endfunction
function cj_callback_0000001b takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local integer l__i=0
loop
exitwhen l__i > 5
if GetItemTypeId(UnitItemInSlot(u, l__i)) == 0x4930414B then
call RemoveItem(GetItemOfTypeFromUnitBJ(u, 0x4930414B))
call UnitAddItemToSlotById(u, 0x4930414A, l__i)
endif
set l__i=l__i + 1
endloop
endfunction
// scope SwordArmor ends
// scope EssenceOfDeath begins
function TakeDMG takes nothing returns nothing
local boolean taken=GetUnitState(udg_DamageEventTarget, UNIT_STATE_LIFE) <= GetUnitState(udg_DamageEventTarget, UNIT_STATE_MAX_LIFE) * .2 or ( GetUnitState(udg_DamageEventTarget, UNIT_STATE_LIFE) - udg_DamageEventAmount ) <= GetUnitState(udg_DamageEventTarget, UNIT_STATE_MAX_LIFE) * .2
local unit cjlocgn_00000000
local item cjlocgn_00000001
local integer cjlocgn_00000002
if UnitHasItemOfTypeBJ(udg_DamageEventTarget, 0x49303743) and taken then
set cjlocgn_00000000=udg_DamageEventTarget
set cjlocgn_00000002=0
loop
exitwhen not ( ( cjlocgn_00000002 < 6 ) )
set cjlocgn_00000001=UnitItemInSlot(cjlocgn_00000000, cjlocgn_00000002)
set cjlocgn_00000002=cjlocgn_00000002 + 1
if GetItemTypeId(cjlocgn_00000001) == 0x49303743 and GetItemCharges(cjlocgn_00000001) > 0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", cjlocgn_00000000, "overhead"))
call SetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) + GetUnitState(cjlocgn_00000000, UNIT_STATE_MAX_LIFE) * .01 * GetItemCharges(cjlocgn_00000001))
call SetItemCharges(cjlocgn_00000001, 0)
endif
endloop
endif
set cjlocgn_00000001=null
set cjlocgn_00000000=null
endfunction
function cj_callback_0000001c takes nothing returns nothing
//# optional
local unit u=GetKillingUnit()
local unit t=GetTriggerUnit()
local integer charges
local item Item
local integer l__i=0
if IsUnitType(t, UNIT_TYPE_STRUCTURE) or IsUnitIllusion(t) or GetInventoryIndexOfItemTypeBJ(u, 0x49303743) == 0 then
set t=null
set u=null
return
endif
if IsUnitType(t, UNIT_TYPE_HERO) then
set charges=5
else
set charges=1
endif
loop
exitwhen not ( ( l__i < 6 ) )
set Item=UnitItemInSlot(u, l__i)
set l__i=l__i + 1
if GetItemTypeId(Item) == 0x49303743 and GetItemCharges(Item) < 20 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl", u, "overhead"))
if 20 - GetItemCharges(Item) < charges then
call SetItemCharges(Item, GetItemCharges(Item) + 20 - GetItemCharges(Item))
set charges=charges - ( 20 - GetItemCharges(Item) )
else
call SetItemCharges(Item, GetItemCharges(Item) + charges)
exitwhen true
endif
endif
endloop
endfunction
function cj_callback_0000001d takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function TakeDMG)
endfunction
// scope EssenceOfDeath ends
// scope RaB begins
function rab_damaged takes nothing returns nothing
local unit sour=udg_DamageEventSource
local timer t=LoadTimerHandle(hash, GetHandleId(sour), 0x41726269)
local integer cjlocgn_00000000
local unit cjlocgn_00000001
local location cjlocgn_00000002
if t != null and not IsTriggerDamage and not udg_IsDamageSpell and udg_DamageEventAmount > 0. then
set cjlocgn_00000000=GetHandleId(sour)
set cjlocgn_00000001=udg_DamageEventTarget
set udg_DamageEventAmount=udg_DamageEventAmount * ( 3 )
set cjlocgn_00000002=ALL_RemoveLocation(Location(GetUnitX(sour), GetUnitY(sour)))
call CreateTextTagLocBJ(I2S(R2I(udg_DamageEventAmount)) + "!", cjlocgn_00000002, 50.00, 10.00, 100, 0.00, 0.00, 0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 75.00, 90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 3.50)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 1.40)
call RemoveLocation(cjlocgn_00000002)
call PauseTimer(t)
call DestroyTimer(t)
set cjlocgn_00000001=null
endif
set cjlocgn_00000002=null
set t=null
set sour=null
endfunction
function cj_anonym__29 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function cj_callback_0000001e takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local timer t=CreateTimer()
call TimerStart(t, 10., false, function cj_anonym__29)
call SaveTimerHandle(hash, GetHandleId(u), 0x41726269, t)
endfunction
function cj_callback_0000001f takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer l__i=0
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function rab_damaged)
endfunction
// scope RaB ends
// scope ZagadoSosud begins
function removebuff takes nothing returns nothing
local unit u
if GetSpellAbilityId() == 0x41303330 then
return
endif
set u=GetSpellAbilityUnit()
if u == null then
set u=udg_DamageEventTarget
endif
if GetUnitAbilityLevel(u, 0x41303331) > 0 then
call UnitRemoveAbility(u, 0x41303332)
call UnitRemoveAbility(u, 0x42303137)
endif
set u=null
endfunction
function cj_callback_00000020 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
call UnitAddAbility(u, 0x41303332)
endfunction
function cj_callback_00000021 takes nothing returns nothing
//# optional
local integer l__i=0
set ZagadoSosud___trg=CreateTrigger()
call TriggerRegisterVariableEvent(ZagadoSosud___trg, "udg_AfterDamageEvent", EQUAL, 1.)
loop
exitwhen not ( ( l__i < bj_MAX_PLAYER_SLOTS ) )
call TriggerRegisterPlayerUnitEvent(ZagadoSosud___trg, Player(l__i), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303332, false)
set l__i=l__i + 1
endloop
call TriggerAddAction(ZagadoSosud___trg, function removebuff)
endfunction
// scope ZagadoSosud ends
// scope Fov begins
function s__Fov___fovaura_onTimerTick takes nothing returns nothing
local integer cjlocgn_00000000=0
local integer cjlocgn_00000001
local group cjlocgn_00000002
local group cjlocgn_00000003
local unit cjlocgn_00000004
local timer cjlocgn_00000005
local effect cjlocgn_00000006
loop
exitwhen not ( cjlocgn_00000000 < s__Fov___fovaura_count )
set cjlocgn_00000001=s__Fov___fovaura_main[cjlocgn_00000000]
if GetUnitState(s__Fov___fovaura_u[cjlocgn_00000001], UNIT_STATE_LIFE) > .405 then
set cjlocgn_00000002=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_00000002, GetUnitX(s__Fov___fovaura_u[cjlocgn_00000001]), GetUnitY(s__Fov___fovaura_u[cjlocgn_00000001]), 600., null)
set cjlocgn_00000003=CreateGroup()
call GroupAddGroup(s__Fov___fovaura_curaura[cjlocgn_00000001], cjlocgn_00000003)
loop
set cjlocgn_00000004=FirstOfGroup(cjlocgn_00000003)
exitwhen cjlocgn_00000004 == null
if not IsUnitInGroup(cjlocgn_00000004, cjlocgn_00000002) or cjlocgn_00000002 == null then
call UnitRemoveAbility(cjlocgn_00000004, 0x42303138)
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138))
call RemoveSavedHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138)
call SaveBoolean(hash, GetHandleId(cjlocgn_00000004), 0x49303156, false)
call GroupRemoveUnit(s__Fov___fovaura_curaura[cjlocgn_00000001], cjlocgn_00000004)
endif
call GroupRemoveUnit(cjlocgn_00000003, cjlocgn_00000004)
endloop
call GroupClear(cjlocgn_00000003)
call DestroyGroup(cjlocgn_00000003)
set cjlocgn_00000004=FirstOfGroup(cjlocgn_00000002)
loop
exitwhen not ( cjlocgn_00000004 != null )
set cjlocgn_00000004=FirstOfGroup(cjlocgn_00000002)
if not IsUnitInGroup(cjlocgn_00000004, s__Fov___fovaura_curaura[cjlocgn_00000001]) and IsUnitType(cjlocgn_00000004, UNIT_TYPE_HERO) and GetUnitState(cjlocgn_00000004, UNIT_STATE_LIFE) > .405 and GetUnitAbilityLevel(cjlocgn_00000004, 0x416C6F63) == 0 and not IsUnitIllusion(cjlocgn_00000004) and IsUnitAlly(cjlocgn_00000004, GetOwningPlayer(s__Fov___fovaura_u[cjlocgn_00000001])) then
call GroupAddUnit(s__Fov___fovaura_curaura[cjlocgn_00000001], cjlocgn_00000004)
set cjlocgn_00000005=LoadTimerHandle(hash, GetHandleId(cjlocgn_00000004), GetHandleId(cjlocgn_00000004) + 0x42303138)
set cjlocgn_00000006=LoadEffectHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138)
if cjlocgn_00000005 == null and cjlocgn_00000006 == null then
set cjlocgn_00000006=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarDrums\\DrumsCasterHeal.mdl", cjlocgn_00000004, "origin")
call SaveEffectHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138, cjlocgn_00000006)
endif
call SaveBoolean(hash, GetHandleId(cjlocgn_00000004), 0x49303156, true)
endif
call GroupRemoveUnit(cjlocgn_00000002, cjlocgn_00000004)
endloop
call DestroyGroup(cjlocgn_00000002)
else
loop
set cjlocgn_00000004=FirstOfGroup(s__Fov___fovaura_curaura[cjlocgn_00000001])
exitwhen cjlocgn_00000004 == null
call UnitRemoveAbility(cjlocgn_00000004, 0x42303138)
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138))
call RemoveSavedHandle(hash, GetHandleId(cjlocgn_00000004), 0x42303138)
call SaveBoolean(hash, GetHandleId(cjlocgn_00000004), 0x49303156, false)
call GroupRemoveUnit(s__Fov___fovaura_curaura[cjlocgn_00000001], cjlocgn_00000004)
endloop
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000006=null
set cjlocgn_00000005=null
set cjlocgn_00000004=null
set cjlocgn_00000003=null
set cjlocgn_00000002=null
endfunction
function s__Fov___fovaura_destroy takes integer this returns nothing
local integer l__i=s__Fov___fovaura_number[this]
local unit cjlocgn_00000000
set s__Fov___fovaura_u[this]=null
loop
set cjlocgn_00000000=FirstOfGroup(s__Fov___fovaura_curaura[this])
exitwhen cjlocgn_00000000 == null
call UnitRemoveAbility(cjlocgn_00000000, 0x42303138)
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(cjlocgn_00000000), 0x42303138))
call RemoveSavedHandle(hash, GetHandleId(cjlocgn_00000000), 0x42303138)
call SaveBoolean(hash, GetHandleId(cjlocgn_00000000), 0x49303156, false)
call GroupRemoveUnit(s__Fov___fovaura_curaura[this], cjlocgn_00000000)
endloop
call DestroyGroup(s__Fov___fovaura_curaura[this])
call s__Fov___fovaura_deallocate(this)
set s__Fov___fovaura_main[l__i]=s__Fov___fovaura_main[s__Fov___fovaura_count]
set s__Fov___fovaura_main[s__Fov___fovaura_count]=0
set s__Fov___fovaura_count=s__Fov___fovaura_count - 1
if s__Fov___fovaura_count < 1 then
call DestroyTimer(s__Fov___fovaura_auratimer)
endif
set cjlocgn_00000000=null
endfunction
function s__Fov___fovaura_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__Fov___fovaura_count )
if s__Fov___fovaura_u[s__Fov___fovaura_main[cjlocgn_00000000]] == u then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__Fov___fovaura_create takes unit u returns integer
local integer l__i=s__Fov___fovaura_Find(u)
local integer fov
if l__i > - 1 then
return s__Fov___fovaura_main[l__i]
endif
set fov=s__Fov___fovaura__allocate()
set s__Fov___fovaura_u[fov]=u
set s__Fov___fovaura_curaura[fov]=CreateGroup()
if s__Fov___fovaura_count < 1 then
set s__Fov___fovaura_auratimer=CreateTimer()
call TimerStart(s__Fov___fovaura_auratimer, .2, true, function s__Fov___fovaura_onTimerTick)
endif
set s__Fov___fovaura_number[fov]=s__Fov___fovaura_count
set s__Fov___fovaura_main[s__Fov___fovaura_count]=fov
set s__Fov___fovaura_count=s__Fov___fovaura_count + 1
return fov
endfunction
function cj_anonym__31 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit a=LoadUnitHandle(hash, GetHandleId(t), 1)
call RemoveSavedHandle(hash, GetHandleId(a), GetHandleId(a) + 0x42303138)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function cj_anonym__30 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit a=LoadUnitHandle(hash, GetHandleId(t), 1)
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(t), 0))
call PauseTimer(t)
call FlushChildHashtable(hash, GetHandleId(t))
call DestroyTimer(t)
set t=CreateTimer()
call SaveTimerHandle(hash, GetHandleId(a), GetHandleId(a) + 0x42303138, t)
call SaveUnitHandle(hash, GetHandleId(t), 1, a)
call TimerStart(t, 250., false, function cj_anonym__31)
endfunction
function Fov___OnDmged takes nothing returns nothing
local unit a=udg_DamageEventTarget
local timer t=LoadTimerHandle(hash, GetHandleId(a), GetHandleId(a) + 0x42303138)
local effect cjlocgn_00000000
if t != null then
set cjlocgn_00000000=LoadEffectHandle(hash, GetHandleId(t), 0)
if cjlocgn_00000000 != null then
if udg_DamageEventAmount >= GetUnitState(a, UNIT_STATE_LIFE) then
set udg_DamageEventAmount=0
call SetUnitState(a, UNIT_STATE_LIFE, 5)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", a, "origin"))
endif
elseif t == null and LoadBoolean(hash, GetHandleId(a), 0x49303156) and GetUnitAbilityLevel(a, 0x42303138) > 0 and udg_DamageEventAmount >= GetUnitState(a, UNIT_STATE_LIFE) then
if udg_DamageEventAmount >= GetUnitState(a, UNIT_STATE_LIFE) then
set udg_DamageEventAmount=0
call SetUnitState(a, UNIT_STATE_LIFE, 5)
endif
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(a), 0x42303138))
set t=CreateTimer()
call SaveTimerHandle(hash, GetHandleId(a), GetHandleId(a) + 0x42303138, t)
call SaveEffectHandle(hash, GetHandleId(t), 0, AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl", a, "chest"))
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(t), 0x42303138))
call RemoveSavedHandle(hash, GetHandleId(t), 0x42303138)
call SaveUnitHandle(hash, GetHandleId(t), 1, a)
call TimerStart(t, 1.5, false, function cj_anonym__30)
endif
set cjlocgn_00000000=null
set t=null
set a=null
endfunction
function Fov___OnPickItem takes nothing returns nothing
local integer id=GetItemTypeId(GetManipulatedItem())
local unit u
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local item cjlocgn_00000002
if id != 0x49303156 then
return
endif
set u=GetTriggerUnit()
if GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
call s__Fov___fovaura_create(u)
else
set cjlocgn_00000000=0
set cjlocgn_00000001=0
loop
exitwhen cjlocgn_00000000 > 5
set cjlocgn_00000002=UnitItemInSlot(u, cjlocgn_00000000)
set cjlocgn_00000000=cjlocgn_00000000 + 1
if ( cjlocgn_00000002 != null ) and ( GetItemTypeId(cjlocgn_00000002) == id ) then
set cjlocgn_00000001=cjlocgn_00000001 + 1
endif
endloop
if cjlocgn_00000001 == 1 then
call s__Fov___fovaura_destroy(s__Fov___fovaura_main[s__Fov___fovaura_Find(u)])
endif
endif
set cjlocgn_00000002=null
set u=null
endfunction
function Fov___onInit takes nothing returns nothing
local trigger itemtrg=CreateTrigger()
local trigger dmgtrg=CreateTrigger()
loop
exitwhen not ( ( i < 15 ) )
call TriggerRegisterPlayerUnitEvent(itemtrg, Player(i), EVENT_PLAYER_UNIT_DROP_ITEM, null)
call TriggerRegisterPlayerUnitEvent(itemtrg, Player(i), EVENT_PLAYER_UNIT_PICKUP_ITEM, null)
set i=i + 1
endloop
call TriggerRegisterVariableEvent(dmgtrg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(itemtrg, function Fov___OnPickItem)
call TriggerAddAction(dmgtrg, function Fov___OnDmged)
set dmgtrg=null
set itemtrg=null
endfunction
// scope Fov ends
// scope ringofdespair begins
function s__ringofdespair___rodeffect_onTimerTick takes nothing returns nothing
local integer l__i=0
local integer this
loop
exitwhen not ( ( l__i < s__ringofdespair___rodeffect_count ) )
set this=s__ringofdespair___rodeffect_me[l__i]
set s__ringofdespair___rodeffect_remain[this]=s__ringofdespair___rodeffect_remain[this] - ( .2 )
if s__ringofdespair___rodeffect_remain[this] <= 0. then
call UnitRemoveAbility(s__ringofdespair___rodeffect_affected[this], 0x4130334B)
call UnitRemoveAbility(s__ringofdespair___rodeffect_affected[this], 0x4161736C)
call UnitRemoveAbility(s__ringofdespair___rodeffect_affected[this], 0x42303135)
call sc__ringofdespair___rodeffect_deallocate(this)
endif
set l__i=l__i + 1
endloop
endfunction
function s__ringofdespair___rodeffect_Find takes unit a returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < s__ringofdespair___rodeffect_count ) )
if ( s__ringofdespair___rodeffect_affected[s__ringofdespair___rodeffect_me[l__i]] == a ) then
return l__i
endif
set l__i=l__i + 1
endloop
return - 1
endfunction
function s__ringofdespair___rodeffect_onDestroy takes integer this returns nothing
local integer l__i=s__ringofdespair___rodeffect_index[this]
set s__ringofdespair___rodeffect_count=s__ringofdespair___rodeffect_count - 1
set s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]=s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_count]
set s__ringofdespair___rodeffect_index[s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]]=s__ringofdespair___rodeffect_index[this]
if s__ringofdespair___rodeffect_count == 0 then
call DestroyTimer(s__ringofdespair___rodeffect_T)
endif
endfunction

//Generated destructor of ringofdespair___rodeffect
function s__ringofdespair___rodeffect_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: ringofdespair___rodeffect")
        return
    elseif (si__ringofdespair___rodeffect_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: ringofdespair___rodeffect")
        return
    endif
    call s__ringofdespair___rodeffect_onDestroy(this)
    set si__ringofdespair___rodeffect_V[this]=si__ringofdespair___rodeffect_F
    set si__ringofdespair___rodeffect_F=this
endfunction
function s__ringofdespair___rodeffect_create takes unit affected,real duration returns integer
local integer l__i=s__ringofdespair___rodeffect_Find(affected)
local integer this
if l__i == - 1 then
set this=s__ringofdespair___rodeffect__allocate()
set s__ringofdespair___rodeffect_affected[this]=affected
set s__ringofdespair___rodeffect_index[this]=s__ringofdespair___rodeffect_count
set s__ringofdespair___rodeffect_remain[this]=duration
call UnitAddAbility(s__ringofdespair___rodeffect_affected[this], 0x4130334B)
call UnitAddAbility(s__ringofdespair___rodeffect_affected[this], 0x4161736C)
if ( s__ringofdespair___rodeffect_count == 0 ) then
set s__ringofdespair___rodeffect_T=CreateTimer()
call TimerStart(s__ringofdespair___rodeffect_T, .2, true, function s__ringofdespair___rodeffect_onTimerTick)
endif
set s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_count]=this
set s__ringofdespair___rodeffect_count=s__ringofdespair___rodeffect_count + 1
else
set this=s__ringofdespair___rodeffect_me[l__i]
set s__ringofdespair___rodeffect_remain[this]=duration
endif
return this
endfunction
function s__ringofdespair___rodproj_onUnitCollision takes integer this,unit u returns nothing
local real dmg
local real duration
call GroupAddUnit(s__ringofdespair___rodproj_affected[this], u)
if s__ringofdespair___rodproj_id[this] == 0x4130314B then
set dmg=125.
set duration=10.
elseif s__ringofdespair___rodproj_id[this] == 0x41303433 then
set dmg=250.
set duration=20.
endif
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call s__ringofdespair___rodeffect_create(u , duration)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", u, "origin"))
endfunction
function s__ringofdespair___rodproj_isValidTargetUnit takes integer this,unit u returns boolean
return s__ringofdespair___rodproj_affected[this] != null and not IsUnitInGroup(u, s__ringofdespair___rodproj_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__ringofdespair___rodproj_onFinish takes integer this returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
call sc__projectileinterface_deallocate(this)
endfunction
function s__ringofdespair___rodproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__ringofdespair___rodproj_affected[this])
set s__ringofdespair___rodproj_affected[this]=null
endfunction
function s__ringofdespair___rodproj_create takes unit u,integer id,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__ringofdespair___rodproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call SetUnitScale(s__projectile_toUnit[d], 2., 2., 2.)
set s__ringofdespair___rodproj_id[d]=id
call s__projectile_setModel(d,modelpath)
set s__ringofdespair___rodproj_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
call s__projectile__set_collision(d,110.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=false
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000022 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local real distance=800.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 80.)
set G=s__ringofdespair___rodproj_create(source , GetSpellAbilityId() , 1100. , A , B , "Abilities\\Weapons\\WitchDoctorMissile\\WitchDoctorMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
function cj_callback_00000023 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local real distance=800.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 80.)
set G=s__ringofdespair___rodproj_create(source , GetSpellAbilityId() , 1100. , A , B , "Abilities\\Weapons\\WitchDoctorMissile\\WitchDoctorMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope ringofdespair ends
// scope lifeeff begins
function cj_anonym__33 takes nothing returns boolean
//# optional
return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 and IsUnitAlly(GetFilterUnit(), GetOwningPlayer(lifeeff___filterunit))
endfunction
function cj_anonym__32 takes nothing returns boolean
//# optional
return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) and ( GetInventoryIndexOfItemTypeBJ(GetFilterUnit(), 0x49303739) > 0 or GetInventoryIndexOfItemTypeBJ(GetFilterUnit(), 0x49303146) > 0 )
endfunction
function lifeeff___onTickWithItem takes nothing returns nothing
local code filter=function cj_anonym__32
local rect r=GetWorldBounds()
local group g=CreateGroup()
local unit cjlocgn_00000000
local real cjlocgn_00000001
local real cjlocgn_00000002
local location cjlocgn_00000003
local code cjlocgn_00000004
local unit cjlocgn_00000005
call GroupEnumUnitsInRect(g, r, Filter(filter))
if FirstOfGroup(g) != null then
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000000f
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000000f)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000000f, cjlocgn_00000000)
set cjlocgn_00000001=GetUnitX(cjlocgn_00000000)
set cjlocgn_00000002=GetUnitY(cjlocgn_00000000)
set cjlocgn_00000003=ALL_RemoveLocation(Location(cjlocgn_00000001, cjlocgn_00000002))
set cjlocgn_00000004=function cj_anonym__33
set bj_wantDestroyGroup=true
set lifeeff___filterunit=cjlocgn_00000000
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRangeOfLocMatching(600. , cjlocgn_00000003 , Filter(cjlocgn_00000004)))) > 1 then
call BJDebugMsg("зашел в область")
call DestroyEffect(AddSpecialEffectTarget("Units\\NightElf\\Wisp\\WispExplode.mdl", cjlocgn_00000000, "overhead"))
call GroupEnumUnitsInRange(cjgrfgn_00000010, cjlocgn_00000001, cjlocgn_00000002, 600., null)
loop
set cjlocgn_00000005=FirstOfGroup(cjgrfgn_00000010)
exitwhen cjlocgn_00000005 == null
call GroupRemoveUnit(cjgrfgn_00000010, cjlocgn_00000005)
if not IsUnitType(cjlocgn_00000005, UNIT_TYPE_STRUCTURE) and IsUnitAlly(cjlocgn_00000005, GetOwningPlayer(cjlocgn_00000000)) and GetUnitState(cjlocgn_00000005, UNIT_STATE_LIFE) > .405 then
call AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", cjlocgn_00000005, "origin")
if UnitHasItemOfTypeBJ(cjlocgn_00000000, 0x49303739) then
call BJDebugMsg("похил с большого")
call SetUnitState(cjlocgn_00000005, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000005, UNIT_STATE_LIFE) + 2 * 20.)
call SetUnitState(cjlocgn_00000005, UNIT_STATE_MANA, GetUnitState(cjlocgn_00000005, UNIT_STATE_MANA) + 2 * 10.)
else
call BJDebugMsg("похил с маленького")
call SetUnitState(cjlocgn_00000005, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000005, UNIT_STATE_LIFE) + 20.)
call SetUnitState(cjlocgn_00000005, UNIT_STATE_MANA, GetUnitState(cjlocgn_00000005, UNIT_STATE_MANA) + 10.)
endif
endif
endloop
endif
call RemoveLocation(cjlocgn_00000003)
set cjlocgn_00000004=null
endloop
endif
set filter=null
set r=null
call GroupClear(g)
call DestroyGroup(g)
set cjlocgn_00000003=null
set g=null
endfunction
function cj_callback_00000024 takes nothing returns nothing
//# optional
set LifeRuneTimer=CreateTimer()
call TimerStart(LifeRuneTimer, 4., true, function lifeeff___onTickWithItem)
endfunction
// scope lifeeff ends
function Trig_Firestone_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41303242 or GetSpellAbilityId() == 0x41303434
endfunction
function Firestone_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
call UnitRemoveAbility(c, 0x41303244)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set c=null
set t=null
endfunction
function Trig_Firestone_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
call UnitAddAbility(c, 0x41303244)
if GetSpellAbilityId() == 0x41303242 then
call SetUnitAbilityLevel(c, 0x41303243, 1)
else
call SetUnitAbilityLevel(c, 0x41303243, 2)
endif
call SaveUnitHandle(hash, h, 1, c)
call TimerStart(t, 5.0, false, function Firestone_timer_end)
set c=null
set t=null
endfunction
function InitTrig_Firestone takes nothing returns nothing
set gg_trg_Firestone=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Firestone, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Firestone, Condition(function Trig_Firestone_Conditions))
call TriggerAddAction(gg_trg_Firestone, function Trig_Firestone_Actions)
endfunction
function Trig_Crystal_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41654372 or GetSpellAbilityId() == 0x41303444
endfunction
function Trig_Crystal_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
call UnitRemoveBuffs(c, false, true)
set c=null
endfunction
function InitTrig_Crystal takes nothing returns nothing
set gg_trg_Crystal=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Crystal, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Crystal, Condition(function Trig_Crystal_Conditions))
call TriggerAddAction(gg_trg_Crystal, function Trig_Crystal_Actions)
endfunction
function Trig_Lefruit_Conditions takes nothing returns boolean
if ( not ( GetItemTypeId(GetManipulatedItem()) == 0x4930364C ) ) then
return false
endif
return true
endfunction
function Trig_Lefruit_Func003C takes nothing returns boolean
if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())) == false ) ) then
return false
endif
return true
endfunction
function Trig_Lefruit_Actions takes nothing returns nothing
call UnitRemoveItemSwapped(GetManipulatedItem(), GetManipulatingUnit())
if ( Trig_Lefruit_Func003C() ) then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddItemSwapped(GetLastRemovedItem(), GetManipulatingUnit())
call EnableTrigger(GetTriggeringTrigger())
else
call DisplayTextToPlayer(GetTriggerPlayer(), 400.00, 0, "TRIGSTR_1543")
endif
endfunction
function InitTrig_Lefruit takes nothing returns nothing
set gg_trg_Lefruit=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Lefruit, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Lefruit, Condition(function Trig_Lefruit_Conditions))
call TriggerAddAction(gg_trg_Lefruit, function Trig_Lefruit_Actions)
endfunction
function Trig_Limitless_Cup_eff_Conditions takes nothing returns boolean
if ( not ( GetSpellAbilityId() == 0x41474D31 ) ) then
return false
endif
return true
endfunction
function Trig_Limitless_Cup_eff_Actions takes nothing returns nothing
call SetUnitManaBJ(GetSpellTargetUnit(), ( GetUnitStateSwap(UNIT_STATE_MANA, GetSpellTargetUnit()) + 150.00 ))
endfunction
function InitTrig_Limitless_Cup_eff takes nothing returns nothing
set gg_trg_Limitless_Cup_eff=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Limitless_Cup_eff, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Limitless_Cup_eff, Condition(function Trig_Limitless_Cup_eff_Conditions))
call TriggerAddAction(gg_trg_Limitless_Cup_eff, function Trig_Limitless_Cup_eff_Actions)
endfunction
function Trig_MartyrShieldEff_Conditions takes nothing returns boolean
if ( not ( GetSpellAbilityId() == 0x41303351 ) ) then
return false
endif
return true
endfunction
function Trig_MartyrShieldEff_Actions takes nothing returns nothing
call SetUnitLifeBJ(GetTriggerUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetTriggerUnit()) + ( ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetTriggerUnit()) - GetUnitStateSwap(UNIT_STATE_LIFE, GetTriggerUnit()) ) * 0.33 ) ))
endfunction
function InitTrig_MartyrShieldEff takes nothing returns nothing
set gg_trg_MartyrShieldEff=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MartyrShieldEff, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_MartyrShieldEff, Condition(function Trig_MartyrShieldEff_Conditions))
call TriggerAddAction(gg_trg_MartyrShieldEff, function Trig_MartyrShieldEff_Actions)
endfunction
function Trig_WarDrum_Conditions takes nothing returns boolean
local integer ui=GetUnitTypeId(GetSpellTargetUnit())
local integer lvl=GetUnitAbilityLevel(GetSpellTargetUnit(), 0x42303146)
return GetSpellAbilityId() == 0x41303355 and lvl < 1 and ( ui == 0x68303031 or ui == 0x68303032 or ui == 0x68303151 or ui == 0x68303154 or ui == 0x68303033 or ui == 0x68303034 or ui == 0x68303152 or ui == 0x68303153 )
endfunction
function Trig_WarDrum_Actions takes nothing returns nothing
local unit u=GetSpellTargetUnit()
local real hp=GetUnitState(u, UNIT_STATE_MAX_LIFE) * 0.5
loop
exitwhen hp <= 0
if hp > 100 then
set hp=hp - 100
call UnitAddAbility(u, 0x41303234)
call SetUnitAbilityLevel(u, 0x41303234, 2)
call UnitRemoveAbility(u, 0x41303234)
else
if hp > 10 then
set hp=hp - ( 10 )
call UnitAddAbility(u, 0x41303234)
call SetUnitAbilityLevel(u, 0x41303234, 3)
call UnitRemoveAbility(u, 0x41303234)
else
set hp=hp - 1
call UnitAddAbility(u, 0x41303234)
call SetUnitAbilityLevel(u, 0x41303234, 4)
call UnitRemoveAbility(u, 0x41303234)
endif
endif
endloop
call UnitAddAbility(u, 0x4130324C)
call SetUnitAbilityLevel(u, 0x4130324C, GetUnitAbilityLevel(u, 0x4130324C) + 5)
call SetUnitAbilityLevel(u, 0x41303336, GetUnitAbilityLevel(u, 0x41303336) + 10)
set u=null
endfunction
function InitTrig_WarDrum takes nothing returns nothing
set gg_trg_WarDrum=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_WarDrum, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_WarDrum, Condition(function Trig_WarDrum_Conditions))
call TriggerAddAction(gg_trg_WarDrum, function Trig_WarDrum_Actions)
endfunction
function Trig_SOwl_Conditions takes nothing returns boolean
return ( GetSpellAbilityId() == 0x414F5374 ) or ( GetSpellAbilityId() == 0x414F5754 )
endfunction
function Trig_SOwl_Actions takes nothing returns nothing
local unit c=GetTriggerUnit()
local player p=GetOwningPlayer(c)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local destructable t=GetSpellTargetDestructable()
local unit du
local unit owl
call BJDebugMsg("заход в совиков")
set du=CreateUnit(p, 0x68303142, x, y, 0)
call IssueTargetOrder(du, "attackonce", t)
call UnitApplyTimedLife(du, 0x42544C46, 2)
if GetSpellAbilityId() == 0x414F5374 then
set owl=CreateUnit(p, 0x6F4F5757, x, y, 0)
call UnitApplyTimedLife(owl, 0x42544C46, 150)
else
set owl=CreateUnit(p, 0x6F303030, x, y, 0)
call UnitApplyTimedLife(owl, 0x42544C46, 150)
endif
set owl=null
set du=null
set t=null
set c=null
endfunction
function InitTrig_OWLSTONE takes nothing returns nothing
set gg_trg_OWLSTONE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_OWLSTONE, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_OWLSTONE, Condition(function Trig_SOwl_Conditions))
call TriggerAddAction(gg_trg_OWLSTONE, function Trig_SOwl_Actions)
endfunction
// scope Spellbloom begins
function removesbbuff takes nothing returns nothing
local unit u
if GetSpellAbilityId() == 0x41303430 then
return
endif
set u=GetSpellAbilityUnit()
if u == null then
set u=GetTriggerUnit()
endif
if GetUnitAbilityLevel(u, 0x41303431) > 0 then
call SaveBoolean(hash, GetHandleId(u), 1, true)
call UnitRemoveAbility(u, 0x41303432)
call UnitRemoveAbility(u, 0x42303148)
endif
set u=null
endfunction
function cj_anonym__34 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 1)
local boolean A=LoadBoolean(hash, GetHandleId(u), 1)
if A then
call PauseTimer(t)
call DestroyTimer(t)
set A=false
call FlushChildHashtable(hash, GetHandleId(t))
call FlushChildHashtable(hash, GetHandleId(u))
else
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + GetHeroInt(u, true) / 2)
endif
set u=null
set t=null
endfunction
function cj_callback_00000025 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local integer h
local timer t
local integer ht
call UnitAddAbility(u, 0x41303432)
set h=GetHandleId(u)
call SaveBoolean(hash, h, 1, false)
set t=CreateTimer()
set ht=GetHandleId(t)
call SaveUnitHandle(hash, ht, 1, u)
call TimerStart(t, 1., true, function cj_anonym__34)
call TriggerRegisterUnitEvent(Spellbloom___trg, u, EVENT_UNIT_DAMAGED)
set u=null
set t=null
endfunction
function cj_callback_00000026 takes nothing returns nothing
//# optional
local integer l__i=0
set Spellbloom___trg=CreateTrigger()
loop
exitwhen not ( ( l__i < bj_MAX_PLAYER_SLOTS ) )
call TriggerRegisterPlayerUnitEvent(Spellbloom___trg, Player(l__i), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303432, false)
set l__i=l__i + 1
endloop
call TriggerAddAction(Spellbloom___trg, function removesbbuff)
endfunction
// scope Spellbloom ends
function Trig_HornOfDoom_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41303441
endfunction
function hodfil takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function hoda takes nothing returns nothing
local timer t
local unit u
local group g
local unit f
call BJDebugMsg("зашел в активацию")
set t=GetExpiredTimer()
set u=LoadUnitHandle(hash, GetHandleId(t), 1)
set g=CreateGroup()
call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 600, Condition(function hodfil))
loop
set f=FirstOfGroup(g)
exitwhen f == null
set bj_lastCreatedItem=CreateItem(0x4930374F, GetUnitX(f), GetUnitY(f))
call UnitAddItem(f, bj_lastCreatedItem)
call GroupRemoveUnit(g, f)
call RemoveItem(bj_lastCreatedItem)
endloop
call DestroyGroup(g)
set t=null
set f=null
set g=null
set u=null
endfunction
function Trig_HornOfDoom_Actions takes nothing returns nothing
local unit u
local timer t
local integer h
call BJDebugMsg("начал трубу")
set u=GetTriggerUnit()
set t=CreateTimer()
set h=GetHandleId(t)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(t, 0.0, false, function hoda)
set u=null
set t=null
endfunction
function InitTrig_HornOfDoom takes nothing returns nothing
set gg_trg_HornOfDoom=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HornOfDoom, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_HornOfDoom, Condition(function Trig_HornOfDoom_Conditions))
call TriggerAddAction(gg_trg_HornOfDoom, function Trig_HornOfDoom_Actions)
endfunction
// scope jedibracelet begins
function cond_jb takes nothing returns boolean
return udg_DamageEventAmount > 0. and UnitHasItemOfTypeBJ(udg_DamageEventTarget, 0x49303938) and IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO)
endfunction
function cj_anonym__35 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit tar=LoadUnitHandle(hash, h, 1)
local integer cjlocgn_00000000=0
loop
exitwhen cjlocgn_00000000 > 5
if GetItemTypeId(UnitItemInSlot(tar, cjlocgn_00000000)) == 0x49303939 then
call RemoveItem(GetItemOfTypeFromUnitBJ(tar, 0x49303939))
call UnitAddItemToSlotById(tar, 0x49303938, cjlocgn_00000000)
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
set tar=null
set t=null
endfunction
function act_jb takes nothing returns nothing
local unit tar=udg_DamageEventTarget
local item newitem12
local integer kitemri
local timer t
set kitemri=0
loop
set newitem12=UnitItemInSlot(tar, kitemri)
exitwhen kitemri > 5
if GetItemTypeId(newitem12) == 0x49303938 then
call RemoveItem(newitem12)
set newitem12=CreateItem(0x49303939, 0., 0.)
call SetItemPlayer(newitem12, GetOwningPlayer(tar), false)
call UnitAddItem(tar, newitem12)
call IssueTargetOrderById(tar, 852002 + kitemri, newitem12)
set newitem12=null
endif
set kitemri=kitemri + 1
set newitem12=null
endloop
set t=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(t), 1, tar)
call TimerStart(t, 3., false, function cj_anonym__35)
set tar=null
set t=null
endfunction
function InitTrig_JediBracele takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddCondition(trg, Condition(function cond_jb))
call TriggerAddAction(trg, function act_jb)
set trg=null
endfunction
// scope jedibracelet ends
function MLIT_Conditions takes nothing returns boolean
return UnitHasItemOfTypeBJ(GetTriggerUnit(), 0x49303231) == true
endfunction
function MLCD_timer_end takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local integer l__i=0
loop
exitwhen l__i > 5
if GetItemTypeId(UnitItemInSlot(caster, l__i)) == 0x49303232 then
call RemoveItem(GetItemOfTypeFromUnitBJ(caster, 0x49303232))
call UnitAddItemToSlotById(caster, 0x49303231, l__i)
endif
set l__i=l__i + 1
endloop
call FlushChildHashtable(hash, h)
set Timer=null
set caster=null
endfunction
function MLIT_Actions takes nothing returns nothing
local unit c=GetTriggerUnit()
local timer Timer=CreateTimer()
local integer h=GetHandleId(Timer)
local integer l__i=0
call SaveUnitHandle(hash, h, 1, c)
loop
exitwhen l__i > 5
if GetItemTypeId(UnitItemInSlot(c, l__i)) == 0x49303231 then
call RemoveItem(GetItemOfTypeFromUnitBJ(c, 0x49303231))
call UnitAddItemToSlotById(c, 0x49303232, l__i)
endif
set l__i=l__i + 1
endloop
call SetUnitState(c, UNIT_STATE_LIFE, GetUnitState(c, UNIT_STATE_LIFE) + GetUnitState(c, UNIT_STATE_MAX_LIFE) * 0.1)
call SetUnitState(c, UNIT_STATE_MANA, GetUnitState(c, UNIT_STATE_MANA) + GetUnitState(c, UNIT_STATE_MAX_MANA) * 0.1)
call TimerStart(Timer, 9., false, function MLCD_timer_end)
set c=null
set Timer=null
endfunction
function InitTrig_MagicLamp takes nothing returns nothing
set gg_trg_MagicLamp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MagicLamp, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_MagicLamp, Condition(function MLIT_Conditions))
call TriggerAddAction(gg_trg_MagicLamp, function MLIT_Actions)
endfunction
function Trig_Coin_Conditions takes nothing returns boolean
local unit t=GetTriggerUnit()
if UnitHasItemOfTypeBJ(GetKillingUnit(), 0x49303847) and ( GetUnitTypeId(t) == 0x65303036 or GetUnitTypeId(t) == 0x65303035 or GetUnitTypeId(t) == 0x65303030 or GetUnitTypeId(t) == 0x68303046 or GetUnitTypeId(t) == 0x68303043 or GetUnitTypeId(t) == 0x68303044 or GetUnitTypeId(t) == 0x65303032 or GetUnitTypeId(t) == 0x65303031 or GetUnitTypeId(t) == 0x68303049 or GetUnitTypeId(t) == 0x68303137 or GetUnitTypeId(t) == 0x68303138 or GetUnitTypeId(t) == 0x68303141 or GetUnitTypeId(t) == 0x65303038 or GetUnitTypeId(t) == 0x65303037 or GetUnitTypeId(t) == 0x65303039 ) then
set t=null
set t=null
return true
else
set t=null
set t=null
return false
endif
endfunction
function Trig_Coin_Actions takes nothing returns nothing
local unit u
local integer l__i=GetRandomInt(1, 4)
call BJDebugMsg("зашел в монетка")
set u=GetTriggerUnit()
if l__i == 4 then
call CreateItem(0x4930384E, GetUnitX(u), GetUnitY(u))
endif
set u=null
endfunction
function InitTrig_Coin takes nothing returns nothing
set gg_trg_Coin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Coin, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Coin, Condition(function Trig_Coin_Conditions))
call TriggerAddAction(gg_trg_Coin, function Trig_Coin_Actions)
endfunction
// scope stufftp begins
function stufftp___onDropPick takes nothing returns nothing
local unit u
if GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
set u=GetTriggerUnit()
call BJDebugMsg("поднял какую-то хуйню")
if GetInventoryIndexOfItemTypeBJ(u, 0x49304236) == 1 then
call BJDebugMsg("а, это телепорталка")
call SetUnitAbilityLevel(u, 0x414C4854, 2)
call SetUnitAbilityLevel(u, 0x41524854, 2)
call BJDebugMsg(I2S(GetUnitAbilityLevel(u, 0x414C4854)) + "- " + I2S(GetUnitAbilityLevel(u, 0x41524854)))
set u=null
endif
else
set u=GetTriggerUnit()
call BJDebugMsg("выложил какую-то хуйню")
if GetInventoryIndexOfItemTypeBJ(u, 0x49304236) == 1 then
call BJDebugMsg("и это была телепорталка")
call SetUnitAbilityLevel(u, 0x414C4854, 1)
call SetUnitAbilityLevel(u, 0x41524854, 1)
call BJDebugMsg(I2S(GetUnitAbilityLevel(u, 0x414C4854)) + "- " + I2S(GetUnitAbilityLevel(u, 0x41524854)))
set u=null
endif
endif
set u=null
endfunction
function cj_anonym__36 takes nothing returns boolean
//# optional
return GetItemTypeId(GetManipulatedItem()) == 0x49304236
endfunction
function cj_callback_00000027 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 15 )
call TriggerRegisterPlayerUnitEvent(trg, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_PICKUP_ITEM, null)
call TriggerRegisterPlayerUnitEvent(trg, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_DROP_ITEM, null)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddCondition(trg, Filter(function cj_anonym__36))
call TriggerAddAction(trg, function stufftp___onDropPick)
endfunction
// scope stufftp ends
// scope expb begins
function cj_anonym__37 takes nothing returns boolean
//# optional
return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) and ( GetInventoryIndexOfItemTypeBJ(GetFilterUnit(), 0x49303237) > 0 or GetInventoryIndexOfItemTypeBJ(GetFilterUnit(), 0x4930385A) > 0 )
endfunction
function expb___onTickWithItem takes nothing returns nothing
local code filter=function cj_anonym__37
local rect r=GetWorldBounds()
local group g=CreateGroup()
local unit cjlocgn_00000000
set sbkmin=sbkmin + 1
call GroupEnumUnitsInRect(g, r, Filter(filter))
if FirstOfGroup(g) != null then
set cj_tmpgr_copy_nw509ert7=cjgrfgn_00000011
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000011)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000011, cjlocgn_00000000)
set bj_wantDestroyGroup=true
if UnitHasItemOfTypeBJ(cjlocgn_00000000, 0x49303237) == true or UnitHasItemOfTypeBJ(cjlocgn_00000000, 0x4930385A) then
call AddHeroXP(cjlocgn_00000000, 15 + 2 * ( sbkmin - 1 ), true)
call CreateTextTagUnitBJ("+" + I2S(15 + 2 * ( sbkmin - 1 )) + "exp", cjlocgn_00000000, 5., 10.00, 100., 100., 0., 0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 15, 90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag, false)
call SetTextTagLifespanBJ(bj_lastCreatedTextTag, 2.)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag, 0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
if ( GetLocalPlayer() == GetOwningPlayer(cjlocgn_00000000) ) then
call SetTextTagVisibility(bj_lastCreatedTextTag, true)
endif
endif
endloop
endif
set filter=null
set r=null
call GroupClear(g)
call DestroyGroup(g)
set g=null
endfunction
function expb_strbookInit takes nothing returns nothing
set EXPBTimer=CreateTimer()
call TimerStart(EXPBTimer, 60., true, function expb___onTickWithItem)
endfunction
// scope expb ends
// scope boooksmegaboooooks begins
function boooksmegaboooooks___books takes nothing returns nothing
local unit s=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local integer amou
local player cjlocgn_00000000
if not ( ( UnitHasItemOfTypeBJ(s, 0x49303851) or UnitHasItemOfTypeBJ(t, 0x49303854) ) and IsUnitType(udg_DamageEventSource, UNIT_TYPE_HERO) and IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO) and udg_DamageEventAmount > 0. ) then
set t=null
set s=null
return
endif
if UnitHasItemOfTypeBJ(s, 0x49303851) and not IsTriggerDamage and not udg_IsDamageSpell then
set amou=R2I(udg_DamageEventAmount * 0.08 + .5)
if amou >= 1. then
call AddHeroXP(s, amou, true)
set cjlocgn_00000000=GetOwningPlayer(s)
call SetPlayerState(cjlocgn_00000000, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(cjlocgn_00000000, PLAYER_STATE_RESOURCE_GOLD) + amou)
call CreateTextTagUnitBJ("+" + I2S(amou), s, 5., 10.00, 30., 100., 30., 0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 15, 90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag, false)
call SetTextTagLifespanBJ(bj_lastCreatedTextTag, 2.)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag, 0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
if ( GetLocalPlayer() == GetOwningPlayer(s) ) then
call SetTextTagVisibility(bj_lastCreatedTextTag, true)
endif
endif
endif
if UnitHasItemOfTypeBJ(t, 0x49303854) then
set amou=R2I(udg_DamageEventAmount * 0.10 + .5)
if amou >= 1. then
call AddHeroXP(t, amou, true)
set cjlocgn_00000000=GetOwningPlayer(t)
call SetPlayerState(cjlocgn_00000000, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(cjlocgn_00000000, PLAYER_STATE_RESOURCE_GOLD) + amou)
call CreateTextTagUnitBJ("+" + I2S(amou), t, 5., 10.00, 100., 20., 20., 0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 15, 90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag, false)
call SetTextTagLifespanBJ(bj_lastCreatedTextTag, 2.)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag, 0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
if ( GetLocalPlayer() == GetOwningPlayer(t) ) then
call SetTextTagVisibility(bj_lastCreatedTextTag, true)
endif
endif
endif
set t=null
set s=null
endfunction
function cj_callback_00000028 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local real mana
local player p
if not UnitHasItemOfTypeBJ(u, 0x49303857) then
set u=null
return
endif
set mana=GetUnitState(u, UNIT_STATE_MANA)
call TriggerSleepAction(0.0)
set mana=mana - ( GetUnitState(u, UNIT_STATE_MANA) )
set mana=mana * ( 0.10 )
if mana < 1. then
set u=null
return
endif
call AddHeroXP(u, R2I(mana + .5), true)
set p=GetOwningPlayer(u)
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(mana + .5))
call CreateTextTagUnitBJ("+" + I2S(R2I(mana + .5)), u, 5., 10.00, 0., 100., 100., 0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag, 15, 90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag, false)
call SetTextTagLifespanBJ(bj_lastCreatedTextTag, 2.)
call SetTextTagFadepointBJ(bj_lastCreatedTextTag, 0.2)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
if ( GetLocalPlayer() == GetOwningPlayer(u) ) then
call SetTextTagVisibility(bj_lastCreatedTextTag, true)
endif
endfunction
function cj_callback_00000029 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function boooksmegaboooooks___books)
endfunction
// scope boooksmegaboooooks ends
// scope almanac begins
function cj_callback_0000002a takes nothing returns nothing
//# optional
endfunction
function cj_callback_0000002b takes nothing returns nothing
//# optional
endfunction
function cj_callback_0000002c takes nothing returns nothing
//# optional
local unit u=GetLevelingUnit()
local integer lvl=GetHeroLevel(u)
call BJDebugMsg(GetUnitName(u) + " апнул " + I2S(lvl) + " левел")
if GetInventoryIndexOfItemTypeBJ(u, 0x4930385A) > 0 then
call BJDebugMsg("и у него был Альманах!")
call SetHeroAgi(u, GetHeroAgi(u, false) + 1, true)
call SetHeroInt(u, GetHeroInt(u, false) + 1, true)
call SetHeroStr(u, GetHeroStr(u, false) + 1, true)
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + GetUnitState(u, UNIT_STATE_MAX_LIFE) * 0.2)
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + GetUnitState(u, UNIT_STATE_MAX_MANA) * 0.2)
call SetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD) + 15 * lvl)
endif
endfunction
function almanac___onDropPick takes nothing returns nothing
local unit cjlocgn_00000000
local integer cjlocgn_00000001
if GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
call BJDebugMsg("поднял какую-то хуйню")
set cjlocgn_00000000=GetTriggerUnit()
set cjlocgn_00000001=GetHeroLevel(cjlocgn_00000000)
if GetInventoryIndexOfItemTypeBJ(cjlocgn_00000000, 0x4930385A) == 1 then
call BJDebugMsg("а, это альманах")
call SetHeroAgi(cjlocgn_00000000, GetHeroAgi(cjlocgn_00000000, false) + cjlocgn_00000001, true)
call SetHeroInt(cjlocgn_00000000, GetHeroInt(cjlocgn_00000000, false) + cjlocgn_00000001, true)
call SetHeroStr(cjlocgn_00000000, GetHeroStr(cjlocgn_00000000, false) + cjlocgn_00000001, true)
endif
else
call BJDebugMsg("выложил какую-то хуйню")
set cjlocgn_00000000=GetTriggerUnit()
set cjlocgn_00000001=GetHeroLevel(cjlocgn_00000000)
if GetInventoryIndexOfItemTypeBJ(cjlocgn_00000000, 0x4930385A) == 1 then
call BJDebugMsg("и это был альманах эйнштейн")
call SetHeroAgi(cjlocgn_00000000, GetHeroAgi(cjlocgn_00000000, false) - cjlocgn_00000001, true)
call SetHeroInt(cjlocgn_00000000, GetHeroInt(cjlocgn_00000000, false) - cjlocgn_00000001, true)
call SetHeroStr(cjlocgn_00000000, GetHeroStr(cjlocgn_00000000, false) - cjlocgn_00000001, true)
endif
endif
set cjlocgn_00000000=null
endfunction
function cj_anonym__38 takes nothing returns boolean
//# optional
return GetItemTypeId(GetManipulatedItem()) == 0x4930385A
endfunction
function cj_callback_0000002d takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 15 )
call TriggerRegisterPlayerUnitEvent(trg, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_PICKUP_ITEM, null)
call TriggerRegisterPlayerUnitEvent(trg, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_DROP_ITEM, null)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddCondition(trg, Filter(function cj_anonym__38))
call TriggerAddAction(trg, function almanac___onDropPick)
endfunction
// scope almanac ends
// scope TriTS begins
function TS_cond takes nothing returns boolean
return UnitHasItemOfTypeBJ(udg_DamageEventTarget, 0x4930394A) == true and not IsTriggerDamage
endfunction
function enable_cd takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call PauseTimer(t)
call DestroyTimer(t)
call SaveTimerHandle(hash, GetHandleId(u), 0x4930394A, t)
set t=null
set u=null
endfunction
function TS_act takes nothing returns nothing
local unit att=udg_DamageEventSource
local unit dam=udg_DamageEventTarget
local integer h=GetHandleId(dam)
local timer Timer=LoadTimerHandle(hash, h, 0x4930394A)
if GetUnitAbilityLevel(dam, 0x42303156) > 0 then
call BJDebugMsg("Бьют в бафф ТС")
set udg_DamageEventAmount=udg_DamageEventAmount * ( 0.5 )
elseif Timer == null then
call CastSpellOnTargetTimed(dam , dam , 0x41303550 , 1 , "innerfire" , 3.5)
if false then
call DamageTarget(dam , dam , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
set Timer=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(Timer), 1, dam)
call SaveTimerHandle(hash, h, 0x4930394A, Timer)
call BJDebugMsg("Все таймеры кончились и тебя ударили с ТС")
set IsTriggerDamage=true
set udg_DamageEventAmount=udg_DamageEventAmount * ( 0.5 )
set IsTriggerDamage=false
call TimerStart(Timer, 40., false, function enable_cd)
endif
set Timer=null
set dam=null
set att=null
endfunction
function InitTrig_Temariys_stone takes nothing returns nothing
set gg_trg_Temariys_stone=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_Temariys_stone, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_Temariys_stone, Condition(function TS_cond))
call TriggerAddAction(gg_trg_Temariys_stone, function TS_act)
endfunction
// scope TriTS ends
// scope TriObi begins
function Obis_Cond takes nothing returns boolean
return udg_DamageEventAmount > 1. and not udg_IsDamageSpell and UnitHasItemOfTypeBJ(udg_DamageEventSource, 0x49304148) and not IsUnitIllusion(udg_DamageEventSource) and GetUnitTypeId(udg_DamageEventSource) != 0x4830315A and GetUnitTypeId(udg_DamageEventSource) != 0x48303159
endfunction
function timedmg takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit a=LoadUnitHandle(hash, h, 1)
local unit u=LoadUnitHandle(hash, h, 2)
local integer count
local unit cjlocgn_00000000
call UnitRemoveAbility(a, 0x42303159)
set count=LoadInteger(hash, GetHandleId(u), 0x49304148)
call GroupEnumUnitsInRange(cjgrfgn_00000012, GetUnitX(a), GetUnitY(a), 300, null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000012)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000012, cjlocgn_00000000)
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(u)) then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("Unit " + GetUnitName(cjlocgn_00000000) + " get " + R2S(50 * count) + " dmg")
call UnitDamageTarget(u, cjlocgn_00000000, 50 * count, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call EnableTrigger(GetTriggeringTrigger())
endif
endloop
call PauseTimer(t)
call DestroyTimer(t)
call FlushChildHashtable(hash, GetHandleId(a))
set t=null
set u=null
set a=null
endfunction
function obis_cd takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
call PauseTimer(t)
call DestroyTimer(t)
call SaveTimerHandle(hash, GetHandleId(u), 0x49304148 * 4, null)
set t=null
set u=null
endfunction
function Obis_Act takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit a=udg_DamageEventTarget
local unit ca=LoadUnitHandle(hash, GetHandleId(u), 0x49304148 + 1)
local timer Timer=LoadTimerHandle(hash, GetHandleId(a), 0x49304148 + 2)
local timer CDTimer=LoadTimerHandle(hash, GetHandleId(u), 0x49304148 * 4)
local integer cjlocgn_00000000
local real cjlocgn_00000001
local unit cjlocgn_00000002
call BJDebugMsg("Прошлая цель - " + GetUnitName(ca))
call BJDebugMsg("Текущая цель - " + GetUnitName(a))
if CDTimer == null then
if ca == a or ca == null then
set cjlocgn_00000000=LoadInteger(hash, GetHandleId(u), 0x49304148) + 1
call BJDebugMsg(I2S(cjlocgn_00000000) + " стаков, цель - " + GetUnitName(a))
if cjlocgn_00000000 == 10 then
call SaveUnitHandle(hash, GetHandleId(CDTimer), 1, u)
call SaveTimerHandle(hash, GetHandleId(u), 0x49304148 * 4, CDTimer)
call TimerStart(CDTimer, 15., false, function obis_cd)
call UnitRemoveAbility(a, 0x42303159)
set cjlocgn_00000001=udg_DamageEventAmount
set udg_DamageEventType=udg_DamageTypeSpell
call PauseTimer(Timer)
call DestroyTimer(Timer)
call FlushChildHashtable(hash, GetHandleId(a))
call GroupEnumUnitsInRange(cjgrfgn_00000013, GetUnitX(a), GetUnitY(a), 300, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000013)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000013, cjlocgn_00000002)
if IsUnitEnemy(cjlocgn_00000002, GetOwningPlayer(u)) then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("Unit " + GetUnitName(cjlocgn_00000002) + " get " + R2S(50 * cjlocgn_00000000) + " dmg")
call UnitDamageTarget(u, cjlocgn_00000002, 50 * cjlocgn_00000000, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call EnableTrigger(GetTriggeringTrigger())
endif
endloop
call SaveInteger(hash, GetHandleId(u), 0x49304148, 0)
else
call CastSpellOnTargetTimed(u , a , 0x41303551 , 1 , "acidbomb" , 3.5)
if false then
call DamageTarget(u , a , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
if Timer == null then
set Timer=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(Timer), 1, a)
call SaveUnitHandle(hash, GetHandleId(Timer), 2, u)
call SaveTimerHandle(hash, GetHandleId(a), 0x49304148 + 2, Timer)
call TimerStart(Timer, 10., false, function timedmg)
else
call PauseTimer(Timer)
call DestroyTimer(Timer)
call FlushChildHashtable(hash, GetHandleId(a))
endif
call SaveInteger(hash, GetHandleId(u), 0x49304148, cjlocgn_00000000)
call SaveUnitHandle(hash, GetHandleId(u), 0x49304148 + 1, a)
endif
else
call SaveUnitHandle(hash, GetHandleId(CDTimer), 1, u)
call SaveTimerHandle(hash, GetHandleId(u), 0x49304148 * 4, CDTimer)
call TimerStart(CDTimer, 15., false, function obis_cd)
call PauseTimer(Timer)
call DestroyTimer(Timer)
call FlushChildHashtable(hash, GetHandleId(a))
call FlushChildHashtable(hash, GetHandleId(u))
set cjlocgn_00000000=LoadInteger(hash, GetHandleId(u), 0x49304148)
call UnitRemoveAbility(ca, 0x42303159)
call BJDebugMsg(I2S(cjlocgn_00000000) + " стаков, последняя цель - " + GetUnitName(ca))
call GroupEnumUnitsInRange(cjgrfgn_00000013, GetUnitX(ca), GetUnitY(ca), 300, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000013)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000013, cjlocgn_00000002)
if IsUnitEnemy(cjlocgn_00000002, GetOwningPlayer(u)) then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("Unit " + GetUnitName(cjlocgn_00000002) + " get " + R2S(50 * cjlocgn_00000000) + " dmg")
call UnitDamageTarget(u, cjlocgn_00000002, 50 * cjlocgn_00000000, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call EnableTrigger(GetTriggeringTrigger())
endif
endloop
call SaveInteger(hash, GetHandleId(u), 0x49304148, 0)
endif
else
call BJDebugMsg("Obi on cd")
endif
set CDTimer=null
set Timer=null
set ca=null
set a=null
set u=null
endfunction
function InitTrig_ObiStone takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddCondition(trg, Condition(function Obis_Cond))
call TriggerAddAction(trg, function Obis_Act)
set trg=null
endfunction
// scope TriObi ends
// scope integer begins
function Filter_enemies takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(integer___gro_dummy))
endfunction
function cj_anonym__39 takes nothing returns nothing
//# optional
set bj_isUnitGroupEmptyResult=false
endfunction
function integer___IsGroupEmpty takes group g returns boolean
set bj_isUnitGroupEmptyResult=true
call ForGroup(g, function cj_anonym__39)
return bj_isUnitGroupEmptyResult
endfunction
function cj_anonym__40 takes nothing returns nothing
//# optional
call UnitRemoveAbility(GetEnumUnit(), 0x42616B62)
endfunction
function integer___Timer_Tick takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local real dur=LoadReal(hash, h, 2) - .5
local unit dummy=LoadUnitHandle(hash, h, 1)
local unit caster=LoadUnitHandle(hash, h, 0)
local group enemies_old=LoadGroupHandle(hash, h, 4)
local effect cjlocgn_00000000
local integer cjlocgn_00000001
local integer cjlocgn_00000002
local effect cjlocgn_00000003
local group cjlocgn_00000004
if dur <= 0 then
set cjlocgn_00000000=LoadEffectHandle(hash, h, 3)
set cjlocgn_00000001=GetHandleId(cjlocgn_00000000)
set cjlocgn_00000002=0
loop
exitwhen ( cjlocgn_00000002 > 5 )
set cjlocgn_00000003=LoadEffectHandle(hash, cjlocgn_00000001, cjlocgn_00000002)
call DestroyEffect(cjlocgn_00000003)
set cjlocgn_00000003=null
set cjlocgn_00000002=cjlocgn_00000002 + 1
endloop
call FlushChildHashtable(hash, cjlocgn_00000001)
call DestroyEffect(cjlocgn_00000000)
call RemoveUnit(dummy)
call DestroyGroup(enemies_old)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
set cjlocgn_00000000=null
else
set cjlocgn_00000004=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_00000004, GetUnitX(dummy), GetUnitY(dummy), 150 + 40 * GetUnitAbilityLevel(caster, 0x41417170), Filter(function Filter_enemies))
set bj_groupRemoveGroupDest=enemies_old
call ForGroup(cjlocgn_00000004, function GroupRemoveGroupEnum)
if not integer___IsGroupEmpty(enemies_old) then
call ForGroup(enemies_old, function cj_anonym__40)
endif
call DestroyGroup(enemies_old)
call SaveReal(hash, h, 2, dur)
call SaveGroupHandle(hash, h, 4, cjlocgn_00000004)
set cjlocgn_00000004=null
endif
set enemies_old=null
set caster=null
set dummy=null
set t=null
endfunction
function cj_callback_0000002e takes nothing returns nothing
//# optional
local unit caster=GetSpellAbilityUnit()
local player owner=GetOwningPlayer(caster)
local real targ_x=GetSpellTargetX()
local real targ_y=GetSpellTargetY()
local real Radius=150 + 40 * GetUnitAbilityLevel(caster, 0x41417170)
local unit dummy=CreateUnit(owner, 0x68303164, targ_x, targ_y, 0.)
local location L
local effect eff
local integer l__i=0
local integer h
local real cjlocgn_00000000
local real cjlocgn_00000001
local effect cjlocgn_00000002
local group enemies
local timer t
local real dur
call UnitAddAbility(dummy, 0x41303158)
set L=ALL_RemoveLocation(Location(0, 0))
call MoveLocation(L, targ_x, targ_y)
set eff=AddSpecialEffectZ("Abilities\\Spells\\Undead\\RegenerationAura\\ObsidianRegenAura.mdl" , targ_x , targ_y , GetLocationZ(L) + 200)
set h=GetHandleId(eff)
loop
exitwhen ( l__i > 5 )
set cjlocgn_00000000=targ_x + Radius * Cos(360. / 6 * l__i * bj_DEGTORAD)
set cjlocgn_00000001=targ_y + Radius * Sin(360. / 6 * l__i * bj_DEGTORAD)
set cjlocgn_00000002=AddSpecialEffectZ("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl" , cjlocgn_00000000 , cjlocgn_00000001 , GetLocationZ(L) + 200)
call SaveEffectHandle(hash, h, l__i, cjlocgn_00000002)
set cjlocgn_00000002=null
set l__i=l__i + 1
endloop
call RemoveLocation(L)
set enemies=CreateGroup()
set integer___gro_dummy=dummy
call GroupEnumUnitsInRange(enemies, targ_x, targ_y, Radius, Filter(function Filter_enemies))
set t=CreateTimer()
set h=GetHandleId(t)
set dur=4.5 + .5 * GetUnitAbilityLevel(caster, 0x41417170)
call SaveUnitHandle(hash, h, 0, caster)
call SaveUnitHandle(hash, h, 1, dummy)
call SaveReal(hash, h, 2, dur)
call SaveEffectHandle(hash, h, 3, eff)
call SaveGroupHandle(hash, h, 4, enemies)
call TimerStart(t, 0.5, true, function integer___Timer_Tick)
set enemies=null
set eff=null
set caster=null
set dummy=null
set owner=null
set t=null
endfunction
function cj_callback_0000002f takes nothing returns nothing
//# optional
call Preload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl")
call Preload("Abilities\\Spells\\Undead\\RegenerationAura\\ObsidianRegenAura.mdl")
endfunction
// scope integer ends
function Trig_Spell_Mind_Execution_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41415345
endfunction
function Mind_Execution_group_filt takes nothing returns boolean
local timer tt=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(tt), 1)
set tt=null
if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Mind_Execution_group_rootin takes nothing returns nothing
local timer tt=FilTimer
local integer h=GetHandleId(tt)
local unit caster=LoadUnitHandle(hash, h, 1)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local integer lvl=GetUnitAbilityLevel(caster, 0x41415345)
local real dmg
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit())))
set IsTriggerDamage=true
set dmg=70. + ( lvl - 1 ) * 70.
call UnitDamageTarget(caster, GetEnumUnit(), dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
set caster=null
set tt=null
endfunction
function Mind_Execution_timer_end takes nothing returns nothing
local timer tt=GetExpiredTimer()
local integer h=GetHandleId(tt)
local effect eff=LoadEffectHandle(hash, h, 2)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local unit caster=LoadUnitHandle(hash, h, 1)
local group enemyunits=CreateGroup()
set FilTimer=tt
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, ( 300. + 50. * ( GetUnitAbilityLevel(caster, 0x41415345) - 1 ) ), Filter(function Mind_Execution_group_filt))
call ForGroup(enemyunits, function Mind_Execution_group_rootin)
call FlushChildHashtable(hash, h)
call DestroyEffect(eff)
call DestroyGroup(enemyunits)
call DestroyTimer(tt)
set enemyunits=null
set eff=null
set tt=null
set caster=null
endfunction
function Trig_Mind_Execution_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local real t_x=GetSpellTargetX()
local real t_y=GetSpellTargetY()
local timer tt=CreateTimer()
local integer h=GetHandleId(tt)
local effect eff=AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", t_x, t_y)
call SaveUnitHandle(hash, h, 1, caster)
call SaveEffectHandle(hash, h, 2, eff)
call SaveReal(hash, h, 3, t_x)
call SaveReal(hash, h, 4, t_y)
call TimerStart(tt, .35, false, function Mind_Execution_timer_end)
set eff=null
set caster=null
set tt=null
endfunction
function InitTrig_Mind_Execution takes nothing returns nothing
set gg_trg_Mind_Execution=CreateTrigger()
call TriggerAddAction(gg_trg_Mind_Execution, function Trig_Mind_Execution_Actions)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Mind_Execution, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Mind_Execution, Condition(function Trig_Spell_Mind_Execution_Conditions))
endfunction
// scope PortalEff begins
function s__PortalEff___asairaportal_Demolish takes integer this returns nothing
call DestroyEffect(s__PortalEff___asairaportal_eff[this])
call DestroyEffect(s__PortalEff___asairaportal_eff3[this])
set s__PortalEff___asairaportal_eff[this]=null
set s__PortalEff___asairaportal_eff3[this]=null
endfunction
function s__PortalEff___asairaportal_Find takes unit caster returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__PortalEff___asairaportal_count )
if s__PortalEff___asairaportal_u[s__PortalEff___asairaportal_me[cjlocgn_00000000]] == caster then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__PortalEff___asairaportal_Portal_timer_end takes nothing returns nothing
local integer this
local unit cjlocgn_00000000
local integer cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
if GetSpellAbilityId() == 0x41415470 then
set cjlocgn_00000000=GetSpellAbilityUnit()
set cjlocgn_00000001=s__PortalEff___asairaportal_Find(cjlocgn_00000000)
set this=s__PortalEff___asairaportal_me[cjlocgn_00000001]
if GetTriggerEventId() == EVENT_UNIT_SPELL_EFFECT then
call TriggerSleepAction(0.)
set cjlocgn_00000002=GetUnitX(s__PortalEff___asairaportal_target[this]) + GetRandomReal(- 100, 100)
set cjlocgn_00000003=GetUnitY(s__PortalEff___asairaportal_target[this]) + GetRandomReal(- 100, 100)
call SetUnitX(cjlocgn_00000000, cjlocgn_00000002)
call SetUnitY(cjlocgn_00000000, cjlocgn_00000003)
call s__PortalEff___asairaportal_Demolish(this)
elseif GetTriggerEventId() == EVENT_UNIT_SPELL_ENDCAST then
call s__PortalEff___asairaportal_Demolish(this)
endif
endif
set cjlocgn_00000000=null
endfunction
function s__PortalEff___asairaportal_create takes unit caster,unit target returns integer
local integer l__i=s__PortalEff___asairaportal_Find(caster)
local integer this
if l__i != - 1 then
set this=s__PortalEff___asairaportal_me[l__i]
else
set this=s__PortalEff___asairaportal__allocate()
endif
if s__PortalEff___asairaportal_count == 0 then
set s__PortalEff___asairaportal_interrupt=CreateTrigger()
call TriggerAddAction(s__PortalEff___asairaportal_interrupt, function s__PortalEff___asairaportal_Portal_timer_end)
endif
if not s__PortalEff___asairaportal_isAllocated[this] then
set s__PortalEff___asairaportal_u[this]=caster
call TriggerRegisterUnitEvent(s__PortalEff___asairaportal_interrupt, s__PortalEff___asairaportal_u[this], EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(s__PortalEff___asairaportal_interrupt, s__PortalEff___asairaportal_u[this], EVENT_UNIT_SPELL_EFFECT)
set s__PortalEff___asairaportal_isAllocated[this]=true
endif
set s__PortalEff___asairaportal_target[this]=target
set s__PortalEff___asairaportal_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl", s__PortalEff___asairaportal_u[this], "origin")
set s__PortalEff___asairaportal_eff3[this]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl", s__PortalEff___asairaportal_target[this], "origin")
set s__PortalEff___asairaportal_index[this]=s__PortalEff___asairaportal_count
set s__PortalEff___asairaportal_me[s__PortalEff___asairaportal_count]=this
set s__PortalEff___asairaportal_count=s__PortalEff___asairaportal_count + 1
return this
endfunction
function PortalEff___Distance takes real x1,real x2,real y1,real y2 returns real
local real dx=x2 - x1
local real dy=y2 - y1
return SquareRoot(dx * dx + dy * dy)
endfunction
function cj_callback_00000030 takes nothing returns nothing
//# optional
local unit c=GetSpellAbilityUnit()
local unit target
local boolean IsThereAlly=false
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real min=600. + 1
local real dist
local unit cjlocgn_00000000
call GroupEnumUnitsInRange(cjgrfgn_00000015, x, y, 600., null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000015)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000015, cjlocgn_00000000)
if ( GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 ) and IsUnitAlly(cjlocgn_00000000, GetOwningPlayer(c)) and c != cjlocgn_00000000 then
set dist=PortalEff___Distance(x , GetUnitX(cjlocgn_00000000) , y , GetUnitY(cjlocgn_00000000))
if dist < min then
set IsThereAlly=true
set min=dist
set target=cjlocgn_00000000
endif
endif
endloop
if not IsThereAlly then
call Error(GetOwningPlayer(c) , "Поблизости нет союзников.")
call PauseUnit(c, true)
call PauseUnit(c, false)
call IssueImmediateOrderById(c, 851972)
else
call s__PortalEff___asairaportal_create(c , target)
endif
set c=null
endfunction
// scope PortalEff ends
function Trig_Winds_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41424657
endfunction
function Winds_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local group gpur=CreateGroup()
local unit dm=LoadUnitHandle(hash, h, 2)
local unit cjlocgn_00000000
call GroupEnumUnitsInRange(gpur, GetUnitX(dm), GetUnitY(dm), 1000, null)
loop
set cjlocgn_00000000=FirstOfGroup(gpur)
exitwhen cjlocgn_00000000 == null
call UnitRemoveBuffBJ(0x42627761, cjlocgn_00000000)
call UnitRemoveBuffBJ(0x42627765, cjlocgn_00000000)
call GroupRemoveUnit(gpur, cjlocgn_00000000)
endloop
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
call DestroyGroup(gpur)
set gpur=null
set dm=null
set t=null
set cjlocgn_00000000=null
endfunction
function Trig_Winds_Actions takes nothing returns nothing
local unit c=GetTriggerUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local unit dm=CreateUnit(GetOwningPlayer(c), 0x68303164, GetSpellTargetX(), GetSpellTargetY(), 0)
local unit effd1
local unit effd2
call UnitAddAbility(dm, 0x41303142)
call UnitAddAbility(dm, 0x41303143)
call UnitApplyTimedLife(dm, 0x42544C46, 6.)
set effd1=CreateUnit(GetOwningPlayer(c), 0x6830314A, GetSpellTargetX(), GetSpellTargetY(), 0)
set effd2=CreateUnit(GetOwningPlayer(c), 0x6830314A, GetSpellTargetX(), GetSpellTargetY(), 90)
call UnitApplyTimedLife(effd2, 0x42544C46, 6.)
call UnitApplyTimedLife(effd1, 0x42544C46, 6.)
call SaveUnitHandle(hash, h, 2, dm)
call TimerStart(t, 6.0, false, function Winds_timer_end)
set c=null
set t=null
set dm=null
set effd2=null
set effd1=null
endfunction
function InitTrig_Winds takes nothing returns nothing
set gg_trg_Winds=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Winds, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Winds, Condition(function Trig_Winds_Conditions))
call TriggerAddAction(gg_trg_Winds, function Trig_Winds_Actions)
endfunction
// scope sub0 begins
function sub0___onSkill takes nothing returns nothing
local unit cjlocgn_00000000
local integer cjlocgn_00000001
if GetLearnedSkill() == 0x41424C30 then
set cjlocgn_00000000=GetLearningUnit()
set cjlocgn_00000001=GetUnitAbilityLevel(cjlocgn_00000000, 0x41424C30)
if GetUnitAbilityLevel(cjlocgn_00000000, 0x4130315A) < 1 then
call UnitAddAbility(cjlocgn_00000000, 0x41533042)
call UnitAddAbility(cjlocgn_00000000, 0x4130315A)
endif
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303230, cjlocgn_00000001)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x4130315A, cjlocgn_00000001)
endif
set cjlocgn_00000000=null
endfunction
function cj_callback_00000031 takes nothing returns nothing
//# optional
local trigger t=CreateTrigger()
local integer l__i=0
loop
exitwhen ( l__i > 15 )
call TriggerRegisterPlayerUnitEvent(t, Player(l__i), EVENT_PLAYER_HERO_SKILL, null)
call SetPlayerAbilityAvailable(Player(l__i), 0x41533042, false)
set l__i=l__i + 1
endloop
call TriggerAddAction(t, function sub0___onSkill)
set t=null
endfunction
// scope sub0 ends
function Trig_h_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41424D53
endfunction
function Trig_h_Actions takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(), 0x4142534C)
call SetUnitAbilityLevel(GetTriggerUnit(), 0x4142534C, GetUnitAbilityLevel(GetTriggerUnit(), 0x41424D53))
call PolledWait(.1)
loop
exitwhen GetUnitAbilityLevel(GetTriggerUnit(), 0x4242534C) == 0
call PolledWait(.1)
endloop
call UnitRemoveAbility(GetTriggerUnit(), 0x4142534C)
endfunction
function InitTrig_Slide takes nothing returns nothing
set gg_trg_Slide=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Slide, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Slide, Condition(function Trig_h_Conditions))
call TriggerAddAction(gg_trg_Slide, function Trig_h_Actions)
endfunction
function Trig_ColdEmbrace_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x41424345
endfunction
function ColdEmbrace_Group_Filter takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Tick_ColdEmbrace takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local group enemyunits=CreateGroup()
local real remain
local effect e
local unit cjlocgn_00000000
local real cjlocgn_00000001
call GroupEnumUnitsInRange(enemyunits, GetUnitX(target), GetUnitY(target), 350., Condition(function ColdEmbrace_Group_Filter))
set remain=LoadReal(hash, h, 3)
set e=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl", caster, "chest")
loop
set cjlocgn_00000000=FirstOfGroup(enemyunits)
exitwhen cjlocgn_00000000 == null
set IsTriggerDamage=true
set cjlocgn_00000001=15. + 5. * GetUnitAbilityLevel(caster, 0x41424345)
call UnitDamageTarget(caster, cjlocgn_00000000, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", cjlocgn_00000000, "origin"))
call GroupRemoveUnit(enemyunits, cjlocgn_00000000)
endloop
call DestroyEffect(e)
if ( remain > 0 ) and ( GetUnitState(caster, UNIT_STATE_LIFE) > 0.405 ) then
set remain=remain - .3
call SaveReal(hash, h, 3, remain)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
call DestroyGroup(enemyunits)
set Timer=null
set caster=null
set target=null
set cjlocgn_00000000=null
set e=null
set enemyunits=null
endfunction
function Trig_ColdEmbrace_Actions takes nothing returns nothing
local unit caster
local unit target
local real remain=10.
local timer Timer
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set target=GetSpellTargetUnit()
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, remain)
call TimerStart(Timer, .3, true, function Tick_ColdEmbrace)
set caster=null
set target=null
set Timer=null
endfunction
function InitTrig_ColdEmbrace takes nothing returns nothing
set gg_trg_ColdEmbrace=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ColdEmbrace, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_ColdEmbrace, Condition(function Trig_ColdEmbrace_Conds2))
call TriggerAddAction(gg_trg_ColdEmbrace, function Trig_ColdEmbrace_Actions)
endfunction
function Trig_Enfektsia_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x4143495A
endfunction
function Group_Filter takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Tick_Enfektsia takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local unit dm=LoadUnitHandle(hash, h, 4)
local group enemyunits
local real remain
local unit cjlocgn_00000000
local real cjlocgn_00000001
call SetUnitX(dm, GetUnitX(target))
call SetUnitY(dm, GetUnitY(target))
set enemyunits=CreateGroup()
call GroupEnumUnitsInRange(enemyunits, GetUnitX(target), GetUnitY(target), 250., Condition(function Group_Filter))
set remain=LoadReal(hash, h, 3)
loop
set cjlocgn_00000000=FirstOfGroup(enemyunits)
exitwhen cjlocgn_00000000 == null
set IsTriggerDamage=true
set cjlocgn_00000001=6. + 9. * GetUnitAbilityLevel(caster, 0x4143495A)
call UnitDamageTarget(caster, cjlocgn_00000000, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
call GroupRemoveUnit(enemyunits, cjlocgn_00000000)
endloop
if remain > 0 then
set remain=remain - .5
call SaveReal(hash, h, 3, remain)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
call DestroyGroup(enemyunits)
set dm=null
set Timer=null
set caster=null
set target=null
set cjlocgn_00000000=null
set enemyunits=null
endfunction
function Trig_Enfektsia_Actions takes nothing returns nothing
local unit caster
local unit target
local unit dm
local real remain=5.
local timer Timer
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set target=GetSpellTargetUnit()
set dm=CreateUnit(GetOwningPlayer(caster), 0x6830314C, GetUnitX(target), GetUnitY(target), 0)
call UnitApplyTimedLife(dm, 0x42544C46, 5)
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, remain)
call SaveUnitHandle(hash, h, 4, dm)
call TimerStart(Timer, .5, true, function Tick_Enfektsia)
set dm=null
set caster=null
set target=null
set Timer=null
endfunction
function InitTrig_Enfektsia takes nothing returns nothing
set gg_trg_Enfektsia=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Enfektsia, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Enfektsia, Condition(function Trig_Enfektsia_Conds2))
call TriggerAddAction(gg_trg_Enfektsia, function Trig_Enfektsia_Actions)
endfunction
function Trig_SummonLimit_Conditions takes nothing returns boolean
local integer id=GetUnitTypeId(GetSummonedUnit())
return ( id == 0x6E637A31 ) or ( id == 0x6E637A32 ) or ( id == 0x6E637A33 ) or ( id == 0x6E637A34 ) or ( id == 0x6E637A35 )
endfunction
function Trig_SummonLimit_Actions takes nothing returns nothing
local unit caster=GetSummoningUnit()
local player owner=GetOwningPlayer(caster)
local unit zom=GetSummonedUnit()
local real hp=GetUnitState(zom, UNIT_STATE_MAX_LIFE) - GetUnitState(zom, UNIT_STATE_MAX_LIFE)
local integer id
local group g
local group gr
local integer l__i=2
local unit f
loop
exitwhen hp <= 0
if hp > 100 then
set hp=hp - 100
call UnitAddAbility(zom, 0x41303234)
call SetUnitAbilityLevel(zom, 0x41303234, 2)
call UnitRemoveAbility(zom, 0x41303234)
else
if hp > 10 then
set hp=hp - ( 10 )
call UnitAddAbility(zom, 0x41303234)
call SetUnitAbilityLevel(zom, 0x41303234, 3)
call UnitRemoveAbility(zom, 0x41303234)
else
set hp=hp - 1
call UnitAddAbility(zom, 0x41303234)
call SetUnitAbilityLevel(zom, 0x41303234, 4)
call UnitRemoveAbility(zom, 0x41303234)
endif
endif
endloop
set id=GetUnitTypeId(zom)
set g=ALL_DestroyGroup(ALL_GetUnitsOfPlayerAndTypeId(owner , 0x6E637A31))
loop
set gr=ALL_DestroyGroup(ALL_GetUnitsOfPlayerAndTypeId(owner , 0x6E637A31 + ( l__i - 1 )))
set bj_wantDestroyGroup=true
call GroupAddGroup(gr, g)
exitwhen l__i >= 5
set l__i=l__i + 1
endloop
loop
set f=FirstOfGroup(g)
exitwhen f == null
if ( f != zom ) and ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) then
call KillUnit(f)
endif
call GroupRemoveUnit(g, f)
endloop
call DestroyGroup(g)
set f=null
set g=null
set zom=null
set caster=null
set gr=null
endfunction
function InitTrig_SummonLimit takes nothing returns nothing
local integer index=0
set gg_trg_SummonLimit=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(gg_trg_SummonLimit, Player(index), EVENT_PLAYER_UNIT_SUMMON, null)
set index=index + 1
exitwhen index == bj_MAX_PLAYER_SLOTS
endloop
call TriggerAddCondition(gg_trg_SummonLimit, Condition(function Trig_SummonLimit_Conditions))
call TriggerAddAction(gg_trg_SummonLimit, function Trig_SummonLimit_Actions)
endfunction
function Trig_Zombre_Groupcond takes nothing returns boolean
local integer id=GetUnitTypeId(GetFilterUnit())
return ( id == 0x6E637A31 ) or ( id == 0x6E637A32 ) or ( id == 0x6E637A33 ) or ( id == 0x6E637A34 ) or ( id == 0x6E637A35 )
endfunction
function Trig_Zombre_group_act takes nothing returns nothing
local unit u=GetEnumUnit()
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + ( GetUnitState(u, UNIT_STATE_MAX_LIFE) * .3 ))
set u=null
endfunction
function Trig_Zombre_Lifesteal_Actions takes nothing returns nothing
local location loc
if IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) or GetUnitAbilityLevel(GetDyingUnit(), 0x416C6F63) > 0 then
return
endif
set bj_wantDestroyGroup=true
set loc=ALL_RemoveLocation(GetUnitLoc(GetDyingUnit()))
call ForGroupBJ(ALL_DestroyGroup(ALL_GetUnitsInRangeOfLocMatching(400.00 , loc , Condition(function Trig_Zombre_Groupcond))), function Trig_Zombre_group_act)
call RemoveLocation(loc)
set loc=null
endfunction
function InitTrig_Zombre_Lifesteal takes nothing returns nothing
local integer index=0
set gg_trg_Zombre_Lifesteal=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(gg_trg_Zombre_Lifesteal, Player(index), EVENT_PLAYER_UNIT_DEATH, null)
set index=index + 1
exitwhen index == bj_MAX_PLAYER_SLOTS
endloop
call TriggerAddAction(gg_trg_Zombre_Lifesteal, function Trig_Zombre_Lifesteal_Actions)
endfunction
function Trig_Cobra_Ulty_Conditions takes nothing returns boolean
return GetTriggerEventId() != EVENT_PLAYER_UNIT_ISSUED_ORDER or ( ( OrderId2String(GetIssuedOrderId()) == "immolation" or OrderId2String(GetIssuedOrderId()) == "unimmolation" ) and GetUnitAbilityLevel(GetOrderedUnit(), 0x41303531) > 0 and GetUnitState(GetOrderedUnit(), UNIT_STATE_LIFE) > 0 )
endfunction
function cj_anonym__41 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
local integer cjlocgn_00000000
local real cjlocgn_00000001
if GetUnitState(u, UNIT_STATE_LIFE) >= 110. then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Orc\\Orcblood\\BattrollBlood.mdl", u, "chest"))
set cjlocgn_00000000=( GetUnitAbilityLevel(u, 0x41303531) - 1 )
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) - ( 50. + 25. * cjlocgn_00000000 ))
set cjlocgn_00000001=60. + 35. * cjlocgn_00000000
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + cjlocgn_00000001)
endif
endfunction
function Trig_Cobra_Ulty_Actions takes nothing returns nothing
local unit u=GetOrderedUnit()
local timer cjlocgn_00000000
if OrderId2String(GetIssuedOrderId()) == "immolation" then
set cjlocgn_00000000=CreateTimer()
call SaveTimerHandle(hash, GetHandleId(u), 0x41303531, cjlocgn_00000000)
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000000), 0, u)
call TimerStart(cjlocgn_00000000, 0.8, true, function cj_anonym__41)
else
set cjlocgn_00000000=LoadTimerHandle(hash, GetHandleId(u), 0x41303531)
call PauseTimer(cjlocgn_00000000)
call FlushChildHashtable(hash, GetHandleId(cjlocgn_00000000))
call DestroyTimer(cjlocgn_00000000)
endif
set cjlocgn_00000000=null
set u=null
endfunction
function InitTrig_Cobra_Ulty takes nothing returns nothing
set gg_trg_Cobra_Ulty=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Cobra_Ulty, EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_Cobra_Ulty, Condition(function Trig_Cobra_Ulty_Conditions))
call TriggerAddAction(gg_trg_Cobra_Ulty, function Trig_Cobra_Ulty_Actions)
endfunction
function Trig_Manasteal_Conditions takes nothing returns boolean
return not IsTriggerDamage and not udg_IsDamageSpell and not IsUnitIllusion(udg_DamageEventSource) and GetUnitAbilityLevel(udg_DamageEventSource, 0x41444D45) > 0
endfunction
function Trig_Manasteal_Actions takes nothing returns nothing
local real mana
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\ManaDrainTarget.mdl", udg_DamageEventSource, "origin"))
set mana=10 + 5 * ( GetUnitAbilityLevel(udg_DamageEventSource, 0x41444D45) - 1 )
if ( GetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA) >= mana ) then
call SetUnitState(udg_DamageEventSource, UNIT_STATE_MANA, GetUnitState(udg_DamageEventSource, UNIT_STATE_MANA) + mana)
call SetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA, GetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA) - mana)
else
call SetUnitState(udg_DamageEventSource, UNIT_STATE_MANA, GetUnitState(udg_DamageEventSource, UNIT_STATE_MANA) + GetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA))
call SetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA, GetUnitState(udg_DamageEventTarget, UNIT_STATE_MANA) - mana)
endif
endfunction
function InitTrig_Manasteal takes nothing returns nothing
set gg_trg_Manasteal=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_Manasteal, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_Manasteal, Condition(function Trig_Manasteal_Conditions))
call TriggerAddAction(gg_trg_Manasteal, function Trig_Manasteal_Actions)
endfunction
function trig_Cloud_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41444341
endfunction
function c_group_cond takes nothing returns boolean
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
set v_t=null
set cj_v666_boolean=IsPlayerEnemy(GetOwningPlayer(caster), GetOwningPlayer(GetFilterUnit())) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) )
set caster=null
return cj_v666_boolean
endfunction
function c_group_dmging takes nothing returns nothing
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
local unit target=GetEnumUnit()
local integer lvl=GetUnitAbilityLevel(caster, 0x41444341)
local real dmg
set IsTriggerDamage=true
set dmg=30. + lvl * 50.
call UnitDamageTarget(caster, target, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
set v_t=null
set caster=null
set target=null
endfunction
function cloud_timer_end takes nothing returns nothing
local timer v_t=GetExpiredTimer()
local integer h=GetHandleId(v_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local player owner=GetOwningPlayer(caster)
local real t_x=GetUnitX(caster)
local real t_y=GetUnitY(caster)
local group enemyunits=CreateGroup()
local unit dummy
call AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", t_x, t_y)
set FilTimer=v_t
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, 250, Filter(function c_group_cond))
call ForGroup(enemyunits, function c_group_dmging)
set dummy=CreateUnit(owner, 0x68303164, t_x, t_y, 0)
call UnitAddAbility(dummy, 0x41444443)
call SetUnitAbilityLevel(dummy, 0x41444443, GetUnitAbilityLevel(caster, 0x41444341))
call IssuePointOrder(dummy, "silence", t_x, t_y)
call UnitApplyTimedLife(dummy, 0x42544C46, 1)
call DestroyGroup(enemyunits)
call DestroyTimer(v_t)
set enemyunits=null
set caster=null
set dummy=null
set v_t=null
endfunction
function Trig_Cloud_Actions takes nothing returns nothing
local unit caster
local player owner
local timer v_t
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set owner=GetOwningPlayer(caster)
set v_t=CreateTimer()
set h=GetHandleId(v_t)
call SaveUnitHandle(hash, h, 1, caster)
call TimerStart(v_t, 0.01, false, function cloud_timer_end)
set caster=null
set v_t=null
endfunction
function InitTrig_Cloud takes nothing returns nothing
set gg_trg_Cloud=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Cloud, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Cloud, Condition(function trig_Cloud_conditions))
call TriggerAddAction(gg_trg_Cloud, function Trig_Cloud_Actions)
endfunction
// scope burrow begins
function trig_CloudL_conditions takes nothing returns boolean
return GetLearnedSkill() == 0x41444C48
endfunction
function Trig_CloudL_Actions takes nothing returns nothing
local unit t=GetLearningUnit()
if GetUnitAbilityLevel(t, 0x41444C48) > 1 then
call SetUnitAbilityLevel(t, 0x41303654, GetUnitAbilityLevel(t, 0x41444C48))
else
call UnitAddAbility(t, 0x41303654)
call UnitMakeAbilityPermanent(t, true, 0x41303654)
endif
set t=null
endfunction
function trig_Burrow_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41303654
endfunction
function Unburrow takes nothing returns nothing
local timer time=GetExpiredTimer()
local integer h=GetHandleId(time)
local unit t=LoadUnitHandle(hash, h, 1)
local real x=LoadReal(hash, h, 2)
local real y=LoadReal(hash, h, 3)
call SetUnitX(t, x)
call SetUnitY(t, y)
if GetUnitTypeId(t) == 0x48303051 then
call SetUnitAnimationByIndex(t, 9)
elseif GetUnitTypeId(t) == 0x48303053 then
call SetUnitAnimationByIndex(t, 10)
endif
call PauseUnit(t, false)
call SetUnitInvulnerable(t, false)
set t=null
set time=null
endfunction
function Trig_Burrow_Actions takes nothing returns nothing
local unit t=GetTriggerUnit()
local timer time
local integer l__i
call SetUnitInvulnerable(t, true)
if GetUnitTypeId(t) == 0x48303051 then
call SetUnitAnimationByIndex(t, 7)
elseif GetUnitTypeId(t) == 0x48303053 then
call SetUnitAnimationByIndex(t, 8)
endif
call PauseUnit(t, true)
if GetUnitTypeId(t) == 0x48303051 then
call SetUnitAnimationByIndex(t, 8)
elseif GetUnitTypeId(t) == 0x48303053 then
call SetUnitAnimationByIndex(t, 9)
endif
set time=CreateTimer()
set l__i=GetHandleId(time)
call SaveUnitHandle(hash, l__i, 1, t)
call SaveReal(hash, l__i, 2, GetSpellTargetX())
call SaveReal(hash, l__i, 3, GetSpellTargetY())
call TimerStart(time, 2., false, function Unburrow)
set time=null
set t=null
endfunction
function cj_callback_00000032 takes nothing returns nothing
//# optional
local trigger trg1
set gg_trg_HitinLearn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HitinLearn, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_HitinLearn, Condition(function trig_CloudL_conditions))
call TriggerAddAction(gg_trg_HitinLearn, function Trig_CloudL_Actions)
set trg1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg1, Condition(function trig_Burrow_conditions))
call TriggerAddAction(trg1, function Trig_Burrow_Actions)
endfunction
// scope burrow ends
// scope hitin begins
function hitin___Hitin_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
call CastSpellOnTargetTimed(c , c , 0x41303732 , 1 , "bloodlust" , 3.5)
if false then
call DamageTarget(c , c , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set c=null
set t=null
endfunction
function hitin_damaged takes nothing returns nothing
local unit u=udg_DamageEventTarget
local real shield=LoadReal(hash, GetHandleId(u), 0x41444C48)
if GetUnitAbilityLevel(u, 0x42303244) == 0 then
if shield != 0. then
call SaveReal(hash, GetHandleId(u), 0x41444C48, 0)
call CastSpellOnTargetTimed(u , u , 0x41303732 , 1 , "bloodlust" , 3.5)
if false then
call DamageTarget(u , u , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endif
set u=null
return
endif
if shield > 0 then
call BJDebugMsg("Do hp = " + R2S(GetUnitState(u, UNIT_STATE_LIFE)) + "   shield = " + R2S(shield))
if udg_DamageEventAmount <= shield then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", u, "origin"))
set shield=shield - ( udg_DamageEventAmount )
call BJDebugMsg("Осталось " + R2S(shield))
set udg_DamageEventAmount=0
call BJDebugMsg("Нанесено" + R2S(udg_DamageEventAmount))
else
call UnitRemoveAbility(u, 0x42303244)
set udg_DamageEventAmount=udg_DamageEventAmount - ( shield )
set shield=0
call BJDebugMsg("shield is over")
call CastSpellOnTargetTimed(u , u , 0x41303732 , 1 , "bloodlust" , 3.5)
if false then
call DamageTarget(u , u , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endif
call BJDebugMsg("Posle hp = " + R2S(GetUnitState(u, UNIT_STATE_LIFE)) + "   shield = " + R2S(shield))
call SaveReal(hash, GetHandleId(u), 0x41444C48, shield)
else
call SaveReal(hash, GetHandleId(u), 0x41444C48, 0)
call UnitRemoveAbility(u, 0x42303244)
call BJDebugMsg("shield is over")
call CastSpellOnTargetTimed(u , u , 0x41303732 , 1 , "bloodlust" , 3.5)
if false then
call DamageTarget(u , u , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endif
set u=null
endfunction
function cj_callback_00000033 takes nothing returns nothing
//# optional
local unit c=GetSpellAbilityUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local real lvl=GetUnitAbilityLevel(c, 0x41444C48)
local real shiamount
local integer l
call SaveUnitHandle(hash, h, 1, c)
call UnitRemoveBuffs(c, false, true)
call CastSpellOnTargetTimed(c , c , 0x41303731 , 1 , "innerfire" , 3.5)
if false then
call DamageTarget(c , c , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
set shiamount=100. + 50 * ( lvl - 1 )
call BJDebugMsg("shield amount" + R2S(shiamount))
set l=GetHandleId(c)
call SaveReal(hash, l, 0x41444C48, shiamount)
call TimerStart(t, 4.01, false, function hitin___Hitin_timer_end)
set c=null
set t=null
endfunction
function cj_callback_00000034 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function hitin_damaged)
endfunction
// scope hitin ends
function Trig_Reap_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41444D4D
endfunction
function Reap_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
call UnitRemoveBuffBJ(0x42444D4D, c)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set c=null
set t=null
endfunction
function Trig_Reap_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local player pl=GetOwningPlayer(c)
local unit d=CreateUnit(pl, 0x68303164, GetUnitX(c), GetUnitY(c), 0)
call UnitAddAbility(d, 0x41444D42)
call SetUnitAbilityLevel(d, 0x41444D42, GetUnitAbilityLevel(c, 0x41444D4D))
call IssueTargetOrder(d, "bloodlust", c)
call UnitApplyTimedLife(d, 0x42544C46, 1.5)
call SaveUnitHandle(hash, h, 1, c)
call TimerStart(t, 20.7, false, function Reap_timer_end)
set c=null
set pl=null
set d=null
set t=null
endfunction
function InitTrig_Reap takes nothing returns nothing
set gg_trg_Reap=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Reap, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Reap, Condition(function Trig_Reap_Conditions))
call TriggerAddAction(gg_trg_Reap, function Trig_Reap_Actions)
set hash=InitHashtable()
endfunction
function Trig_FMULTY_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x41467555
endfunction
function FUGroup_Filter takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Tick_FMULTY takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local unit dm=CreateUnit(GetOwningPlayer(caster), 0x68303257, GetUnitX(target), GetUnitY(target), 0)
local group enemyunits
local real remain
local integer lvl
local real dmg
local unit cjlocgn_00000000
local unit cjlocgn_00000001
call UnitApplyTimedLife(dm, 0x42544C46, 2)
set enemyunits=CreateGroup()
call GroupEnumUnitsInRange(enemyunits, GetUnitX(target), GetUnitY(target), 400., Condition(function FUGroup_Filter))
set remain=LoadReal(hash, h, 3)
set lvl=GetUnitAbilityLevel(caster, 0x41467555)
set dmg=GetUnitStateSwap(UNIT_STATE_MAX_LIFE, caster) * ( 0.05 + 0.02 * ( lvl - 1 ) )
call BJDebugMsg("fmu tick")
loop
set cjlocgn_00000000=FirstOfGroup(enemyunits)
exitwhen cjlocgn_00000000 == null
set IsTriggerDamage=true
call UnitDamageTarget(caster, cjlocgn_00000000, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 0)
call UnitAddAbility(cjlocgn_00000001, 0x41667573)
call SetUnitAbilityLevel(cjlocgn_00000001, 0x41667573, 1)
call IssueTargetOrder(cjlocgn_00000001, "thunderbolt", cjlocgn_00000000)
call UnitApplyTimedLife(cjlocgn_00000001, 0x42544C46, 2.5)
call GroupRemoveUnit(enemyunits, cjlocgn_00000000)
endloop
if remain > 0 then
set remain=remain - 2.
call SaveReal(hash, h, 3, remain)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
call DestroyGroup(enemyunits)
set Timer=null
set caster=null
set target=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
set enemyunits=null
set dm=null
endfunction
function Trig_FMULTY_Actions takes nothing returns nothing
local unit caster
local unit target
local real remain=4.
local unit debdm
local timer Timer
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set target=GetSpellTargetUnit()
set debdm=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(target), GetUnitY(target), 0)
call UnitAddAbility(debdm, 0x41303235)
call SetUnitAbilityLevel(debdm, 0x41303235, 1)
call IssueTargetOrder(debdm, "cripple", target)
call UnitApplyTimedLife(debdm, 0x42544C46, 2.5)
call BJDebugMsg("хх")
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, remain)
call TimerStart(Timer, 2., true, function Tick_FMULTY)
set caster=null
set target=null
set Timer=null
set debdm=null
endfunction
function InitTrig_FMULTY takes nothing returns nothing
set gg_trg_FMULTY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_FMULTY, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_FMULTY, Condition(function Trig_FMULTY_Conds2))
call TriggerAddAction(gg_trg_FMULTY, function Trig_FMULTY_Actions)
endfunction
function Trig_FHEXPL_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41666865
endfunction
function FHEXPL_timer_end takes nothing returns nothing
local timer tt=GetExpiredTimer()
local integer h=GetHandleId(tt)
local effect eff=LoadEffectHandle(hash, h, 2)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local unit caster=LoadUnitHandle(hash, h, 1)
local integer lvl=GetUnitAbilityLevel(caster, 0x41666865)
local real dmg=GetUnitState(caster, UNIT_STATE_MAX_LIFE) / 3 + 30. + lvl * 1.
local unit cjlocgn_00000000
call GroupEnumUnitsInRange(cjgrfgn_00000016, t_x, t_y, ( 350. + 30. * GetUnitAbilityLevel(caster, 0x41666865) ), null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000016)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000016, cjlocgn_00000000)
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(caster)) and GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > 0 and not ( IsUnitType(cjlocgn_00000000, UNIT_TYPE_STRUCTURE) ) then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl", GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000)))
set IsTriggerDamage=true
call UnitDamageTarget(caster, cjlocgn_00000000, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_DIVINE, null)
set IsTriggerDamage=false
endif
endloop
call FlushChildHashtable(hash, h)
call DestroyEffect(eff)
call DestroyTimer(tt)
set eff=null
set tt=null
set caster=null
endfunction
function Trig_FH_Expl_Actions takes nothing returns nothing
local unit caster
local real t_x
local real t_y
local timer tt
local integer h
local effect eff
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set t_x=GetSpellTargetX()
set t_y=GetSpellTargetY()
set tt=CreateTimer()
set h=GetHandleId(tt)
set eff=AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonSmallDeathExplode\\DemonSmallDeathExplode.mdl", t_x, t_y)
call SaveUnitHandle(hash, h, 1, caster)
call SaveEffectHandle(hash, h, 2, eff)
call SaveReal(hash, h, 3, t_x)
call SaveReal(hash, h, 4, t_y)
call TimerStart(tt, .35, false, function FHEXPL_timer_end)
set eff=null
set caster=null
set tt=null
endfunction
function InitTrig_FH_EXPL takes nothing returns nothing
local trigger trg=CreateTrigger()
local integer cjlocgn_00000000=0
call TriggerAddAction(trg, function Trig_FH_Expl_Actions)
loop
exitwhen not ( cjlocgn_00000000 < 15 )
call TriggerRegisterPlayerUnitEvent(trg, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddCondition(trg, Condition(function Trig_FHEXPL_Conditions))
set trg=null
endfunction
function Hou_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41464D48
endfunction
function Hou_Actions takes nothing returns nothing
local unit caster=GetTriggerUnit()
local player plown=GetOwningPlayer(caster)
local real trx=GetUnitX(caster)
local real try=GetUnitY(caster)
local real duration=40.
local unit hou1
local unit hou2
local real f=GetUnitFacing(caster)
local integer lvl_dogs=GetUnitAbilityLevel(caster, 0x41464D48)
local integer lvl_spasm=GetUnitAbilityLevel(caster, 0x41464D53)
local real hp
call UnitDamageTarget(caster, caster, GetUnitState(caster, UNIT_STATE_LIFE) / 5, false, false, null, DAMAGE_TYPE_MAGIC, null)
set hou1=CreateUnit(plown, 0x6E464831 + ( lvl_dogs - 1 ), trx + Cos(Deg2Rad(f) - bj_PI / 2) * 50., try + Sin(Deg2Rad(f) - bj_PI / 2) * 50., f)
set hou2=CreateUnit(plown, 0x6E464831 + ( lvl_dogs - 1 ), trx + Cos(Deg2Rad(f) + bj_PI / 2) * 50., try + Sin(Deg2Rad(f) + bj_PI / 2) * 50., f)
if lvl_dogs >= 3 then
call UnitAddAbility(hou1, 0x41666873)
call SetUnitAbilityLevel(hou1, 0x41666873, lvl_spasm)
call UnitAddAbility(hou2, 0x41666873)
call SetUnitAbilityLevel(hou2, 0x41666873, lvl_spasm)
endif
set hp=GetUnitState(caster, UNIT_STATE_MAX_LIFE) * 0.09
loop
exitwhen hp <= 0
if hp > 100 then
set hp=hp - 100
call UnitAddAbility(hou1, 0x41303234)
call UnitAddAbility(hou2, 0x41303234)
call SetUnitAbilityLevel(hou1, 0x41303234, 2)
call SetUnitAbilityLevel(hou2, 0x41303234, 2)
call UnitRemoveAbility(hou1, 0x41303234)
call UnitRemoveAbility(hou2, 0x41303234)
else
if hp > 10 then
set hp=hp - ( 10 )
call UnitAddAbility(hou1, 0x41303234)
call UnitAddAbility(hou2, 0x41303234)
call SetUnitAbilityLevel(hou1, 0x41303234, 3)
call SetUnitAbilityLevel(hou2, 0x41303234, 3)
call UnitRemoveAbility(hou1, 0x41303234)
call UnitRemoveAbility(hou2, 0x41303234)
else
set hp=hp - 1
call UnitAddAbility(hou1, 0x41303234)
call UnitAddAbility(hou2, 0x41303234)
call SetUnitAbilityLevel(hou1, 0x41303234, 4)
call SetUnitAbilityLevel(hou2, 0x41303234, 4)
call UnitRemoveAbility(hou1, 0x41303234)
call UnitRemoveAbility(hou2, 0x41303234)
endif
endif
endloop
call UnitApplyTimedLife(hou1, 0x42544C46, duration)
call UnitApplyTimedLife(hou2, 0x42544C46, duration)
set caster=null
set hou1=null
set hou2=null
endfunction
function InitTrig_Hou takes nothing returns nothing
set gg_trg_Hou=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Hou, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Hou, Condition(function Hou_Conditions))
call TriggerAddAction(gg_trg_Hou, function Hou_Actions)
endfunction
function FC_Actions takes nothing returns nothing
local unit FM=GetKillingUnit()
local unit dead=GetDyingUnit()
local integer idu=GetUnitTypeId(dead)
local integer lvl
local boolean isFM
local group g=CreateGroup()
local unit cjlocgn_00000000
local real cjlocgn_00000001
local real cjlocgn_00000002
call GroupEnumUnitsOfPlayer(g, GetOwningPlayer(FM), null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_00000017
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000017)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000017, cjlocgn_00000000)
set lvl=GetUnitAbilityLevel(cjlocgn_00000000, 0x41464D30)
if ( lvl > 0 ) then
set isFM=true
set FM=cjlocgn_00000000
exitwhen true
endif
endloop
call GroupClear(g)
call DestroyGroup(g)
if isFM and ( udg_fmcsam < 100 ) and not IsUnitIllusion(dead) and GetUnitTypeId(dead) != 0x65626262 and not ( IsUnitType(dead, UNIT_TYPE_STRUCTURE) ) then
set cjlocgn_00000001=GetUnitState(FM, UNIT_STATE_MAX_LIFE)
set cjlocgn_00000002=GetUnitState(dead, UNIT_STATE_MAX_LIFE)
if idu == 0x68303034 or idu == 0x68303153 or idu == 0x68303033 or idu == 0x68303152 or idu == 0x68303032 or idu == 0x68303154 or idu == 0x68303031 or idu == 0x68303151 then
set udg_CCollect=udg_CCollect + ( RMinBJ(cjlocgn_00000002 / cjlocgn_00000001, 1) * ( cjlocgn_00000002 / 20 + 1 ) * 0.125 * SquareRoot(lvl + 1) / SquareRoot(udg_fmcsam + 1) )
call BJDebugMsg(R2S(udg_CCollect))
else
set udg_CCollect=udg_CCollect + ( RMinBJ(cjlocgn_00000002 / cjlocgn_00000001, 1.5) * ( cjlocgn_00000002 / 17 + 1 ) * 0.25 * SquareRoot(lvl + 1) / SquareRoot(udg_fmcsam + 1) )
call BJDebugMsg(R2S(udg_CCollect))
endif
if udg_CCollect >= 1 then
loop
exitwhen udg_CCollect < 1
set udg_fmcsam=udg_fmcsam + 1
call SetHeroStr(FM, GetHeroStr(FM, false) + 1, true)
set udg_CCollect=udg_CCollect - 1
endloop
if GetLocalPlayer() == GetOwningPlayer(FM) then
call DisplayTimedTextToPlayer(GetOwningPlayer(FM), 0., 0., 5., "Накоплено " + I2S(udg_fmcsam) + " силы")
endif
if udg_CCollect > 100 then
set udg_CCollect=100
endif
endif
endif
set FM=null
set dead=null
set g=null
endfunction
function InitTrig_FC takes nothing returns nothing
set gg_trg_FC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_FC, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_FC, function FC_Actions)
endfunction
function FMD_Actions takes nothing returns nothing
local unit FM=GetTriggerUnit()
local integer lvl=GetUnitAbilityLevel(FM, 0x41464D30)
local integer cjlocgn_00000000
if lvl > 0 then
set cjlocgn_00000000=R2I(udg_fmcsam * ( 0.9 - 0.07 * ( lvl - 1 ) ))
set udg_fmcsam=udg_fmcsam - cjlocgn_00000000
call SetHeroStr(FM, GetHeroStr(FM, false) - cjlocgn_00000000, true)
if GetLocalPlayer() == GetOwningPlayer(FM) then
call DisplayTimedTextToPlayer(GetOwningPlayer(FM), 0., 0., 5., "Осталось " + I2S(udg_fmcsam) + " силы")
endif
endif
set FM=null
endfunction
function InitTrig_FMD takes nothing returns nothing
local integer index=0
set gg_trg_FMD=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(gg_trg_FMD, Player(index), EVENT_PLAYER_HERO_REVIVE_FINISH, null)
set index=index + 1
exitwhen index == bj_MAX_PLAYER_SLOTS
endloop
call TriggerAddAction(gg_trg_FMD, function FMD_Actions)
endfunction
function Trig_Spasm_Conditions takes nothing returns boolean
return ( GetSpellAbilityId() == 0x41464D53 ) or ( GetSpellAbilityId() == 0x41666873 )
endfunction
function Trig_Spasm_Actions takes nothing returns nothing
local unit caster
local integer lvl
local real dmg
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
if ( GetSpellAbilityId() == 0x41666873 ) then
set lvl=GetUnitAbilityLevel(caster, 0x41666873)
else
set lvl=GetUnitAbilityLevel(caster, 0x41464D53)
endif
set IsTriggerDamage=true
set dmg=GetUnitState(caster, UNIT_STATE_MAX_LIFE) * 0.04 * ( 1 + lvl )
if IsUnitType(GetSpellTargetUnit(), UNIT_TYPE_HERO) == true then
call UnitDamageTarget(caster, GetSpellTargetUnit(), 2 * dmg / 3, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call UnitDamageTarget(caster, caster, dmg, false, false, null, DAMAGE_TYPE_MAGIC, null)
else
call UnitDamageTarget(caster, GetSpellTargetUnit(), dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call UnitDamageTarget(caster, caster, dmg, false, false, null, DAMAGE_TYPE_MAGIC, null)
endif
set IsTriggerDamage=false
set caster=null
endfunction
function InitTrig_Spasm takes nothing returns nothing
set gg_trg_Spasm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spasm, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Spasm, Condition(function Trig_Spasm_Conditions))
call TriggerAddAction(gg_trg_Spasm, function Trig_Spasm_Actions)
endfunction
function Trig_Spell_MB_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41485541
endfunction
function MB_group_filt takes nothing returns boolean
local timer tt=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(tt), 1)
set tt=null
if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) ) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function BT_T takes nothing returns nothing
local timer BT
local integer bh
local unit dm
local unit caster
local integer Elvl
local real shp
local real cshp
local real nHhp
call BJDebugMsg("ебать колотить")
set BT=GetExpiredTimer()
set bh=GetHandleId(BT)
set dm=LoadUnitHandle(hash, bh, 1)
set caster=LoadUnitHandle(hash, bh, 3)
set Elvl=GetUnitAbilityLevel(caster, 0x41484645)
set shp=LoadReal(hash, bh, 2)
set cshp=GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE)
set nHhp=GetUnitState(caster, UNIT_STATE_LIFE) + ( shp - cshp ) * ( 0.1 + 0.03 * Elvl )
call SetUnitState(caster, UNIT_STATE_LIFE, nHhp)
call RemoveUnit(dm)
set caster=null
set dm=null
set BT=null
endfunction
function MB_group_rootin takes nothing returns nothing
local timer tt=FilTimer
local integer h=GetHandleId(tt)
local unit caster=LoadUnitHandle(hash, h, 1)
local player pl=GetOwningPlayer(caster)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local integer lvl=GetUnitAbilityLevel(caster, 0x41485541)
local real hpstart=GetUnitState(caster, UNIT_STATE_LIFE)
local effect eff=AddSpecialEffect("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit()))
local integer ii=0
local real shp=GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE)
local unit dm
local timer BT
local integer bh
call BJDebugMsg("Было" + R2S(GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE)))
set dm=CreateUnit(pl, 0x48485542, GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit()), 0)
call SetHeroLevel(dm, GetHeroLevel(caster), false)
call UnitAddAbility(dm, 0x41484244)
call SetUnitAbilityLevel(dm, 0x41484244, GetUnitAbilityLevel(caster, 0x41484244))
call UnitAddAbility(dm, 0x41484645)
call SetUnitAbilityLevel(dm, 0x41484645, GetUnitAbilityLevel(caster, 0x41484645))
call BJDebugMsg("Уровень замедляющей пассивки -" + I2S(GetUnitAbilityLevel(dm, 0x41484244)))
loop
exitwhen ii > 5
call UnitAddItemToSlotById(dm, GetItemTypeId(UnitItemInSlot(caster, ii)), ii)
call BJDebugMsg(GetItemName(UnitItemInSlot(dm, ii)))
set ii=ii + 1
endloop
call IssueTargetOrder(dm, "attackonce", GetEnumUnit())
set BT=CreateTimer()
set bh=GetHandleId(BT)
call SaveUnitHandle(hash, bh, 1, dm)
call SaveReal(hash, bh, 2, shp)
call SaveUnitHandle(hash, bh, 3, caster)
call TimerStart(BT, 1., false, function BT_T)
call DestroyEffect(eff)
set dm=null
set eff=null
set caster=null
set tt=null
set BT=null
endfunction
function MB_timer_end takes nothing returns nothing
local timer tt=GetExpiredTimer()
local integer h=GetHandleId(tt)
local effect eff=LoadEffectHandle(hash, h, 2)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local unit caster=LoadUnitHandle(hash, h, 1)
local group enemyunits=CreateGroup()
set FilTimer=tt
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, 500., Filter(function MB_group_filt))
call ForGroup(enemyunits, function MB_group_rootin)
call FlushChildHashtable(hash, h)
call DestroyEffect(eff)
call DestroyGroup(enemyunits)
call DestroyTimer(tt)
set enemyunits=null
set eff=null
set tt=null
set caster=null
endfunction
function Trig_MB_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local real t_x=GetSpellTargetX()
local real t_y=GetSpellTargetY()
local timer tt=CreateTimer()
local integer h=GetHandleId(tt)
local effect eff=AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", t_x, t_y)
call SaveUnitHandle(hash, h, 1, caster)
call SaveEffectHandle(hash, h, 2, eff)
call SaveReal(hash, h, 3, t_x)
call SaveReal(hash, h, 4, t_y)
call TimerStart(tt, 0.01, false, function MB_timer_end)
set eff=null
set caster=null
set tt=null
endfunction
function InitTrig_MenstrualBrotherhood takes nothing returns nothing
set gg_trg_MenstrualBrotherhood=CreateTrigger()
call TriggerAddAction(gg_trg_MenstrualBrotherhood, function Trig_MB_Actions)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MenstrualBrotherhood, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_MenstrualBrotherhood, Condition(function Trig_Spell_MB_Conditions))
endfunction
// scope Pir begins
function Pir_Conditions takes nothing returns boolean
return not IsTriggerDamage and not udg_IsDamageSpell and not IsUnitIllusion(udg_DamageEventSource) and GetUnitAbilityLevel(udg_DamageEventSource, 0x41484645) > 0
endfunction
function Pir_Actions takes nothing returns nothing
local real perc=0.13 + 0.03 * ( GetUnitAbilityLevel(udg_DamageEventSource, 0x41484645) - 1 )
if ( GetUnitState(udg_DamageEventTarget, UNIT_STATE_LIFE) >= .405 ) then
call SetUnitState(udg_DamageEventSource, UNIT_STATE_LIFE, GetUnitState(udg_DamageEventSource, UNIT_STATE_LIFE) + udg_DamageEventAmount * perc)
endif
endfunction
function InitTrig_PirshestvoTrig takes nothing returns nothing
set gg_trg_PirshestvoTrig=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_PirshestvoTrig, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_PirshestvoTrig, Condition(function Pir_Conditions))
call TriggerAddAction(gg_trg_PirshestvoTrig, function Pir_Actions)
endfunction
// scope Pir ends
function Trig_BEA_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41484242
endfunction
function BEA_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
local integer rem=LoadInteger(hash, h, 2)
local effect cjlocgn_00000000
if rem > 0 then
set rem=rem - 1
call SaveReal(hash, h, 2, rem)
else
set cjlocgn_00000000=LoadEffectHandle(hash, h, 4)
call DestroyEffect(cjlocgn_00000000)
call PauseTimer(t)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set cjlocgn_00000000=null
endif
set c=null
set t=null
endfunction
function Trig_BEA_Actions takes nothing returns nothing
local unit c=GetSpellTargetUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
local integer rem=5
local effect e=AddSpecialEffect("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", GetUnitX(c), GetUnitY(c))
call SaveUnitHandle(hash, h, 1, c)
call SaveInteger(hash, h, 2, rem)
call SaveEffectHandle(hash, h, 3, e)
call TimerStart(t, 1.0, true, function BEA_timer_end)
set c=null
set t=null
set e=null
endfunction
function InitTrig_BEA takes nothing returns nothing
set gg_trg_BEA=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BEA, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_BEA, Condition(function Trig_BEA_Conditions))
call TriggerAddAction(gg_trg_BEA, function Trig_BEA_Actions)
endfunction
function Trig_Bleeding_anim takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit targ=LoadUnitHandle(hash, h, 0)
local real dur=LoadReal(hash, h, 1)
if ( GetUnitState(targ, UNIT_STATE_LIFE) <= .405 or dur <= 0 ) then
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
else
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", targ, "chest"))
call SaveReal(hash, h, 1, dur - 1.25)
endif
set targ=null
set t=null
endfunction
function Trig_Bleeding_Actions takes nothing returns nothing
local integer lvl=GetUnitAbilityLevel(udg_DamageEventSource, 0x41484244)
local unit a
local unit z
local integer h
local integer dur
local real curh
local real maxh
local unit dm
local timer t
if IsUnitType(udg_DamageEventTarget, UNIT_TYPE_STRUCTURE) or lvl == 0 then
return
endif
set a=udg_DamageEventSource
set z=udg_DamageEventTarget
set h=GetHandleId(z)
set curh=GetUnitState(z, UNIT_STATE_LIFE)
set maxh=GetUnitState(z, UNIT_STATE_MAX_LIFE) * 0.1 * ( 4 + lvl )
if ( curh > maxh ) then
set dur=2
else
set dur=2 + lvl
endif
set dm=CreateUnit(GetOwningPlayer(a), 0x68303164, GetUnitX(z), GetUnitY(z), 0)
call UnitAddAbility(dm, 0x41303249)
call SetUnitAbilityLevel(dm, 0x41303249, dur)
call IssueTargetOrder(dm, "slow", z)
call UnitApplyTimedLife(dm, 0x42544C46, 2.)
set dm=null
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", z, "chest"))
set t=LoadTimerHandle(hash, h, 0x41484244)
if t == null then
set t=CreateTimer()
call SaveTimerHandle(hash, h, 0x41484244, t)
endif
set h=GetHandleId(t)
call SaveUnitHandle(hash, h, 0, z)
call SaveReal(hash, h, 1, I2R(dur))
call TimerStart(t, 1.25, true, function Trig_Bleeding_anim)
set z=null
set a=null
set t=null
endfunction
function InitTrig_Bleeding takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Trig_Bleeding_Actions)
set trg=null
endfunction
function trig_BE_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41484245
endfunction
function b_group_cond takes nothing returns boolean
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
set v_t=null
set cj_v666_boolean=IsPlayerEnemy(GetOwningPlayer(caster), GetOwningPlayer(GetFilterUnit())) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) )
set caster=null
return cj_v666_boolean
endfunction
function b_group_dmging takes nothing returns nothing
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
local unit target=GetEnumUnit()
local integer lvl=GetUnitAbilityLevel(caster, 0x41484245)
local unit dummy=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(target), GetUnitY(target), 0)
local unit dummy1=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(target), GetUnitY(target), 0)
call UnitAddAbility(dummy, 0x41484253)
call UnitAddAbility(dummy1, 0x41484242)
call SetUnitAbilityLevel(dummy1, 0x41484242, lvl)
call IssueTargetOrder(dummy, "thunderbolt", target)
call IssueTargetOrder(dummy1, "acidbomb", target)
call UnitApplyTimedLife(dummy, 0x42544C46, 5.5)
call UnitApplyTimedLife(dummy1, 0x42544C46, 5.5)
set dummy=null
set v_t=null
set caster=null
set target=null
set dummy1=null
endfunction
function BE_timer_end takes nothing returns nothing
local timer v_t=GetExpiredTimer()
local integer h=GetHandleId(v_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local player owner=GetOwningPlayer(caster)
local real t_x=GetUnitX(caster)
local real t_y=GetUnitY(caster)
local group enemyunits=CreateGroup()
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", t_x, t_y))
set FilTimer=v_t
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, ( 300. + 0 * GetUnitAbilityLevel(caster, 0x41484245) ), Filter(function b_group_cond))
call ForGroup(enemyunits, function b_group_dmging)
call DestroyGroup(enemyunits)
call DestroyTimer(v_t)
set enemyunits=null
set caster=null
set v_t=null
endfunction
function Trig_BE_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local player owner=GetOwningPlayer(caster)
local timer v_t=CreateTimer()
local integer h=GetHandleId(v_t)
call SaveUnitHandle(hash, h, 1, caster)
call TimerStart(v_t, 0.5, false, function BE_timer_end)
set caster=null
set v_t=null
endfunction
function InitTrig_BE takes nothing returns nothing
set gg_trg_BE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BE, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_BE, Condition(function trig_BE_conditions))
call TriggerAddAction(gg_trg_BE, function Trig_BE_Actions)
endfunction
function Circ_Conditions takes nothing returns boolean
local unit u=udg_DamageEventSource
set cj_v666_boolean=GetUnitState(u, UNIT_STATE_MANA) >= 8. and not IsTriggerDamage and not udg_IsDamageSpell and GetUnitAbilityLevel(u, 0x4230314D) > 0
set u=null
return cj_v666_boolean
endfunction
function Circ_Actions takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local real dmg
local unit cjlocgn_00000000
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", udg_DamageEventTarget, "origin"))
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - ( 8. + 2. * ( GetUnitAbilityLevel(u, 0x41495141) - 1 ) ))
set dmg=udg_DamageEventAmount * ( 0.4 + 0.13 * ( GetUnitAbilityLevel(u, 0x41495141) - 1 ) )
call GroupEnumUnitsInRange(cjgrfgn_00000018, GetUnitX(u), GetUnitY(u), 350., null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000018)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000018, cjlocgn_00000000)
if cjlocgn_00000000 != t and IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) and IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(u)) then
call DamageTarget(u , cjlocgn_00000000 , dmg , true , ATTACK_TYPE_HERO , DAMAGE_TYPE_NORMAL)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", cjlocgn_00000000, "origin"))
endif
endloop
set t=null
set u=null
endfunction
function InitTrig_Circular_Hits takes nothing returns nothing
set gg_trg_Circular_Hits=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_Circular_Hits, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_Circular_Hits, Condition(function Circ_Conditions))
call TriggerAddAction(gg_trg_Circular_Hits, function Circ_Actions)
endfunction
// scope demonicscream begins
function demonicscream___onTimerEnd takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
local integer agi=LoadInteger(hash, GetHandleId(t), 1)
call SetHeroAgi(u, GetHeroAgi(u, false) + agi, true)
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(t), 2))
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(t), 3))
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
set t=null
endfunction
function cj_callback_00000035 takes nothing returns nothing
//# optional
local unit caster
local real x
local real y
local integer lvl
local real dmg
local timer t
local integer agi
local unit cjlocgn_00000000
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set x=GetUnitX(caster)
set y=GetUnitY(caster)
set lvl=GetUnitAbilityLevel(caster, 0x41495753) - 1
set dmg=80 + ( lvl ) * 80
call GroupEnumUnitsInRange(cjgrfgn_00000019, x, y, 350, null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000019)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000019, cjlocgn_00000000)
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(caster)) and ( GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 ) and not ( IsUnitType(cjlocgn_00000000, UNIT_TYPE_STRUCTURE) ) then
call DamageTarget(caster , cjlocgn_00000000 , dmg , true , ATTACK_TYPE_HERO , DAMAGE_TYPE_NORMAL)
set agi=R2I(GetHeroAgi(cjlocgn_00000000, true) * 0.2 + .5)
call SetHeroAgi(cjlocgn_00000000, GetHeroAgi(cjlocgn_00000000, false) - agi, true)
set t=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(t), 0, cjlocgn_00000000)
call SaveInteger(hash, GetHandleId(t), 1, agi)
call SaveEffectHandle(hash, GetHandleId(t), 2, AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbSlow\\OrbSlow.mdl", cjlocgn_00000000, "left+hand"))
call SaveEffectHandle(hash, GetHandleId(t), 3, AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbSlow\\OrbSlow.mdl", cjlocgn_00000000, "right+hand"))
call TimerStart(t, 5 + 1 * ( lvl ), false, function demonicscream___onTimerEnd)
endif
endloop
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", GetUnitX(caster), GetUnitY(caster)))
set agi=R2I(GetHeroAgi(caster, true) * 0.2 + .5)
call SetHeroAgi(caster, GetHeroAgi(caster, false) + agi, true)
set t=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(t), 0, caster)
call SaveInteger(hash, GetHandleId(t), 1, - agi)
call SaveEffectHandle(hash, GetHandleId(t), 2, AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbSlow\\OrbSlow.mdl", caster, "left+hand"))
call SaveEffectHandle(hash, GetHandleId(t), 3, AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbSlow\\OrbSlow.mdl", caster, "right+hand"))
call TimerStart(t, 5 + 1 * ( lvl ), false, function demonicscream___onTimerEnd)
endfunction
// scope demonicscream ends
// scope thirstyfire begins
function s__thirstyfire___thirstyfire_onUnitCollision takes integer this,unit u returns nothing
local real dmg
local group exploded
local unit t
call GroupAddUnit(s__thirstyfire___thirstyfire_affected[this], u)
set dmg=70. + 50. * ( s__thirstyfire___thirstyfire_level[this] - 1 )
set exploded=CreateGroup()
call GroupEnumUnitsInRange(exploded, s__projectile__get_x(this), s__projectile__get_y(this), 250. + 50. * ( s__thirstyfire___thirstyfire_level[this] - 1 ), null)
set t=FirstOfGroup(exploded)
loop
exitwhen not ( ( t != null ) )
set t=FirstOfGroup(exploded)
if t != s__projectile__get_source(this) and IsUnitEnemy(t, GetOwningPlayer(s__projectile__get_source(this))) and not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and ( GetUnitState(t, UNIT_STATE_LIFE) > .405 ) then
call DamageTarget(s__projectile__get_source(this) , t , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
call GroupRemoveUnit(exploded, t)
endloop
call DestroyGroup(exploded)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", GetUnitX(s__projectile_toUnit[this]), GetUnitY(s__projectile_toUnit[this])))
call SetUnitPosition(s__projectile__get_source(this), s__projectile__get_x(this), s__projectile__get_y(this))
call SetUnitFacing(s__projectile__get_source(this), Rad2Deg(Atan2(GetUnitY(u) - s__projectile__get_y(this), GetUnitX(u) - s__projectile__get_x(this))))
call IssueTargetOrderById(s__projectile__get_source(this), 851983, u)
call sc__projectileinterface_deallocate(this)
set t=null
set exploded=null
endfunction
function s__thirstyfire___thirstyfire_isValidTargetUnit takes integer this,unit u returns boolean
return s__thirstyfire___thirstyfire_affected[this] != null and FirstOfGroup(s__thirstyfire___thirstyfire_affected[this]) == null and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__thirstyfire___thirstyfire_onDestroy takes integer this returns nothing
call DestroyGroup(s__thirstyfire___thirstyfire_affected[this])
set s__thirstyfire___thirstyfire_affected[this]=null
endfunction
function s__thirstyfire___thirstyfire_create takes unit u,integer level,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__thirstyfire___thirstyfire__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call s__projectile_setModel(d,modelpath)
set s__thirstyfire___thirstyfire_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__thirstyfire___thirstyfire_level[d]=level
call s__projectile__set_collision(d,85.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000036 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x41495446)
local real distance=800. + ( level - 1 ) * 100.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 80.)
set G=s__thirstyfire___thirstyfire_create(source , level , distance , 1000. , A , B , "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope thirstyfire ends
function trig_IHB_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41494842
endfunction
function IHB_group_cond takes nothing returns boolean
local timer gr_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(gr_t), 1)
set gr_t=null
set cj_v666_boolean=IsPlayerEnemy(GetOwningPlayer(caster), GetOwningPlayer(GetFilterUnit())) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) )
set caster=null
return cj_v666_boolean
endfunction
function invt_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit caster=LoadUnitHandle(hash, h, 1)
local effect e=LoadEffectHandle(hash, h, 3)
call DestroyEffect(e)
call SetUnitInvulnerable(caster, false)
set caster=null
set e=null
set t=null
endfunction
function IHB_timer_end takes nothing returns nothing
local timer IHB_t=GetExpiredTimer()
local integer h=GetHandleId(IHB_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local player owner=GetOwningPlayer(caster)
local real t_x=GetUnitX(caster)
local real t_y=GetUnitY(caster)
local effect e=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationTarget.mdl", caster, "origin")
local group enemyunits=CreateGroup()
local integer lvl=GetUnitAbilityLevel(caster, 0x41494842)
local real fac=0
local unit cjlocgn_00000000
local timer invt
local integer ih
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, 350, Filter(function IHB_group_cond))
loop
set cjlocgn_00000000=FirstOfGroup(enemyunits)
exitwhen cjlocgn_00000000 == null
set fac=fac + 0.5
call GroupRemoveUnit(enemyunits, cjlocgn_00000000)
endloop
set invt=CreateTimer()
set ih=GetHandleId(invt)
call SetUnitInvulnerable(caster, true)
call SaveUnitHandle(hash, ih, 1, caster)
call SaveEffectHandle(hash, ih, 3, e)
call TimerStart(invt, 1 + 1 * lvl + fac, false, function invt_end)
call BJDebugMsg("Длительность ульты Иллариуса - " + R2S(1 + 1 * lvl + fac))
call DestroyGroup(enemyunits)
call DestroyTimer(IHB_t)
set enemyunits=null
set caster=null
set IHB_t=null
set invt=null
set cjlocgn_00000000=null
set e=null
endfunction
function Trig_IHB_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local player owner=GetOwningPlayer(caster)
local timer IHB_t=CreateTimer()
local integer h=GetHandleId(IHB_t)
call SaveUnitHandle(hash, h, 1, caster)
call TimerStart(IHB_t, 0.0, false, function IHB_timer_end)
set caster=null
set IHB_t=null
endfunction
function InitTrig_HuntBegin takes nothing returns nothing
set gg_trg_HuntBegin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HuntBegin, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_HuntBegin, Condition(function trig_IHB_conditions))
call TriggerAddAction(gg_trg_HuntBegin, function Trig_IHB_Actions)
endfunction
// scope latanelka begins
function s__latanelka___leftarrow_onTimer takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__latanelka___leftarrow_count )
set this=s__latanelka___leftarrow_me[cjlocgn_00000000]
set s__latanelka___leftarrow_remain[this]=s__latanelka___leftarrow_remain[this] - ( .2 )
if s__latanelka___leftarrow_remain[this] <= 0. then
call sc__latanelka___leftarrow_deallocate(this)
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__latanelka___leftarrow_onDestroy takes integer this returns nothing
local integer l__i
call DestroyEffect(s__latanelka___leftarrow_eff[this])
call RemoveUnit(s__latanelka___leftarrow_u[this])
set l__i=s__latanelka___leftarrow_index[this]
set s__latanelka___leftarrow_count=s__latanelka___leftarrow_count - 1
set s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]=s__latanelka___leftarrow_me[s__latanelka___leftarrow_count]
set s__latanelka___leftarrow_index[s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]]=s__latanelka___leftarrow_index[this]
if s__latanelka___leftarrow_count == 0 then
call DestroyTimer(s__latanelka___leftarrow_time)
endif
endfunction

//Generated destructor of latanelka___leftarrow
function s__latanelka___leftarrow_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: latanelka___leftarrow")
        return
    elseif (si__latanelka___leftarrow_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: latanelka___leftarrow")
        return
    endif
    call s__latanelka___leftarrow_onDestroy(this)
    set si__latanelka___leftarrow_V[this]=si__latanelka___leftarrow_F
    set si__latanelka___leftarrow_F=this
endfunction
function s__latanelka___leftarrow_Find takes unit target returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__latanelka___leftarrow_count )
if s__latanelka___leftarrow_u[s__latanelka___leftarrow_me[cjlocgn_00000000]] == target then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__latanelka___leftarrow_create takes unit target returns integer
local integer l__i=s__latanelka___leftarrow_Find(target)
local integer this
local integer cjlocgn_00000000
if l__i != - 1 then
set this=s__latanelka___leftarrow_me[l__i]
set s__latanelka___leftarrow_remain[this]=4.
return this
endif
set this=s__latanelka___leftarrow__allocate()
set s__latanelka___leftarrow_remain[this]=4.
set s__latanelka___leftarrow_u[this]=target
set s__latanelka___leftarrow_eff[this]=AddSpecialEffectTarget("abilities\\weapons\\huntermissile\\huntermissile.mdl", s__latanelka___leftarrow_u[this], "origin")
if s__latanelka___leftarrow_count == 0 then
set s__latanelka___leftarrow_time=CreateTimer()
call TimerStart(s__latanelka___leftarrow_time, .2, true, function s__latanelka___leftarrow_onTimer)
endif
if s__latanelka___leftarrow_count > 24 then
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 8 )
call s__latanelka___leftarrow_deallocate(s__latanelka___leftarrow_me[cjlocgn_00000000])
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endif
set s__latanelka___leftarrow_index[this]=s__latanelka___leftarrow_count
set s__latanelka___leftarrow_me[s__latanelka___leftarrow_count]=this
set s__latanelka___leftarrow_count=s__latanelka___leftarrow_count + 1
return this
endfunction
function s__latanelka___lataarrowproj_onUnitCollision takes integer this,unit u returns nothing
call DamageTarget(s__projectile__get_source(this) , u , s__latanelka___lataarrowproj_dmg[this] , true , ATTACK_TYPE_HERO , DAMAGE_TYPE_NORMAL)
if s__latanelka___lataarrowproj_arf_factor[this] == 0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", u, "origin"))
elseif s__latanelka___lataarrowproj_arf_factor[this] == 1 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", u, "origin"))
endif
call DestroyEffect(s__latanelka___lataarrowproj_additionaleff[this])
call sc__projectileinterface_deallocate(this)
endfunction
function s__latanelka___lataarrowproj_isValidTargetUnit takes integer this,unit u returns boolean
return s__projectile__get_target(this) == u and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u))
endfunction
function s__latanelka___lataarrowproj_onDestroy takes integer this returns nothing
call DestroyEffect(s__latanelka___lataarrowproj_additionaleff[this])
if not s__latanelka___lataarrowproj_targeted[this] then
call s__latanelka___leftarrow_create(s__projectile_toUnit[this])
endif
endfunction
function s__latanelka___lataarrowproj_create takes integer spellfactor,real size,unit u,real dmg,unit target,real speed,real arc,integer startVector,integer endVector,string modelpath,string addmdlpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__latanelka___lataarrowproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
if size != 1 then
call SetUnitScale(s__projectile_toUnit[d], size, size, size)
endif
call s__projectile_setModel(d,modelpath)
set s__latanelka___lataarrowproj_additionaleff[d]=AddSpecialEffectTarget(addmdlpath, s__projectile_toUnit[d], "origin")
call s__projectile__set_source(d,u)
set s__latanelka___lataarrowproj_targeted[d]=target != null
if s__latanelka___lataarrowproj_targeted[d] then
call s__projectile__set_target(d,target)
set s__projectile_activeTargetFollow[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
else
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
endif
set s__latanelka___lataarrowproj_dmg[d]=dmg
set s__latanelka___lataarrowproj_arf_factor[d]=spellfactor
set s__projectile_activeZcollision[d]=true
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
call s__projectile_launch(d,startVector , endVector , speed , arc)
return d
endfunction
function s__arrfallspell_onDamageTake takes nothing returns nothing
local unit source=GetEventDamageSource()
local unit target=GetTriggerUnit()
local integer l__i
local integer this
local real cjlocgn_00000000
local real cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
local integer cjlocgn_00000005
local integer cjlocgn_00000006
local group cjlocgn_00000007
local unit cjlocgn_00000008
local integer cjlocgn_00000009
local integer cjlocgn_0000000a
local real cjlocgn_0000000b
local real cjlocgn_0000000c
local integer cjlocgn_0000000d
if IsTriggerDamage or udg_IsDamageSpell or GetUnitAbilityLevel(source, 0x414C4146) == 0 or GetUnitTypeId(target) != 0x68303164 then
set target=null
set source=null
return
endif
set l__i=sc__arrfallspell_Find(source)
if l__i != - 1 then
set this=s__arrfallspell_me[l__i]
set cjlocgn_00000000=GetEventDamage()
set cjlocgn_00000001=GetUnitX(s__arrfallspell_faketarget[this])
set cjlocgn_00000002=GetUnitY(s__arrfallspell_faketarget[this])
set cjlocgn_00000007=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_00000007, s__arrfallspell_x[this], s__arrfallspell_y[this], 340., null)
set cjlocgn_00000009=0
loop
set cjlocgn_00000008=FirstOfGroup(cjlocgn_00000007)
exitwhen cjlocgn_00000008 == null
if IsUnitEnemy(cjlocgn_00000008, GetOwningPlayer(source)) and ( GetUnitState(cjlocgn_00000008, UNIT_STATE_LIFE) > .405 ) and not IsUnitType(cjlocgn_00000008, UNIT_TYPE_STRUCTURE) then
set cjlocgn_00000005=s__vector_create(cjlocgn_00000001 , cjlocgn_00000002 , GetTerrainZ(cjlocgn_00000001 , cjlocgn_00000002) + GetUnitFlyHeight(s__arrfallspell_faketarget[this]) + 0.)
set cjlocgn_00000003=GetUnitX(cjlocgn_00000008)
set cjlocgn_00000004=GetUnitY(cjlocgn_00000008)
set cjlocgn_00000006=s__vector_create(cjlocgn_00000003 , cjlocgn_00000004 , GetTerrainZ(cjlocgn_00000003 , cjlocgn_00000004) + GetUnitFlyHeight(cjlocgn_00000008) + 0.)
set cjlocgn_0000000a=s__latanelka___lataarrowproj_create(0 , 0.65 , source , cjlocgn_00000000 , cjlocgn_00000008 , 800. , .3 , cjlocgn_00000005 , cjlocgn_00000006 , "abilities\\weapons\\huntermissile\\huntermissile.mdl" , "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
call s__vector_deallocate(cjlocgn_00000005)
call s__vector_deallocate(cjlocgn_00000006)
set cjlocgn_00000009=cjlocgn_00000009 + 1
endif
call GroupRemoveUnit(cjlocgn_00000007, cjlocgn_00000008)
endloop
if cjlocgn_00000009 < 5 then
set cjlocgn_0000000d=0
loop
exitwhen not ( cjlocgn_0000000d < 5 - cjlocgn_00000009 )
set cjlocgn_00000005=s__vector_create(cjlocgn_00000001 , cjlocgn_00000002 , GetTerrainZ(cjlocgn_00000001 , cjlocgn_00000002) + GetUnitFlyHeight(s__arrfallspell_faketarget[this]) + 0.)
set cjlocgn_0000000b=GetRandomReal(0., 340.)
set cjlocgn_0000000c=GetRandomReal(0., 2 * bj_PI)
set cjlocgn_00000003=GetUnitX(s__arrfallspell_arrowmark[this]) + cjlocgn_0000000b * Cos(cjlocgn_0000000c)
set cjlocgn_00000004=GetUnitY(s__arrfallspell_arrowmark[this]) + cjlocgn_0000000b * Sin(cjlocgn_0000000c)
set cjlocgn_00000006=s__vector_create(cjlocgn_00000003 , cjlocgn_00000004 , GetTerrainZ(cjlocgn_00000003 , cjlocgn_00000004))
set cjlocgn_0000000a=s__latanelka___lataarrowproj_create(0 , 0.65 , source , 0. , null , 800. , .3 , cjlocgn_00000005 , cjlocgn_00000006 , "abilities\\weapons\\huntermissile\\huntermissile.mdl" , "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
call s__vector_deallocate(cjlocgn_00000005)
call s__vector_deallocate(cjlocgn_00000006)
set cjlocgn_0000000d=cjlocgn_0000000d + 1
endloop
endif
endif
set cjlocgn_00000008=null
set cjlocgn_00000007=null
set target=null
set source=null
endfunction
function s__arrfallspell_Interrupt takes nothing returns nothing
local unit source=GetOrderedUnit()
local integer l__i
local integer this
if GetUnitAbilityLevel(source, 0x414C4146) == 0 then
set source=null
return
endif
set l__i=sc__arrfallspell_Find(source)
if l__i != - 1 then
set this=s__arrfallspell_me[l__i]
if not s__arrfallspell_doingcast[this] then
call sc__arrfallspell_deallocate(this)
endif
endif
set source=null
endfunction
function s__arrfallspell_Find takes unit s returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < s__arrfallspell_count ) )
if ( s__arrfallspell_source[s__arrfallspell_me[l__i]] == s ) then
return l__i
endif
set l__i=l__i + 1
endloop
return - 1
endfunction
function s__arrfallspell_onDestroy takes integer this returns nothing
local integer cjlocgn_00000000=0
local integer l__i
call DestroyFogModifier(s__arrfallspell_ontarget[this])
call DestroyFogModifier(s__arrfallspell_onmark[this])
call KillUnit(s__arrfallspell_arrowmark[this])
call KillUnit(s__arrfallspell_faketarget[this])
loop
exitwhen not ( cjlocgn_00000000 < 6 )
call DestroyEffect(s___arrfallspell_bordermdl[s__arrfallspell_bordermdl[this]+cjlocgn_00000000])
call KillUnit(s___arrfallspell_border[s__arrfallspell_border[this]+cjlocgn_00000000])
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set l__i=s__arrfallspell_index[this]
set s__arrfallspell_count=s__arrfallspell_count - 1
set s__arrfallspell_me[s__arrfallspell_index[this]]=s__arrfallspell_me[s__arrfallspell_count]
set s__arrfallspell_index[s__arrfallspell_me[s__arrfallspell_index[this]]]=s__arrfallspell_index[this]
endfunction

//Generated destructor of arrfallspell
function s__arrfallspell_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: arrfallspell")
        return
    elseif (si__arrfallspell_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: arrfallspell")
        return
    endif
    call s__arrfallspell_onDestroy(this)
    set si__arrfallspell_V[this]=si__arrfallspell_F
    set si__arrfallspell_F=this
endfunction
function s__arrfallspell_ScaleChange takes nothing returns nothing
local string str=GetEventPlayerChatString()
local integer len=StringLength(str)
local real size=S2R(SubString(str, 11, len))
local integer cjlocgn_00000000
local integer cjlocgn_00000001
if SubString(str, 6, 10) == "luna" then
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__arrfallspell_count )
set cjlocgn_00000001=0
loop
exitwhen not ( cjlocgn_00000001 < 6 )
call SetUnitScale(s___arrfallspell_border[s__arrfallspell_border[s__arrfallspell_me[cjlocgn_00000000]]+cjlocgn_00000001], size, size, size)
set cjlocgn_00000001=cjlocgn_00000001 + 1
endloop
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
elseif SubString(str, 6, 10) == "circ" then
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__arrfallspell_count )
call SetUnitScale(s__arrfallspell_arrowmark[s__arrfallspell_me[cjlocgn_00000000]], size, size, size)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endif
endfunction
function s__arrfallspell_IssueAttackDummy takes unit source returns nothing
local integer l__i=s__arrfallspell_Find(source)
local integer this
if l__i != - 1 then
set this=s__arrfallspell_me[l__i]
set s__arrfallspell_finished[this]=true
call IssueTargetOrderById(source, 851983, s__arrfallspell_faketarget[this])
set s__arrfallspell_doingcast[this]=false
endif
endfunction
function s__arrfallspell_CheckCast takes unit source returns nothing
local integer l__i=s__arrfallspell_Find(source)
local integer this
if l__i != - 1 then
set this=s__arrfallspell_me[l__i]
if not s__arrfallspell_finished[this] then
call s__arrfallspell_deallocate(this)
endif
endif
endfunction
function s__arrfallspell_create takes unit s,integer level,real x,real y,unit fake returns integer
local integer k=s__arrfallspell_Find(s)
local integer this
local location loc
local real dist
local real alpha
local real arc
local real height
local real maxdist
local real xs
local real ys
local real aft
local real xft
local real yft
local real q
local real w
local integer cjlocgn_00000000=0
local trigger cjlocgn_00000001
if k != - 1 then
call s__arrfallspell_deallocate(s__arrfallspell_me[k])
endif
set this=s__arrfallspell__allocate()
set s__arrfallspell_source[this]=s
set s__arrfallspell_level[this]=level
set s__arrfallspell_doingcast[this]=true
set s__arrfallspell_finished[this]=false
set s__arrfallspell_x[this]=x
set s__arrfallspell_y[this]=y
set loc=Location(x, y)
set s__arrfallspell_onmark[this]=CreateFogModifierRadiusLoc(GetOwningPlayer(s), FOG_OF_WAR_VISIBLE, loc, 340. + 50., true, true)
call FogModifierStart(s__arrfallspell_onmark[this])
set s__arrfallspell_arrowmark[this]=CreateUnit(GetOwningPlayer(s), 0x68303164, x, y, 0.)
call AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\TrueshotAura\\TrueshotAura.mdl", s__arrfallspell_arrowmark[this], "origin")
call SetUnitScale(s__arrfallspell_arrowmark[this], 5., 5., 5.)
set xs=GetUnitX(s)
set ys=GetUnitY(s)
set maxdist=SquareRoot(( x - xs ) * ( x - xs ) + ( y - ys ) * ( y - ys ))
set dist=maxdist * 0.4
if dist > 600. then
set dist=600.
endif
set alpha=bj_PI / 6 * ( Pow(bj_E, - dist / ( 600. / 3 )) + 2 )
set arc=.3
set height=1200. * Sin(alpha) * Sin(alpha) / ( 8 * arc )
set aft=Atan2(y - ys, x - xs)
set xft=xs + dist * Cos(aft)
set yft=ys + dist * Sin(aft)
call MoveLocation(loc, xft, yft)
set s__arrfallspell_ontarget[this]=CreateFogModifierRadiusLoc(GetOwningPlayer(s), FOG_OF_WAR_VISIBLE, loc, 100., false, false)
call FogModifierStart(s__arrfallspell_ontarget[this])
call RemoveLocation(loc)
set s__arrfallspell_faketarget[this]=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 0x68303164, xft, yft, 0.)
call UnitRemoveAbility(s__arrfallspell_faketarget[this], 0x416C6F63)
call UnitAddAbility(s__arrfallspell_faketarget[this], 0x416D7266)
call UnitRemoveAbility(s__arrfallspell_faketarget[this], 0x416D7266)
call SetUnitFlyHeight(s__arrfallspell_faketarget[this], height, 0.)
call IssueImmediateOrderById(s__arrfallspell_faketarget[this], 851993)
loop
exitwhen not ( cjlocgn_00000000 < 6 )
set q=x + 340. * Cos(( 2 * bj_PI / 6 ) * cjlocgn_00000000)
set w=y + 340. * Sin(( 2 * bj_PI / 6 ) * cjlocgn_00000000)
set s___arrfallspell_border[s__arrfallspell_border[this]+cjlocgn_00000000]=CreateUnit(GetOwningPlayer(s), 0x68303164, q, w, 0)
set s___arrfallspell_bordermdl[s__arrfallspell_bordermdl[this]+cjlocgn_00000000]=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl", s___arrfallspell_border[s__arrfallspell_border[this]+cjlocgn_00000000], "origin")
call SetUnitScale(s___arrfallspell_border[s__arrfallspell_border[this]+cjlocgn_00000000], 0.5, 0.5, 0.5)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
if ( not s__arrfallspell_allocated ) then
set cjlocgn_00000001=CreateTrigger()
call TriggerRegisterPlayerChatEvent(cjlocgn_00000001, Player(0), "scale ", false)
call TriggerAddAction(cjlocgn_00000001, function s__arrfallspell_ScaleChange)
set s__arrfallspell_damagetaketrig=CreateTrigger()
call TriggerRegisterVariableEvent(s__arrfallspell_damagetaketrig, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(s__arrfallspell_damagetaketrig, function s__arrfallspell_onDamageTake)
set s__arrfallspell_interrupttrig=CreateTrigger()
set cjlocgn_00000000=0
loop
exitwhen not ( ( cjlocgn_00000000 < 15 ) )
call TriggerRegisterPlayerUnitEvent(s__arrfallspell_interrupttrig, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER, null)
call TriggerRegisterPlayerUnitEvent(s__arrfallspell_interrupttrig, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER, null)
call TriggerRegisterPlayerUnitEvent(s__arrfallspell_interrupttrig, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER, null)
call TriggerRegisterPlayerUnitEvent(s__arrfallspell_interrupttrig, Player(cjlocgn_00000000), EVENT_PLAYER_UNIT_ISSUED_ORDER, null)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call TriggerAddAction(s__arrfallspell_interrupttrig, function s__arrfallspell_Interrupt)
set s__arrfallspell_allocated=true
endif
call TriggerRegisterUnitEvent(s__arrfallspell_damagetaketrig, s__arrfallspell_faketarget[this], EVENT_UNIT_DAMAGED)
set s__arrfallspell_index[this]=s__arrfallspell_count
set s__arrfallspell_me[s__arrfallspell_count]=this
set s__arrfallspell_count=s__arrfallspell_count + 1
set cjlocgn_00000001=null
set loc=null
return this
endfunction
function cj_callback_00000037 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer G=s__arrfallspell_create(source , GetUnitAbilityLevel(source, 0x414C4146) , x , y , null)
endfunction
function cj_callback_00000038 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
call s__arrfallspell_IssueAttackDummy(source)
endfunction
function cj_callback_00000039 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
call s__arrfallspell_CheckCast(source)
endfunction
function onRicochet takes nothing returns nothing
local unit source=udg_DamageEventSource
local unit target=udg_DamageEventTarget
local integer level=GetUnitAbilityLevel(source, 0x414C5249)
local real dmg=udg_DamageEventAmount * ( .4 + .1 * ( level - 1 ) )
local real x=GetUnitX(target)
local real y=GetUnitY(target)
local real xt
local real yt
local real min
local unit array toWhom
local real array mindist
local integer l__i=0
local integer cjlocgn_00000000=0
local unit cjlocgn_00000001
local integer cjlocgn_00000002
local integer cjlocgn_00000003
loop
exitwhen not ( cjlocgn_00000000 < 2 )
set mindist[cjlocgn_00000000]=500. + 1.
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call GroupEnumUnitsInRange(cjgrfgn_0000001a, x, y, 500., null)
loop
set cjlocgn_00000001=FirstOfGroup(cjgrfgn_0000001a)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjgrfgn_0000001a, cjlocgn_00000001)
if cjlocgn_00000001 != target and ( GetUnitState(cjlocgn_00000001, UNIT_STATE_LIFE) > .405 ) and GetUnitAbilityLevel(cjlocgn_00000001, 0x416C6F63) == 0 and ( GetUnitAbilityLevel(cjlocgn_00000001, 0x4176756C) == 0 or not IsUnitInvulnerable(cjlocgn_00000001) ) and not IsUnitType(cjlocgn_00000001, UNIT_TYPE_STRUCTURE) and IsUnitEnemy(cjlocgn_00000001, GetOwningPlayer(source)) and IsUnitVisible(cjlocgn_00000001, GetOwningPlayer(source)) then
set xt=GetUnitX(cjlocgn_00000001)
set yt=GetUnitY(cjlocgn_00000001)
set min=SquareRoot(( xt - x ) * ( xt - x ) + ( yt - y ) * ( yt - y ))
set l__i=0
loop
exitwhen not ( ( l__i < 2 ) )
if min < mindist[l__i] then
set cjlocgn_00000000=2 - l__i - 1
loop
exitwhen not ( cjlocgn_00000000 > 0 )
set toWhom[cjlocgn_00000000]=toWhom[cjlocgn_00000000 - 1]
set mindist[cjlocgn_00000000]=mindist[cjlocgn_00000000 - 1]
set cjlocgn_00000000=cjlocgn_00000000 - 1
endloop
set mindist[l__i]=min
set toWhom[l__i]=cjlocgn_00000001
exitwhen true
endif
set l__i=l__i + 1
endloop
endif
endloop
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 2 )
if toWhom[cjlocgn_00000000] != null then
set cjlocgn_00000002=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set xt=GetUnitX(toWhom[cjlocgn_00000000])
set yt=GetUnitY(toWhom[cjlocgn_00000000])
set cjlocgn_00000003=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(toWhom[cjlocgn_00000000]) + 80.)
call sx__latanelka___lataarrowproj_create(1 , 1. , source , dmg , toWhom[cjlocgn_00000000] , 800. , .1 , cjlocgn_00000002 , cjlocgn_00000003 , "abilities\\weapons\\huntermissile\\huntermissile.mdl" , "")
call s__vector_deallocate(cjlocgn_00000002)
call s__vector_deallocate(cjlocgn_00000003)
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set target=null
set source=null
endfunction
function onTrigger takes nothing returns nothing
local unit source=udg_DamageEventSource
local unit target=udg_DamageEventTarget
if not IsTriggerDamage and not udg_IsDamageSpell and ( GetUnitAbilityLevel(source, 0x414C5249) > 0 ) then
call sc___prototype1_evaluate(12)
endif
set target=null
set source=null
endfunction
function cj_callback_0000003a takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function onTrigger)
endfunction
// scope latanelka ends
// scope latablinktrap begins
function s__latablinktrap___trap_ExplodeFilter takes unit utrap,unit filter returns boolean
return IsUnitEnemy(filter, GetOwningPlayer(utrap)) and not IsUnitType(filter, UNIT_TYPE_MAGIC_IMMUNE) and GetUnitAbilityLevel(filter, 0x416C6F63) == 0 and not IsUnitType(filter, UNIT_TYPE_STRUCTURE)
endfunction
function s__latablinktrap___trap_latablinktrap___EnsnareUnits takes integer this returns nothing
local real dmg=50. + 0. * ( s__latablinktrap___trap_level[this] - 1 )
local group g=CreateGroup()
local unit f
local unit cjlocgn_00000000
call GroupEnumUnitsInRange(g, GetUnitX(s__latablinktrap___trap_latablinktrap___trap[this]), GetUnitY(s__latablinktrap___trap_latablinktrap___trap[this]), 250., null)
loop
set f=FirstOfGroup(g)
exitwhen f == null
call GroupRemoveUnit(g, f)
if ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and s__latablinktrap___trap_ExplodeFilter(f , s__latablinktrap___trap_latablinktrap___trap[this]) then
call DamageTarget(s__latablinktrap___trap_source[this] , f , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(s__latablinktrap___trap_source[this]), 0x68303164, GetUnitX(f), GetUnitY(f), 0.)
call UnitAddAbility(cjlocgn_00000000, 0x414C4265)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x414C4265, s__latablinktrap___trap_level[this])
call IssueTargetOrder(cjlocgn_00000000, "ensnare", f)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 0.5)
set cjlocgn_00000000=null
endif
endloop
call KillUnit(s__latablinktrap___trap_latablinktrap___trap[this])
call DestroyGroup(g)
call sc__latablinktrap___trap_deallocate(this)
set f=null
set g=null
endfunction
function s__latablinktrap___trap_onLifeTimerTick takes nothing returns nothing
local integer l__i=0
local integer this
local group g=CreateGroup()
local unit f
loop
exitwhen not ( ( l__i < s__latablinktrap___trap_count ) )
set this=s__latablinktrap___trap_me[l__i]
if s__latablinktrap___trap_activated[this] then
if ( GetUnitState(s__latablinktrap___trap_latablinktrap___trap[this], UNIT_STATE_LIFE) > .405 ) and s__latablinktrap___trap_latablinktrap___trap[this] != null then
set s__latablinktrap___trap_lifetime[this]=s__latablinktrap___trap_lifetime[this] - ( .1 )
if s__latablinktrap___trap_lifetime[this] >= 0. then
call GroupEnumUnitsInRange(g, GetUnitX(s__latablinktrap___trap_latablinktrap___trap[this]), GetUnitY(s__latablinktrap___trap_latablinktrap___trap[this]), 100., null)
loop
set f=FirstOfGroup(g)
exitwhen f == null
call GroupRemoveUnit(g, f)
if ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and f != s__latablinktrap___trap_latablinktrap___trap[this] then
if s__latablinktrap___trap_ExplodeFilter(s__latablinktrap___trap_latablinktrap___trap[this] , f) and not s__latablinktrap___trap_exploded[this] then
call s__latablinktrap___trap_latablinktrap___EnsnareUnits(this)
set s__latablinktrap___trap_exploded[this]=true
endif
endif
endloop
else
call sc__latablinktrap___trap_deallocate(this)
endif
else
call sc__latablinktrap___trap_deallocate(this)
endif
endif
set l__i=l__i + 1
endloop
call DestroyGroup(g)
set f=null
set g=null
endfunction
function s__latablinktrap___trap_ActivateTrap takes nothing returns nothing
local integer l__i=0
local integer this
local boolean oppot2pause=true
local string cjlocgn_00000000
loop
exitwhen not ( ( l__i < s__latablinktrap___trap_count ) )
set this=s__latablinktrap___trap_me[l__i]
if not s__latablinktrap___trap_activated[this] then
set s__latablinktrap___trap_activatetime[this]=s__latablinktrap___trap_activatetime[this] - ( 0.1 )
set oppot2pause=false
if s__latablinktrap___trap_activatetime[this] <= 0 then
set s__latablinktrap___trap_activated[this]=true
set cjlocgn_00000000=""
if IsPlayerAlly(GetLocalPlayer(), GetOwningPlayer(s__latablinktrap___trap_latablinktrap___trap[this])) then
set cjlocgn_00000000="Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl"
endif
set s__latablinktrap___trap_effectactive[this]=AddSpecialEffectZ(cjlocgn_00000000 , GetUnitX(s__latablinktrap___trap_latablinktrap___trap[this]) , GetUnitY(s__latablinktrap___trap_latablinktrap___trap[this]) , 100.)
endif
endif
set this=0
set l__i=l__i + 1
endloop
if oppot2pause then
call PauseTimer(GetExpiredTimer())
endif
endfunction
function s__latablinktrap___trap_onDestroy takes integer this returns nothing
local integer l__i
call DestroyEffect(s__latablinktrap___trap_effectactive[this])
set l__i=s__latablinktrap___trap_index[this]
set s__latablinktrap___trap_count=s__latablinktrap___trap_count - 1
set s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]=s__latablinktrap___trap_me[s__latablinktrap___trap_count]
set s__latablinktrap___trap_index[s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]]=s__latablinktrap___trap_index[this]
if s__latablinktrap___trap_count == 0 then
call DestroyTimer(s__latablinktrap___trap_lifetimer)
call DestroyTimer(s__latablinktrap___trap_activatetimer)
endif
endfunction

//Generated destructor of latablinktrap___trap
function s__latablinktrap___trap_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: latablinktrap___trap")
        return
    elseif (si__latablinktrap___trap_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: latablinktrap___trap")
        return
    endif
    call s__latablinktrap___trap_onDestroy(this)
    set si__latablinktrap___trap_V[this]=si__latablinktrap___trap_F
    set si__latablinktrap___trap_F=this
endfunction
function s__latablinktrap___trap_create takes unit u,integer lvl returns integer
local integer this=s__latablinktrap___trap__allocate()
set s__latablinktrap___trap_source[this]=u
set s__latablinktrap___trap_level[this]=lvl
set s__latablinktrap___trap_latablinktrap___trap[this]=CreateUnit(GetOwningPlayer(u), 0x686C7472, GetUnitX(u), GetUnitY(u), 0)
call UnitApplyTimedLife(s__latablinktrap___trap_latablinktrap___trap[this], 0x42544C46, 8. + 2.)
set s__latablinktrap___trap_lifetime[this]=8.
set s__latablinktrap___trap_activatetime[this]=2.
set s__latablinktrap___trap_index[this]=s__latablinktrap___trap_count
if s__latablinktrap___trap_count == 0 then
set s__latablinktrap___trap_lifetimer=CreateTimer()
set s__latablinktrap___trap_activatetimer=CreateTimer()
call TimerStart(s__latablinktrap___trap_lifetimer, 0.1, true, function s__latablinktrap___trap_onLifeTimerTick)
call TimerStart(s__latablinktrap___trap_activatetimer, 0.1, true, function s__latablinktrap___trap_ActivateTrap)
endif
if s__latablinktrap___trap_activatetimer != null then
call PauseTimer(s__latablinktrap___trap_activatetimer)
call TimerStart(s__latablinktrap___trap_activatetimer, 0.1, true, function s__latablinktrap___trap_ActivateTrap)
endif
set s__latablinktrap___trap_me[s__latablinktrap___trap_count]=this
set s__latablinktrap___trap_count=s__latablinktrap___trap_count + 1
return this
endfunction
function s__latablinktrap___trap_onInit takes nothing returns nothing
endfunction
function s__latadash_onTimerTick takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl", u, "origin"))
set u=null
set t=null
endfunction
function s__latadash_onFinish takes integer this returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl", s__projectile__get_source(this), "origin"))
call FlushChildHashtable(hash, GetHandleId(s__latadash_efft[this]))
call DestroyTimer(s__latadash_efft[this])
endfunction
function s__latadash_create takes unit u,integer level,real dist,integer startVector,integer endVector,string modelpath returns integer
local integer d=s__latadash__allocate(u)
local real speed=dist / .5
set s__latadash_efft[d]=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(s__latadash_efft[d]), 0, u)
call TimerStart(s__latadash_efft[d], 0.1, true, function s__latadash_onTimerTick)
call s__projectile__set_source(d,u)
set s__latadash_level[d]=level
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
call s__projectile_launch(d,startVector , endVector , speed , 0.)
call SetUnitAnimation(u, "walk")
return d
endfunction
function cj_callback_0000003b takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x4130334E)
local real distance=250 + 50 * ( level - 1 )
local integer A
local integer B
local integer G
local integer T
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source))
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source))
set G=s__latadash_create(source , level , distance , A , B , "Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl")
set T=s__latablinktrap___trap_create(source , level)
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope latablinktrap ends
// scope latanet begins
function s__lnetproj_onUnitCollision takes integer this,unit u returns nothing
call GroupAddUnit(s__lnetproj_affected[this], u)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , u , 0x41737473 , s__lnetproj_level[this] , "entanglingroots" , 3.5)
endfunction
function s__lnetproj_isValidTargetUnit takes integer this,unit u returns boolean
return not IsUnitInGroup(u, s__lnetproj_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__lnetproj_onFinish takes integer this returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
call sc__projectileinterface_deallocate(this)
endfunction
function s__lnetproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__lnetproj_affected[this])
set s__lnetproj_affected[this]=null
endfunction
function s__lnetproj_create takes unit u,integer level,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real ang=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__lnetproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(ang)))
call s__projectile_setModel(d,modelpath)
set s__lnetproj_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__lnetproj_level[d]=level
call s__projectile__set_collision(d,100.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=false
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_0000003c takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x41535474)
local real distance=700. + 200. * ( level - 1 )
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 70.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 70.)
set G=s__lnetproj_create(source , level , distance , 1300. , A , B , "Abilities\\Spells\\Orc\\Ensnare\\EnsnareMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set source=null
endfunction
// scope latanet ends
// scope Magrondusspells begins
function s__Magrondusspells___Magr_onCreate takes integer this returns nothing
endfunction
function s__Magrondusspells___Magr_create takes unit u returns integer
local integer a=s__Magrondusspells___Magr__allocate()
set s__Magrondusspells___Magr_Un[a]=u
set s__Magrondusspells___Magr_ttag[a]=CreateTextTag()
set s__Magrondusspells___Magr_tagtimer[a]=CreateTimer()
set s__Magrondusspells___Magr_stacktimer[a]=CreateTimer()
set s__Magrondusspells___Magr_stacks[a]=0
set s__Magrondusspells___Magr_Num=s__Magrondusspells___Magr_Num + 1
return a
endfunction
function s__Magrondusspells___Magr_make0 takes unit u returns integer
local integer a=s__Magrondusspells___Magr__allocate()
set s__Magrondusspells___Magr_Un[a]=u
set s__Magrondusspells___Magr_ttag[a]=CreateTextTag()
set s__Magrondusspells___Magr_tagtimer[a]=CreateTimer()
set s__Magrondusspells___Magr_stacktimer[a]=CreateTimer()
set s__Magrondusspells___Magr_stacks[a]=0
return a
endfunction
function s__Magrondusspells___Magr_flush takes integer this returns nothing
set s__Magrondusspells___Magr_Un[this]=null
set s__Magrondusspells___Magr_ttag[this]=null
set s__Magrondusspells___Magr_tagtimer[this]=null
set s__Magrondusspells___Magr_stacktimer[this]=null
set s__Magrondusspells___Magr_stacks[this]=0
endfunction
function s__Magrondusspells___Magr_destr takes integer this returns nothing
set s__Magrondusspells___Magr_Un[this]=null
call DestroyTextTag(s__Magrondusspells___Magr_ttag[this])
call PauseTimer(s__Magrondusspells___Magr_tagtimer[this])
call PauseTimer(s__Magrondusspells___Magr_stacktimer[this])
call DestroyTimer(s__Magrondusspells___Magr_tagtimer[this])
call DestroyTimer(s__Magrondusspells___Magr_stacktimer[this])
set s__Magrondusspells___Magr_stacks[this]=0
endfunction
function s__Magrondusspells___Magr_copyfrom takes integer this,integer m returns nothing
set s__Magrondusspells___Magr_Un[this]=s__Magrondusspells___Magr_Un[m]
set s__Magrondusspells___Magr_ttag[this]=s__Magrondusspells___Magr_ttag[m]
set s__Magrondusspells___Magr_tagtimer[this]=s__Magrondusspells___Magr_tagtimer[m]
set s__Magrondusspells___Magr_stacktimer[this]=s__Magrondusspells___Magr_stacktimer[m]
set s__Magrondusspells___Magr_stacks[this]=s__Magrondusspells___Magr_stacks[m]
endfunction
function s__Magrondusspells___Magr_destrnreplace takes integer this,integer m returns nothing
call s__Magrondusspells___Magr_destr(this)
call s__Magrondusspells___Magr_copyfrom(this,m)
call s__Magrondusspells___Magr_flush(m)
set s__Magrondusspells___Magr_Num=s__Magrondusspells___Magr_Num - 1
call s__Magrondusspells___Magr_deallocate(m)
endfunction
function s__Magrondusspells___Magr_updatetext takes integer this returns nothing
call SetTextTagText(s__Magrondusspells___Magr_ttag[this], I2S(s__Magrondusspells___Magr_stacks[this]), 15 * 0.023 / 10)
endfunction
function Magrondusspells___Find_by_Un takes unit V returns integer
//# optional
local integer left=0
local integer right=0
local integer l__i
if s__Magrondusspells___Magr_Num > 1 then
loop
set left=right
set right=( s__Magrondusspells___Magr_Num + left ) / 2
set l__i=left
loop
exitwhen not ( l__i < right )
if ( s__Magrondusspells___Magr_Un[Magrondusspells___M[l__i]] == V ) then
return l__i
endif
set l__i=l__i + 1
endloop
exitwhen ( s__Magrondusspells___Magr_Num - left ) <= 1
endloop
elseif s__Magrondusspells___Magr_Num == 0 then
return - 1
elseif ( s__Magrondusspells___Magr_Un[Magrondusspells___M[1]] == V ) then
return 1
endif
return - 1
endfunction
function Magrondusspells___Find_by_ttag takes texttag V returns integer
//# optional
local integer left=0
local integer right=0
local integer l__i
if s__Magrondusspells___Magr_Num > 1 then
loop
set left=right
set right=( s__Magrondusspells___Magr_Num + left ) / 2
set l__i=left
loop
exitwhen not ( l__i < right )
if ( s__Magrondusspells___Magr_ttag[Magrondusspells___M[l__i]] == V ) then
return l__i
endif
set l__i=l__i + 1
endloop
exitwhen ( s__Magrondusspells___Magr_Num - left ) <= 1
endloop
elseif s__Magrondusspells___Magr_Num == 0 then
return - 1
elseif ( s__Magrondusspells___Magr_ttag[Magrondusspells___M[1]] == V ) then
return 1
endif
return - 1
endfunction
function Magrondusspells___Find_by_tagtimer takes timer V returns integer
//# optional
local integer left=0
local integer right=0
local integer l__i
if s__Magrondusspells___Magr_Num > 1 then
loop
set left=right
set right=( s__Magrondusspells___Magr_Num + left ) / 2
set l__i=left
loop
exitwhen not ( l__i < right )
if ( s__Magrondusspells___Magr_tagtimer[Magrondusspells___M[l__i]] == V ) then
return l__i
endif
set l__i=l__i + 1
endloop
exitwhen ( s__Magrondusspells___Magr_Num - left ) <= 1
endloop
elseif s__Magrondusspells___Magr_Num == 0 then
return - 1
elseif ( s__Magrondusspells___Magr_tagtimer[Magrondusspells___M[1]] == V ) then
return 1
endif
return - 1
endfunction
function Magrondusspells___Find_by_stacktimer takes timer V returns integer
//# optional
local integer left=0
local integer right=0
local integer l__i
if s__Magrondusspells___Magr_Num > 1 then
loop
set left=right
set right=( s__Magrondusspells___Magr_Num + left ) / 2
set l__i=left
loop
exitwhen not ( l__i < right )
if ( s__Magrondusspells___Magr_stacktimer[Magrondusspells___M[l__i]] == V ) then
return l__i
endif
set l__i=l__i + 1
endloop
exitwhen ( s__Magrondusspells___Magr_Num - left ) <= 1
endloop
elseif s__Magrondusspells___Magr_Num == 0 then
return - 1
elseif ( s__Magrondusspells___Magr_stacktimer[Magrondusspells___M[1]] == V ) then
return 1
endif
return - 1
endfunction
function cj_anonym__42 takes nothing returns nothing
//# optional
local integer l__i=0
local timer ttimer=GetExpiredTimer()
local integer m=Magrondusspells___M[Magrondusspells___Find_by_tagtimer(ttimer)]
if GetUnitAbilityLevel(s__Magrondusspells___Magr_Un[m], 0x414D5054) != 0 then
if GetUnitState(s__Magrondusspells___Magr_Un[m], UNIT_STATE_LIFE) <= .405 then
call SetTextTagVisibility(s__Magrondusspells___Magr_ttag[m], false)
else
if IsPlayerAlly(GetLocalPlayer(), GetOwningPlayer(s__Magrondusspells___Magr_Un[m])) then
call SetTextTagVisibility(s__Magrondusspells___Magr_ttag[m], true)
endif
call SetTextTagPosUnit(s__Magrondusspells___Magr_ttag[m], s__Magrondusspells___Magr_Un[m], 50)
endif
else
call s__Magrondusspells___Magr_destrnreplace(m,Magrondusspells___M[s__Magrondusspells___Magr_Num])
endif
set ttimer=null
endfunction
function MagrondusInitTtag takes nothing returns nothing
local unit cjlocgn_00000000
local integer cjlocgn_00000001
if GetLearnedSkill() == 0x414D5054 and GetLearnedSkillLevel() <= 1 then
set cjlocgn_00000000=GetLearningUnit()
if Magrondusspells___Find_by_Un(cjlocgn_00000000) == - 1 then
set cjlocgn_00000001=s__Magrondusspells___Magr_create(cjlocgn_00000000)
set Magrondusspells___M[s__Magrondusspells___Magr_Num]=cjlocgn_00000001
call SetTextTagText(s__Magrondusspells___Magr_ttag[cjlocgn_00000001], "0", 15 * 0.023 / 10)
call SetTextTagPosUnit(s__Magrondusspells___Magr_ttag[cjlocgn_00000001], s__Magrondusspells___Magr_Un[cjlocgn_00000001], 50)
call SetTextTagColor(s__Magrondusspells___Magr_ttag[cjlocgn_00000001], 128, 128, 255, 255)
call SetTextTagVisibility(s__Magrondusspells___Magr_ttag[cjlocgn_00000001], false)
if IsPlayerAlly(GetLocalPlayer(), GetOwningPlayer(s__Magrondusspells___Magr_Un[cjlocgn_00000001])) then
call SetTextTagVisibility(s__Magrondusspells___Magr_ttag[cjlocgn_00000001], true)
endif
call TimerStart(s__Magrondusspells___Magr_tagtimer[cjlocgn_00000001], 0.02, true, function cj_anonym__42)
else
call BJDebugMsg("This unit already learned stacks")
endif
endif
set cjlocgn_00000000=null
endfunction
function cj_anonym__45 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call UnitRemoveAbility(u, 0x426D696C)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function cj_anonym__44 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local integer l__i=0
local real x1
local real y1
local unit caster=LoadUnitHandle(hash, h, 1)
local integer m=Magrondusspells___M[Magrondusspells___Find_by_Un(caster)]
local real targX=LoadReal(hash, h, 3)
local real targY=LoadReal(hash, h, 4)
local real Radius=LoadReal(hash, h, 5) - 400. * ( .06 / 3 )
local real remain=LoadReal(hash, h, 6)
local real deltaAngle=360 / 16
local real deltaRot=LoadReal(hash, h, 2) + 12
local unit cell
local group enemies=CreateGroup()
local unit first
local player owner=GetOwningPlayer(caster)
local integer SpellLevel=GetUnitAbilityLevel(caster, 0x414D4346) - 1
local real dmg=7. + 4. * SpellLevel + ( 1.5 + .5 * SpellLevel ) * s__Magrondusspells___Magr_stacks[m]
loop
set cj_v666_boolean=l__i == 16
set l__i=l__i + 1
exitwhen cj_v666_boolean
set cell=LoadUnitHandle(hash, h, l__i + 7)
set x1=targX + Radius * Cos(( deltaRot + deltaAngle * l__i ) * bj_DEGTORAD)
set y1=targY + Radius * Sin(( deltaRot + deltaAngle * l__i ) * bj_DEGTORAD)
call SetUnitX(cell, x1)
call SetUnitY(cell, y1)
endloop
if remain == 3. or ModuloInteger(R2I(remain * 100) + 1, R2I(.3 * 100)) == 0 then
call GroupEnumUnitsInRange(enemies, targX, targY, Radius, null)
loop
set first=FirstOfGroup(enemies)
exitwhen first == null
if IsUnitEnemy(first, owner) and GetUnitState(first, UNIT_STATE_LIFE) > .405 and not IsUnitType(first, UNIT_TYPE_STRUCTURE) then
set IsTriggerDamage=true
call UnitDamageTarget(caster, first, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl", first, "chest"))
set IsTriggerDamage=false
endif
call GroupRemoveUnit(enemies, first)
endloop
endif
if remain <= 0 then
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
else
call SaveReal(hash, h, 2, deltaRot)
call SaveReal(hash, h, 5, Radius)
call SaveReal(hash, h, 6, remain - .06)
endif
call DestroyGroup(enemies)
set Timer=null
set cell=null
set enemies=null
set first=null
set caster=null
set owner=null
endfunction
function cj_anonym__43 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer m=Magrondusspells___M[Magrondusspells___Find_by_stacktimer(t)]
call PauseTimer(t)
set s__Magrondusspells___Magr_stacks[m]=0
call s__Magrondusspells___Magr_updatetext(m)
endfunction
function Magrondus_Actions takes nothing returns nothing
local integer sp_id=GetSpellAbilityId()
local unit caster
local player owner
local integer lvl_abil
local integer fff
local integer m
local unit cjlocgn_00000000
local real cjlocgn_00000001
local integer cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
local real cjlocgn_00000005
local real cjlocgn_00000006
local real cjlocgn_00000007
local real cjlocgn_00000008
local real cjlocgn_00000009
local timer cjlocgn_0000000a
local integer cjlocgn_0000000b
local real cjlocgn_0000000c
local unit cjlocgn_0000000d
if not ( sp_id == 0x414D4453 or sp_id == 0x414D4346 or sp_id == 0x414D4857 ) then
return
endif
set caster=GetSpellAbilityUnit()
set owner=GetOwningPlayer(caster)
set fff=Magrondusspells___Find_by_Un(caster)
if fff >= 0 then
set m=Magrondusspells___M[fff]
else
set m=s__Magrondusspells___Magr_make0(caster)
endif
set lvl_abil=GetUnitAbilityLevel(caster, 0x414D5054) - 1
if lvl_abil >= 0 then
if s__Magrondusspells___Magr_stacks[m] < ( 5 + 1 * lvl_abil ) then
set s__Magrondusspells___Magr_stacks[m]=s__Magrondusspells___Magr_stacks[m] + 1
endif
call s__Magrondusspells___Magr_updatetext(m)
call TimerStart(s__Magrondusspells___Magr_stacktimer[m], 5 + 3 * lvl_abil, false, function cj_anonym__43)
endif
if GetSpellAbilityId() == 0x414D4453 and GetUnitTypeId(GetSpellAbilityUnit()) != 0x68303164 then
set lvl_abil=GetUnitAbilityLevel(caster, 0x414D4453) - 1
set cjlocgn_00000000=GetSpellTargetUnit()
set cjlocgn_00000001=60 + ( 10 + 4 * lvl_abil ) * s__Magrondusspells___Magr_stacks[m]
set IsTriggerDamage=true
call UnitDamageTarget(caster, cjlocgn_00000000, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
set cjlocgn_00000000=null
endif
if GetSpellAbilityId() == 0x414D4346 then
set cjlocgn_00000002=0
set cjlocgn_00000001=GetSpellTargetX()
set cjlocgn_00000003=GetSpellTargetY()
set cjlocgn_00000006=360. / 16
set cjlocgn_00000007=400.
set cjlocgn_00000008=3.
set cjlocgn_00000009=0
set cjlocgn_0000000a=CreateTimer()
set cjlocgn_0000000b=GetHandleId(cjlocgn_0000000a)
loop
set cj_v666_boolean=cjlocgn_00000002 == 16
set cjlocgn_00000002=cjlocgn_00000002 + 1
exitwhen cj_v666_boolean
set cjlocgn_00000004=cjlocgn_00000001 + cjlocgn_00000007 * Cos(cjlocgn_00000006 * cjlocgn_00000002 * bj_DEGTORAD)
set cjlocgn_00000005=cjlocgn_00000003 + cjlocgn_00000007 * Sin(cjlocgn_00000006 * cjlocgn_00000002 * bj_DEGTORAD)
set cjlocgn_00000000=CreateUnit(owner, 0x6830314F, cjlocgn_00000004, cjlocgn_00000005, 0)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 3.)
call SaveUnitHandle(hash, cjlocgn_0000000b, 7 + cjlocgn_00000002, cjlocgn_00000000)
endloop
call SaveUnitHandle(hash, cjlocgn_0000000b, 1, caster)
call SaveReal(hash, cjlocgn_0000000b, 2, cjlocgn_00000009)
call SaveReal(hash, cjlocgn_0000000b, 3, cjlocgn_00000001)
call SaveReal(hash, cjlocgn_0000000b, 4, cjlocgn_00000003)
call SaveReal(hash, cjlocgn_0000000b, 5, cjlocgn_00000007)
call SaveReal(hash, cjlocgn_0000000b, 6, cjlocgn_00000008)
call TimerStart(cjlocgn_0000000a, .06, true, function cj_anonym__44)
set cjlocgn_00000000=null
set cjlocgn_0000000a=null
endif
if GetSpellAbilityId() == 0x414D4857 then
set cjlocgn_00000000=GetSpellTargetUnit()
set cjlocgn_0000000d=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 0)
call UnitAddAbility(cjlocgn_0000000d, 0x4130344A)
call IssueTargetOrder(cjlocgn_0000000d, "acidbomb", cjlocgn_00000000)
call UnitApplyTimedLife(cjlocgn_0000000d, 0x42544C46, 0.5)
set cjlocgn_0000000a=LoadTimerHandle(hash, GetHandleId(cjlocgn_00000000), 0x414D4857)
if cjlocgn_0000000a != null then
call FlushChildHashtable(hash, GetHandleId(cjlocgn_0000000a))
call PauseTimer(cjlocgn_0000000a)
call DestroyTimer(cjlocgn_0000000a)
endif
set cjlocgn_0000000a=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(cjlocgn_0000000a), 0, cjlocgn_00000000)
call TimerStart(cjlocgn_0000000a, 10. + s__Magrondusspells___Magr_stacks[m], false, function cj_anonym__45)
endif
if fff == - 1 then
call s__Magrondusspells___Magr_destr(m)
endif
set caster=null
set owner=null
set cjlocgn_0000000d=null
set cjlocgn_0000000a=null
set cjlocgn_00000000=null
endfunction
function cj_anonym__46 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local lightning bolt=LoadLightningHandle(hash, h, 2)
local real dur=LoadReal(hash, h, 3)
local unit cjlocgn_00000000
local unit cjlocgn_00000001
if dur > 0 then
set cjlocgn_00000000=LoadUnitHandle(hash, h, 0)
set cjlocgn_00000001=LoadUnitHandle(hash, h, 1)
call MoveLightning(bolt, true, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), GetUnitX(cjlocgn_00000001), GetUnitY(cjlocgn_00000001))
set dur=dur - ( 0.025 )
call SaveReal(hash, h, 3, dur)
else
call DestroyLightning(bolt)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
endif
endfunction
function Magrondusspells___onDmgByUlti takes nothing returns nothing
local unit cjlocgn_00000000
local unit cjlocgn_00000001
local real cjlocgn_00000002
local unit cjlocgn_00000003
local timer cjlocgn_00000004
local integer cjlocgn_00000005
if GetUnitAbilityLevel(udg_DamageEventSource, 0x414D4857) > 0 and GetUnitAbilityLevel(udg_DamageEventTarget, 0x426D696C) > 0 and GetUnitState(udg_DamageEventTarget, UNIT_STATE_LIFE) > .405 then
set cjlocgn_00000000=udg_DamageEventTarget
set cjlocgn_00000001=udg_DamageEventSource
set cjlocgn_00000002=udg_DamageEventAmount
call BJDebugMsg("magroulti dmg = " + R2S(cjlocgn_00000002))
call GroupEnumUnitsInRange(cjgrfgn_0000001b, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 350., null)
loop
set cjlocgn_00000003=FirstOfGroup(cjgrfgn_0000001b)
exitwhen cjlocgn_00000003 == null
call GroupRemoveUnit(cjgrfgn_0000001b, cjlocgn_00000003)
if GetUnitAbilityLevel(cjlocgn_00000003, 0x416C6F63) == 0 and GetUnitState(cjlocgn_00000003, UNIT_STATE_LIFE) > .405 and IsUnitEnemy(cjlocgn_00000003, GetOwningPlayer(cjlocgn_00000001)) and not IsUnitType(cjlocgn_00000003, UNIT_TYPE_STRUCTURE) then
set IsTriggerDamage=true
call DisableTrigger(GetTriggeringTrigger())
call UnitDamageTarget(cjlocgn_00000001, cjlocgn_00000003, cjlocgn_00000002, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call EnableTrigger(GetTriggeringTrigger())
set IsTriggerDamage=false
set cjlocgn_00000004=CreateTimer()
set cjlocgn_00000005=GetHandleId(cjlocgn_00000004)
call SaveUnitHandle(hash, cjlocgn_00000005, 0, cjlocgn_00000000)
call SaveUnitHandle(hash, cjlocgn_00000005, 1, cjlocgn_00000003)
call SaveLightningHandle(hash, cjlocgn_00000005, 2, AddLightning("CLPB", true, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), GetUnitX(cjlocgn_00000003), GetUnitY(cjlocgn_00000003)))
call SaveReal(hash, cjlocgn_00000005, 3, .5)
call TimerStart(cjlocgn_00000004, 0.025, true, function cj_anonym__46)
endif
endloop
endif
set cjlocgn_00000004=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
endfunction
function InitMagrondus takes nothing returns nothing
local integer l__i=0
call SetUnitAnimationWithRarity(gg_unit_H021_0158, "stand alternate", RARITY_FREQUENT)
call SetUnitScale(gg_unit_H021_0158, 1.5, 1.5, 1.5)
call IssueImmediateOrder(gg_unit_H021_0158, "immolation")
set Magrondusspells___Trigger=CreateTrigger()
set Magrondusspells___LearnTrig=CreateTrigger()
set Magrondusspells___DmgTrig=CreateTrigger()
call TriggerAddAction(Magrondusspells___Trigger, function Magrondus_Actions)
call TriggerAddAction(Magrondusspells___LearnTrig, function MagrondusInitTtag)
call TriggerAddAction(Magrondusspells___DmgTrig, function Magrondusspells___onDmgByUlti)
call TriggerRegisterVariableEvent(Magrondusspells___DmgTrig, "udg_AfterDamageEvent", EQUAL, 1.)
loop
exitwhen not ( ( l__i < bj_MAX_PLAYER_SLOTS ) )
call TriggerRegisterPlayerUnitEvent(Magrondusspells___LearnTrig, Player(l__i), EVENT_PLAYER_HERO_SKILL, null)
call TriggerRegisterPlayerUnitEvent(Magrondusspells___Trigger, Player(l__i), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
set l__i=l__i + 1
endloop
endfunction
// scope Magrondusspells ends
// scope NU begins
function NU___NU_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x414E5541
endfunction
function NU___Near_Filter takes nothing returns boolean
local timer t1=GetExpiredTimer()
local integer bh=GetHandleId(t1)
local unit n=LoadUnitHandle(hash, bh, 1)
local player pl=GetOwningPlayer(n)
set t1=null
if ( IsUnitEnemy(GetFilterUnit(), pl) ) and ( GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) then
set n=null
set n=null
return true
endif
set n=null
return false
endfunction
function NU___Dummy_Vision_Move takes nothing returns nothing
local timer t2=GetExpiredTimer()
local integer dh=GetHandleId(t2)
local unit dm=LoadUnitHandle(hash, dh, 1)
local unit tar=LoadUnitHandle(hash, dh, 3)
local real r=LoadReal(hash, dh, 2)
call SetUnitX(dm, GetUnitX(tar))
call SetUnitY(dm, GetUnitY(tar))
if r > 0 then
set r=r - 0.1
call SaveReal(hash, dh, 2, r)
else
call PauseTimer(t2)
call FlushChildHashtable(hash, dh)
call DestroyTimer(t2)
endif
set dm=null
set tar=null
set t2=null
endfunction
function NU___U_E takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit n=LoadUnitHandle(hash, h, 1)
local unit tar=LoadUnitHandle(hash, h, 2)
local integer lvl=GetUnitAbilityLevel(n, 0x414E5541)
local real dmg
local unit dm
local integer l__i=1
set IsTriggerDamage=true
set dmg=300. + 100. * ( lvl - 1 )
call UnitDamageTarget(n, tar, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
set dm=CreateUnit(GetOwningPlayer(n), 0x68303164, GetUnitX(tar), GetUnitY(tar), 0)
call UnitAddAbility(dm, 0x414E5569)
call SetUnitAbilityLevel(dm, 0x414E5569, lvl)
call DestroyEffect(LoadEffectHandle(hash, h, 4))
call ShowUnit(n, true)
call PauseUnit(n, false)
call SetUnitX(n, GetUnitX(tar))
call SetUnitY(n, GetUnitY(tar))
loop
exitwhen l__i > 3
set l__i=l__i + 1
call IssueTargetOrderById(dm, 852274, n)
endloop
call UnitApplyTimedLife(dm, 0x42544C46, 1)
set t=null
set tar=null
set n=null
set dm=null
endfunction
function NU___FUCKTHISSHIT takes nothing returns nothing
local timer t1=GetExpiredTimer()
local integer bh=GetHandleId(t1)
local unit n=LoadUnitHandle(hash, bh, 1)
local group nearunits=CreateGroup()
local unit tar
local timer t
local integer h
local timer cjlocgn_00000000
local integer cjlocgn_00000001
local real cjlocgn_00000002
local unit cjlocgn_00000003
local effect cjlocgn_00000004
call GroupEnumUnitsInRange(nearunits, GetUnitX(n), GetUnitY(n), 400., Condition(function NU___Near_Filter))
set tar=FirstOfGroup(nearunits)
set t=CreateTimer()
set h=GetHandleId(t)
call SaveUnitHandle(hash, h, 1, n)
call SaveUnitHandle(hash, h, 2, tar)
if ( tar != null ) then
call SetUnitX(n, GetUnitX(tar))
call SetUnitY(n, GetUnitY(tar))
call PauseUnit(n, true)
call ShowUnit(n, false)
call TimerStart(t, 3, false, function NU___U_E)
set cjlocgn_00000000=CreateTimer()
set cjlocgn_00000001=GetHandleId(cjlocgn_00000000)
set cjlocgn_00000002=3.
set cjlocgn_00000003=CreateUnit(GetOwningPlayer(n), 0x68303157, GetUnitX(tar), GetUnitY(tar), 0)
set cjlocgn_00000004=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", tar, "overhead")
if GetLocalPlayer() == GetOwningPlayer(n) then
call SetCameraPosition(GetUnitX(tar), GetUnitY(tar))
endif
call SaveUnitHandle(hash, cjlocgn_00000001, 1, cjlocgn_00000003)
call UnitApplyTimedLife(cjlocgn_00000003, 0x42544C46, 3.)
call SaveReal(hash, cjlocgn_00000001, 2, cjlocgn_00000002)
call SaveUnitHandle(hash, cjlocgn_00000001, 3, tar)
call SaveEffectHandle(hash, cjlocgn_00000001, 4, cjlocgn_00000004)
call TimerStart(cjlocgn_00000000, 0.1, true, function NU___Dummy_Vision_Move)
set cjlocgn_00000003=null
set cjlocgn_00000000=null
endif
set n=null
set tar=null
set t1=null
set t=null
set t1=null
set cjlocgn_00000004=null
set nearunits=null
endfunction
function NU___NU_Actions takes nothing returns nothing
local unit n
local timer t1
local integer bh
set udg_DamageEventType=udg_DamageTypeSpell
set n=GetSpellAbilityUnit()
set t1=CreateTimer()
set bh=GetHandleId(t1)
call SaveUnitHandle(hash, bh, 1, n)
call TimerStart(t1, 0.01, false, function NU___FUCKTHISSHIT)
set n=null
set t1=null
endfunction
function cj_callback_0000003d takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function NU___NU_Conditions))
call TriggerAddAction(trg, function NU___NU_Actions)
set trg=null
endfunction
// scope NU ends
// scope nam begins
function Trig_sp_Condit takes nothing returns boolean
return ( GetSpellAbilityId() == 0x414E6157 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x65626262 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x65626234 )
endfunction
function Trig_illusionunit_actions takes nothing returns nothing
local timer time=GetExpiredTimer()
local integer h=GetHandleId(time)
local unit caster=LoadUnitHandle(hash, h, 2)
local unit target=LoadUnitHandle(hash, h, 1)
local unit illusion=LoadUnitHandle(hash, h, 0)
local real remaining=LoadReal(hash, h, 3) - .1
if ( remaining == 0. ) or ( GetUnitState(target, UNIT_STATE_LIFE) <= 0 ) then
call KillUnit(illusion)
call FlushChildHashtable(hash, h)
call PauseTimer(time)
call DestroyTimer(time)
endif
call SaveReal(hash, h, 3, remaining)
set time=null
set caster=null
set target=null
set illusion=null
endfunction
function Trig_Spell_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local real targ_x=GetUnitX(target)
local real targ_y=GetUnitY(target)
local player owner=GetOwningPlayer(caster)
local unit dummy=CreateUnit(owner, 0x68303164, targ_x, targ_y, 0)
local unit illusion
local timer time
local integer h
local group illgr
local real remaining
local real tx
local real ty
call UnitApplyTimedLife(dummy, 0x42544C46, .5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionCaster.mdl", target, "chest"))
set time=CreateTimer()
set h=GetHandleId(time)
set illgr=CreateGroup()
set remaining=( 4 + GetUnitAbilityLevel(caster, 0x414E6157) )
set tx=GetUnitX(target)
set ty=GetUnitY(target)
call UnitAddAbility(dummy, 0x414E6477)
call IssueTargetOrderById(dummy, 852274, target)
call GroupEnumUnitsInRange(illgr, GetUnitX(target), GetUnitY(target), 300., null)
loop
set illusion=FirstOfGroup(illgr)
exitwhen ( IsUnitIllusion(illusion) ) and ( GetUnitTypeId(illusion) == GetUnitTypeId(target) ) and ( GetOwningPlayer(illusion) == owner ) and ( GetUnitAbilityLevel(illusion, 0x416C6F63) == 0 )
call GroupRemoveUnit(illgr, illusion)
endloop
call SetUnitMoveSpeed(illusion, 1000)
call UnitAddAbility(illusion, 0x416C6F63)
call IssueTargetOrder(illusion, "attack", target)
call SaveUnitHandle(hash, h, 0, illusion)
call SaveUnitHandle(hash, h, 1, target)
call SaveUnitHandle(hash, h, 2, caster)
call SaveReal(hash, h, 3, remaining)
call TimerStart(time, .1, true, function Trig_illusionunit_actions)
call DestroyGroup(illgr)
set time=null
set caster=null
set dummy=null
set owner=null
set target=null
set illusion=null
set illgr=null
endfunction
function cj_callback_0000003e takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function Trig_sp_Condit))
call TriggerAddAction(trg, function Trig_Spell_Actions)
endfunction
// scope nam ends
function Trig_Meditation_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x414E4443
endfunction
function HGroup_Filter takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Tick_Meditation takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local group allunits=CreateGroup()
local real remain
local unit cjlocgn_00000000
local effect cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
call GroupEnumUnitsInRange(allunits, GetUnitX(target), GetUnitY(target), 330., Condition(function HGroup_Filter))
set remain=LoadReal(hash, h, 3)
loop
set cjlocgn_00000000=FirstOfGroup(allunits)
exitwhen cjlocgn_00000000 == null
set cjlocgn_00000001=AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", cjlocgn_00000000, "origin")
set cjlocgn_00000002=40. + 20. * ( GetUnitAbilityLevel(caster, 0x414E4443) - 1 )
set cjlocgn_00000003=20. + 10. * ( GetUnitAbilityLevel(caster, 0x414E4443) - 1 )
if cjlocgn_00000000 == caster then
call SetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) + cjlocgn_00000002)
else
call SetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) + cjlocgn_00000002)
call SetUnitState(cjlocgn_00000000, UNIT_STATE_MANA, GetUnitState(cjlocgn_00000000, UNIT_STATE_MANA) + cjlocgn_00000003)
endif
call GroupRemoveUnit(allunits, cjlocgn_00000000)
endloop
if remain > 0 then
set remain=remain - 1.25
call SaveReal(hash, h, 3, remain)
else
set cjlocgn_00000001=LoadEffectHandle(hash, h, 4)
call DestroyEffect(cjlocgn_00000001)
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
set cjlocgn_00000001=null
endif
call DestroyGroup(allunits)
set Timer=null
set caster=null
set target=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
set allunits=null
endfunction
function Trig_Meditation_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local real remain=5.
local timer Timer=CreateTimer()
local integer h=GetHandleId(Timer)
local effect e=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\TranquilityTarget.mdl", caster, "origin")
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, remain)
call SaveEffectHandle(hash, h, 4, e)
call TimerStart(Timer, 1.25, true, function Tick_Meditation)
set caster=null
set target=null
set Timer=null
set e=null
endfunction
function InitTrig_Meditation takes nothing returns nothing
set gg_trg_Meditation=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Meditation, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Meditation, Condition(function Trig_Meditation_Conds2))
call TriggerAddAction(gg_trg_Meditation, function Trig_Meditation_Actions)
endfunction
// scope healto begins
function Trig_Healing_Touch_Conditions takes nothing returns boolean
return LoadBoolean(hash, GetHandleId(GetTriggerUnit()), 0x414E4448)
endfunction
function healto___KillSpell takes unit caster returns nothing
local integer h=GetHandleId(caster)
call SaveBoolean(hash, h, 0x414E4448, false)
call DestroyEffect(LoadEffectHandle(hash, h, 0x414E4448 + 2))
call RemoveSavedHandle(hash, h, 0x414E4448 + 2)
endfunction
function cj_callback_0000003f takes nothing returns nothing
//# optional
local unit cas=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local real heal
if not LoadBoolean(hash, GetHandleId(cas), 0x414E4448) then
set tar=null
set cas=null
return
endif
call healto___KillSpell(cas)
call CastSpellOnTargetTimed(cas , tar , 0x41303653 , 1 , "bloodlust" , 3.5)
if false then
call DamageTarget(cas , tar , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
set heal=700 + 300 * ( GetUnitAbilityLevel(cas, 0x414E4448) - 1 )
call SetUnitState(tar, UNIT_STATE_LIFE, GetUnitState(tar, UNIT_STATE_LIFE) + heal)
endfunction
function Trig_Healing_Touch_Actions takes nothing returns nothing
call healto___KillSpell(GetTriggerUnit())
endfunction
function cj_callback_00000040 takes nothing returns nothing
//# optional
local unit cas=GetTriggerUnit()
local unit tar=GetSpellTargetUnit()
local effect e=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", tar, "overhead")
local integer h=GetHandleId(cas)
if LoadEffectHandle(hash, h, 0x414E4448 + 2) != null then
call DestroyEffect(e)
call SaveEffectHandle(hash, h, 0x414E4448 + 2, null)
else
call SaveEffectHandle(hash, h, 0x414E4448 + 2, e)
endif
call SaveBoolean(hash, h, 0x414E4448, true)
endfunction
function cj_callback_00000041 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
local integer l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call TriggerRegisterPlayerUnitEvent(trg, Player(l__i), EVENT_PLAYER_UNIT_ISSUED_ORDER, null)
call TriggerRegisterPlayerUnitEvent(trg, Player(l__i), EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER, null)
call TriggerRegisterPlayerUnitEvent(trg, Player(l__i), EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER, null)
call TriggerRegisterPlayerUnitEvent(trg, Player(l__i), EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER, null)
set l__i=l__i + 1
endloop
call TriggerAddCondition(trg, Condition(function Trig_Healing_Touch_Conditions))
call TriggerAddAction(trg, function Trig_Healing_Touch_Actions)
endfunction
// scope healto ends
// scope splitskull begins
function s__splitskull___spsproj_isValidTarget takes integer this,unit u returns boolean
return s__splitskull___spsproj_affected[this] != null and not IsUnitInGroup(u, s__splitskull___spsproj_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitVisible(u, GetOwningPlayer(s__projectile_toUnit[this])) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__splitskull___spsproj_onFinish takes integer this returns nothing
local real dmg
local real stundur
local group cjlocgn_00000000
local unit cjlocgn_00000001
local unit cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
call GroupAddUnit(s__splitskull___spsproj_affected[this], s__projectile__get_target(this))
set dmg=90. + 70. * ( s__splitskull___spsproj_level[this] - 1 )
set stundur=1.5 + .25 * ( s__splitskull___spsproj_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , s__projectile__get_target(this) , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , s__projectile__get_target(this) , 0x41303255 , R2I(stundur / .1 + .1) , "thunderbolt" , 3.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", s__projectile__get_target(this), "origin"))
call s__projectile_killModel(this)
set s__splitskull___spsproj_opercount[this]=s__splitskull___spsproj_opercount[this] + 1
if s__splitskull___spsproj_opercount[this] < 2 then
call s__projectile_setModel(this,"Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl")
set cjlocgn_00000000=CreateGroup()
set cjlocgn_00000002=null
set cjlocgn_00000003=700. + 1.
call GroupEnumUnitsInRange(cjlocgn_00000000, GetUnitX(s__projectile_toUnit[this]), GetUnitY(s__projectile_toUnit[this]), 700., null)
loop
set cjlocgn_00000001=FirstOfGroup(cjlocgn_00000000)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjlocgn_00000000, cjlocgn_00000001)
if s__splitskull___spsproj_isValidTarget(this,cjlocgn_00000001) then
set cjlocgn_00000004=DistanceBetweenCord(s__projectile__get_x(this) , s__projectile__get_y(this) , GetUnitX(cjlocgn_00000001) , GetUnitY(cjlocgn_00000001))
if cjlocgn_00000004 < cjlocgn_00000003 and ( cjlocgn_00000002 == null or IsUnitType(cjlocgn_00000001, UNIT_TYPE_HERO) or not IsUnitType(cjlocgn_00000002, UNIT_TYPE_HERO) ) then
set cjlocgn_00000003=cjlocgn_00000004
set cjlocgn_00000002=cjlocgn_00000001
endif
endif
endloop
call DestroyGroup(cjlocgn_00000000)
if cjlocgn_00000002 != null then
call s__projectile__set_target(this,cjlocgn_00000002)
call sc__splitskull___spsproj_launchAgain(this,s__projectile_toUnit[this] , s__projectile_speed[this])
else
call sc__projectileinterface_deallocate(this)
endif
else
call sc__projectileinterface_deallocate(this)
endif
set cjlocgn_00000002=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
endfunction
function s__splitskull___spsproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__splitskull___spsproj_affected[this])
set s__splitskull___spsproj_affected[this]=null
call s__projectile_killModel(this)
call KillUnit(s__projectile_toUnit[this])
endfunction
function s__splitskull___spsproj_launchAgain takes integer this,unit from,real speed returns nothing
local real xf=GetUnitX(s__projectile_toUnit[this])
local real yf=GetUnitY(s__projectile_toUnit[this])
local real xt=GetUnitX(s__projectile__get_target(this))
local real yt=GetUnitY(s__projectile__get_target(this))
local integer startVector=s__vector_create(xf , yf , GetTerrainZ(xf , yf) + GetUnitFlyHeight(from) + 80.)
local integer endVector=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(s__projectile__get_target(this)) + 80.)
call SetUnitFacing(s__projectile_toUnit[this], Rad2Deg(Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])))
call s__projectile_launch(this,startVector , endVector , speed , 0.)
call s__vector_deallocate(startVector)
call s__vector_deallocate(endVector)
endfunction
function s__splitskull___spsproj_create takes unit u,integer level,unit target,real speed,string modelpath returns integer
local integer this=s__splitskull___spsproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), GetUnitFacing(u)))
call SetUnitScale(s__projectile_toUnit[this], 1.5, 1.5, 1.5)
call s__projectile_setModel(this,modelpath)
set s__splitskull___spsproj_affected[this]=CreateGroup()
call s__projectile__set_source(this,u)
call s__projectile__set_target(this,target)
set s__splitskull___spsproj_level[this]=level
call GroupAddUnit(s__splitskull___spsproj_affected[this], target)
call s__projectile__set_collision(this,110.)
set s__projectile_activePitch[this]=true
set s__projectile_activeUnitCollision[this]=false
set s__projectile_toDestroy[this]=false
set s__projectile_toRemove[this]=false
set s__projectile_toKill[this]=false
call s__splitskull___spsproj_launchAgain(this,s__projectile__get_source(this) , speed)
return this
endfunction
function cj_callback_00000042 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetUnitX(target)
local real yt=GetUnitY(target)
local integer level=GetUnitAbilityLevel(source, 0x41303042)
local integer G=s__splitskull___spsproj_create(source , level , target , 900. , "Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl")
endfunction
// scope splitskull ends
// scope marchthro begins
function marchthro___PassLevel takes nothing returns boolean
return not IsTriggerDamage and not udg_IsDamageSpell and GetUnitAbilityLevel(udg_DamageEventSource, 0x41303357) > 0 and IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO)
endfunction
function cj_anonym__47 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call UnitRemoveAbility(u, 0x41303457)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endfunction
function marchthro___Action takes nothing returns nothing
local unit u
local unit dummy
local timer t
call BJDebugMsg("debug march throw")
set u=udg_DamageEventSource
call UnitAddAbility(u, 0x41303457)
call SetUnitAbilityLevel(u, 0x41303457, GetUnitAbilityLevel(u, 0x41303357))
set dummy=CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), 0.)
call UnitApplyTimedLife(dummy, 0x42544C46, .1)
call UnitAddAbility(dummy, 0x41303358)
call SetUnitAbilityLevel(dummy, 0x41303358, GetUnitAbilityLevel(u, 0x41303357))
call IssueTargetOrder(dummy, "bloodlust", u)
set t=LoadTimerHandle(hash, GetHandleId(u), 0x41303357)
if t == null then
set t=CreateTimer()
endif
call SaveTimerHandle(hash, GetHandleId(u), 0x41303357, t)
call SaveUnitHandle(hash, GetHandleId(t), 0, u)
call PauseTimer(t)
call TimerStart(t, 1.5, false, function cj_anonym__47)
set t=null
set dummy=null
set u=null
endfunction
function cj_callback_00000043 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.)
call TriggerAddAction(trg, function marchthro___Action)
call TriggerAddCondition(trg, Condition(function marchthro___PassLevel))
endfunction
// scope marchthro ends
// scope angrybird begins
function s__angrybird___ffganim_onTimer takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
local real cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
local real cjlocgn_00000005
local integer cjlocgn_00000006
loop
exitwhen not ( cjlocgn_00000000 < s__angrybird___ffganim_count )
set this=s__angrybird___ffganim_me[cjlocgn_00000000]
set cjlocgn_00000001=GetUnitX(s__angrybird___ffganim_u[this])
set cjlocgn_00000002=GetUnitY(s__angrybird___ffganim_u[this])
set cjlocgn_00000005=s__angrybird___ffganim_da[this]
set cjlocgn_00000006=0
loop
exitwhen not ( cjlocgn_00000006 < 2 )
set cjlocgn_00000003=cjlocgn_00000001 + 60. * Cos(cjlocgn_00000005)
set cjlocgn_00000004=cjlocgn_00000002 + 60. * Sin(cjlocgn_00000005)
call SetUnitX(s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000006], cjlocgn_00000003)
call SetUnitY(s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000006], cjlocgn_00000004)
set cjlocgn_00000005=cjlocgn_00000005 + ( 2 * bj_PI / 2 )
set cjlocgn_00000006=cjlocgn_00000006 + 1
endloop
set s__angrybird___ffganim_da[this]=s__angrybird___ffganim_da[this] + ( ( bj_PI / 36 ) )
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__angrybird___ffganim_KillAnim takes unit u returns nothing
local integer l__i=sc__angrybird___ffganim_Find(u)
if ( l__i != - 1 ) then
call sc__angrybird___ffganim_deallocate(s__angrybird___ffganim_me[l__i])
endif
endfunction
function s__angrybird___ffganim_onDestroy takes integer this returns nothing
local integer cjlocgn_00000000=0
local integer l__i
loop
exitwhen not ( cjlocgn_00000000 < 2 )
call DestroyEffect(s___angrybird___ffganim_cellmdl[s__angrybird___ffganim_cellmdl[this]+cjlocgn_00000000])
call KillUnit(s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000000])
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set l__i=s__angrybird___ffganim_index[this]
set s__angrybird___ffganim_count=s__angrybird___ffganim_count - 1
set s__angrybird___ffganim_me[s__angrybird___ffganim_index[this]]=s__angrybird___ffganim_me[s__angrybird___ffganim_count]
set s__angrybird___ffganim_index[s__angrybird___ffganim_me[s__angrybird___ffganim_index[this]]]=s__angrybird___ffganim_index[this]
if s__angrybird___ffganim_count == 0 then
call DestroyTimer(s__angrybird___ffganim_t)
endif
endfunction

//Generated destructor of angrybird___ffganim
function s__angrybird___ffganim_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: angrybird___ffganim")
        return
    elseif (si__angrybird___ffganim_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: angrybird___ffganim")
        return
    endif
    call s__angrybird___ffganim_onDestroy(this)
    set si__angrybird___ffganim_V[this]=si__angrybird___ffganim_F
    set si__angrybird___ffganim_F=this
endfunction
function s__angrybird___ffganim_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__angrybird___ffganim_count )
if s__angrybird___ffganim_u[s__angrybird___ffganim_me[cjlocgn_00000000]] == u then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__angrybird___ffganim_create takes unit u returns integer
local integer l__i=s__angrybird___ffganim_Find(u)
local integer this
local real x
local real y
local real xf
local real yf
local real a=0
local integer cjlocgn_00000000=0
if l__i != - 1 then
return s__angrybird___ffganim_me[l__i]
endif
set this=s__angrybird___ffganim__allocate()
set s__angrybird___ffganim_u[this]=u
set x=GetUnitX(u)
set y=GetUnitY(u)
loop
exitwhen not ( cjlocgn_00000000 < 2 )
set xf=x + 60. * Cos(a)
set yf=y + 60. * Sin(a)
set s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000000]=CreateUnit(GetOwningPlayer(u), 0x68303164, xf, yf, 0.)
set s___angrybird___ffganim_cellmdl[s__angrybird___ffganim_cellmdl[this]+cjlocgn_00000000]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\UnholyFrenzy\\UnholyFrenzyTarget.mdl", s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000000], "origin")
call SetUnitPathing(s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000000], false)
set a=a + ( 2 * bj_PI / 2 )
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
if s__angrybird___ffganim_count == 0 then
set s__angrybird___ffganim_t=CreateTimer()
call TimerStart(s__angrybird___ffganim_t, .03, true, function s__angrybird___ffganim_onTimer)
endif
set s__angrybird___ffganim_me[s__angrybird___ffganim_count]=this
set s__angrybird___ffganim_count=s__angrybird___ffganim_count + 1
return this
endfunction
function s__angrybird___ordrek_onTimer takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__angrybird___ordrek_count )
set this=s__angrybird___ordrek_me[cjlocgn_00000000]
if GetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_LIFE) <= .3 * GetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_MAX_LIFE) then
if not s__angrybird___ordrek_lowBuff[this] then
set s__angrybird___ordrek_lowBuff[this]=true
endif
if s__angrybird___ordrek_eff[this] == null then
set s__angrybird___ordrek_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl", s__angrybird___ordrek_u[this], "overhead")
endif
call SetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303336, 1 + 10 * ( 2 + GetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303356) ))
elseif GetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_LIFE) <= .6 * GetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_MAX_LIFE) then
if s__angrybird___ordrek_lowBuff[this] then
set s__angrybird___ordrek_lowBuff[this]=false
endif
if not s__angrybird___ordrek_highBuff[this] then
set s__angrybird___ordrek_highBuff[this]=true
endif
if s__angrybird___ordrek_eff[this] == null then
set s__angrybird___ordrek_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl", s__angrybird___ordrek_u[this], "overhead")
endif
call SetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303336, 1 + 10 * ( 1 + GetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303356) ))
elseif ( s__angrybird___ordrek_lowBuff[this] or s__angrybird___ordrek_highBuff[this] ) then
set s__angrybird___ordrek_lowBuff[this]=false
set s__angrybird___ordrek_highBuff[this]=false
if s__angrybird___ordrek_eff[this] != null then
call DestroyEffect(s__angrybird___ordrek_eff[this])
set s__angrybird___ordrek_eff[this]=null
endif
call SetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303336, 1)
endif
if s__angrybird___ordrek_activated[this] then
set s__angrybird___ordrek_activeremain[this]=s__angrybird___ordrek_activeremain[this] - ( .1 )
if s__angrybird___ordrek_activeremain[this] <= 0. then
set s__angrybird___ordrek_activated[this]=false
set s__angrybird___ordrek_activeremain[this]=0.
call s__angrybird___ffganim_KillAnim(s__angrybird___ordrek_u[this])
endif
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__angrybird___ordrek_Activate takes unit u returns nothing
local integer l__i=sc__angrybird___ordrek_Find(u)
local integer this
if l__i != - 1 then
set this=s__angrybird___ordrek_me[l__i]
if s__angrybird___ordrek_activated[this] then
set s__angrybird___ordrek_activeremain[this]=3. + .5 * ( GetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303356) - 1 )
else
set s__angrybird___ordrek_activated[this]=true
set s__angrybird___ordrek_activeremain[this]=3. + .5 * ( GetUnitAbilityLevel(s__angrybird___ordrek_u[this], 0x41303356) - 1 )
call s__angrybird___ffganim_create(s__angrybird___ordrek_u[this])
endif
endif
endfunction
function s__angrybird___ordrek_onDmg takes nothing returns nothing
local unit source=udg_DamageEventSource
local unit target
local integer l__i=sc__angrybird___ordrek_Find(source)
local integer this
if l__i != - 1 then
if not udg_IsDamageSpell and not IsTriggerDamage then
set this=s__angrybird___ordrek_me[l__i]
if s__angrybird___ordrek_lowBuff[this] then
set udg_DamageEventAmount=udg_DamageEventAmount * ( 1. + .15 )
elseif s__angrybird___ordrek_highBuff[this] then
set udg_DamageEventAmount=udg_DamageEventAmount * ( 1. + .10 )
endif
endif
else
set target=udg_DamageEventTarget
set l__i=sc__angrybird___ordrek_Find(target)
if l__i != - 1 then
set this=s__angrybird___ordrek_me[l__i]
if s__angrybird___ordrek_activated[this] then
if GetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_LIFE) - udg_DamageEventAmount <= 40. then
set udg_DamageEventAmount=0.
call SetUnitState(s__angrybird___ordrek_u[this], UNIT_STATE_LIFE, 40.)
endif
endif
endif
endif
set target=null
set source=null
endfunction
function s__angrybird___ordrek_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__angrybird___ordrek_count )
if s__angrybird___ordrek_u[s__angrybird___ordrek_me[cjlocgn_00000000]] == u then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__angrybird___ordrek_create takes unit u returns integer
local integer l__i=s__angrybird___ordrek_Find(u)
local integer this
local trigger cjlocgn_00000000
if l__i != - 1 then
return s__angrybird___ordrek_me[l__i]
endif
set this=s__angrybird___ordrek__allocate()
set s__angrybird___ordrek_u[this]=u
call UnitAddAbility(u, 0x41303336)
if s__angrybird___ordrek_count == 0 then
set cjlocgn_00000000=CreateTrigger()
call TriggerRegisterVariableEvent(cjlocgn_00000000, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(cjlocgn_00000000, function s__angrybird___ordrek_onDmg)
set s__angrybird___ordrek_t=CreateTimer()
call TimerStart(s__angrybird___ordrek_t, .1, true, function s__angrybird___ordrek_onTimer)
endif
set s__angrybird___ordrek_me[s__angrybird___ordrek_count]=this
set s__angrybird___ordrek_count=s__angrybird___ordrek_count + 1
set cjlocgn_00000000=null
return this
endfunction
function cj_callback_00000044 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
call s__angrybird___ordrek_Activate(u)
endfunction
function cj_callback_00000045 takes nothing returns nothing
//# optional
if GetLearnedSkillLevel() <= 1 then
call s__angrybird___ordrek_create(GetLearningUnit())
endif
endfunction
// scope angrybird ends
// scope OrdDash begins
function s__orddash_onTimerTick takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", GetUnitX(u), GetUnitY(u)))
set u=null
set t=null
endfunction
function s__orddash_onUnitCollision takes integer this,unit u returns nothing
local real dmg
local real stundur
call GroupAddUnit(s__orddash_affected[this], u)
set dmg=50. + 60. * ( s__orddash_level[this] - 1 )
set stundur=1. + .2 * ( s__orddash_level[this] - 1 )
call CastSpellOnTargetTimed(s__projectile__get_source(this) , u , 0x41303255 , R2I(stundur / .1 + .1) , "thunderbolt" , 3.5)
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endfunction
function s__orddash_isValidTargetUnit takes integer this,unit u returns boolean
return not IsUnitInGroup(u, s__orddash_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__orddash_onFinish takes integer this returns nothing
local unit cjlocgn_00000000
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl", s__projectile__get_source(this), "origin"))
call FlushChildHashtable(hash, GetHandleId(s__orddash_efft[this]))
call DestroyTimer(s__orddash_efft[this])
if FirstOfGroup(s__orddash_affected[this]) == null then
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(s__projectile_toUnit[this]), 0x68303164, GetUnitX(s__projectile_toUnit[this]), GetUnitY(s__projectile_toUnit[this]), 0.)
call UnitAddAbility(cjlocgn_00000000, 0x41303251)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303251, 1)
call IssueTargetOrder(cjlocgn_00000000, "entanglingroots", s__projectile_toUnit[this])
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 2.1)
endif
call DestroyGroup(s__orddash_affected[this])
set cjlocgn_00000000=null
endfunction
function s__orddash_create takes unit u,integer level,real dist,integer startVector,integer endVector,string modelpath returns integer
local integer d=s__orddash__allocate(u)
local real speed=dist / 0.4
set s__orddash_efft[d]=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(s__orddash_efft[d]), 0, u)
call TimerStart(s__orddash_efft[d], 0.02, true, function s__orddash_onTimerTick)
set s__orddash_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__orddash_level[d]=level
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
call s__projectile_launch(d,startVector , endVector , speed , 0.)
call SetUnitAnimation(u, "walk")
return d
endfunction
function cj_callback_00000046 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x414F5144)
local real distance=500.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source))
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source))
set G=s__orddash_create(source , level , distance , A , B , "Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set source=null
endfunction
// scope OrdDash ends
// scope Distortion begins
function restoring takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local unit t=LoadUnitHandle(hash, GetHandleId(Timer), 1)
if GetUnitTypeId(t) == 0x65303032 then
call SetUnitVertexColor(t, 0, 255, 255, 255)
elseif GetUnitTypeId(t) == 0x68303137 then
call SetUnitVertexColor(t, 255, 100, 100, 255)
elseif GetUnitTypeId(t) == 0x65303039 then
call SetUnitVertexColor(t, 255, 25, 0, 255)
elseif GetUnitTypeId(t) == 0x65303031 then
call SetUnitVertexColor(t, 200, 115, 65, 255)
elseif GetUnitTypeId(t) == 0x65303037 then
if GetUnitX(t) > 0 then
if rrunekeep == 0 then
call SetUnitVertexColor(t, 255, 0, 0, 255)
endif
if rrunekeep == 2 then
call SetUnitVertexColor(t, 25, 255, 25, 255)
endif
if rrunekeep == 1 then
call SetUnitVertexColor(t, 0, 75, 255, 255)
endif
if rrunekeep == 3 then
call SetUnitVertexColor(t, 255, 255, 255, 180)
endif
if rrunekeep == 4 then
call SetUnitVertexColor(t, 175, 175, 0, 255)
endif
if rrunekeep == 5 then
call SetUnitVertexColor(t, 255, 0, 255, 255)
endif
else
if rrunekeep == 0 then
call SetUnitVertexColor(t, 255, 0, 0, 255)
endif
if rrunekeep == 2 then
call SetUnitVertexColor(t, 25, 255, 25, 255)
endif
if rrunekeep == 1 then
call SetUnitVertexColor(t, 0, 75, 255, 255)
endif
if rrunekeep == 3 then
call SetUnitVertexColor(t, 255, 255, 255, 180)
endif
if rrunekeep == 4 then
call SetUnitVertexColor(t, 175, 175, 0, 255)
endif
if rrunekeep == 5 then
call SetUnitVertexColor(t, 255, 0, 255, 255)
endif
endif
elseif GetUnitTypeId(t) == 0x65626262 then
call SetUnitVertexColor(t, 150, 50, 255, 255)
elseif GetUnitTypeId(t) == 0x68303138 then
call SetUnitVertexColor(t, 0, 255, 175, 255)
else
call SetUnitVertexColor(t, 255, 255, 255, 255)
endif
call PauseUnit(t, false)
call SetUnitTimeScalePercent(t, 100)
call SetUnitInvulnerable(t, false)
set t=null
set Timer=null
endfunction
function cj_callback_00000047 takes nothing returns nothing
//# optional
local unit u
local unit t
local integer lvl
local real o_dmg
local timer cjlocgn_00000000
local integer cjlocgn_00000001
set udg_DamageEventType=udg_DamageTypeSpell
set u=GetSpellAbilityUnit()
set t=GetSpellTargetUnit()
set lvl=GetUnitAbilityLevel(u, 0x41303538)
set IsTriggerDamage=true
set o_dmg=90. + 50. * ( lvl - 1 )
call UnitDamageTarget(u, t, o_dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
if GetUnitState(t, UNIT_STATE_LIFE) > .405 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl", t, "origin"))
call SetUnitVertexColor(t, 200, 0, 200, 180)
call SetUnitTimeScalePercent(t, 0)
call SetUnitInvulnerable(t, true)
call PauseUnit(t, true)
set cjlocgn_00000000=CreateTimer()
set cjlocgn_00000001=GetHandleId(cjlocgn_00000000)
call SaveUnitHandle(hash, cjlocgn_00000001, 1, t)
call TimerStart(cjlocgn_00000000, 3., false, function restoring)
endif
endfunction
// scope Distortion ends
// scope Redirection begins
function Redirection___Update takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 0)
local unit targ=LoadUnitHandle(hash, h, 1)
local lightning light=LoadLightningHandle(hash, h, 2)
local real lvl=GetUnitAbilityLevel(u, 0x41303539)
local real remain=LoadReal(hash, h, 3)
local real x=GetUnitX(targ)
local real y=GetUnitY(targ)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real dx=x - x0
local real dy=y - y0
local real dist=SquareRoot(dx * dx + dy * dy)
local integer counter=R2I(remain / .025 + .1)
local group cjlocgn_00000000
local unit cjlocgn_00000001
local location cjlocgn_00000002
local location cjlocgn_00000003
local real cjlocgn_00000004
local real cjlocgn_00000005
if remain > 0. and dist < 1000. and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and ( GetUnitState(targ, UNIT_STATE_LIFE) > .405 ) then
if ModuloInteger(counter, 40) == 0 or counter == 0 then
call SetUnitState(targ, UNIT_STATE_MANA, GetUnitState(targ, UNIT_STATE_MANA) + 30. + 10. * ( lvl - 1 ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl", u, "origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl", targ, "origin"))
set cjlocgn_00000000=CreateGroup()
call UnitAddGroupOnLine(cjlocgn_00000000 , x0 , y0 , x , y , 45.)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000001c
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(cjlocgn_00000000, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000001=FirstOfGroup(cjgrfgn_0000001c)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjgrfgn_0000001c, cjlocgn_00000001)
if ( cjlocgn_00000001 != targ and cjlocgn_00000001 != u and IsUnitAlly(cjlocgn_00000001, GetOwningPlayer(u)) and GetUnitState(cjlocgn_00000001, UNIT_STATE_LIFE) > .405 ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl", cjlocgn_00000001, "origin"))
call SetUnitState(cjlocgn_00000001, UNIT_STATE_MANA, GetUnitState(cjlocgn_00000001, UNIT_STATE_MANA) + 30. + 10. * ( lvl - 1 ))
endif
endloop
endif
set cjlocgn_00000002=ALL_RemoveLocation(GetUnitLoc(targ))
set cjlocgn_00000003=ALL_RemoveLocation(GetUnitLoc(u))
set cjlocgn_00000004=GetLocationZ(cjlocgn_00000002)
set cjlocgn_00000005=GetLocationZ(cjlocgn_00000003) + 60.
if IsUnitType(targ, UNIT_TYPE_HERO) then
set cjlocgn_00000004=GetLocationZ(cjlocgn_00000002) + 60.
endif
call MoveLightningEx(light, true, x0, y0, cjlocgn_00000005, x, y, cjlocgn_00000004)
call RemoveLocation(cjlocgn_00000002)
call RemoveLocation(cjlocgn_00000003)
call SaveReal(hash, h, 3, remain - .025)
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", u, "origin"))
call DestroyLightning(light)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
endif
set cjlocgn_00000003=null
set cjlocgn_00000002=null
set cjlocgn_00000000=null
set targ=null
set u=null
set t=null
endfunction
function cj_callback_00000048 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x41303539)
local location loc=ALL_RemoveLocation(GetUnitLoc(t))
local lightning light=AddLightningEx("CLPB", true, GetUnitX(t), GetUnitY(t), 60., GetUnitX(u), GetUnitY(u), GetLocationZ(loc))
local timer Timer
local integer h
call SetLightningColor(light, 1., 0., 1., 1.)
call RemoveLocation(loc)
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 0, u)
call SaveUnitHandle(hash, h, 1, t)
call SaveLightningHandle(hash, h, 2, light)
call SaveReal(hash, h, 3, 7.)
call TimerStart(Timer, .025, true, function Redirection___Update)
endfunction
// scope Redirection ends
// scope Fracture begins
function cj_anonym__48 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer lvl=GetUnitAbilityLevel(u, 0x41303542)
call SetUnitAbilityLevel(u, 0x41303541, lvl)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303542, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303541, true)
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function cd_restoring takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local timer Timer1=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(Timer1), 1, u)
call TimerStart(Timer1, 0.1, false, function cj_anonym__48)
set Timer1=null
set u=null
set Timer=null
endfunction
function cj_anonym__49 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer lvl=GetUnitAbilityLevel(u, 0x41303542)
call SetUnitAbilityLevel(u, 0x41303541, lvl)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303542, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303541, true)
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function cj_callback_00000049 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local real x=GetUnitX(u) + GetRandomReal(- 100, 100)
local real y=GetUnitY(u) + GetRandomReal(- 100, 100)
local timer Timer1
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl", GetUnitX(t), GetUnitY(t)))
call SetUnitX(t, x)
call SetUnitY(t, y)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl", t, "origin"))
set Timer1=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(Timer1), 1, u)
call TimerStart(Timer1, 0.1, false, function cj_anonym__49)
endfunction
function cj_anonym__50 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer lvl=GetUnitAbilityLevel(u, 0x41303541)
if GetUnitAbilityLevel(u, 0x41303542) == 0 then
call UnitAddAbility(u, 0x41303542)
endif
call SetUnitAbilityLevel(u, 0x41303542, lvl)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303541, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303542, true)
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function cj_callback_0000004a takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local timer Timer1=CreateTimer()
local timer Timer
local integer h
call SaveUnitHandle(hash, GetHandleId(Timer1), 1, u)
call TimerStart(Timer1, 0.1, false, function cj_anonym__50)
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, u)
call TimerStart(Timer, 4., false, function cd_restoring)
endfunction
// scope Fracture ends
// scope Dusk begins
function pit_check takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit dum=LoadUnitHandle(hash, h, 2)
local real remain=LoadReal(hash, h, 3)
local location loc=ALL_RemoveLocation(GetUnitLoc(dum))
local integer lvl
local unit cjlocgn_00000000
local real cjlocgn_00000001
call RemoveUnit(dum)
set dum=CreateUnitAtLoc(GetOwningPlayer(caster), 0x68303246, loc, 0)
call UnitApplyTimedLife(dum, 0x42544C46, 2)
call SaveUnitHandle(hash, h, 2, dum)
call RemoveLocation(loc)
set lvl=GetUnitAbilityLevel(caster, 0x41303543)
call GroupEnumUnitsInRange(cjgrfgn_0000001d, GetUnitX(dum), GetUnitY(dum), 300. + 50. * ( lvl - 1 ), null)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000001d)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000001d, cjlocgn_00000000)
if ( GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 ) and not IsUnitType(cjlocgn_00000000, UNIT_TYPE_STRUCTURE) then
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(caster)) then
set IsTriggerDamage=true
set cjlocgn_00000001=GetUnitState(cjlocgn_00000000, UNIT_STATE_MAX_LIFE) * ( 0.02 + 0.00 * ( lvl - 1 ) )
call UnitDamageTarget(caster, cjlocgn_00000000, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
else
set cjlocgn_00000001=GetUnitState(cjlocgn_00000000, UNIT_STATE_MAX_LIFE) * ( 0.02 + 0.00 * ( lvl - 1 ) )
call SetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE, GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) + cjlocgn_00000001)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", cjlocgn_00000000, "origin"))
endif
endloop
if remain > 0 then
set remain=remain - 1.
call SaveReal(hash, h, 3, remain)
else
call RemoveUnit(dum)
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
set loc=null
set dum=null
set caster=null
set Timer=null
endfunction
function cj_callback_0000004b takes nothing returns nothing
//# optional
local unit u
local unit dum
local integer lvl
local timer Timer
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set u=GetSpellAbilityUnit()
set dum=CreateUnitAtLoc(GetOwningPlayer(u), 0x68303246, ALL_RemoveLocation(GetSpellTargetLoc()), 0)
set lvl=GetUnitAbilityLevel(u, 0x41303543)
call UnitApplyTimedLife(dum, 0x42544C46, 2)
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, u)
call SaveUnitHandle(hash, h, 2, dum)
call SaveReal(hash, h, 3, 8. + 3. * ( lvl - 1 ))
call TimerStart(Timer, 1., true, function pit_check)
endfunction
// scope Dusk ends
// scope Ridilan begins
function s__slepsv_onDestroy takes integer this returns nothing
local integer l__i=s__slepsv_index[this]
set s__slepsv_count=s__slepsv_count - 1
set s__slepsv_me[s__slepsv_index[this]]=s__slepsv_me[s__slepsv_count]
set s__slepsv_index[s__slepsv_me[s__slepsv_index[this]]]=s__slepsv_index[this]
endfunction

//Generated destructor of slepsv
function s__slepsv_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: slepsv")
        return
    elseif (si__slepsv_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: slepsv")
        return
    endif
    call s__slepsv_onDestroy(this)
    set si__slepsv_V[this]=si__slepsv_F
    set si__slepsv_F=this
endfunction
function s__slepsv_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__slepsv_count )
if s__slepsv_c[s__slepsv_me[cjlocgn_00000000]] == u then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__slepsv_damagedfunc takes nothing returns nothing
local integer n
local integer this
local unit source
local unit target
local integer lvl
local real dmg
if IsTriggerDamage or udg_IsDamageSpell or GetUnitAbilityLevel(udg_DamageEventSource, 0x4152424C) == 0 or GetUnitAbilityLevel(udg_DamageEventTarget, 0x416C6F63) > 0 or IsUnitType(udg_DamageEventTarget, UNIT_TYPE_STRUCTURE) or GetUnitAbilityLevel(udg_DamageEventSource, 0x416C6F63) > 0 or udg_DamageEventAmount < 1. then
return
endif
set n=s__slepsv_Find(udg_DamageEventSource)
set this=s__slepsv_me[n]
if n == - 1 or not s__slepsv_hasEff[this] then
return
endif
set source=udg_DamageEventSource
set target=udg_DamageEventTarget
set lvl=GetUnitAbilityLevel(source, 0x4152424C)
set dmg=90. + 30. * ( lvl - 1 )
call SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) - dmg)
call DamageTarget(source , target , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(source , target , 0x41526462 , lvl , "drunkenhaze" , 3.5)
call DestroyEffect(s__slepsv_weap_eff[this])
set s__slepsv_hasEff[this]=false
set target=null
set source=null
endfunction
function s__slepsv_onCast takes nothing returns nothing
local integer n=s__slepsv_Find(GetSpellAbilityUnit())
local boolean is=IsHeroSpell(GetSpellAbilityId())
local integer this
local unit u
if n == - 1 or not is then
return
endif
set this=s__slepsv_me[n]
set u=GetSpellAbilityUnit()
if not s__slepsv_hasEff[this] then
call DestroyEffect(s__slepsv_weap_eff[this])
set s__slepsv_weap_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbTarget.mdl", u, "weapon")
set s__slepsv_hasEff[this]=true
endif
set u=null
endfunction
function s__slepsv_create takes unit u returns integer
local integer l__i=s__slepsv_Find(u)
local integer this
if l__i > - 1 then
return s__slepsv_me[l__i]
endif
set this=s__slepsv__allocate()
set s__slepsv_c[this]=u
set s__slepsv_index[this]=s__slepsv_count
if s__slepsv_trg_cast == null then
set s__slepsv_trg_cast=CreateTrigger()
call TriggerAddAction(s__slepsv_trg_cast, function s__slepsv_onCast)
endif
if s__slepsv_trg_dmg == null then
set s__slepsv_trg_dmg=CreateTrigger()
call TriggerAddAction(s__slepsv_trg_dmg, function s__slepsv_damagedfunc)
call TriggerRegisterVariableEvent(s__slepsv_trg_dmg, "udg_DamageModifierEvent", EQUAL, 1.)
endif
call TriggerRegisterUnitEvent(s__slepsv_trg_cast, u, EVENT_UNIT_SPELL_EFFECT)
set s__slepsv_me[s__slepsv_count]=this
set s__slepsv_count=s__slepsv_count + 1
return this
endfunction
function s__pechsveta_onDestroy takes integer this returns nothing
local integer l__i
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41525061)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41526962)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x42525030)
set l__i=s__pechsveta_index[this]
set s__pechsveta_count=s__pechsveta_count - 1
set s__pechsveta_me[s__pechsveta_index[this]]=s__pechsveta_me[s__pechsveta_count]
set s__pechsveta_index[s__pechsveta_me[s__pechsveta_index[this]]]=s__pechsveta_index[this]
call DestroyTimer(s__pechsveta_time)
endfunction

//Generated destructor of pechsveta
function s__pechsveta_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: pechsveta")
        return
    elseif (si__pechsveta_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: pechsveta")
        return
    endif
    call s__pechsveta_onDestroy(this)
    set si__pechsveta_V[this]=si__pechsveta_F
    set si__pechsveta_F=this
endfunction
function s__pechsveta_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__pechsveta_count )
if s__pechsveta_affected[s__pechsveta_me[cjlocgn_00000000]] == u then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__pechsveta_onTimerTick takes nothing returns nothing
local integer l__i=0
local integer this
loop
exitwhen not ( ( l__i < s__pechsveta_count ) )
set this=s__pechsveta_me[l__i]
set s__pechsveta_remain[this]=s__pechsveta_remain[this] - ( 0.1 )
if s__pechsveta_remain[this] <= 0. then
call s__pechsveta_deallocate(this)
endif
set l__i=l__i + 1
endloop
endfunction
function s__pechsveta_create takes unit u,integer level returns integer
local integer l__i=s__pechsveta_Find(u)
local integer this
if l__i > - 1 then
set this=s__pechsveta_me[l__i]
else
set this=s__pechsveta__allocate()
set s__pechsveta_index[this]=s__pechsveta_count
set s__pechsveta_affected[this]=u
call UnitAddAbility(u, 0x41525061)
call UnitAddAbility(u, 0x41526962)
call SetUnitAbilityLevel(u, 0x41525061, level)
call SetUnitAbilityLevel(u, 0x41525062, level)
if s__pechsveta_count == 0 then
set s__pechsveta_time=CreateTimer()
call TimerStart(s__pechsveta_time, 0.1, true, function s__pechsveta_onTimerTick)
endif
set s__pechsveta_me[s__pechsveta_count]=this
set s__pechsveta_count=s__pechsveta_count + 1
endif
set s__pechsveta_remain[this]=4. + 0.5 * ( level - 1 )
return this
endfunction
function cj_callback_0000004c takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x4152534C)
call s__pechsveta_create(u , lvl)
endfunction
function s__Ridilan___ridichargetarg_create takes unit u,real speed,integer startVector,integer endVector returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__Ridilan___ridichargetarg__allocate(u)
call s__projectile__set_collision(d,80.)
set s__projectile_activePitch[d]=false
set s__projectile_activeUnitCollision[d]=false
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function s__Ridilan___ridichargeproj_onUnitCollision takes integer this,unit u returns nothing
local real dmg_heal=200. + ( s__Ridilan___ridichargeproj_level[this] - 1 ) * 100.
local real x
local real y
local real xt
local real yt
local real angle
local real distance=175.
local integer A
local integer B
call DamageTarget(s__projectile__get_source(this) , u , dmg_heal , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call SetUnitState(s__projectile__get_source(this), UNIT_STATE_LIFE, GetUnitState(s__projectile__get_source(this), UNIT_STATE_LIFE) + dmg_heal)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , u , 0x41303255 , R2I(.5 / .1 + .1) , "thunderbolt" , 3.5)
set x=GetUnitX(s__projectile__get_source(this))
set y=GetUnitY(s__projectile__get_source(this))
set xt=GetUnitX(u)
set yt=GetUnitY(u)
set angle=Atan2(yt - y, xt - x)
set x=xt + distance * Cos(angle)
set y=yt + distance * Sin(angle)
set A=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(u))
set B=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(u))
call s__Ridilan___ridichargetarg_create(u , 600. , A , B)
call s__vector_deallocate(A)
call s__vector_deallocate(B)
call PauseUnit(s__projectile__get_source(this), false)
call SetUnitInvulnerable(s__projectile__get_source(this), false)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", u, "overhead"))
call DestroyEffect(s__Ridilan___ridichargeproj_eff[this])
call StartSound(gg_snd_ThunderClapCaster)
call IssueTargetOrder(s__projectile__get_source(this), "attack", u)
call SetUnitVertexColor(s__projectile__get_source(this), 255, 255, 255, 255)
call sc__projectileinterface_deallocate(this)
endfunction
function s__Ridilan___ridichargeproj_onIteration takes integer this returns nothing
call DestroyEffect(s__Ridilan___ridichargeproj_eff[this])
set s__Ridilan___ridichargeproj_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", s__projectile__get_source(this), "weapon")
endfunction
function s__Ridilan___ridichargeproj_isValidTargetUnit takes integer this,unit u returns boolean
return u == s__projectile__get_target(this) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__Ridilan___ridichargeproj_DelayedLaunch takes nothing returns nothing
local integer this=LoadInteger(hash, GetHandleId(GetExpiredTimer()), 0)
set s__Ridilan___ridichargeproj_remain[this]=s__Ridilan___ridichargeproj_remain[this] - ( 0.05 )
if s__Ridilan___ridichargeproj_remain[this] <= 0. then
call SetUnitAnimationByIndex(s__projectile__get_source(this), 12)
call s__projectile_launch(this,s__Ridilan___ridichargeproj_Aa[this] , s__Ridilan___ridichargeproj_Bb[this] , s__Ridilan___ridichargeproj_lspeed[this] , 0.)
call s__vector_deallocate(s__Ridilan___ridichargeproj_Aa[this])
call s__vector_deallocate(s__Ridilan___ridichargeproj_Bb[this])
set s__Ridilan___ridichargeproj_eff[this]=AddSpecialEffectTarget("RCH_casteranim", s__projectile__get_source(this), "weapon")
call FlushChildHashtable(hash, GetHandleId(s__Ridilan___ridichargeproj_delay[this]))
call PauseTimer(s__Ridilan___ridichargeproj_delay[this])
call DestroyTimer(s__Ridilan___ridichargeproj_delay[this])
else
set s__Ridilan___ridichargeproj_bluecolor[this]=s__Ridilan___ridichargeproj_bluecolor[this] - ( 20 )
set s__Ridilan___ridichargeproj_alphacolor[this]=s__Ridilan___ridichargeproj_alphacolor[this] - ( 17 )
call SetUnitVertexColor(s__projectile__get_source(this), 250, 255, s__Ridilan___ridichargeproj_bluecolor[this], s__Ridilan___ridichargeproj_alphacolor[this])
endif
endfunction
function s__Ridilan___ridichargeproj_create takes unit u,unit target,integer level,real speed,integer startVector,integer endVector returns integer
local integer d=s__Ridilan___ridichargeproj__allocate(u)
call PauseUnit(u, true)
call SetUnitInvulnerable(u, true)
call SetUnitAnimationByIndex(u, 4)
call s__projectile__set_source(d,u)
call s__projectile__set_target(d,target)
set s__Ridilan___ridichargeproj_level[d]=level
call s__projectile__set_collision(d,80.)
set s__projectile_activePitch[d]=false
set s__projectile_activeTargetFollow[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=false
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
set s__Ridilan___ridichargeproj_delay[d]=CreateTimer()
set s__Ridilan___ridichargeproj_remain[d]=0.3
set s__Ridilan___ridichargeproj_Aa[d]=startVector
set s__Ridilan___ridichargeproj_Bb[d]=endVector
set s__Ridilan___ridichargeproj_lspeed[d]=speed
call TimerStart(s__Ridilan___ridichargeproj_delay[d], 0.05, true, function s__Ridilan___ridichargeproj_DelayedLaunch)
call SaveInteger(hash, GetHandleId(s__Ridilan___ridichargeproj_delay[d]), 0, d)
return d
endfunction
function cj_callback_0000004d takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local integer level=GetUnitAbilityLevel(source, 0x41524A55)
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local integer A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source))
local integer B
set x=GetUnitX(target)
set y=GetUnitY(target)
set B=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source))
call s__Ridilan___ridichargeproj_create(source , target , level , 700. , A , B)
endfunction
function cj_callback_0000004e takes nothing returns nothing
//# optional
local unit u=GetLearningUnit()
if GetLearnedSkillLevel() <= 1 then
call s__slepsv_create(u)
endif
set u=null
endfunction
function cj_callback_0000004f takes nothing returns nothing
//# optional
local integer l__i=0
call Preload("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav")
call Preload("Abilities\\Spells\\Items\\AIfb\\AIfbTarget.mdl")
call Preload("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl")
call Preload("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
loop
exitwhen not ( ( l__i < 15 ) )
call SetPlayerAbilityAvailable(Player(l__i), 0x41526962, false)
set l__i=l__i + 1
endloop
endfunction
// scope Ridilan ends
function Trig_Penetration_Strike_Conditions takes nothing returns boolean
if ( not ( GetSpellAbilityId() == 0x41524950 ) ) then
return false
endif
return true
endfunction
function Trig_Penetration_Strike_Actions takes nothing returns nothing
call SetUnitManaBJ(GetSpellTargetUnit(), ( GetUnitStateSwap(UNIT_STATE_MANA, GetSpellTargetUnit()) - ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevelSwapped(0x41524950, GetTriggerUnit())) ) ) ))
endfunction
function InitTrig_Penetration_Strike takes nothing returns nothing
set gg_trg_Penetration_Strike=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Penetration_Strike, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Penetration_Strike, Condition(function Trig_Penetration_Strike_Conditions))
call TriggerAddAction(gg_trg_Penetration_Strike, function Trig_Penetration_Strike_Actions)
endfunction
function Trig_Inspire_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41526F49
endfunction
function Trig_Inspire_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local real heal=70. + 50. * ( GetUnitAbilityLevel(c, 0x41526F49) - 1 )
call SetUnitState(( c ), UNIT_STATE_LIFE, GetUnitState(c, UNIT_STATE_LIFE) + heal)
call SetUnitState(( t ), UNIT_STATE_LIFE, GetUnitState(t, UNIT_STATE_LIFE) + heal)
call UnitRemoveBuffs(t, false, true)
set c=null
set t=null
endfunction
function InitTrig_Inspire takes nothing returns nothing
set gg_trg_Inspire=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Inspire, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Inspire, Condition(function Trig_Inspire_Conditions))
call TriggerAddAction(gg_trg_Inspire, function Trig_Inspire_Actions)
endfunction
// scope RonaldAura begins
function RonaldAura___Bexpr_Hero takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(), GetOwningPlayer(RonaldAura___zashitnik)) and RonaldAura___zashitnik != GetFilterUnit()
endfunction
function RonaldAura___AddReduction takes nothing returns nothing
local unit u=GetEnumUnit()
call UnitAddAbility(u, 0x41527362)
call SetUnitAbilityLevel(u, 0x41526D72, RonaldAura___lvl_abil)
call UnitAddAbility(u, 0x41526162)
call SetUnitAbilityLevel(u, 0x41526162, RonaldAura___lvl_abil)
set u=null
endfunction
function RonaldAura___RemoveReduction takes nothing returns nothing
local unit u=GetEnumUnit()
call UnitRemoveAbility(u, 0x41527362)
call UnitRemoveAbility(u, 0x41526162)
call UnitRemoveAbility(u, 0x42303133)
set u=null
endfunction
function RonaldAura___Timer_tick takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local group old_group
local real remain=LoadReal(hash, h, 2) - .5
local unit cjlocgn_00000000
local real cjlocgn_00000001
local integer cjlocgn_00000002
local group cjlocgn_00000003
if remain >= 0. then
set cjlocgn_00000000=LoadUnitHandle(hash, h, 0)
set cjlocgn_00000001=340.
set cjlocgn_00000002=GetUnitAbilityLevel(cjlocgn_00000000, 0x41525A53)
set old_group=LoadGroupHandle(hash, h, 1)
set cjlocgn_00000003=CreateGroup()
call ForGroup(old_group, function RonaldAura___RemoveReduction)
set RonaldAura___zashitnik=cjlocgn_00000000
call GroupEnumUnitsInRange(cjlocgn_00000003, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), cjlocgn_00000001, Filter(function RonaldAura___Bexpr_Hero))
set RonaldAura___zashitnik=null
call DestroyGroup(old_group)
set RonaldAura___lvl_abil=cjlocgn_00000002
call ForGroup(cjlocgn_00000003, function RonaldAura___AddReduction)
call SaveGroupHandle(hash, h, 1, cjlocgn_00000003)
call SaveReal(hash, h, 2, remain)
set cjlocgn_00000000=null
set cjlocgn_00000003=null
else
set cjlocgn_00000000=LoadUnitHandle(hash, h, 0)
call UnitRemoveAbility(cjlocgn_00000000, 0x41303256)
set old_group=LoadGroupHandle(hash, h, 1)
call ForGroup(old_group, function RonaldAura___RemoveReduction)
call DestroyGroup(old_group)
call FlushChildHashtable(hash, h)
call PauseTimer(Timer)
call DestroyTimer(Timer)
set cjlocgn_00000000=null
endif
set old_group=null
set Timer=null
endfunction
function cj_callback_00000050 takes nothing returns nothing
//# optional
local unit c=GetSpellAbilityUnit()
local player p=GetOwningPlayer(c)
local real remain=5.
local real rad=340.
local integer lvl=GetUnitAbilityLevel(c, 0x41525A53)
local timer Timer=CreateTimer()
local integer h=GetHandleId(Timer)
local group Allys=CreateGroup()
call UnitAddAbility(c, 0x41303256)
set RonaldAura___zashitnik=c
call GroupEnumUnitsInRange(Allys, GetUnitX(c), GetUnitY(c), rad, Filter(function RonaldAura___Bexpr_Hero))
set RonaldAura___zashitnik=null
set RonaldAura___lvl_abil=lvl
call ForGroup(Allys, function RonaldAura___AddReduction)
call SaveUnitHandle(hash, h, 0, c)
call SaveGroupHandle(hash, h, 1, Allys)
call SaveReal(hash, h, 2, remain)
call TimerStart(Timer, .5, true, function RonaldAura___Timer_tick)
set c=null
set p=null
set Timer=null
set Allys=null
endfunction
function cj_callback_00000051 takes nothing returns nothing
//# optional
local integer l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call SetPlayerAbilityAvailable(Player(l__i), 0x41527362, false)
call SetPlayerAbilityAvailable(Player(l__i), 0x41303256, false)
set l__i=l__i + 1
endloop
endfunction
// scope RonaldAura ends
function Trig_LifeWall_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41524C57
endfunction
function Trig_LifeWall_Actions takes nothing returns nothing
local unit c=GetSpellAbilityUnit()
local real x=GetUnitX(c)
local real y=GetUnitY(c)
local real x_t=GetSpellTargetX()
local real y_t=GetSpellTargetY()
local player p=GetOwningPlayer(c)
local integer lvl=GetUnitAbilityLevel(c, 0x41524C57)
local real dt=56.
local real angle=Atan2(y_t - y, x_t - x)
local real f=Rad2Deg(angle)
local unit footman
local unit block
local real xn=x_t + Cos(angle - bj_PI / 2) * 225.
local real yn=y_t + Sin(angle - bj_PI / 2) * 225.
local real dx=Cos(angle + bj_PI / 2) * dt
local real dy=Sin(angle + bj_PI / 2) * dt
local integer l__i=0
loop
set footman=CreateUnit(p, 0x6872314A, xn, yn, f)
call UnitApplyTimedLife(footman, 0x42544C46, 2. + lvl)
call SetUnitAnimation(footman, "Stand Defend")
set block=CreateUnit(p, 0x6872314B, GetUnitX(footman), GetUnitY(footman), f)
call UnitApplyTimedLife(block, 0x42544C46, 2. + lvl)
call SetUnitInvulnerable(block, true)
set xn=xn + ( dx )
set yn=yn + ( dy )
set l__i=l__i + 1
exitwhen l__i > 8
endloop
set c=null
set p=null
set footman=null
set block=null
endfunction
function InitTrig_LifeWall takes nothing returns nothing
set gg_trg_LifeWall=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_LifeWall, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_LifeWall, Condition(function Trig_LifeWall_Conditions))
call TriggerAddAction(gg_trg_LifeWall, function Trig_LifeWall_Actions)
endfunction
// scope RonaldReincarnation begins
function cj_anonym__52 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local trigger trg=LoadTriggerHandle(hash, GetHandleId(Timer), 0)
call EnableTrigger(trg)
call PauseTimer(Timer)
set Timer=null
set trg=null
endfunction
function cj_anonym__51 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 0)
call BJDebugMsg(R2S(GetUnitState(u, UNIT_STATE_MAX_LIFE)) + " " + R2S(GetUnitState(u, UNIT_STATE_LIFE)))
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE) * ( 70. + 15. * ( GetUnitAbilityLevel(u, 0x41525252 - 1) ) ) * .01)
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA))
set u=null
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
endfunction
function RonaldReincarnation___Reinc takes nothing returns nothing
local trigger trg=GetTriggeringTrigger()
local unit u=GetTriggerUnit()
local timer CD_timer=LoadTimerHandle(hash, GetHandleId(trg), 0)
local timer DELAY_timer=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(DELAY_timer), 0, u)
call TimerStart(DELAY_timer, 3. + .0001, false, function cj_anonym__51)
call TimerStart(CD_timer, 120. + ( - 20. * ( GetUnitAbilityLevel(u, 0x41525252) - 1 ) ), false, function cj_anonym__52)
call DisableTrigger(trg)
set trg=null
set u=null
set CD_timer=null
set DELAY_timer=null
endfunction
function cj_callback_00000052 takes nothing returns nothing
//# optional
local unit u=GetLearningUnit()
local trigger cjlocgn_00000000
local timer cjlocgn_00000001
if GetLearnedSkillLevel() <= 1 then
set cjlocgn_00000000=CreateTrigger()
call TriggerRegisterUnitStateEvent(cjlocgn_00000000, u, UNIT_STATE_LIFE, LESS_THAN_OR_EQUAL, .405)
call TriggerAddAction(cjlocgn_00000000, function RonaldReincarnation___Reinc)
set cjlocgn_00000001=CreateTimer()
call SaveTimerHandle(hash, GetHandleId(cjlocgn_00000000), 0, cjlocgn_00000001)
call SaveTriggerHandle(hash, GetHandleId(cjlocgn_00000001), 0, cjlocgn_00000000)
set cjlocgn_00000000=null
set cjlocgn_00000001=null
endif
set u=null
endfunction
// scope RonaldReincarnation ends
// scope sod begins
function s__sod___sodproj_onUnitCollision takes integer this,unit u returns nothing
local real dmg=GetUnitState(s__projectile__get_target(this), UNIT_STATE_LIFE) * .13 + GetHeroAgi(s__projectile__get_source(this), true) * ( GetUnitAbilityLevel(s__projectile__get_source(this), 0x41535544) )
set dmg=dmg
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , u , 0x41303255 , R2I(2. / .1 + .1) , "thunderbolt" , 3.5)
call sc__projectileinterface_deallocate(this)
endfunction
function s__sod___sodproj_isValidTargetUnit takes integer this,unit u returns boolean
return s__projectile__get_target(this) == u and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__sod___sodproj_create takes unit u,integer level,unit target,real speed,integer startVector,integer endVector,string modelpath returns integer
local integer d=s__sod___sodproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), GetUnitFacing(u)))
call s__projectile_setModel(d,modelpath)
call s__projectile__set_source(d,u)
call s__projectile__set_target(d,target)
set s__sod___sodproj_level[d]=level
set s__projectile_activePitch[d]=true
set s__projectile_activeTargetFollow[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000053 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local integer level=GetUnitAbilityLevel(source, 0x41535544)
local real x
local real y
local integer A
local integer B
local integer G
set x=GetUnitX(source)
set y=GetUnitY(source)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set x=GetUnitX(target)
set y=GetUnitY(target)
set B=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(target) + 80.)
set G=s__sod___sodproj_create(source , level , target , 1100. , A , B , "Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope sod ends
// scope SikrufSF begins
function SikrufSF___SF_CD_Expires takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
if GetUnitAbilityLevel(u, 0x41303155) > 0 then
call UnitRemoveAbility(u, 0x41303155)
endif
call UnitAddAbility(u, 0x41303156)
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function SikrufSF___OnDmged takes nothing returns nothing
local unit u=udg_DamageEventTarget
local timer t=LoadTimerHandle(hash, GetHandleId(u), 0x41535346)
local real cjlocgn_00000000
if GetUnitAbilityLevel(u, 0x41535346) > 0 and t == null and udg_DamageEventAmount > 20. then
call UnitRemoveAbility(u, 0x41303156)
call UnitRemoveAbility(u, 0x42303051)
set udg_DamageEventAmount=0.
if not UnitAddPowerUpItem(u , 0x49303139) then
call BJDebugMsg("Ошибка - юнит неможет поднять предмет!")
endif
call RemoveItem(bj_lastCreatedItem)
set t=CreateTimer()
call SaveTimerHandle(hash, GetHandleId(u), 0x41535346, t)
call SaveUnitHandle(hash, GetHandleId(t), 0, u)
set cjlocgn_00000000=( 9. - ( GetUnitAbilityLevel(u, 0x41535346) - 1 ) )
call TimerStart(t, cjlocgn_00000000, false, function SikrufSF___SF_CD_Expires)
endif
set u=null
set t=null
endfunction
function cj_callback_00000054 takes nothing returns nothing
//# optional
if GetLearnedSkillLevel() <= 1 then
call UnitAddAbility(GetLearningUnit(), 0x41303156)
endif
endfunction
function SikrufSF___Init takes nothing returns nothing
set SikrufSF___dmgtrg=CreateTrigger()
call TriggerRegisterVariableEvent(SikrufSF___dmgtrg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(SikrufSF___dmgtrg, function SikrufSF___OnDmged)
endfunction
// scope SikrufSF ends
function Trig_SikrPassAgi_Conditions takes nothing returns boolean
if ( not ( GetLearnedSkillBJ() == 0x41535346 ) ) then
return false
endif
return true
endfunction
function Trig_SikrPassAgi_Actions takes nothing returns nothing
call ModifyHeroStat(bj_HEROSTAT_AGI, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, 3)
endfunction
function InitTrig_SikrPassAgi takes nothing returns nothing
set gg_trg_SikrPassAgi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SikrPassAgi, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_SikrPassAgi, Condition(function Trig_SikrPassAgi_Conditions))
call TriggerAddAction(gg_trg_SikrPassAgi, function Trig_SikrPassAgi_Actions)
endfunction
function Trig_Metka2_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41534D53
endfunction
function Metka_Condition_tp takes nothing returns boolean
return GetSpellAbilityId() == 0x41534D54
endfunction
function Metka_effect takes nothing returns nothing
local timer t=GetExpiredTimer()
local effect eff=LoadEffectHandle(hash, GetHandleId(t), 1)
call FlushChildHashtable(hash, GetHandleId(t))
call DestroyEffect(eff)
call DestroyTimer(t)
set eff=null
set t=null
endfunction
function Metka_end takes nothing returns nothing
local timer m_t=GetExpiredTimer()
local integer h=GetHandleId(m_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local trigger tp_metka=LoadTriggerHandle(hash, h, 4)
local effect eff=LoadEffectHandle(hash, h, 5)
call FlushChildHashtable(hash, h)
call FlushChildHashtable(hash, GetHandleId(tp_metka))
call UnitRemoveAbility(caster, 0x41534D54)
call SetPlayerAbilityAvailable(GetOwningPlayer(caster), 0x41534D53, true)
call DestroyEffect(eff)
set eff=AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(caster), GetUnitY(caster))
call DestroyEffect(eff)
call DestroyTimer(m_t)
call DestroyTrigger(tp_metka)
set m_t=CreateTimer()
call SaveEffectHandle(hash, GetHandleId(tp_metka), 1, eff)
call TimerStart(m_t, 0.1, false, function Metka_effect)
set eff=null
set m_t=null
set caster=null
set tp_metka=null
endfunction
function Metka_tp takes nothing returns nothing
local trigger tp_metka=GetTriggeringTrigger()
local integer h=GetHandleId(tp_metka)
local unit caster=LoadUnitHandle(hash, h, 1)
local real m_x=LoadReal(hash, h, 2)
local real m_y=LoadReal(hash, h, 3)
local timer m_t=LoadTimerHandle(hash, h, 4)
local effect eff=LoadEffectHandle(hash, h, 5)
call FlushChildHashtable(hash, h)
call FlushChildHashtable(hash, GetHandleId(m_t))
call DestroyEffect(eff)
set eff=AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", GetUnitX(caster), GetUnitY(caster))
call SetUnitX(caster, m_x)
call SetUnitY(caster, m_y)
call UnitRemoveAbility(caster, 0x41534D54)
call SetPlayerAbilityAvailable(GetOwningPlayer(caster), 0x41534D53, true)
call DestroyEffect(eff)
call DestroyTimer(m_t)
call DestroyTrigger(tp_metka)
set m_t=CreateTimer()
call SaveEffectHandle(hash, GetHandleId(tp_metka), 1, eff)
call TimerStart(m_t, 1., false, function Metka_effect)
set eff=null
set m_t=null
set caster=null
set tp_metka=null
endfunction
function Trig_Metka2_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local player m_player=GetTriggerPlayer()
local integer m_level=GetUnitAbilityLevel(caster, 0x41534D53)
local real m_x=GetUnitX(caster)
local real m_y=GetUnitY(caster)
local force cast_force=PlayerTeam(m_player)
local timer m_t=CreateTimer()
local real casttime=7
local trigger TP_metka=CreateTrigger()
local integer h_trig=GetHandleId(TP_metka)
local integer h_timer=GetHandleId(m_t)
local effect eff
call BJDebugMsg("Locals are inicialized")
call UnitAddAbility(caster, 0x41534D54)
call SetUnitAbilityLevel(caster, 0x41534D54, m_level)
call SetPlayerAbilityAvailable(m_player, 0x41534D53, false)
set eff=AddSpecialEffect("Doodads\\BlackCitadel\\Props\\RuneArt\\RuneArt2.mdl", m_x, m_y)
call SaveUnitHandle(hash, h_trig, 1, caster)
call SaveReal(hash, h_trig, 2, m_x)
call SaveReal(hash, h_trig, 3, m_y)
call SaveTimerHandle(hash, h_trig, 4, m_t)
call SaveEffectHandle(hash, h_trig, 5, eff)
call SaveUnitHandle(hash, h_timer, 1, caster)
call SaveReal(hash, h_timer, 2, m_x)
call SaveReal(hash, h_timer, 3, m_y)
call SaveTriggerHandle(hash, h_timer, 4, TP_metka)
call SaveEffectHandle(hash, h_timer, 5, eff)
call TriggerRegisterPlayerUnitEvent(TP_metka, m_player, EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
call TriggerAddCondition(TP_metka, Condition(function Metka_Condition_tp))
call TriggerAddAction(TP_metka, function Metka_tp)
call TimerStart(m_t, casttime, false, function Metka_end)
set eff=null
set caster=null
set TP_metka=null
set m_t=null
set m_player=null
set cast_force=null
endfunction
function InitTrig_Metka2 takes nothing returns nothing
set gg_trg_Metka2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Metka2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Metka2, Condition(function Trig_Metka2_Conditions))
call TriggerAddAction(gg_trg_Metka2, function Trig_Metka2_Actions)
endfunction
// scope Istosh begins
function Istosh___Update takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 0)
local unit targ=LoadUnitHandle(hash, h, 1)
local lightning light=LoadLightningHandle(hash, h, 2)
local real remain=LoadReal(hash, h, 3)
local real x=GetUnitX(targ)
local real y=GetUnitY(targ)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real dx=x - x0
local real dy=y - y0
local real dist=SquareRoot(dx * dx + dy * dy)
local integer counter=R2I(remain / .025 + .1)
local real cjlocgn_00000000
local group cjlocgn_00000001
local unit cjlocgn_00000002
local location cjlocgn_00000003
local location cjlocgn_00000004
local real cjlocgn_00000005
if remain > 0. and dist < 550. and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and ( GetUnitState(targ, UNIT_STATE_LIFE) > .405 ) then
set IsTriggerDamage=true
if ModuloInteger(counter, 40) == 0 or counter == 0 then
set cjlocgn_00000000=35. + 0.05 * GetUnitState(targ, UNIT_STATE_LIFE)
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + cjlocgn_00000000 / 2)
call UnitDamageTarget(u, targ, cjlocgn_00000000, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", u, "chest"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Orc\\OrcSmallDeathExplode\\OrcSmallDeathExplode.mdl", targ, "origin"))
set cjlocgn_00000001=CreateGroup()
call UnitAddGroupOnLine(cjlocgn_00000001 , x0 , y0 , x , y , 45.)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000001e
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(cjlocgn_00000001, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_0000001e)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_0000001e, cjlocgn_00000002)
if ( cjlocgn_00000002 != targ and IsUnitEnemy(cjlocgn_00000002, GetOwningPlayer(u)) and GetUnitState(cjlocgn_00000002, UNIT_STATE_LIFE) > .405 ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\TrollBeserkerTarget.mdl", cjlocgn_00000002, "origin"))
call UnitDamageTarget(u, cjlocgn_00000002, cjlocgn_00000000, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
endloop
endif
set IsTriggerDamage=false
set cjlocgn_00000003=ALL_RemoveLocation(GetUnitLoc(targ))
set cjlocgn_00000004=ALL_RemoveLocation(GetUnitLoc(u))
set cjlocgn_00000000=GetLocationZ(cjlocgn_00000003)
set cjlocgn_00000005=GetLocationZ(cjlocgn_00000004) + 60.
if IsUnitType(targ, UNIT_TYPE_HERO) then
set cjlocgn_00000000=GetLocationZ(cjlocgn_00000003) + 60.
endif
call MoveLightningEx(light, true, x0, y0, cjlocgn_00000005, x, y, cjlocgn_00000000)
call RemoveLocation(cjlocgn_00000003)
call RemoveLocation(cjlocgn_00000004)
call SaveReal(hash, h, 3, remain - .025)
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", u, "origin"))
call DestroyLightning(light)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
endif
set cjlocgn_00000004=null
set cjlocgn_00000003=null
set cjlocgn_00000001=null
set targ=null
set u=null
set t=null
endfunction
function cj_callback_00000055 takes nothing returns nothing
//# optional
local unit u
local unit t
local integer lvl
local location loc
local lightning light
local timer Timer
local integer h
set udg_DamageEventType=udg_DamageTypeSpell
set u=GetSpellAbilityUnit()
set t=GetSpellTargetUnit()
set lvl=GetUnitAbilityLevel(u, 0x41303530)
set loc=ALL_RemoveLocation(GetUnitLoc(t))
set light=AddLightningEx("CLPB", true, GetUnitX(t), GetUnitY(t), 60., GetUnitX(u), GetUnitY(u), GetLocationZ(loc))
call SetLightningColor(light, 1., 0., 0., 1.)
call RemoveLocation(loc)
set Timer=CreateTimer()
set h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 0, u)
call SaveUnitHandle(hash, h, 1, t)
call SaveLightningHandle(hash, h, 2, light)
call SaveReal(hash, h, 3, 4. + 1. * ( lvl - 1 ))
call TimerStart(Timer, .025, true, function Istosh___Update)
endfunction
// scope Istosh ends
// scope Execute begins
function s__thexec_onUnitCollision takes integer this,unit u returns nothing
local real dmg
call GroupAddUnit(s__thexec_affected[this], u)
set dmg=45. + 25. * ( s__thexec_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endfunction
function s__thexec_isValidTargetUnit takes integer this,unit u returns boolean
return not IsUnitInGroup(u, s__thexec_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__thexec_onFinish takes integer this returns nothing
call DestroyGroup(s__thexec_affected[this])
set s__thexec_affected[this]=null
endfunction
function s__thexec_create takes unit u,unit t,integer level,real dist,real speed,real arc,integer startVector,integer endVector,string modelpath returns integer
local real ang=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__thexec__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(t), GetUnitY(t), Rad2Deg(ang)))
call s__projectile_setModel(d,modelpath)
set s__thexec_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
call GroupAddUnit(s__thexec_affected[d], t)
set s__thexec_level[d]=level
call s__projectile__set_collision(d,60.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , arc)
set s__vector_z[s__projectile_VECTOR__acceleration[d]]=( - 2 * arc * speed / dist ) * s__projectile_DATA__loopRef * s__projectile_DATA__loopRef
set s__vector_z[s__projectile_VECTOR__velocity[d]]=0.
return d
endfunction
function execute_start takes nothing returns nothing
local unit source=udg_DamageEventSource
local unit target
local real x
local real y
local real xt
local real yt
local real angle
local integer level
local real distance=600.
local integer A
local integer B
local integer E
if IsTriggerDamage or udg_IsDamageSpell or udg_DamageEventAmount < 1 or GetUnitAbilityLevel(source, 0x41303458) == 0 or GetRandomInt(1, 2) > 1 then
set source=null
return
endif
set target=udg_DamageEventTarget
set x=GetUnitX(source)
set y=GetUnitY(source)
set xt=GetUnitX(target)
set yt=GetUnitY(target)
set angle=Atan2(yt - y, xt - x)
set level=GetUnitAbilityLevel(source, 0x41303458)
set x=xt + distance * Cos(angle)
set y=yt + distance * Sin(angle)
set A=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(target) + 50.)
set B=s__vector_create(x , y , GetTerrainZ(x , y))
set E=s__thexec_create(source , target , level , distance , 800. , 0.6 , A , B , "Instantdeath.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set source=null
set target=null
endfunction
function cj_callback_00000056 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function execute_start)
endfunction
// scope Execute ends
// scope FallenGladiator begins
function s__gladiator_onTimerTick takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__gladiator_count )
set this=s__gladiator_me[cjlocgn_00000000]
if ( not ( GetUnitState(s__gladiator_u[this], UNIT_STATE_LIFE) > .405 ) ) then
call sc__gladiator_deallocate(this)
set cjlocgn_00000000=cjlocgn_00000000 - 1

elseif ( ( GetUnitState(s__gladiator_source[this], UNIT_STATE_LIFE) > .405 ) ) then
if IsUnitInRange(s__gladiator_u[this], s__gladiator_source[this], 700.) then
call SetUnitInvulnerable(s__gladiator_u[this], true)
else
call SetUnitInvulnerable(s__gladiator_u[this], false)
endif
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__gladiator_onDestroy takes integer this returns nothing
local integer l__i=s__gladiator_index[this]
set s__gladiator_count=s__gladiator_count - 1
set s__gladiator_me[s__gladiator_index[this]]=s__gladiator_me[s__gladiator_count]
set s__gladiator_index[s__gladiator_me[s__gladiator_index[this]]]=s__gladiator_index[this]
if s__gladiator_count == 0 then
call DestroyTimer(s__gladiator_gtime)
endif
endfunction

//Generated destructor of gladiator
function s__gladiator_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: gladiator")
        return
    elseif (si__gladiator_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: gladiator")
        return
    endif
    call s__gladiator_onDestroy(this)
    set si__gladiator_V[this]=si__gladiator_F
    set si__gladiator_F=this
endfunction
function s__gladiator_create takes unit s,unit t,integer lvl returns integer
local integer d=s__gladiator__allocate()
set s__gladiator_source[d]=s
set s__gladiator_u[d]=CreateUnit(GetOwningPlayer(s), s__gladiator_unit_type1 + lvl - 1, GetUnitX(t), GetUnitY(t), 0.)
call UnitApplyTimedLife(s__gladiator_u[d], 0x42544C46, 8.)
set s__gladiator_index[d]=s__gladiator_count
if ( s__gladiator_count == 0 ) then
set s__gladiator_gtime=CreateTimer()
call TimerStart(s__gladiator_gtime, 0.3, true, function s__gladiator_onTimerTick)
endif
set s__gladiator_me[s__gladiator_count]=d
set s__gladiator_count=s__gladiator_count + 1
return d
endfunction
function s__gladproj_onUnitCollision takes integer this,unit u returns nothing
local real dmg
local integer gl
call GroupAddUnit(s__gladproj_affected[this], u)
set dmg=60. + 50. * ( s__gladproj_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
set gl=s__gladiator_create(s__projectile__get_source(this) , s__projectile_toUnit[this] , s__gladproj_level[this])
call sc__projectileinterface_deallocate(s__gladproj_self[this])
endfunction
function s__gladproj_isValidTargetUnit takes integer this,unit u returns boolean
return s__gladproj_affected[this] != null and FirstOfGroup(s__gladproj_affected[this]) == null and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__gladproj_onDestroy takes integer this returns nothing
call DestroyGroup(s__gladproj_affected[this])
set s__gladproj_affected[this]=null
endfunction
function s__gladproj_create takes unit u,integer level,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real ang=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__gladproj__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(ang)))
call s__projectile_setModel(d,modelpath)
set s__gladproj_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__gladproj_level[d]=level
call s__projectile__set_collision(d,100.)
set s__gladproj_self[d]=d
set s__projectile_activePitch[d]=true
set s__projectile_activeRotation[d]=false
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000057 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x41303459)
local real distance=700.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 70.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 70.)
set G=s__gladproj_create(source , level , distance , 850. , A , B , "Abilities\\Weapons\\RexxarMissile\\RexxarMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set source=null
endfunction
// scope FallenGladiator ends
function Trig_BLOODLUST_Conditions takes nothing returns boolean
return IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO) and not IsTriggerDamage and not udg_IsDamageSpell and not IsUnitIllusion(udg_DamageEventSource) and GetUnitAbilityLevel(udg_DamageEventSource, 0x4130345A) > 0
endfunction
function cj_anonym__53 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endfunction
function Trig_BLOODLUST_Actions takes nothing returns nothing
local unit THOOOOOOOR=udg_DamageEventSource
local integer h=GetHandleId(THOOOOOOOR)
local timer Timer=LoadTimerHandle(hash, h, 100)
local real cjlocgn_00000000
if ( Timer == null ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Blood\\BloodImpact", udg_DamageEventTarget, "origin"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_DamageEventTarget, "origin"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", udg_DamageEventTarget, "origin"))
set Timer=CreateTimer()
call TimerStart(Timer, 5. - 1. * GetUnitAbilityLevel(THOOOOOOOR, 0x4130345A), false, function cj_anonym__53)
call SaveTimerHandle(hash, h, 100, Timer)
set cjlocgn_00000000=GetUnitState(udg_DamageEventTarget, UNIT_STATE_MAX_LIFE) * 0.04
set IsTriggerDamage=true
call UnitDamageTarget(THOOOOOOOR, udg_DamageEventTarget, cjlocgn_00000000, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call SetUnitState(THOOOOOOOR, UNIT_STATE_LIFE, GetUnitState(THOOOOOOOR, UNIT_STATE_LIFE) + cjlocgn_00000000)
endif
set Timer=null
set THOOOOOOOR=null
endfunction
function InitTrig_BLOODLUST takes nothing returns nothing
set gg_trg_BLOODLUST=CreateTrigger()
call TriggerRegisterVariableEvent(gg_trg_BLOODLUST, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddCondition(gg_trg_BLOODLUST, Condition(function Trig_BLOODLUST_Conditions))
call TriggerAddAction(gg_trg_BLOODLUST, function Trig_BLOODLUST_Actions)
endfunction
// scope powerstrike begins
function s__powerstrike___pwrstrike_onIteration takes integer this returns nothing
local real dx=s__powerstrike___pwrstrike_preX[this] - s__projectile__get_x(this)
local real dy=s__powerstrike___pwrstrike_preY[this] - s__projectile__get_y(this)
set s__powerstrike___pwrstrike_traveled[this]=s__powerstrike___pwrstrike_traveled[this] + ( SquareRoot(dx * dx + dy * dy) )
if s__powerstrike___pwrstrike_traveled[this] > s__powerstrike___pwrstrike_distance[this] / 2 then
call SetUnitVertexColor(s__projectile_toUnit[this], 255, 255, 255, 200)
endif
set s__powerstrike___pwrstrike_preX[this]=s__projectile__get_x(this)
set s__powerstrike___pwrstrike_preY[this]=s__projectile__get_y(this)
endfunction
function s__powerstrike___pwrstrike_onUnitCollision takes integer this,unit u returns nothing
local real dmg
call GroupAddUnit(s__powerstrike___pwrstrike_affected[this], u)
set dmg=90. + 50. * ( s__powerstrike___pwrstrike_level[this] - 1 )
if s__powerstrike___pwrstrike_traveled[this] <= s__powerstrike___pwrstrike_distance[this] / 2 then
set dmg=dmg + ( 50. + 25. * ( s__powerstrike___pwrstrike_level[this] - 1 ) )
endif
set dmg=dmg
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endfunction
function s__powerstrike___pwrstrike_isValidTargetUnit takes integer this,unit u returns boolean
return not IsUnitInGroup(u, s__powerstrike___pwrstrike_affected[this]) and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__powerstrike___pwrstrike_onDestroy takes integer this returns nothing
call DestroyGroup(s__powerstrike___pwrstrike_affected[this])
set s__powerstrike___pwrstrike_affected[this]=null
endfunction
function s__powerstrike___pwrstrike_fadeprojectile takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer this=LoadInteger(hash, GetHandleId(t), 0)
set s__powerstrike___pwrstrike_fadetime[this]=s__powerstrike___pwrstrike_fadetime[this] - ( 0.05 )
if s__powerstrike___pwrstrike_fadetime[this] >= 0.05 then
set s__powerstrike___pwrstrike_sca[this]=s__powerstrike___pwrstrike_sca[this] - ( 0.05 / 0.2 )
call SetUnitScale(s__projectile_toUnit[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this])
else
call DestroyTimer(t)
call sc__projectileinterface_deallocate(this)
endif
set t=null
endfunction
function s__powerstrike___pwrstrike_onFinish takes integer this returns nothing
local timer killtimer=CreateTimer()
call SaveInteger(hash, GetHandleId(killtimer), 0, this)
set s__powerstrike___pwrstrike_sca[this]=s__powerstrike___pwrstrike_sca[this] - ( 0.05 / 0.2 )
call SetUnitScale(s__projectile_toUnit[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this])
call TimerStart(killtimer, 0.05, true, function s__powerstrike___pwrstrike_fadeprojectile)
set killtimer=null
endfunction
function s__powerstrike___pwrstrike_create takes unit u,integer level,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__powerstrike___pwrstrike__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, s__vector_x[startVector], s__vector_y[startVector], Rad2Deg(angle)))
call SetUnitVertexColor(s__projectile_toUnit[d], 255, 115, 115, 200)
call s__projectile_setModel(d,modelpath)
set s__powerstrike___pwrstrike_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__powerstrike___pwrstrike_level[d]=level
set s__powerstrike___pwrstrike_distance[d]=dist
set s__powerstrike___pwrstrike_traveled[d]=0.
set s__powerstrike___pwrstrike_preX[d]=s__projectile__get_x(d)
set s__powerstrike___pwrstrike_preY[d]=s__projectile__get_y(d)
call s__projectile__set_collision(d,105.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=false
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=false
call TerrainDeformWave(s__projectile__get_x(d), s__projectile__get_y(d), ( s__vector_x[endVector] - s__vector_x[startVector] ) / dist, ( s__vector_y[endVector] - s__vector_y[startVector] ) / dist, dist, 865., 105., 130., 300, 1)
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000058 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x41545053)
local real distance=600. + level * 0. - 80.
local integer A
local integer B
local integer G
set x=x + ( 80. * Cos(angle) )
set y=y + ( 80. * Sin(angle) )
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y))
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt))
set G=s__powerstrike___pwrstrike_create(source , level , distance , 865. , A , B , "Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set source=null
endfunction
// scope powerstrike ends
function trig_Gr_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41544752
endfunction
function Gr_timer_end takes nothing returns nothing
local timer gr_t=GetExpiredTimer()
local integer h=GetHandleId(gr_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local integer lvl=GetUnitAbilityLevel(caster, 0x41544752)
local group g=LoadGroupHandle(hash, h, 2)
local unit first
local unit cjlocgn_00000000
loop
set first=FirstOfGroup(g)
exitwhen first == null
if IsUnitEnemy(first, GetOwningPlayer(caster)) then
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(caster), 0x68303164, GetUnitX(first), GetUnitY(first), 0)
call UnitAddAbility(cjlocgn_00000000, 0x41544753)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41544753, lvl)
call IssueTargetOrder(cjlocgn_00000000, "thunderbolt", first)
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 1.)
set cjlocgn_00000000=null
endif
call GroupRemoveUnit(g, first)
endloop
call DestroyGroup(g)
call PauseTimer(gr_t)
call DestroyTimer(gr_t)
set first=null
set g=null
set caster=null
set gr_t=null
endfunction
function cj_anonym__54 takes nothing returns boolean
//# optional
return GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) ) and GetUnitAbilityLevel(GetFilterUnit(), 0x416C6F63) == 0
endfunction
function Trig_Gr_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local player owner=GetOwningPlayer(caster)
local location loc=ALL_RemoveLocation(GetUnitLoc(caster))
local timer gr_t=CreateTimer()
local integer h=GetHandleId(gr_t)
local group g=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(g, loc, 300., Filter(function cj_anonym__54))
call SaveUnitHandle(hash, h, 1, caster)
call SaveGroupHandle(hash, h, 2, g)
call TimerStart(gr_t, 2., false, function Gr_timer_end)
call RemoveLocation(loc)
set g=null
set gr_t=null
set loc=null
set caster=null
endfunction
function InitTrig_Gr takes nothing returns nothing
set gg_trg_Gr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Gr, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Gr, Condition(function trig_Gr_conditions))
call TriggerAddAction(gg_trg_Gr, function Trig_Gr_Actions)
endfunction
// scope titanpassa begins
function cj_anonym__55 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 0)
call SaveBoolean(hash, GetHandleId(u), 0x4154506D, false)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
set u=null
endfunction
function titanpassa___onPassaTrigger takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer h=GetHandleId(u)
local boolean isoncd=LoadBoolean(hash, h, 0x4154506D)
local unit a=GetEventDamageSource()
local integer cjlocgn_00000000
local real cjlocgn_00000001
local unit cjlocgn_00000002
local timer cjlocgn_00000003
if not isoncd and not IsTriggerDamage and not udg_IsDamageSpell and IsUnitEnemy(a, GetOwningPlayer(u)) and not IsUnitType(a, UNIT_TYPE_STRUCTURE) then
call SaveBoolean(hash, h, 0x4154506D, true)
set cjlocgn_00000000=GetUnitAbilityLevel(u, 0x4154506D)
set cjlocgn_00000001=75. + 40. * ( cjlocgn_00000000 - 1 )
set IsTriggerDamage=true
call UnitDamageTarget(u, a, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_NORMAL, null)
set IsTriggerDamage=false
set cjlocgn_00000002=CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(a), GetUnitY(a), 0.)
call UnitAddAbility(cjlocgn_00000002, 0x41547044)
call SetUnitAbilityLevel(cjlocgn_00000002, 0x41547044, cjlocgn_00000000)
call IssuePointOrder(cjlocgn_00000002, "silence", GetUnitX(a), GetUnitY(a))
call UnitApplyTimedLife(cjlocgn_00000002, 0x42544C46, .9)
set cjlocgn_00000003=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000003), 0, u)
call TimerStart(cjlocgn_00000003, 8., false, function cj_anonym__55)
endif
set u=null
set cjlocgn_00000003=null
set cjlocgn_00000002=null
set a=null
endfunction
function cj_callback_00000059 takes nothing returns nothing
//# optional
local integer id
local trigger tittrg
set udg_DamageEventType=udg_DamageTypeSpell
set id=GetLearnedSkill()
if id != 0x4154506D or GetLearnedSkillLevel() > 1 then
return
endif
set tittrg=CreateTrigger()
call GetLearnedSkillLevel()
call TriggerRegisterUnitEvent(tittrg, GetLearningUnit(), EVENT_UNIT_DAMAGED)
call TriggerAddAction(tittrg, function titanpassa___onPassaTrigger)
endfunction
// scope titanpassa ends
// scope Zemlya begins
function s__drozhkicked_onTimerTick takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", u, "origin"))
set u=null
set t=null
endfunction
function s__drozhkicked_onFinish takes integer this returns nothing
call FlushChildHashtable(hash, GetHandleId(s__drozhkicked_efft[this]))
call DestroyTimer(s__drozhkicked_efft[this])
endfunction
function s__drozhkicked_create takes unit u,real speed,integer startVector,integer endVector returns integer
local integer this=s__drozhkicked__allocate(u)
set s__drozhkicked_efft[this]=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(s__drozhkicked_efft[this]), 0, u)
call TimerStart(s__drozhkicked_efft[this], 0.1, true, function s__drozhkicked_onTimerTick)
set s__projectile_toDestroy[this]=true
set s__projectile_toRemove[this]=false
set s__projectile_toKill[this]=false
call s__projectile_launch(this,startVector , endVector , speed , 0.)
return this
endfunction
function s__drozhzem_Explode takes integer this returns nothing
local real xc
local real yc
local real x
local real y
local real xt
local real yt
local real angle
local real distance
local integer stack=R2I(( 3. - s__drozhzem_lifespan[this] ) / .5 + .1)
local real dmg
local real disarmdur
local group affect
local unit f
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local integer cjlocgn_00000002
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(s__drozhzem_dummy[this]), GetUnitY(s__drozhzem_dummy[this])))
set dmg=( 70. + 20. * ( s__drozhzem_level[this] - 1 ) ) * stack
set disarmdur=( 0.6 + 0.2 * ( s__drozhzem_level[this] - 1 ) ) * stack
set xc=GetUnitX(s__drozhzem_dummy[this])
set yc=GetUnitY(s__drozhzem_dummy[this])
set affect=CreateGroup()
call GroupEnumUnitsInRange(affect, GetUnitX(s__drozhzem_dummy[this]), GetUnitY(s__drozhzem_dummy[this]), 330., null)
loop
set f=FirstOfGroup(affect)
exitwhen f == null
if not IsUnitType(f, UNIT_TYPE_STRUCTURE) and IsUnitEnemy(f, GetOwningPlayer(s__drozhzem_source[this])) and ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and not IsUnitPaused(f) and GetUnitAbilityLevel(f, 0x416C6F63) == 0 then
set dmg=dmg
call DamageTarget(s__drozhzem_source[this] , f , dmg , true , ATTACK_TYPE_CHAOS , DAMAGE_TYPE_UNIVERSAL)
call CastSpellOnPointTimed(s__drozhzem_source[this] , GetUnitX(f) , GetUnitY(f) , 0x41303443 , R2I(disarmdur / .1 + .1) , "silence" , 3.5)
set x=GetUnitX(f)
set y=GetUnitY(f)
set angle=Atan2(y - yc, x - xc)
set distance=300.
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set cjlocgn_00000000=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(f))
set cjlocgn_00000001=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(f))
set cjlocgn_00000002=s__drozhkicked_create(f , 600. , cjlocgn_00000000 , cjlocgn_00000001)
call s__vector_deallocate(cjlocgn_00000000)
call s__vector_deallocate(cjlocgn_00000001)
endif
call GroupRemoveUnit(affect, f)
endloop
call DestroyGroup(affect)
call UnitRemoveAbility(s__drozhzem_source[this], 0x4154556F)
call SetPlayerAbilityAvailable(GetOwningPlayer(s__drozhzem_source[this]), 0x41545545, true)
call DestroyEffect(s__drozhzem_model[this])
call KillUnit(s__drozhzem_dummy[this])
set s__drozhzem_dead[this]=true
set s__drozhzem_destrthis[this]=true
set f=null
set affect=null
endfunction
function s__drozhzem_Abort takes unit s returns nothing
local integer index=sc__drozhzem_Find(s)
if index > - 1 then
call s__drozhzem_Explode(s__drozhzem_me[index])
endif
endfunction
function s__drozhzem_onTimerTick takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__drozhzem_count )
set this=s__drozhzem_me[cjlocgn_00000000]
if not ( s__drozhzem_destrthis[this] ) then
set s__drozhzem_lifespan[this]=s__drozhzem_lifespan[this] - ( .1 )
if s__drozhzem_lifespan[this] == 0. and not s__drozhzem_dead[this] then
call s__drozhzem_Explode(this)
endif
else
call sc__drozhzem_deallocate(this)
set cjlocgn_00000000=cjlocgn_00000000 - 1
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__drozhzem_Find takes unit s returns integer
local integer l__i=0
loop
exitwhen not ( ( l__i < s__drozhzem_count ) )
if ( s__drozhzem_source[s__drozhzem_me[l__i]] == s ) then
return l__i
endif
set l__i=l__i + 1
endloop
return - 1
endfunction
function s__drozhzem_onDestroy takes integer this returns nothing
local integer l__i=s__drozhzem_index[this]
set s__drozhzem_count=s__drozhzem_count - 1
set s__drozhzem_me[s__drozhzem_index[this]]=s__drozhzem_me[s__drozhzem_count]
set s__drozhzem_index[s__drozhzem_me[s__drozhzem_index[this]]]=s__drozhzem_index[this]
if s__drozhzem_count == 0 then
call DestroyTimer(s__drozhzem_time)
endif
endfunction

//Generated destructor of drozhzem
function s__drozhzem_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: drozhzem")
        return
    elseif (si__drozhzem_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: drozhzem")
        return
    endif
    call s__drozhzem_onDestroy(this)
    set si__drozhzem_V[this]=si__drozhzem_F
    set si__drozhzem_F=this
endfunction
function s__drozhzem_create takes unit source,real x,real y,string mdlpath returns integer
local integer this=s__drozhzem__allocate()
set s__drozhzem_source[this]=source
set s__drozhzem_dummy[this]=CreateUnit(GetOwningPlayer(source), 0x68303164, x, y, 0.)
set s__drozhzem_level[this]=GetUnitAbilityLevel(source, 0x41545545)
set s__drozhzem_model[this]=AddSpecialEffectTarget(mdlpath, s__drozhzem_dummy[this], "origin")
call SetPlayerAbilityAvailable(GetOwningPlayer(s__drozhzem_source[this]), 0x41545545, false)
call UnitAddAbility(s__drozhzem_source[this], 0x4154556F)
set s__drozhzem_lifespan[this]=3.
set s__drozhzem_index[this]=s__drozhzem_count
if ( s__drozhzem_count == 0 ) then
set s__drozhzem_time=CreateTimer()
call TimerStart(s__drozhzem_time, .1, true, function s__drozhzem_onTimerTick)
endif
set s__drozhzem_me[s__drozhzem_count]=this
set s__drozhzem_count=s__drozhzem_count + 1
return this
endfunction
function cj_callback_0000005a takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local integer D=s__drozhzem_create(source , xt , yt , "Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl")
endfunction
function cj_callback_0000005b takes nothing returns nothing
//# optional
call s__drozhzem_Abort(GetSpellAbilityUnit())
endfunction
// scope Zemlya ends
function Trig_Spell_Meteor_Strike_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41564D53
endfunction
function Meteor_Strike_group_filt takes nothing returns boolean
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
set v_t=null
if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0 and not ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Meteor_Strike_group_rootin takes nothing returns nothing
local timer v_t=FilTimer
local integer h=GetHandleId(v_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local integer lvl=GetUnitAbilityLevel(caster, 0x41564D53)
local unit dummy=CreateUnit(GetOwningPlayer(caster), 0x68303164, t_x, t_y, 0)
local real dmg
call UnitAddAbility(dummy, 0x41564D52)
call SetUnitAbilityLevel(dummy, 0x41564D52, GetUnitAbilityLevel(caster, 0x41564D53))
set IsTriggerDamage=true
set dmg=70. + ( lvl - 1 ) * 50.
call UnitDamageTarget(caster, GetEnumUnit(), dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
call IssueTargetOrder(dummy, "entanglingroots", GetEnumUnit())
call UnitApplyTimedLife(dummy, 0x42544C46, 1)
set caster=null
set dummy=null
set v_t=null
endfunction
function Meteor_Strike_timer_end takes nothing returns nothing
local timer v_t=GetExpiredTimer()
local integer h=GetHandleId(v_t)
local effect eff=LoadEffectHandle(hash, h, 2)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local group enemyunits=CreateGroup()
local unit caster
local integer lvl
set FilTimer=v_t
set caster=LoadUnitHandle(hash, h, 1)
set lvl=GetUnitAbilityLevel(caster, 0x41564D53)
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, 160. + ( lvl - 1 ) * 40., Filter(function Meteor_Strike_group_filt))
call ForGroup(enemyunits, function Meteor_Strike_group_rootin)
call FlushChildHashtable(hash, h)
call DestroyEffect(eff)
call DestroyGroup(enemyunits)
call DestroyTimer(v_t)
set caster=null
set enemyunits=null
set eff=null
set v_t=null
endfunction
function Trig_Meteor_Strike_Actions takes nothing returns nothing
local unit caster
local real t_x
local real t_y
local timer v_t
local integer h
local effect eff
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set t_x=GetSpellTargetX()
set t_y=GetSpellTargetY()
set v_t=CreateTimer()
set h=GetHandleId(v_t)
set eff=AddSpecialEffect("Units\\Demon\\Infernal\\InfernalBirth.mdl", t_x, t_y)
call SaveUnitHandle(hash, h, 1, caster)
call SaveEffectHandle(hash, h, 2, eff)
call SaveReal(hash, h, 3, t_x)
call SaveReal(hash, h, 4, t_y)
call TimerStart(v_t, 0.5, false, function Meteor_Strike_timer_end)
set eff=null
set caster=null
set v_t=null
endfunction
function InitTrig_Meteor_Strike takes nothing returns nothing
set gg_trg_Meteor_Strike=CreateTrigger()
call TriggerAddAction(gg_trg_Meteor_Strike, function Trig_Meteor_Strike_Actions)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Meteor_Strike, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Meteor_Strike, Condition(function Trig_Spell_Meteor_Strike_Conditions))
endfunction
function trig_Vargn_expl_conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x4156564C
endfunction
function vexpl_group_cond takes nothing returns boolean
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
set v_t=null
set cj_v666_boolean=IsPlayerEnemy(GetOwningPlayer(caster), GetOwningPlayer(GetFilterUnit())) and GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > 0
set caster=null
return cj_v666_boolean
endfunction
function vexpl_group_dmging takes nothing returns nothing
local timer v_t=FilTimer
local unit caster=LoadUnitHandle(hash, GetHandleId(v_t), 1)
local unit target=GetEnumUnit()
local integer lvl=GetUnitAbilityLevel(caster, 0x4156564C)
local real dmg
set IsTriggerDamage=true
set dmg=110. + lvl * 70.
call UnitDamageTarget(caster, target, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, null)
set IsTriggerDamage=false
call SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) - dmg)
set v_t=null
set caster=null
set target=null
endfunction
function vargn_expl_timer_end takes nothing returns nothing
local timer v_t=GetExpiredTimer()
local integer h=GetHandleId(v_t)
local unit caster=LoadUnitHandle(hash, h, 1)
local player owner=GetOwningPlayer(caster)
local unit dummy=LoadUnitHandle(hash, h, 2)
local real t_x=LoadReal(hash, h, 3)
local real t_y=LoadReal(hash, h, 4)
local group enemyunits=CreateGroup()
call AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", t_x, t_y)
set FilTimer=v_t
call GroupEnumUnitsInRange(enemyunits, t_x, t_y, 300., Filter(function vexpl_group_cond))
call ForGroup(enemyunits, function vexpl_group_dmging)
call RemoveUnit(dummy)
call DestroyGroup(enemyunits)
call DestroyTimer(v_t)
set enemyunits=null
set caster=null
set dummy=null
set v_t=null
endfunction
function Trig_Vargn_expl_Actions takes nothing returns nothing
local unit caster
local player owner
local real targ_x
local real targ_y
local timer v_t
local integer h
local unit dummy
set udg_DamageEventType=udg_DamageTypeSpell
set caster=GetSpellAbilityUnit()
set owner=GetOwningPlayer(caster)
set targ_x=GetSpellTargetX()
set targ_y=GetSpellTargetY()
set v_t=CreateTimer()
set h=GetHandleId(v_t)
set dummy=CreateUnit(owner, 0x68303164, targ_x, targ_y, 0)
call UnitAddAbility(dummy, 0x41565644)
call IssuePointOrder(dummy, "volcano", targ_x, targ_y)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, dummy)
call SaveReal(hash, h, 3, targ_x)
call SaveReal(hash, h, 4, targ_y)
call TimerStart(v_t, 2.49, false, function vargn_expl_timer_end)
set caster=null
set dummy=null
set v_t=null
endfunction
function InitTrig_Vargn_expl takes nothing returns nothing
set gg_trg_Vargn_expl=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Vargn_expl, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Vargn_expl, Condition(function trig_Vargn_expl_conditions))
call TriggerAddAction(gg_trg_Vargn_expl, function Trig_Vargn_expl_Actions)
endfunction
function Trig_Ulty_Conditions takes nothing returns boolean
if ( not ( GetSpellAbilityId() == 0x41564442 ) ) then
return false
endif
return true
endfunction
function Trig_Ulty_Actions takes nothing returns nothing
call UnitResetCooldown(GetTriggerUnit())
endfunction
function InitTrig_Ulty takes nothing returns nothing
set gg_trg_Ulty=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Ulty, EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(gg_trg_Ulty, Condition(function Trig_Ulty_Conditions))
call TriggerAddAction(gg_trg_Ulty, function Trig_Ulty_Actions)
endfunction
// scope Shitvody begins
function Shitvody___Damaged takes nothing returns nothing
local unit u=udg_DamageEventTarget
local real shield=LoadReal(hash, GetHandleId(u), 0x42303059)
if GetUnitAbilityLevel(u, 0x42303059) == 0 then
if shield != 0. then
call SaveReal(hash, GetHandleId(u), 0x42303059, 0)
endif
set u=null
return
endif
if shield > 0 then
call BJDebugMsg("Do hp = " + R2S(GetUnitState(u, UNIT_STATE_LIFE)) + "   shield = " + R2S(shield))
if udg_DamageEventAmount <= shield then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", u, "origin"))
set shield=shield - ( udg_DamageEventAmount )
set udg_DamageEventAmount=0
else
call UnitRemoveAbility(u, 0x42303059)
set udg_DamageEventAmount=udg_DamageEventAmount - ( shield )
set shield=0
endif
call BJDebugMsg("Posle hp = " + R2S(GetUnitState(u, UNIT_STATE_LIFE)) + "   shield = " + R2S(shield))
call SaveReal(hash, GetHandleId(u), 0x42303059, shield)
else
call SaveReal(hash, GetHandleId(u), 0x42303059, 0)
call UnitRemoveAbility(u, 0x42303059)
endif
set u=null
endfunction
function cj_callback_0000005c takes nothing returns nothing
//# optional
local unit cast=GetSpellAbilityUnit()
local unit targ=GetSpellTargetUnit()
local integer lvl=GetUnitAbilityLevel(cast, 0x41575753)
local real shiamount=200. + 100. * ( lvl - 1 )
local unit dummy=CreateUnit(GetOwningPlayer(cast), 0x68303164, GetUnitX(targ), GetUnitY(targ), 0)
local integer h
call UnitAddAbility(dummy, 0x41575362)
call IssueTargetOrderById(dummy, 852066, targ)
call UnitApplyTimedLife(dummy, 0x42544C46, 0.5)
set h=GetHandleId(targ)
call SaveReal(hash, h, 0x42303059, shiamount)
endfunction
function cj_callback_0000005d takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.)
call TriggerAddAction(trg, function Shitvody___Damaged)
endfunction
// scope Shitvody ends
// scope volnawodomuta begins
function s__volnawodomuta___wavslow_onTimer takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__volnawodomuta___wavslow_count )
set this=s__volnawodomuta___wavslow_me[cjlocgn_00000000]
set s__volnawodomuta___wavslow_remain[this]=s__volnawodomuta___wavslow_remain[this] - ( .2 )
if s__volnawodomuta___wavslow_remain[this] <= 0. then
call sc__volnawodomuta___wavslow_deallocate(this)
elseif ( s__volnawodomuta___wavslow_remain[this] - R2I(s__volnawodomuta___wavslow_remain[this] + .1) ) == 0. then
call CastSpellOnTargetTimed(s__volnawodomuta___wavslow_source[this] , s__volnawodomuta___wavslow_target[this] , 0x41576473 , R2I(s__volnawodomuta___wavslow_remain[this] + .1) , "cripple" , 3.5)
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
endfunction
function s__volnawodomuta___wavslow_onDestroy takes integer this returns nothing
local integer l__i
call RemoveUnit(s__volnawodomuta___wavslow_source[this])
set l__i=s__volnawodomuta___wavslow_index[this]
set s__volnawodomuta___wavslow_count=s__volnawodomuta___wavslow_count - 1
set s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]=s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_count]
set s__volnawodomuta___wavslow_index[s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]]=s__volnawodomuta___wavslow_index[this]
if s__volnawodomuta___wavslow_count == 0 then
call DestroyTimer(s__volnawodomuta___wavslow_time)
endif
endfunction

//Generated destructor of volnawodomuta___wavslow
function s__volnawodomuta___wavslow_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: volnawodomuta___wavslow")
        return
    elseif (si__volnawodomuta___wavslow_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: volnawodomuta___wavslow")
        return
    endif
    call s__volnawodomuta___wavslow_onDestroy(this)
    set si__volnawodomuta___wavslow_V[this]=si__volnawodomuta___wavslow_F
    set si__volnawodomuta___wavslow_F=this
endfunction
function s__volnawodomuta___wavslow_Find takes unit target returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__volnawodomuta___wavslow_count )
if s__volnawodomuta___wavslow_target[s__volnawodomuta___wavslow_me[cjlocgn_00000000]] == target then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__volnawodomuta___wavslow_create takes unit target,real duration returns integer
local integer l__i=s__volnawodomuta___wavslow_Find(target)
local integer this
if l__i != - 1 then
set this=s__volnawodomuta___wavslow_me[l__i]
set s__volnawodomuta___wavslow_remain[this]=duration
return this
endif
set this=s__volnawodomuta___wavslow__allocate()
set s__volnawodomuta___wavslow_index[this]=s__volnawodomuta___wavslow_count
set s__volnawodomuta___wavslow_remain[this]=duration
set s__volnawodomuta___wavslow_source[this]=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 0x68303164, 0., 0., 0.)
set s__volnawodomuta___wavslow_target[this]=target
call CastSpellOnTargetTimed(s__volnawodomuta___wavslow_source[this] , target , 0x41576473 , 3 , "cripple" , 3.5)
if s__volnawodomuta___wavslow_count == 0 then
set s__volnawodomuta___wavslow_time=CreateTimer()
call TimerStart(s__volnawodomuta___wavslow_time, .2, true, function s__volnawodomuta___wavslow_onTimer)
endif
set s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_count]=this
set s__volnawodomuta___wavslow_count=s__volnawodomuta___wavslow_count + 1
return this
endfunction
function s__volnawodomuta___wavanim_onDestroy takes integer this returns nothing
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
endfunction
function s__volnawodomuta___wavanim_create takes unit u,real angle,real speed,integer startVector,integer endVector,string modelpath returns integer
local integer d=s__volnawodomuta___wavanim__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call SetUnitScale(s__projectile_toUnit[d], .5, .5, .5)
call s__projectile_setModel(d,modelpath)
call s__projectile__set_source(d,u)
set s__projectile_activePitch[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , .1)
return d
endfunction
function s__volnawodomuta___thewave_onIteration takes integer this returns nothing
local group g=CreateGroup()
local unit f
local real xf
local real yf
local real dist
local integer dm
local integer final
local real dmg
call GroupEnumUnitsInRange(g, s__projectile__get_x(this), s__projectile__get_y(this), 200., null)
set dm=s__vector_create(0 , 0 , 0)
set dmg=200. + 150. * ( s__volnawodomuta___thewave_level[this] - 1 )
loop
set f=FirstOfGroup(g)
exitwhen f == null
if f != s__projectile__get_source(this) and IsUnitEnemy(f, GetOwningPlayer(s__projectile__get_source(this))) and ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and GetUnitAbilityLevel(f, 0x416C6F63) == 0 and not IsUnitType(f, UNIT_TYPE_STRUCTURE) then
if not IsUnitInGroup(f, s__volnawodomuta___thewave_affected[this]) and not IsUnitType(f, UNIT_TYPE_MAGIC_IMMUNE) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", f, "origin"))
call DamageTarget(s__projectile__get_source(this) , f , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , f , 0x41303655 , 1 , "magicleash" , 10.)
call GroupAddUnit(s__volnawodomuta___thewave_affected[this], f)
endif
set s__vector_x[dm]=GetUnitX(f) - s__projectile__get_x(this)
set s__vector_y[dm]=GetUnitY(f) - s__projectile__get_y(this)
set final=s__vector_crossProduct(dm , s__volnawodomuta___thewave_antidir[this])
set dist=s__vector_getLength(final)
call s__vector_deallocate(final)
if dist < 140. then
set dist=800. * .03 * 1.05 / Pow(bj_E, ( dist / ( 140. * 2 ) ))
set xf=GetUnitX(f) + dist * Cos(s__volnawodomuta___thewave_angle[this])
set yf=GetUnitY(f) + dist * Sin(s__volnawodomuta___thewave_angle[this])
call SetUnitX(f, xf)
call SetUnitY(f, yf)
endif
endif
call GroupRemoveUnit(g, f)
endloop
call s__vector_deallocate(dm)
set f=null
set g=null
endfunction
function s__volnawodomuta___thewave_cj_anonym__56 takes nothing returns nothing
//# optional
call UnitRemoveAbility(GetEnumUnit(), 0x426D6C74)
call s__volnawodomuta___wavslow_create(GetEnumUnit() , 3.)
endfunction
function s__volnawodomuta___thewave_onDestroy takes integer this returns nothing
call ForGroup(s__volnawodomuta___thewave_affected[this], function s__volnawodomuta___thewave_cj_anonym__56)
call s__vector_deallocate(s__volnawodomuta___thewave_codir[this])
call s__vector_deallocate(s__volnawodomuta___thewave_antidir[this])
call DestroyGroup(s__volnawodomuta___thewave_affected[this])
set s__volnawodomuta___thewave_affected[this]=null
endfunction
function s__volnawodomuta___thewave_create takes unit u,integer level,real angle,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local integer d=s__volnawodomuta___thewave__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
local integer axis
local real x0
local real y0
local real dAB=2 * ( 200. - 40 ) / ( 6 - 1 )
local real dx
local real dy
local integer A
local integer B
local integer cjlocgn_00000000=0
local integer cjlocgn_00000001
call s__projectile_setModel(d,modelpath)
set axis=s__vector_create(0 , 0 , 1.)
set s__volnawodomuta___thewave_codir[d]=s__vector_difference(endVector , startVector)
set s__volnawodomuta___thewave_antidir[d]=s__vector_difference(endVector , startVector)
set s__vector_z[s__volnawodomuta___thewave_antidir[d]]=0.
call s__vector_setLength(s__volnawodomuta___thewave_antidir[d],1.)
call s__vector_rotate(s__volnawodomuta___thewave_antidir[d],axis , bj_PI / 2)
call s__vector_deallocate(axis)
set x0=s__vector_x[startVector] - s__vector_x[s__volnawodomuta___thewave_antidir[d]] * ( 200. - 40 )
set y0=s__vector_y[startVector] - s__vector_y[s__volnawodomuta___thewave_antidir[d]] * ( 200. - 40 )
set dx=dAB * s__vector_x[s__volnawodomuta___thewave_antidir[d]]
set dy=dAB * s__vector_y[s__volnawodomuta___thewave_antidir[d]]
set A=s__vector_create(0 , 0 , 0)
set B=s__vector_create(0 , 0 , 0)
loop
exitwhen not ( cjlocgn_00000000 < 3 )
set s__vector_x[A]=x0 + cjlocgn_00000000 * ( - 20. ) * Cos(angle)
set s__vector_y[A]=y0 + cjlocgn_00000000 * ( - 20. ) * Sin(angle)
set s__vector_z[A]=cjlocgn_00000000 * ( 80. )
set s__vector_x[B]=s__vector_x[A] + s__vector_x[s__volnawodomuta___thewave_codir[d]]
set s__vector_y[B]=s__vector_y[A] + s__vector_y[s__volnawodomuta___thewave_codir[d]]
set s__vector_z[B]=0.
set cjlocgn_00000001=0
loop
exitwhen not ( cjlocgn_00000001 < 6 )
call s__volnawodomuta___wavanim_create(u , angle , speed , A , B , "Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl")
set s__vector_x[A]=s__vector_x[A] + ( dx )
set s__vector_y[A]=s__vector_y[A] + ( dy )
set s__vector_x[B]=s__vector_x[B] + ( dx )
set s__vector_y[B]=s__vector_y[B] + ( dy )
set cjlocgn_00000001=cjlocgn_00000001 + 1
endloop
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call s__vector_deallocate(A)
call s__vector_deallocate(B)
set s__volnawodomuta___thewave_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__volnawodomuta___thewave_level[d]=level
set s__volnawodomuta___thewave_angle[d]=angle
set s__volnawodomuta___thewave_g[d]=CreateGroup()
call s__projectile__set_collision(d,200.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.3)
return d
endfunction
function cj_callback_0000005e takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x41574657)
local real distance=300. + 750.
local integer A
local integer B
local integer G
set x=x - ( 300. * Cos(angle) )
set y=y - ( 300. * Sin(angle) )
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 50.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 50.)
set G=s__volnawodomuta___thewave_create(source , level , angle , distance , 800. , A , B , "")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope volnawodomuta ends
function FE_timer_end takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit c=LoadUnitHandle(hash, h, 1)
local unit ta=LoadUnitHandle(hash, h, 2)
local player pl=GetOwningPlayer(c)
local unit d=CreateUnit(pl, 0x68303164, GetUnitX(ta), GetUnitY(ta), 0)
call UnitAddAbility(d, 0x41774663)
call SetUnitAbilityLevel(d, 0x41774663, GetUnitAbilityLevel(c, 0x41574665))
call IssueTargetOrder(d, "acidbomb", ta)
call UnitApplyTimedLife(d, 0x42544C46, 0.4)
call FlushChildHashtable(hash, h)
call DestroyTimer(t)
set c=null
set ta=null
set d=null
set t=null
endfunction
function cj_callback_0000005f takes nothing returns nothing
//# optional
local unit c=GetTriggerUnit()
local unit ta=GetSpellTargetUnit()
local timer t=CreateTimer()
local integer h=GetHandleId(t)
call SaveUnitHandle(hash, h, 1, c)
call SaveUnitHandle(hash, h, 2, ta)
call TimerStart(t, 1., false, function FE_timer_end)
set c=null
set t=null
endfunction
// scope vodshard begins
function s__vodshard___shard_onUnitCollision takes integer this,unit u returns nothing
local real dmg
call GroupAddUnit(s__vodshard___shard_affected[this], u)
set dmg=80. + 70. * ( s__vodshard___shard_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , u , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , u , 0x41303255 , R2I(2. / .1 + .1) , "thunderbolt" , 3.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", u, "origin"))
call sc__projectileinterface_deallocate(this)
endfunction
function s__vodshard___shard_isValidTargetUnit takes integer this,unit u returns boolean
return s__vodshard___shard_affected[this] != null and FirstOfGroup(s__vodshard___shard_affected[this]) == null and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(s__projectile_toUnit[this], GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE)
endfunction
function s__vodshard___shard_onDestroy takes integer this returns nothing
call DestroyGroup(s__vodshard___shard_affected[this])
set s__vodshard___shard_affected[this]=null
endfunction
function s__vodshard___shard_create takes unit u,integer level,real dist,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__vodshard___shard__allocate(CreateUnit(GetOwningPlayer(u), 0x68303164, GetUnitX(u), GetUnitY(u), Rad2Deg(angle)))
call SetUnitScale(s__projectile_toUnit[d], 2., 2., 2.)
call s__projectile_setModel(d,modelpath)
set s__vodshard___shard_affected[d]=CreateGroup()
call s__projectile__set_source(d,u)
set s__vodshard___shard_level[d]=level
call s__projectile__set_collision(d,60.)
set s__projectile_activePitch[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=true
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_callback_00000060 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real angle=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x4157534C)
local real distance=1100. + ( level - 1 ) * 200.
local integer A
local integer B
local integer G
set xt=x + distance * Cos(angle)
set yt=y + distance * Sin(angle)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set B=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(source) + 80.)
set G=s__vodshard___shard_create(source , level , distance , 865. , A , B , "Abilities\\Weapons\\LichMissile\\LichMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
endfunction
// scope vodshard ends
// scope magnet begins
function s__magnproj_onIteration takes integer this returns nothing
local real cjlocgn_00000000
set s__magnproj_distsum[this]=s__magnproj_distsum[this] + ( s__projectile_speed[this] * .03 )
if s__magnproj_affected[this] != null then
set cjlocgn_00000000=Atan2(s__projectile__get_targetY(this) - s__projectile__get_y(this), s__projectile__get_targetX(this) - s__projectile__get_x(this))
call SetUnitX(s__magnproj_affected[this], GetUnitX(s__magnproj_affected[this]) + s__projectile_speed[this] * .03 * Cos(cjlocgn_00000000))
call SetUnitY(s__magnproj_affected[this], GetUnitY(s__magnproj_affected[this]) + s__projectile_speed[this] * .03 * Sin(cjlocgn_00000000))
endif
if s__magnproj_distsum[this] >= s__magnproj_maxdist[this] then
call sc__projectileinterface_deallocate(this)
endif
endfunction
function s__magnproj_onDestroy takes integer this returns nothing
set s__magnproj_isdestroyed[this]=true
call UnitRemoveAbility(s__magnproj_affected[this], 0x426D6C74)
set s__magnproj_affected[this]=null
endfunction
function s__magnproj_onUnitCollision takes integer this,unit u returns nothing
local real cjlocgn_00000000
if u == s__projectile__get_target(this) then
call sc__projectileinterface_deallocate(this)
else
set s__magnproj_affected[this]=u
set cjlocgn_00000000=70. + 90. * ( s__magnproj_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , s__magnproj_affected[this] , cjlocgn_00000000 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , s__magnproj_affected[this] , 0x41303655 , 1 , "magicleash" , 4.)
endif
endfunction
function s__magnproj_isValidTargetUnit takes integer this,unit u returns boolean
return not s__magnproj_isdestroyed[this] and ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and ( ( u == s__projectile__get_target(this) and DistanceBetweenCord(GetUnitX(u) , GetUnitY(u) , GetUnitX(s__projectile__get_target(this)) , GetUnitY(s__projectile__get_target(this))) < 70. ) or s__magnproj_affected[this] == null and IsUnitEnemy(s__projectile__get_source(this), GetOwningPlayer(u)) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_STRUCTURE) )
endfunction
function s__magnproj_create takes unit source,integer level,real speed,integer startVector,integer endVector,string modelpath returns integer
local real angle=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__magnproj__allocate(CreateUnit(GetOwningPlayer(source), 0x68303164, GetUnitX(source), GetUnitY(source), Rad2Deg(angle)))
call SetUnitScale(s__projectile_toUnit[d], 1.5, 1.5, 1.5)
call s__projectile_setModel(d,modelpath)
call s__projectile__set_source(d,source)
call s__projectile__set_target(d,source)
set s__magnproj_level[d]=level
set s__magnproj_affected[d]=null
set s__magnproj_distsum[d]=0.
set s__magnproj_maxdist[d]=500. + 100. * ( level - 1 )
call s__projectile__set_collision(d,70.)
set s__projectile_activePitch[d]=false
set s__projectile_activeTargetFollow[d]=true
set s__projectile_activeUnitCollision[d]=true
set s__projectile_toDestroy[d]=true
set s__projectile_toRemove[d]=false
set s__projectile_toKill[d]=true
call s__projectile_launch(d,startVector , endVector , speed , 0.)
return d
endfunction
function cj_anonym__57 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit source=LoadUnitHandle(hash, h, 1)
local integer level=GetUnitAbilityLevel(source, 0x41303659)
local real x
local real y
local integer A
local integer B
local integer G
set x=LoadReal(hash, h, 2)
set y=LoadReal(hash, h, 3)
set A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set x=GetUnitX(source)
set y=GetUnitY(source)
set B=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set G=s__magnproj_create(source , level , 800. , A , B , "Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
call FlushChildHashtable(hash, h)
call PauseTimer(t)
call DestroyTimer(t)
set source=null
set t=null
endfunction
function cj_callback_00000061 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
local real x
local real y
local timer t
local integer h
set x=GetSpellTargetX()
set y=GetSpellTargetY()
set t=CreateTimer()
set h=GetHandleId(t)
call SaveUnitHandle(hash, h, 1, source)
call SaveReal(hash, h, 2, x)
call SaveReal(hash, h, 3, y)
call TimerStart(t, .4, false, function cj_anonym__57)
endfunction
// scope magnet ends
// scope draksilence begins
function draksilence___DRAK_ID_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x41303359
endfunction
function silence takes nothing returns nothing
local unit u
local integer lvl
local location loc
local real x
local real y
local real alpha
local real beta
local real x1
local real y1
local real x2
local real y2
local real x3
local real y3
local real x4
local real y4
local group inquad
local unit first
local player P
local real cjlocgn_00000000
call BJDebugMsg("зашел в действия")
set u=GetSpellAbilityUnit()
set lvl=GetUnitAbilityLevel(u, 0x41303359)
set loc=ALL_RemoveLocation(GetSpellTargetLoc())
set x=GetUnitX(u)
set y=GetUnitY(u)
set alpha=Atan2(GetLocationY(loc) - GetUnitY(u), GetLocationX(loc) - GetUnitX(u))
set beta=alpha + bj_PI / 2
set x1=x + 150. * Cos(beta) / 2
set y1=y + 150. * Sin(beta) / 2
set x3=( x + 550. * Cos(alpha) ) + 350. * Cos(beta) / 2
set y3=( y + 550. * Sin(alpha) ) + 350. * Sin(beta) / 2
set inquad=CreateGroup()
set P=GetOwningPlayer(u)
set beta=alpha - bj_PI / 2
set x2=x + 150. * Cos(beta) / 2
set y2=y + 150. * Sin(beta) / 2
set x4=( x + 550. * Cos(alpha) ) + 350. * Cos(beta) / 2
set y4=( y + 550. * Sin(alpha) ) + 350. * Sin(beta) / 2
call GroupAddUnitsInTriangle(inquad , x1 , y1 , x2 , y2 , x3 , y3)
call GroupAddUnitsInTriangle(inquad , x2 , y2 , x3 , y3 , x4 , y4)
call UnitApplyTimedLife(CreateUnit(P, 0x6830314E, x1, y1, 0), 0x42544C46, .5)
call UnitApplyTimedLife(CreateUnit(P, 0x6830314E, x2, y2, 0), 0x42544C46, .4)
call UnitApplyTimedLife(CreateUnit(P, 0x6830314E, x3, y3, 0), 0x42544C46, .4)
call UnitApplyTimedLife(CreateUnit(P, 0x6830314E, x4, y4, 0), 0x42544C46, .4)
call GroupRemoveUnit(inquad, u)
loop
set first=FirstOfGroup(inquad)
exitwhen first == null
if ( GetUnitState(u, UNIT_STATE_LIFE) > .405 ) and IsUnitEnemy(first, GetOwningPlayer(u)) and not IsUnitType(first, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(first, UNIT_TYPE_STRUCTURE) then
set cjlocgn_00000000=70. + 60. * ( lvl - 1 )
call UnitApplyTimedLife(CreateUnit(P, 0x6830314E, GetUnitX(first), GetUnitY(first), 0), 0x42544C46, .4)
call UnitDamageTarget(u, first, cjlocgn_00000000, true, false, null, DAMAGE_TYPE_MAGIC, null)
call CastSpellOnTargetTimed(u , first , 0x414E736F , lvl , "soulburn" , 3.5)
if false then
call DamageTarget(u , first , 0. , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endif
call GroupRemoveUnit(inquad, first)
set first=null
endloop
call DestroyGroup(inquad)
set u=null
set P=null
set inquad=null
set loc=null
endfunction
function cj_callback_00000062 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function draksilence___DRAK_ID_Conditions))
call TriggerAddAction(trg, function silence)
set trg=null
endfunction
// scope draksilence ends
// scope unbindedpower begins
function unbindedpower___on_att takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local integer lvl=GetUnitAbilityLevel(u, 0x41303658)
local integer max=3 + ( lvl - 1 ) * 1
local boolean isbuff=LoadBoolean(hash, GetHandleId(u), 0x42303243 + 1)
local integer cjlocgn_00000000
local unit cjlocgn_00000001
local integer cjlocgn_00000002
if isbuff then
call SaveBoolean(hash, GetHandleId(u), 0x42303243 + 1, false)
if GetUnitState(t, UNIT_STATE_LIFE) < .405 then
set cjlocgn_00000000=LoadInteger(hash, GetHandleId(u), 0x6E666775)
call BJDebugMsg(I2S(cjlocgn_00000000) + "стаков Порождений гнева")
if cjlocgn_00000000 < max then
if IsUnitType(udg_DamageEventTarget, UNIT_TYPE_HERO) then
loop
exitwhen cjlocgn_00000000 == max
set cjlocgn_00000002=lvl
call BJDebugMsg(GetUnitName(u))
call BJDebugMsg(GetUnitName(t))
call BJDebugMsg(I2S(lvl))
if cjlocgn_00000002 == 1 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E666775, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 2 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303133, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 3 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303134, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 4 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303135, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 5 then
call BJDebugMsg("Финалочка")
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303136, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
endif
call BJDebugMsg(GetUnitName(cjlocgn_00000001))
set cjlocgn_00000001=null
set cjlocgn_00000000=cjlocgn_00000000 + ( 1 )
call SaveInteger(hash, GetHandleId(u), 0x6E666775, cjlocgn_00000000)
endloop
else
set cjlocgn_00000002=lvl
call BJDebugMsg(GetUnitName(u))
call BJDebugMsg(GetUnitName(t))
call BJDebugMsg(I2S(lvl))
if cjlocgn_00000002 == 1 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E666775, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 2 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303133, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 3 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303134, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 4 then
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303135, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
elseif cjlocgn_00000002 == 5 then
call BJDebugMsg("Финалочка")
set cjlocgn_00000001=CreateUnit(GetOwningPlayer(u), 0x6E303136, GetUnitX(t), GetUnitY(t), GetUnitFacing(u))
call SaveUnitHandle(hash, GetHandleId(cjlocgn_00000001), 0x6E666775, u)
endif
call BJDebugMsg(GetUnitName(cjlocgn_00000001))
set cjlocgn_00000001=null
set cjlocgn_00000000=cjlocgn_00000000 + ( 1 )
call SaveInteger(hash, GetHandleId(u), 0x6E666775, cjlocgn_00000000)
endif
endif
endif
endif
set t=null
set u=null
endfunction
function unbindedpower___try_att takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
if GetUnitAbilityLevel(u, 0x42303243) == 0 or udg_IsDamageSpell or IsTriggerDamage then
set t=null
set u=null
return
endif
set udg_DamageEventAmount=udg_DamageEventAmount * 2
call UnitRemoveAbility(u, 0x42303243)
call SaveBoolean(hash, GetHandleId(u), 0x42303243 + 1, true)
set t=null
set u=null
endfunction
function cj_callback_00000063 takes nothing returns nothing
//# optional
local unit d=GetDyingUnit()
local unit u
local integer k
if not ( ( GetUnitTypeId(d) == 0x6E666775 ) or ( GetUnitTypeId(d) == 0x6E303133 ) or ( GetUnitTypeId(d) == 0x6E303134 ) or ( GetUnitTypeId(d) == 0x6E303135 ) or ( GetUnitTypeId(d) == 0x6E303136 ) ) then
set d=null
return
endif
set u=LoadUnitHandle(hash, GetHandleId(d), 0x6E666775)
set k=LoadInteger(hash, GetHandleId(u), 0x6E666775)
call BJDebugMsg(I2S(k - 1))
call SaveInteger(hash, GetHandleId(u), 0x6E666775, k - 1)
endfunction
function cj_callback_00000064 takes nothing returns nothing
//# optional
local unit source=GetSpellAbilityUnit()
call CastSpellOnTargetTimed(source , source , 0x4130365A , 1 , "innerfire" , 3.5)
if false then
call DamageTarget(source , source , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
set source=null
endfunction
function cj_callback_00000065 takes nothing returns nothing
//# optional
local trigger trg1=CreateTrigger()
local trigger trg
call TriggerRegisterVariableEvent(trg1, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddAction(trg1, function unbindedpower___try_att)
set trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function unbindedpower___on_att)
endfunction
// scope unbindedpower ends
// scope drakulty begins
function s__drakulty___drakultybuff_cj_anonym__58 takes nothing returns boolean
//# optional
return GetUnitAbilityLevel(GetFilterUnit(), 0x424F6165) > 0
endfunction
function s__drakulty___drakultybuff_onTimerTick takes nothing returns nothing
local integer this
local integer cjlocgn_00000000=0
local unit cjlocgn_00000001
local real cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
loop
exitwhen not ( cjlocgn_00000000 < s__drakulty___drakultybuff_count )
set this=s__drakulty___drakultybuff_me[cjlocgn_00000000]
set cjlocgn_00000002=0
set cjlocgn_00000003=GetUnitX(s__drakulty___drakultybuff_buffer[this])
set cjlocgn_00000004=GetUnitY(s__drakulty___drakultybuff_buffer[this])
loop
set cjlocgn_00000001=FirstOfGroup(s__drakulty___drakultybuff_affected[this])
exitwhen cjlocgn_00000001 == null
set cjlocgn_00000002=( cjlocgn_00000003 - GetUnitX(cjlocgn_00000001) ) * ( cjlocgn_00000003 - GetUnitX(cjlocgn_00000001) ) + ( cjlocgn_00000004 - GetUnitY(cjlocgn_00000001) ) * ( cjlocgn_00000004 - GetUnitY(cjlocgn_00000001) )
if cjlocgn_00000002 >= s__drakulty___drakultybuff_rad[this] and GetOwningPlayer(cjlocgn_00000001) == GetOwningPlayer(s__drakulty___drakultybuff_buffer[this]) then
call UnitRemoveAbility(cjlocgn_00000001, 0x424F6165)
endif
call GroupRemoveUnit(s__drakulty___drakultybuff_affected[this], cjlocgn_00000001)
endloop
call GroupEnumUnitsInRange(s__drakulty___drakultybuff_affected[this], cjlocgn_00000003, cjlocgn_00000004, s__drakulty___drakultybuff_rad[this], Filter(function s__drakulty___drakultybuff_cj_anonym__58))
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000001=null
endfunction
function s__drakulty___drakultybuff_onDestroy takes integer this returns nothing
local integer l__i
call DestroyGroup(s__drakulty___drakultybuff_affected[this])
set l__i=s__drakulty___drakultybuff_index[this]
set s__drakulty___drakultybuff_count=s__drakulty___drakultybuff_count - 1
set s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]=s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_count]
set s__drakulty___drakultybuff_index[s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]]=s__drakulty___drakultybuff_index[this]
if s__drakulty___drakultybuff_count == 0 then
call DestroyTimer(s__drakulty___drakultybuff_time)
endif
endfunction

//Generated destructor of drakulty___drakultybuff
function s__drakulty___drakultybuff_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: drakulty___drakultybuff")
        return
    elseif (si__drakulty___drakultybuff_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: drakulty___drakultybuff")
        return
    endif
    call s__drakulty___drakultybuff_onDestroy(this)
    set si__drakulty___drakultybuff_V[this]=si__drakulty___drakultybuff_F
    set si__drakulty___drakultybuff_F=this
endfunction
function s__drakulty___drakultybuff_Find takes unit u returns integer
local integer cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < s__drakulty___drakultybuff_count )
if ( s__drakulty___drakultybuff_buffer[s__drakulty___drakultybuff_me[cjlocgn_00000000]] == u ) then
return cjlocgn_00000000
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
return - 1
endfunction
function s__drakulty___drakultybuff_create takes unit buffer returns integer
local integer l__i=s__drakulty___drakultybuff_Find(buffer)
local integer this
if l__i != - 1 then
return s__drakulty___drakultybuff_me[l__i]
endif
set this=s__drakulty___drakultybuff__allocate()
set s__drakulty___drakultybuff_buffer[this]=buffer
set s__drakulty___drakultybuff_index[this]=s__drakulty___drakultybuff_count
set s__drakulty___drakultybuff_rad[this]=350 + 100 * ( GetUnitAbilityLevel(buffer, 0x414F6165) - 1 )
set s__drakulty___drakultybuff_rad[this]=s__drakulty___drakultybuff_rad[this] * ( s__drakulty___drakultybuff_rad[this] )
set s__drakulty___drakultybuff_affected[this]=CreateGroup()
if ( s__drakulty___drakultybuff_count == 0 ) then
set s__drakulty___drakultybuff_time=CreateTimer()
call TimerStart(s__drakulty___drakultybuff_time, .3, true, function s__drakulty___drakultybuff_onTimerTick)
endif
set s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_count]=this
set s__drakulty___drakultybuff_count=s__drakulty___drakultybuff_count + 1
return this
endfunction
function drakulty___on_att takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local unit mark=LoadUnitHandle(hash, GetHandleId(u), 0x68303238)
local integer lvl=LoadInteger(hash, GetHandleId(mark), 0x4130335A)
if GetUnitAbilityLevel(u, 0x424F6165) == 0 or IsTriggerDamage or udg_IsDamageSpell then
set mark=null
set t=null
set u=null
return
endif
call BJDebugMsg(GetUnitName(u))
set udg_DamageEventAmount=udg_DamageEventAmount * ( 2 )
set mark=null
set t=null
set u=null
endfunction
function cj_callback_00000066 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local location tar=ALL_RemoveLocation(GetSpellTargetLoc())
local integer lvl=GetUnitAbilityLevel(u, 0x4130335A)
local group ucheck=ALL_DestroyGroup(ALL_GetUnitsOfTypeIdAll(0x68303238))
local group acheck=ALL_DestroyGroup(ALL_GetUnitsOfTypeIdAll(0x68303239))
local unit first
local unit firsta
local unit rune
local unit border
local real sca
loop
set first=FirstOfGroup(ucheck)
set firsta=FirstOfGroup(acheck)
exitwhen first == null
call GroupRemoveUnit(ucheck, first)
call RemoveUnit(first)
call GroupRemoveUnit(acheck, firsta)
call RemoveUnit(firsta)
endloop
set rune=CreateUnitAtLoc(GetOwningPlayer(u), 0x68303238, tar, bj_UNIT_FACING)
call UnitAddAbility(rune, 0x414F6165)
call SetUnitAbilityLevel(rune, 0x414F6165, lvl)
set border=CreateUnitAtLoc(GetOwningPlayer(u), 0x68303239, tar, bj_UNIT_FACING)
set sca=8 + 2.5 * ( lvl - 1 )
call SetUnitScale(border, sca, sca, sca)
call SetUnitTimeScalePercent(border, 0)
call s__drakulty___drakultybuff_create(rune)
call RemoveLocation(tar)
set u=null
set first=null
set rune=null
set border=null
set firsta=null
set tar=null
call DestroyGroup(ucheck)
call DestroyGroup(acheck)
endfunction
function cj_callback_00000067 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_DamageModifierEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function drakulty___on_att)
endfunction
// scope drakulty ends
function Trig_Disturbance_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x41465171
endfunction
function Disturbance_Filter takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if GetFilterUnit() != caster and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function Trig_Disturbance_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local unit target=GetSpellTargetUnit()
local real dmg=150. + 75. * ( GetUnitAbilityLevel(caster, 0x41465171) - 1 )
local group cjlocgn_00000000
local unit cjlocgn_00000001
call DamageTarget(caster , target , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
if GetUnitState(target, UNIT_STATE_LIFE) < .405 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", target, "overhead"))
set cjlocgn_00000000=CreateGroup()
call GroupEnumUnitsInRange(cjlocgn_00000000, GetUnitX(target), GetUnitY(target), 400., Condition(function Disturbance_Filter))
loop
set cjlocgn_00000001=FirstOfGroup(cjlocgn_00000000)
exitwhen cjlocgn_00000001 == null
call DamageTarget(caster , cjlocgn_00000001 , dmg - 50. , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call GroupRemoveUnit(cjlocgn_00000000, cjlocgn_00000001)
endloop
call DestroyGroup(cjlocgn_00000000)
endif
set caster=null
set target=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
endfunction
function InitTrig_Disturbance takes nothing returns nothing
set gg_trg_Disturbance=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Disturbance, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Disturbance, Condition(function Trig_Disturbance_Conds2))
call TriggerAddAction(gg_trg_Disturbance, function Trig_Disturbance_Actions)
endfunction
function Trig_LifeCycle_Groupcond takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(), 0x41467041) > 0
endfunction
function Trig_LifeCycle_group_act takes nothing returns nothing
local unit u=GetEnumUnit()
local integer lvl=GetUnitAbilityLevel(GetFilterUnit(), 0x41467041)
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + 20 + 15 * ( lvl - 1 ))
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_LIFE) + 10 + 10 * ( lvl - 1 ))
set u=null
endfunction
function Trig_LifeCycle_Actions takes nothing returns nothing
local location loc
if IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) or IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) or GetUnitAbilityLevel(GetDyingUnit(), 0x416C6F63) > 0 then
return
endif
set bj_wantDestroyGroup=true
set loc=ALL_RemoveLocation(GetUnitLoc(GetDyingUnit()))
call ForGroupBJ(ALL_DestroyGroup(ALL_GetUnitsInRangeOfLocMatching(900.00 , loc , Condition(function Trig_LifeCycle_Groupcond))), function Trig_LifeCycle_group_act)
call RemoveLocation(loc)
set loc=null
endfunction
function InitTrig_LifeCycle takes nothing returns nothing
local integer index=0
set gg_trg_LifeCycle=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(gg_trg_LifeCycle, Player(index), EVENT_PLAYER_UNIT_DEATH, null)
set index=index + 1
exitwhen index == bj_MAX_PLAYER_SLOTS
endloop
call TriggerAddAction(gg_trg_LifeCycle, function Trig_LifeCycle_Actions)
endfunction
function Trig_Conflux_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x41464565
endfunction
function Tick_Conflux takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local real hp=GetUnitState(caster, UNIT_STATE_LIFE) + GetUnitState(caster, UNIT_STATE_MAX_LIFE) * 0.01
if GetUnitAbilityLevel(caster, 0x42303248) > 0 then
call SetUnitState(caster, UNIT_STATE_LIFE, hp)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
set Timer=null
set caster=null
endfunction
function Trig_Conflux_Actions takes nothing returns nothing
local unit caster=GetSpellAbilityUnit()
local timer Timer=CreateTimer()
local integer h=GetHandleId(Timer)
call SaveUnitHandle(hash, h, 1, caster)
call TimerStart(Timer, 1., true, function Tick_Conflux)
set caster=null
set Timer=null
endfunction
function InitTrig_Conflux takes nothing returns nothing
set gg_trg_Conflux=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Conflux, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Conflux, Condition(function Trig_Conflux_Conds2))
call TriggerAddAction(gg_trg_Conflux, function Trig_Conflux_Actions)
endfunction
// scope BALANSNO begins
function cj_anonym__60 takes nothing returns boolean
//# optional
return GetUnitAbilityLevel(GetFilterUnit(), 0x42465271) > 0
endfunction
function cj_anonym__59 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local integer h=GetHandleId(t)
local unit u=LoadUnitHandle(hash, h, 1)
local group affected=CreateGroup()
local unit f
call GroupEnumUnitsInRange(affected, GetUnitX(u), GetUnitY(u), 500, Filter(function cj_anonym__60))
loop
set f=FirstOfGroup(affected)
exitwhen f == null
call CastSpellOnTargetTimed(u , f , 0x41667551 , 1 , "slow" , 3.5)
if false then
call DamageTarget(u , f , 0. , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
call GroupRemoveUnit(affected, f)
endloop
call DestroyGroup(affected)
set u=null
endfunction
function cj_callback_00000068 takes nothing returns nothing
//# optional
local unit u=GetSpellAbilityUnit()
local unit t=GetSpellTargetUnit()
local timer time
call SaveUnitHandle(hash, GetHandleId(t), 0x42465271, u)
set time=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(time), 1, u)
call TimerStart(time, .3, true, function cj_anonym__59)
set u=null
set t=null
set time=null
endfunction
function BALANSNO___on_att takes nothing returns nothing
local unit u=udg_DamageEventSource
local unit t=udg_DamageEventTarget
local integer lvl=GetUnitAbilityLevel(t, 0x42465271)
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local unit cjlocgn_00000002
if GetUnitState(t, UNIT_STATE_LIFE) < .405 and lvl > 0 then
set cjlocgn_00000000=0
set cjlocgn_00000001=100 * ( lvl - 1 )
set cjlocgn_00000002=LoadUnitHandle(hash, GetHandleId(t), 0x42465271)
if IsUnitType(t, UNIT_TYPE_HERO) then
set cjlocgn_00000001=cjlocgn_00000001 + ( 300 )
else
set cjlocgn_00000001=cjlocgn_00000001 + ( 100 )
endif
call BJDebugMsg(I2S(cjlocgn_00000001))
if IsUnitInForce(cjlocgn_00000002, uteam_1) then
loop
exitwhen cjlocgn_00000000 > 3
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
call SetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD) + cjlocgn_00000001)
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
elseif IsUnitInForce(cjlocgn_00000002, uteam_2) then
set cjlocgn_00000000=6
loop
exitwhen cjlocgn_00000000 > 9
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
call SetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD) + cjlocgn_00000001)
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
else
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
call SetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD) + cjlocgn_00000001)
call BJDebugMsg(GetPlayerName(Player(cjlocgn_00000000)) + ": " + I2S(GetPlayerState(Player(cjlocgn_00000000), PLAYER_STATE_RESOURCE_GOLD)))
endif
call FlushChildHashtable(hash, GetHandleId(t))
set cjlocgn_00000002=null
endif
set t=null
set u=null
endfunction
function cj_callback_00000069 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function BALANSNO___on_att)
endfunction
// scope BALANSNO ends
// scope BangBang begins
function cj_callback_0000006a takes nothing returns nothing
//# optional
local unit u
local integer h
call BJDebugMsg("Joyce used ulty")
set u=GetTriggerUnit()
set h=GetHandleId(u)
call SaveBoolean(hash, h, 10, true)
call CastSpellOnTargetTimed(u , u , 0x4130364C , 1 , "innerfire" , 3.5)
if false then
call DamageTarget(u , u , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endfunction
function BangBang___q_manaloss_cond takes nothing returns boolean
return GetSpellAbilityId() == 0x41303559 or GetSpellAbilityId() == 0x4130355A or GetSpellAbilityId() == 0x41303630
endfunction
function BangBang___w_manaloss_cond takes nothing returns boolean
return GetSpellAbilityId() == 0x41303631 or GetSpellAbilityId() == 0x41303632 or GetSpellAbilityId() == 0x41303633
endfunction
function BangBang___e_manaloss_cond takes nothing returns boolean
return GetSpellAbilityId() == 0x41303634 or GetSpellAbilityId() == 0x41303636 or GetSpellAbilityId() == 0x41303635
endfunction
function q_manaloss_act takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x41303647)
if GetUnitAbilityLevel(u, 0x42303237) == 0 or GetUnitState(u, UNIT_STATE_MANA) < 75. + 75. * ( lvl - 1 ) then
call SaveBoolean(hash, GetHandleId(u), 10, false)
elseif LoadBoolean(hash, GetHandleId(u), 10) then
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 75. - 75. * ( lvl - 1 ))
call UnitRemoveAbility(u, 0x42303237)
endif
set u=null
endfunction
function w_manaloss_act takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x41303647)
if GetUnitAbilityLevel(u, 0x42303237) == 0 or GetUnitState(u, UNIT_STATE_MANA) < 75. + 75. * ( lvl - 1 ) then
call SaveBoolean(hash, GetHandleId(u), 10, false)
elseif LoadBoolean(hash, GetHandleId(u), 10) then
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 75. - 75. * ( lvl - 1 ))
call UnitRemoveAbility(u, 0x42303237)
endif
set u=null
endfunction
function e_manaloss_act takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x41303647)
if GetUnitAbilityLevel(u, 0x42303237) == 0 or GetUnitState(u, UNIT_STATE_MANA) < 75. + 75. * ( lvl - 1 ) then
call SaveBoolean(hash, GetHandleId(u), 10, false)
elseif LoadBoolean(hash, GetHandleId(u), 10) then
call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 75. - 75. * ( lvl - 1 ))
call UnitRemoveAbility(u, 0x42303237)
endif
set u=null
endfunction
function cj_callback_0000006b takes nothing returns nothing
//# optional
local trigger trg1=CreateTrigger()
local trigger trg2
local trigger trg3
call TriggerRegisterAnyUnitEventBJ(trg1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg1, Condition(function BangBang___q_manaloss_cond))
call TriggerAddAction(trg1, function q_manaloss_act)
set trg2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg2, Condition(function BangBang___w_manaloss_cond))
call TriggerAddAction(trg2, function w_manaloss_act)
set trg3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg3, Condition(function BangBang___e_manaloss_cond))
call TriggerAddAction(trg3, function e_manaloss_act)
set trg1=null
set trg2=null
set trg3=null
endfunction
// scope BangBang ends
// scope RevolvDrum begins
function cj_callback_0000006c takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local integer h=GetHandleId(u)
local real qr=LoadReal(hash, h, 1)
local real wr=LoadReal(hash, h, 2)
local real er=LoadReal(hash, h, 3)
local integer qlvl=LoadInteger(hash, h, 4)
local integer wlvl=LoadInteger(hash, h, 5)
local integer elvl=LoadInteger(hash, h, 6)
if GetUnitAbilityLevel(u, 0x41303559) > 0 or GetUnitAbilityLevel(u, 0x41303631) > 0 or GetUnitAbilityLevel(u, 0x41303634) > 0 then
call UnitRemoveAbility(u, 0x41303559)
call UnitRemoveAbility(u, 0x41303631)
call UnitRemoveAbility(u, 0x41303634)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303559, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303631, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303634, false)
if qlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303630, true)
call UnitAddAbility(u, 0x41303630)
call SetUnitAbilityLevel(u, 0x41303630, qlvl)
endif
if wlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303632, true)
call UnitAddAbility(u, 0x41303632)
call SetUnitAbilityLevel(u, 0x41303632, wlvl)
endif
if elvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303636, true)
call UnitAddAbility(u, 0x41303636)
call SetUnitAbilityLevel(u, 0x41303636, elvl)
endif
if qr > 0 then
if 0x41303559 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303559 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if wr > 0 then
if 0x41303631 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303631 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if er > 0 then
if 0x41303634 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303634 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
elseif GetUnitAbilityLevel(u, 0x41303630) > 0 or GetUnitAbilityLevel(u, 0x41303632) > 0 or GetUnitAbilityLevel(u, 0x41303636) > 0 then
call UnitRemoveAbility(u, 0x41303630)
call UnitRemoveAbility(u, 0x41303632)
call UnitRemoveAbility(u, 0x41303636)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303630, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303632, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303636, false)
if qlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x4130355A, true)
call UnitAddAbility(u, 0x4130355A)
call SetUnitAbilityLevel(u, 0x4130355A, qlvl)
endif
if wlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303633, true)
call UnitAddAbility(u, 0x41303633)
call SetUnitAbilityLevel(u, 0x41303633, wlvl)
endif
if elvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303635, true)
call UnitAddAbility(u, 0x41303635)
call SetUnitAbilityLevel(u, 0x41303635, elvl)
endif
if qr > 0 then
if 0x41303630 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303630 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if wr > 0 then
if 0x41303632 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303632 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if er > 0 then
if 0x41303636 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303636 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
elseif GetUnitAbilityLevel(u, 0x4130355A) > 0 or GetUnitAbilityLevel(u, 0x41303633) > 0 or GetUnitAbilityLevel(u, 0x41303635) > 0 then
call UnitRemoveAbility(u, 0x4130355A)
call UnitRemoveAbility(u, 0x41303633)
call UnitRemoveAbility(u, 0x41303635)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x4130355A, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303633, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303635, false)
if qlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303559, true)
call UnitAddAbility(u, 0x41303559)
call SetUnitAbilityLevel(u, 0x41303559, qlvl)
endif
if wlvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303631, true)
call UnitAddAbility(u, 0x41303631)
call SetUnitAbilityLevel(u, 0x41303631, wlvl)
endif
if elvl > 0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(u), 0x41303634, true)
call UnitAddAbility(u, 0x41303634)
call SetUnitAbilityLevel(u, 0x41303634, elvl)
endif
if qr > 0 then
if 0x4130355A == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x4130355A == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(qr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if wr > 0 then
if 0x41303633 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303633 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(wr) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
if er > 0 then
if 0x41303635 == 0x41303559 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x4130355A then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303630 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er))
call IssueImmediateOrder(u, "controlmagic")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303631 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303632 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303633 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 2)
call IssueImmediateOrder(u, "creepdevour")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303634 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303635 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
elseif 0x41303635 == 0x41303636 then
call UnitAddAbility(u, 0x4130364B)
call SetUnitAbilityLevel(u, 0x4130364B, R2I(er) * 3)
call IssueImmediateOrder(u, "channel")
call UnitRemoveAbility(u, 0x4130364B)
endif
endif
endif
endfunction
function cj_anonym__63 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer h=GetHandleId(u)
local real r=LoadReal(hash, h, 3)
if r > 0 then
call SaveReal(hash, h, 3, r - 0.1)
else
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endif
endfunction
function cj_anonym__62 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer h=GetHandleId(u)
local real r=LoadReal(hash, h, 2)
if r > 0 then
call SaveReal(hash, h, 2, r - 0.1)
else
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endif
endfunction
function cj_anonym__61 takes nothing returns nothing
//# optional
local timer Timer=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(Timer), 1)
local integer h=GetHandleId(u)
local real r=LoadReal(hash, h, 1)
if r > 0 then
call SaveReal(hash, h, 1, r - 0.1)
else
call FlushChildHashtable(hash, GetHandleId(Timer))
call PauseTimer(Timer)
call DestroyTimer(Timer)
set Timer=null
endif
endfunction
function SlotBlock takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer h=GetHandleId(u)
local integer abid=GetSpellAbilityId()
local timer t=CreateTimer()
local integer th=GetHandleId(t)
call SaveUnitHandle(hash, th, 1, u)
if ( abid == 0x41303559 or abid == 0x41303632 or abid == 0x41303635 ) then
call SaveReal(hash, h, 1, 11.)
call TimerStart(t, 0.1, true, function cj_anonym__61)
elseif ( abid == 0x41303631 or abid == 0x4130355A or abid == 0x41303636 ) then
call SaveReal(hash, h, 2, 11.)
call TimerStart(t, 11., false, function cj_anonym__62)
elseif ( abid == 0x41303634 or abid == 0x41303630 or abid == 0x41303633 ) then
call SaveReal(hash, h, 3, 11.)
call TimerStart(t, 11., false, function cj_anonym__63)
endif
set t=null
set u=null
endfunction
function cj_callback_0000006d takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(trg, function SlotBlock)
endfunction
function cj_callback_0000006e takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local integer h=GetHandleId(u)
local integer sp_id=GetLearnedSkill()
if sp_id == 0x41303559 or sp_id == 0x4130355A or sp_id == 0x41303630 then
call SaveInteger(hash, h, 4, GetUnitAbilityLevel(u, sp_id))
elseif sp_id == 0x41303631 or sp_id == 0x41303632 or sp_id == 0x41303633 then
call SaveInteger(hash, h, 5, GetUnitAbilityLevel(u, sp_id))
elseif sp_id == 0x41303634 or sp_id == 0x41303635 or sp_id == 0x41303636 then
call SaveInteger(hash, h, 6, GetUnitAbilityLevel(u, sp_id))
endif
endfunction
// scope RevolvDrum ends
// scope grenade begins
function s__grenade_healfilter takes integer this,unit s,unit f returns boolean
return ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and s != f and not IsUnitType(f, UNIT_TYPE_STRUCTURE) and IsUnitAlly(f, GetOwningPlayer(s))
endfunction
function s__grenade_cj_anonym__64 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
call DestroyEffect(LoadEffectHandle(hash, GetHandleId(t), 0))
call FlushChildHashtable(hash, GetHandleId(t))
call DestroyTimer(t)
endfunction
function s__grenade_onGround takes integer this returns nothing
local boolean b=true
local group g
local real aoe
local unit u
local timer cjlocgn_00000000
local real cjlocgn_00000001
local integer number
local integer cjlocgn_00000002
local real cjlocgn_00000003
local integer cjlocgn_00000004
local integer cjlocgn_00000005
call BJDebugMsg("Grenade " + I2S(this) + " level " + I2S(s__grenade_level[this]))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Parasite\\ParasiteTarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
set g=CreateGroup()
set aoe=400. + 50. * ( s__grenade_level[this] - 1 )
call GroupEnumUnitsInRange(g, s__projectile__get_x(this), s__projectile__get_y(this), aoe, null)
call GroupRemoveUnit(g, s__projectile_toUnit[this])
loop
set u=FirstOfGroup(g)
exitwhen u == null
call GroupRemoveUnit(g, u)
if s__grenade_healfilter(this,s__projectile__get_source(this) , u) then
set b=false
set cjlocgn_00000000=CreateTimer()
call SaveEffectHandle(hash, GetHandleId(cjlocgn_00000000), 0, AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", u, "origin"))
call TimerStart(cjlocgn_00000000, .75, false, function s__grenade_cj_anonym__64)
set cjlocgn_00000001=50. + 40. * ( s__grenade_level[this] - 1 )
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + cjlocgn_00000001)
endif
endloop
set number=LoadInteger(hash, GetHandleId(s__projectile_toUnit[this]), 0)
if ( number + 1 < 3 and s__grenade_dist[this] > 50. and b ) then
call BJDebugMsg("Speed = " + R2S(s__projectile_speed[this]) + "\t Arc = " + R2S(s__projectile_arc[this]) + "\t Number = " + I2S(number))
set s__grenade_dist[this]=s__grenade_dist[this] * ( ( 2. / 3. ) )
set cjlocgn_00000002=s__vector_create(s__projectile__get_x(this) , s__projectile__get_y(this) , GetTerrainZ(s__projectile__get_x(this) , s__projectile__get_y(this)) + s__projectile__get_z(this))
set cjlocgn_00000001=s__projectile__get_x(this) + s__grenade_dist[this] * Cos(s__grenade_angle[this])
set cjlocgn_00000003=s__projectile__get_y(this) + s__grenade_dist[this] * Sin(s__grenade_angle[this])
set cjlocgn_00000004=s__vector_create(cjlocgn_00000001 , cjlocgn_00000003 , GetTerrainZ(cjlocgn_00000001 , cjlocgn_00000003))
set cjlocgn_00000005=sc__grenade_create(s__projectile__get_source(this) , s__projectile_toUnit[this] , s__grenade_level[this] , s__grenade_dist[this] , s__projectile_speed[this] , s__projectile_arc[this] , cjlocgn_00000002 , cjlocgn_00000004 , "Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl")
call s__vector_deallocate(cjlocgn_00000002)
call s__vector_deallocate(cjlocgn_00000004)
set s__projectile_toKill[this]=false
call sc__projectileinterface_deallocate(this)
set number=number + 1
call SaveInteger(hash, GetHandleId(s__projectile_toUnit[this]), 0, number)
else
call FlushChildHashtable(hash, GetHandleId(s__projectile_toUnit[this]))
set s__projectile_toDestroy[this]=true
set s__projectile_toKill[this]=true
call sc__projectileinterface_deallocate(this)
endif
set cjlocgn_00000000=null
set u=null
set g=null
endfunction
function s__grenade_create takes unit u,unit dummy,integer level,real dist,real speed,real arc,integer startVector,integer endVector,string modelpath returns integer
local real ang=Atan2(s__vector_y[endVector] - s__vector_y[startVector], s__vector_x[endVector] - s__vector_x[startVector])
local integer d=s__grenade__allocate(dummy)
call s__projectile_setModel(d,modelpath)
call s__projectile__set_source(d,u)
set s__grenade_angle[d]=ang
set s__grenade_dist[d]=dist
set s__grenade_level[d]=level
set s__projectile_toDestroy[d]=true
call s__projectile_launch(d,startVector , endVector , speed , arc)
set dummy=null
return d
endfunction
function cj_callback_0000006f takes nothing returns nothing
//# optional
local unit source=GetTriggerUnit()
local real x=GetUnitX(source)
local real y=GetUnitY(source)
local real xt=GetSpellTargetX()
local real yt=GetSpellTargetY()
local real ang=Atan2(yt - y, xt - x)
local integer level=GetUnitAbilityLevel(source, 0x414B6554)
local real distance=SquareRoot(( yt - y ) * ( yt - y ) + ( xt - x ) * ( xt - x ))
local integer A=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 50.)
local integer B=s__vector_create(xt , yt , GetTerrainZ(xt , yt))
local integer C=s__vector_difference(B , A)
local unit dummy=CreateUnit(GetOwningPlayer(source), 0x68303164, x, y, Rad2Deg(ang))
local integer G
call SaveInteger(hash, GetHandleId(dummy), 0, 0)
set G=s__grenade_create(source , dummy , level , s__vector_getLength(C) , 650. , .30 , A , B , "Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl")
call s__vector_deallocate(A)
call s__vector_deallocate(B)
call s__vector_deallocate(C)
endfunction
function cj_callback_00000070 takes nothing returns nothing
//# optional
endfunction
// scope grenade ends
function Trig_Upgrade_Conditions takes nothing returns boolean
return GetSpellAbilityId() == 0x414B5541
endfunction
function cj_anonym__65 takes nothing returns nothing
//# optional
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0)
call SetUnitAbilityLevel(u, 0x41616B62, 1)
call SetUnitAbilityLevel(u, 0x414B556C, 1)
call UnitRemoveAbility(u, 0x414B5573)
call BJDebugMsg("Отключеееениеээ")
call FlushChildHashtable(hash, GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
set u=null
endfunction
function Trig_Upgrade_Actions takes nothing returns nothing
local unit u
local timer T
call BJDebugMsg("Запускаю улучшашки")
set u=GetTriggerUnit()
call UnitAddAbility(u, 0x414B5573)
call SetUnitAbilityLevel(u, 0x414B556C, 2)
call SetUnitAbilityLevel(u, 0x41616B62, GetUnitAbilityLevel(u, 0x414B5541) + 1)
set T=CreateTimer()
call SaveUnitHandle(hash, GetHandleId(T), 0, u)
call TimerStart(T, 10., false, function cj_anonym__65)
set u=null
set T=null
endfunction
function InitTrig_Upgrade takes nothing returns nothing
set gg_trg_Upgrade=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Upgrade, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Upgrade, Condition(function Trig_Upgrade_Conditions))
call TriggerAddAction(gg_trg_Upgrade, function Trig_Upgrade_Actions)
endfunction
function Trig_Dron_Conds2 takes nothing returns boolean
return GetSpellAbilityId() == 0x414B6D54
endfunction
function Group_Dron takes nothing returns boolean
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
set Timer=null
if ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(caster)) ) then
set caster=null
set caster=null
return true
endif
set caster=null
return false
endfunction
function movedrone takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit target=LoadUnitHandle(hash, h, 2)
local real remain=LoadReal(hash, h, 3)
local unit dm=LoadUnitHandle(hash, h, 4)
call SetUnitX(dm, GetUnitX(target))
call SetUnitY(dm, GetUnitY(target))
call SetUnitFacing(dm, GetUnitFacing(target))
if remain > 0 then
set remain=remain - 0.03
call SaveReal(hash, h, 3, remain)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
set dm=null
set Timer=null
set target=null
endfunction
function Tick_Dron takes nothing returns nothing
local timer Timer=GetExpiredTimer()
local integer h=GetHandleId(Timer)
local unit caster=LoadUnitHandle(hash, h, 1)
local unit target=LoadUnitHandle(hash, h, 2)
local unit dm=LoadUnitHandle(hash, h, 4)
local group enemyunits
local real remain
local unit first
call SetUnitX(dm, GetUnitX(target))
call SetUnitY(dm, GetUnitY(target))
set enemyunits=CreateGroup()
call GroupEnumUnitsInRange(enemyunits, GetUnitX(target), GetUnitY(target), 600., Condition(function Group_Dron))
set remain=LoadReal(hash, h, 3)
set first=FirstOfGroup(enemyunits)
call IssueTargetOrder(dm, "attack", first)
call GroupRemoveUnit(enemyunits, first)
set first=null
set enemyunits=null
if remain > 0 then
set remain=remain - .4
call SaveReal(hash, h, 3, remain)
else
call PauseTimer(Timer)
call FlushChildHashtable(hash, h)
call DestroyTimer(Timer)
endif
call DestroyGroup(enemyunits)
set dm=null
set Timer=null
set caster=null
set target=null
endfunction
function Trig_Dron_Actions takes nothing returns nothing
local unit caster
local unit target
local unit dm
local integer lvl
local unit damager
local real remain=7.
local timer mt
local timer Timer
local integer h
local integer dh
call BJDebugMsg("Запускаю протокол Семейная вечеринка")
set caster=GetSpellAbilityUnit()
set target=GetSpellTargetUnit()
set dm=CreateUnit(GetOwningPlayer(caster), 0x68303234, GetUnitX(target), GetUnitY(target), GetUnitFacing(target))
set lvl=GetUnitAbilityLevel(caster, 0x414B6D54)
set damager=CreateUnit(GetOwningPlayer(caster), 0x68303237, GetUnitX(target), GetUnitY(target), GetUnitFacing(target))
call UnitAddAbility(damager, 0x41303336)
call SetUnitAbilityLevel(damager, 0x41303336, 1 + 4 * ( lvl - 1 ))
call UnitApplyTimedLife(dm, 0x42544C46, 7.)
call UnitApplyTimedLife(damager, 0x42544C46, 7.)
set mt=CreateTimer()
set Timer=CreateTimer()
set h=GetHandleId(Timer)
set dh=GetHandleId(mt)
call SaveUnitHandle(hash, h, 1, caster)
call SaveUnitHandle(hash, h, 2, target)
call SaveReal(hash, h, 3, remain)
call SaveUnitHandle(hash, h, 4, damager)
call SaveUnitHandle(hash, dh, 2, target)
call SaveReal(hash, dh, 3, remain)
call SaveUnitHandle(hash, dh, 4, dm)
call TimerStart(mt, .03, true, function movedrone)
call TimerStart(Timer, .4, true, function Tick_Dron)
set dm=null
set caster=null
set target=null
set Timer=null
set mt=null
set damager=null
endfunction
function InitTrig_KillingDron takes nothing returns nothing
set gg_trg_KillingDron=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_KillingDron, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_KillingDron, Condition(function Trig_Dron_Conds2))
call TriggerAddAction(gg_trg_KillingDron, function Trig_Dron_Actions)
endfunction
// scope Combust begins
function combu_buff_check takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(), 0x42303238) > 0
endfunction
function combu_buff_act takes nothing returns nothing
local unit t=GetTriggerUnit()
local unit u=LoadUnitHandle(hash, GetHandleId(t), 0x42303238)
local integer lvl=GetUnitAbilityLevel(t, 0x42303238)
local real dmg=80. + ( lvl - 1 ) * 60.
call BJDebugMsg(GetUnitName(t) + " получит" + R2S(dmg) + " урона")
set IsTriggerDamage=true
call UnitDamageTarget(u, t, dmg, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call UnitRemoveAbility(t, 0x42303238)
set u=null
set t=null
endfunction
function cj_callback_00000071 takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local unit t=GetSpellTargetUnit()
local integer lvl=GetUnitAbilityLevel(u, 0x41303649)
local real dmg
call SaveUnitHandle(hash, GetHandleId(t), 0x42303238, u)
set dmg=GetHeroInt(t, true) * ( 3 + ( lvl - 1 ) * 0.5 )
call BJDebugMsg(GetUnitName(t) + " получит" + R2S(dmg) + " урона")
call CastSpellOnTargetTimed(u , t , 0x4130364D , lvl , "acidbomb" , 3.5)
if true then
call DamageTarget(u , t , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endfunction
function cj_callback_00000072 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function combu_buff_check))
call TriggerAddAction(trg, function combu_buff_act)
set trg=null
endfunction
// scope Combust ends
// scope Cloak begins
function cj_callback_00000073 takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
local group al
local unit cjlocgn_00000000
call BJDebugMsg("зашел в клоаку")
set al=CreateGroup()
call GroupEnumUnitsInRange(al, GetUnitX(u), GetUnitY(u), 1000., null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_0000001f
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(al, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_0000001f)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_0000001f, cjlocgn_00000000)
if IsUnitAlly(cjlocgn_00000000, GetOwningPlayer(u)) and GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 and IsUnitType(cjlocgn_00000000, UNIT_TYPE_HERO) then
call CastSpellOnTargetTimed(u , cjlocgn_00000000 , 0x41303652 , 1 , "drunkenhaze" , 3.5)
if false then
call DamageTarget(u , cjlocgn_00000000 , 0 , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
endif
endif
endloop
call GroupClear(al)
call DestroyGroup(al)
endfunction
// scope Cloak ends
// scope Servant begins
function ser_dmg_tick takes nothing returns nothing
local group ser=CreateGroup()
local group en=CreateGroup()
local unit cjlocgn_00000000
local unit cjlocgn_00000001
local real cjlocgn_00000002
call GroupEnumUnitsInRect(ser, GetPlayableMapRect(), null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_00000020
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(ser, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000020)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000020, cjlocgn_00000000)
if GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 and GetUnitTypeId(cjlocgn_00000000) == 0x6E303059 or GetUnitTypeId(cjlocgn_00000000) == 0x6E30305A or GetUnitTypeId(cjlocgn_00000000) == 0x6E303130 or GetUnitTypeId(cjlocgn_00000000) == 0x6E303131 or GetUnitTypeId(cjlocgn_00000000) == 0x6E303132 then
call GroupEnumUnitsInRange(en, GetUnitX(cjlocgn_00000000), GetUnitY(cjlocgn_00000000), 300., null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_00000021
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(en, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000001=FirstOfGroup(cjgrfgn_00000021)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjgrfgn_00000021, cjlocgn_00000001)
if IsUnitEnemy(cjlocgn_00000001, GetOwningPlayer(cjlocgn_00000000)) and GetUnitState(cjlocgn_00000001, UNIT_STATE_LIFE) > .405 and not IsUnitType(cjlocgn_00000001, UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(cjlocgn_00000001, 0x416C6F63) == 0 then
set cjlocgn_00000002=3. + ( GetUnitAbilityLevel(cjlocgn_00000000, 0x41303651) - 1 ) * 2.
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl", cjlocgn_00000001, "overhead"))
set IsTriggerDamage=true
call UnitDamageTarget(cjlocgn_00000000, cjlocgn_00000001, cjlocgn_00000002, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call GroupRemoveUnit(en, cjlocgn_00000001)
endif
endloop
endif
call GroupRemoveUnit(ser, cjlocgn_00000000)
endloop
call GroupClear(ser)
call DestroyGroup(ser)
call GroupClear(en)
call DestroyGroup(en)
set en=null
set ser=null
endfunction
function ser_spawn takes nothing returns nothing
local unit u=udg_DamageEventSource
local integer lvl=GetUnitAbilityLevel(u, 0x4130364F)
local integer RI=LoadInteger(hash, GetHandleId(u), 0x4130364F)
local unit t
local player p
local real x
local real y
local unit d
local real fa
if IsTriggerDamage or udg_IsDamageSpell or udg_DamageEventAmount < 1 or lvl == 0 or GetRandomInt(1, RI) > 1 then
call SaveInteger(hash, GetHandleId(u), 0x4130364F, RI - 1)
set u=null
return
endif
call BJDebugMsg("прокнула пасс фени")
call SaveInteger(hash, GetHandleId(u), 0x4130364F, 5)
set t=udg_DamageEventTarget
set p=GetOwningPlayer(u)
set x=GetUnitX(t) + GetRandomInt(- 100, 100)
set y=GetUnitY(t) + GetRandomInt(- 100, 100)
set fa=bj_RADTODEG * - 0.5 * Atan2(y - GetUnitY(t), x - GetUnitX(t))
if lvl == 1 then
set d=CreateUnit(p, 0x6E303059, x, y, fa)
elseif lvl == 2 then
set d=CreateUnit(p, 0x6E30305A, x, y, fa)
elseif lvl == 3 then
set d=CreateUnit(p, 0x6E303130, x, y, fa)
elseif lvl == 4 then
set d=CreateUnit(p, 0x6E303131, x, y, fa)
elseif lvl == 5 then
set d=CreateUnit(p, 0x6E303132, x, y, fa)
endif
call BJDebugMsg("tupo sozdalsya " + GetUnitName(d))
call UnitAddAbility(d, 0x41303651)
call SetUnitAbilityLevel(d, 0x41303651, lvl)
call UnitApplyTimedLife(d, 0x42544C46, 30. + ( lvl - 1 ) * 0.)
set d=null
set t=null
set u=null
endfunction
function cj_callback_00000074 takes nothing returns nothing
//# optional
local unit u=GetTriggerUnit()
if GetLearnedSkill() != 0x4130364F or GetUnitAbilityLevel(u, 0x4130364F) > 1 then
set u=null
return
endif
call SaveInteger(hash, GetHandleId(u), 0x4130364F, 5)
endfunction
function cj_callback_00000075 takes nothing returns nothing
//# optional
local timer ti=CreateTimer()
local trigger trg
call TimerStart(ti, 0.3, true, function ser_dmg_tick)
set trg=CreateTrigger()
call TriggerRegisterVariableEvent(trg, "udg_AfterDamageEvent", EQUAL, 1.00)
call TriggerAddAction(trg, function ser_spawn)
endfunction
// scope Servant ends
// scope Mana begins
function mana_buff_check takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(), 0x42303241) > 0
endfunction
function mana_buff_act takes nothing returns nothing
local unit u=GetTriggerUnit()
local real mana=GetUnitState(u, UNIT_STATE_MANA)
local integer lvl
local group g
local unit cjlocgn_00000000
local real cjlocgn_00000001
call TriggerSleepAction(0.0)
set mana=mana - ( GetUnitState(u, UNIT_STATE_MANA) )
if mana < 1. then
set u=null
return
endif
call BJDebugMsg("На спелл потрачено" + R2S(mana))
set lvl=GetUnitAbilityLevel(u, 0x42303241)
set g=CreateGroup()
call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 700., null)
set cj_tmpgr_copy_nw509ert7=cjgrfgn_00000022
call GroupClear(cj_tmpgr_copy_nw509ert7)
call ForGroup(g, function cj_group_copy_75hJKJ3745gf)
loop
set cjlocgn_00000000=FirstOfGroup(cjgrfgn_00000022)
exitwhen cjlocgn_00000000 == null
call GroupRemoveUnit(cjgrfgn_00000022, cjlocgn_00000000)
if IsUnitEnemy(cjlocgn_00000000, GetOwningPlayer(u)) and GetUnitState(cjlocgn_00000000, UNIT_STATE_LIFE) > .405 and GetUnitState(u, UNIT_STATE_LIFE) > .405 and GetUnitAbilityLevel(cjlocgn_00000000, 0x42303241) > 0 then
set cjlocgn_00000001=mana * ( 1.0 + ( lvl - 1 ) * 0.5 )
set IsTriggerDamage=true
call UnitDamageTarget(cjlocgn_00000000, u, cjlocgn_00000001, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call GroupRemoveUnit(g, cjlocgn_00000000)
endif
endloop
set g=null
set u=null
endfunction
function cj_callback_00000076 takes nothing returns nothing
//# optional
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg, Condition(function mana_buff_check))
call TriggerAddAction(trg, function mana_buff_act)
set trg=null
endfunction
// scope Mana ends
function InitCustomTriggers takes nothing returns nothing
call InitTrig_Info()
//Function not found: call InitTrig_CHDmgCheckACT()
//Function not found: call InitTrig_Herospelltable()
//Function not found: call InitTrig_some_Preload()
//Function not found: call InitTrig_map_init_plus_some_features()
//Function not found: call InitTrig_heropickinit()
call InitTrig_rly_ez_money()
//Function not found: call InitTrig_musiclab()
//Function not found: call InitTrig_TextCommands()
call InitTrig_Dont_touch_ally()
call InitTrig_DAMAGE_REPORT()
//Function not found: call InitTrig_Left_smbd()
//Function not found: call InitTrig_development_tools()
//Function not found: call InitTrig_Endgame()
//Function not found: call InitTrig_Killing_Reward_SYS()
//Function not found: call InitTrig_Names()
//Function not found: call InitTrig_VexTable()
call InitTrig_Unit_Indexer()
//Function not found: call InitTrig_TimerUtils()
call InitTrig_Damage_Engine_Config()
call InitTrig_Damage_Engine()
//Function not found: call InitTrig_FICS_cJASS()
//Function not found: call InitTrig_Vector()
//Function not found: call InitTrig_Projectile_system()
//Function not found: call InitTrig_ProjectileArt()
//Function not found: call InitTrig_Getsourceunti()
//Function not found: call InitTrig_CodeLib()
//Function not found: call InitTrig_Home_TP()
//Function not found: call InitTrig_Backdoor()
call InitTrig_Invulnerable_Towers()
call InitTrig_LDefMod_Tier1()
call InitTrig_LDefTree1_Tier1()
call InitTrig_LDefMod_Tier_3()
call InitTrig_LDefMod_Tier4()
call InitTrig_LDefMod_Tier5()
call InitTrig_RDefMod_Tier1()
call InitTrig_RDefTree1_Tier1()
call InitTrig_RDefModTree2()
call InitTrig_RDefMod_Tier_3()
call InitTrig_RDefMod_Tier4()
call InitTrig_RDefMod_Tier5()
call InitTrig_Spawn_bot_le()
call InitTrig_l2s___lm2()
call InitTrig_lm2____llll()
call InitTrig_llll____2()
call InitTrig_bot_rrrr()
call InitTrig_rrrr_lhello()
call InitTrig_lhelo_rm2()
call InitTrig_lthrone2()
call InitTrig_final_atack_Orden()
call InitTrig_l1s___lm1()
call InitTrig_lm1___1()
call InitTrig_top_rm1()
call InitTrig_lthrone1()
call InitTrig_r1s___rm1()
call InitTrig_rm1___1()
call InitTrig_top_lm1()
call InitTrig_rthrone_1()
call InitTrig_rthrone_1_____________________u()
call InitTrig_rthrone_1__________________________________________u()
call InitTrig_rthrone_1_______________________________________________________________u()
call InitTrig_final_atack_kult()
call InitTrig_r2s___rm2()
call InitTrig_rm2_rrrr()
call InitTrig_rrrr_2()
call InitTrig_bot_llll()
call InitTrig_llll_rhello()
call InitTrig_rhello_lm2()
call InitTrig_rthrone2()
call InitTrig_Orden_debag_verh()
call InitTrig_Orden_debag_niz()
call InitTrig_Kult_debag_niz()
call InitTrig_Kult_debag_verh()
//Function not found: call InitTrig_FOREST_SPAWN()
//Function not found: call InitTrig_Volya()
call InitTrig_BlueDrakeDeath()
call InitTrig_DragonRune()
call InitTrig_RuneEffec()
call InitTrig_RunerDeath()
call InitTrig_Spear_Eff()
//Function not found: call InitTrig_Spear()
call InitTrig_CorpPo()
//Function not found: call InitTrig_BossTpItAct()
call InitTrig_Fear_____________________u()
call InitTrig_DarkSouls()
//Function not found: call InitTrig_BossStun()
//Function not found: call InitTrig_BossDeath()
//Function not found: call InitTrig_InitDataBase()
call InitTrig_Gladius()
call InitTrig_crusher()
call InitTrig_The_Doll_of_a_Sorcerer()
call InitTrig_BandeeteeDamaged()
call InitTrig_EnslaverDamaged()
call InitTrig_StellSwordS()
call InitTrig_BanHammer()
//Function not found: call InitTrig_Wind_sabre()
//Function not found: call InitTrig_ShurikenDamaged()
call InitTrig_LivingSparkSparker()
call InitTrig_SpiritPiercer()
call InitTrig_LuckyBone()
call InitTrig_DiverseBoots()
call InitTrig_StealthBoots()
//Function not found: call InitTrig_BootsofGonec()
call InitTrig_SilentBoots()
//Function not found: call InitTrig_ActiveMagRes()
//Function not found: call InitTrig_ArmorOfTheDeeps()
//Function not found: call InitTrig_onethousandsswordsarmor()
//Function not found: call InitTrig_EssenceOfDeath()
//Function not found: call InitTrig_RaidersBlade()
//Function not found: call InitTrig_zagadsosud()
//Function not found: call InitTrig_flag_of_victory()
//Function not found: call InitTrig_PosohSIli()
//Function not found: call InitTrig_Ring_of_despair()
//Function not found: call InitTrig_LifeEff()
call InitTrig_Firestone()
call InitTrig_Crystal()
call InitTrig_Lefruit()
call InitTrig_Limitless_Cup_eff()
call InitTrig_MartyrShieldEff()
call InitTrig_WarDrum()
call InitTrig_OWLSTONE()
//Function not found: call InitTrig_Spellbloom()
call InitTrig_HornOfDoom()
call InitTrig_JediBracele()
call InitTrig_MagicLamp()
call InitTrig_Coin()
//Function not found: call InitTrig_Stuff_of_tp()
//Function not found: call InitTrig_StrangeBook()
//Function not found: call InitTrig_boooksmegaboooooks()
//Function not found: call InitTrig_UsefulAlmanac()
call InitTrig_Temariys_stone()
call InitTrig_ObiStone()
//Function not found: call InitTrig_PentAct()
call InitTrig_Mind_Execution()
//Function not found: call InitTrig_Portal_Eff()
call InitTrig_Winds()
//Function not found: call InitTrig_sub0()
call InitTrig_Slide()
call InitTrig_ColdEmbrace()
call InitTrig_Enfektsia()
call InitTrig_SummonLimit()
call InitTrig_Zombre_Lifesteal()
call InitTrig_Cobra_Ulty()
call InitTrig_Manasteal()
call InitTrig_Cloud()
//Function not found: call InitTrig_HitinLearn()
//Function not found: call InitTrig_Hitin()
call InitTrig_Reap()
call InitTrig_FMULTY()
call InitTrig_FH_EXPL()
call InitTrig_Hou()
call InitTrig_FC()
call InitTrig_FMD()
call InitTrig_Spasm()
call InitTrig_MenstrualBrotherhood()
call InitTrig_PirshestvoTrig()
call InitTrig_BEA()
call InitTrig_Bleeding()
call InitTrig_BE()
call InitTrig_Circular_Hits()
//Function not found: call InitTrig_DemonicScream()
//Function not found: call InitTrig_ThirstyFire()
call InitTrig_HuntBegin()
//Function not found: call InitTrig_Latanel()
//Function not found: call InitTrig_Blink_trap()
//Function not found: call InitTrig_Net()
//Function not found: call InitTrig_Magrondus()
//Function not found: call InitTrig_Nam()
//Function not found: call InitTrig_Spell()
call InitTrig_Meditation()
//Function not found: call InitTrig_Healing_Touch()
//Function not found: call InitTrig_Split_skull()
//Function not found: call InitTrig_MarchThrow()
//Function not found: call InitTrig_AngryGnomes()
//Function not found: call InitTrig_Dash()
//Function not found: call InitTrig_Reality_Distortion()
//Function not found: call InitTrig_Energy_Redirection()
//Function not found: call InitTrig_Spatial_Fracture()
//Function not found: call InitTrig_Dusk_time()
//Function not found: call InitTrig_Ridilan()
call InitTrig_Penetration_Strike()
call InitTrig_Inspire()
//Function not found: call InitTrig_Defender()
call InitTrig_LifeWall()
//Function not found: call InitTrig_Reincarnation()
//Function not found: call InitTrig_Shadow_of_Death()
//Function not found: call InitTrig_Sikruf_Passa()
call InitTrig_SikrPassAgi()
call InitTrig_Metka2()
//Function not found: call InitTrig_Istoshenie()
//Function not found: call InitTrig_Execute()
//Function not found: call InitTrig_Fallen_Gladiator()
call InitTrig_BLOODLUST()
//Function not found: call InitTrig_PowerStrike()
call InitTrig_Gr()
//Function not found: call InitTrig_TitanPassa()
//Function not found: call InitTrig_Zemlya()
call InitTrig_Meteor_Strike()
call InitTrig_Vargn_expl()
call InitTrig_Ulty()
//Function not found: call InitTrig_Shit_vody()
//Function not found: call InitTrig_Volna()
//Function not found: call InitTrig_FE()
//Function not found: call InitTrig_Vod_Shard()
//Function not found: call InitTrig_Magnet()
//Function not found: call InitTrig_ConeDrak()
//Function not found: call InitTrig_Unbinded_Power()
//Function not found: call InitTrig_DrakUty()
call InitTrig_Disturbance()
call InitTrig_LifeCycle()
call InitTrig_Conflux()
//Function not found: call InitTrig_Threat_to_balance()
//Function not found: call InitTrig_BangBang()
//Function not found: call InitTrig_RevolverSpin__________________________________________u()
//Function not found: call InitTrig_Grenade()
call InitTrig_Upgrade()
call InitTrig_KillingDron()
//Function not found: call InitTrig_Combust()
//Function not found: call InitTrig_FlameCloak()
//Function not found: call InitTrig_FireServants()
//Function not found: call InitTrig_ImmolateMana()
endfunction
function RunInitializationTriggers takes nothing returns nothing
call ConditionalTriggerExecute(gg_trg_Info)
call ConditionalTriggerExecute(gg_trg_map_init_plus_some_features)
call ConditionalTriggerExecute(gg_trg_rly_ez_money)
call ConditionalTriggerExecute(gg_trg_Unit_Indexer)
call ConditionalTriggerExecute(gg_trg_Invulnerable_Towers)
call ConditionalTriggerExecute(gg_trg_Spawn_bot_le)
call ConditionalTriggerExecute(gg_trg_FC)
endfunction
function InitCustomPlayerSlots takes nothing returns nothing
call SetPlayerStartLocation(Player(0), 0)
call ForcePlayerStartLocation(Player(0), 0)
call SetPlayerColor(Player(0), ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0), false)
call SetPlayerController(Player(0), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1), 1)
call ForcePlayerStartLocation(Player(1), 1)
call SetPlayerColor(Player(1), ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1), false)
call SetPlayerController(Player(1), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2), 2)
call ForcePlayerStartLocation(Player(2), 2)
call SetPlayerColor(Player(2), ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2), false)
call SetPlayerController(Player(2), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3), 3)
call ForcePlayerStartLocation(Player(3), 3)
call SetPlayerColor(Player(3), ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3), false)
call SetPlayerController(Player(3), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6), 4)
call ForcePlayerStartLocation(Player(6), 4)
call SetPlayerColor(Player(6), ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6), false)
call SetPlayerController(Player(6), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7), 5)
call ForcePlayerStartLocation(Player(7), 5)
call SetPlayerColor(Player(7), ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7), false)
call SetPlayerController(Player(7), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8), 6)
call ForcePlayerStartLocation(Player(8), 6)
call SetPlayerColor(Player(8), ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(8), false)
call SetPlayerController(Player(8), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9), 7)
call ForcePlayerStartLocation(Player(9), 7)
call SetPlayerColor(Player(9), ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9), RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(9), false)
call SetPlayerController(Player(9), MAP_CONTROL_USER)
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(0), 0)
call SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(1), 0)
call SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(2), 0)
call SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(3), 0)
call SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
call SetPlayerTeam(Player(6), 1)
call SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(7), 1)
call SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(8), 1)
call SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(9), 1)
call SetPlayerState(Player(9), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(8), true)
endfunction
function InitAllyPriorities takes nothing returns nothing
call SetStartLocPrioCount(0, 3)
call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1, 3)
call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2, 3)
call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3, 3)
call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4, 3)
call SetStartLocPrio(4, 0, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4, 1, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4, 2, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5, 3)
call SetStartLocPrio(5, 0, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5, 1, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5, 2, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6, 3)
call SetStartLocPrio(6, 0, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6, 1, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6, 2, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7, 3)
call SetStartLocPrio(7, 0, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7, 1, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7, 2, 6, MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
call SetCameraBounds(- 11520.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 11648.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 11520.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 11648.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
call NewSoundEnvironment("Default")
call SetAmbientDaySound("SunkenRuinsDay")
call SetAmbientNightSound("SunkenRuinsNight")
call SetMapMusic("Music", true, 0)
call InitSounds()
call CreateRegions()
call CreateCameras()
call CreateAllItems()
call CreateAllUnits()
call InitBlizzard()

call ExecuteFunc("jasshelper__initstructs159780421")
call ExecuteFunc("cjCallbacksRegestration__init0")
call ExecuteFunc("PosohSili___init")
call ExecuteFunc("TimerUtils__init")
call ExecuteFunc("InRangeWithSource__Init")
call KillingRewardSystem__Init()
call Fov___onInit()
call InitMagrondus()
call SikrufSF___Init()

call InitGlobals()
call InitCustomTriggers()
set ALL_Remove=true
call RunInitializationTriggers()
endfunction
function config takes nothing returns nothing
call SetMapName("TRIGSTR_003")
call SetMapDescription("TRIGSTR_005")
call SetPlayers(8)
call SetTeams(8)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0, - 10560.0, 3328.0)
call DefineStartLocation(1, - 10560.0, 3328.0)
call DefineStartLocation(2, - 10560.0, 3328.0)
call DefineStartLocation(3, - 10560.0, 3328.0)
call DefineStartLocation(4, 10176.0, 3456.0)
call DefineStartLocation(5, 10176.0, 3456.0)
call DefineStartLocation(6, 10176.0, 3456.0)
call DefineStartLocation(7, 10176.0, 3456.0)
call InitCustomPlayerSlots()
call InitCustomTeams()
call InitAllyPriorities()
endfunction
// scope cjCallbacksRegestration begins
function cjCallbacksRegestration___reg_02 takes nothing returns nothing
call cj_callback_0000001c()
call cj_callback_00000063()
endfunction
function cjCallbacksRegestration___reg_07 takes nothing returns nothing
call cj_callback_0000002c()
endfunction
function cjCallbacksRegestration___reg_08 takes nothing returns nothing
local integer l__i=GetLearnedSkill()
if l__i == 0x41303356 then
call cj_callback_00000045()
elseif l__i == 0x4152424C then
call cj_callback_0000004e()
elseif l__i == 0x41525252 then
call cj_callback_00000052()
elseif l__i == 0x41535346 then
call cj_callback_00000054()
endif
call cj_callback_00000059()
call cj_callback_0000006e()
call cj_callback_00000074()
endfunction
function cjCallbacksRegestration___reg_09 takes nothing returns nothing
local integer l__i=GetSpellAbilityId()
if l__i == 0x41415470 then
call cj_callback_00000030()
elseif l__i == 0x414C4146 then
call cj_callback_00000037()
elseif l__i == 0x414E4448 then
call cj_callback_00000040()
endif
endfunction
function cjCallbacksRegestration___reg_0a takes nothing returns nothing
local integer l__i=GetSpellAbilityId()
if l__i == 0x4152534C then
call cj_callback_0000004c()
elseif l__i == 0x41525A53 then
call cj_callback_00000050()
endif
endfunction
function cjCallbacksRegestration___reg_0b takes nothing returns nothing
local integer l__i=GetSpellAbilityId()
if l__i == 0x41307364 then
call cj_callback_0000000d()
elseif l__i == 0x41303546 then
call cj_callback_00000011()
elseif l__i == 0x4130314F then
call cj_callback_00000012()
elseif l__i == 0x41626764 then
call cj_callback_00000015()
elseif l__i == 0x41626761 then
call cj_callback_00000016()
elseif l__i == 0x41303554 then
call cj_callback_00000018()
elseif l__i == 0x41726269 then
call cj_callback_0000001e()
elseif l__i == 0x41303330 then
call cj_callback_00000020()
elseif l__i == 0x4130314B then
call cj_callback_00000022()
elseif l__i == 0x41303433 then
call cj_callback_00000023()
elseif l__i == 0x41303430 then
call cj_callback_00000025()
elseif l__i == 0x41417170 then
call cj_callback_0000002e()
elseif l__i == 0x41444C48 then
call cj_callback_00000033()
elseif l__i == 0x41495753 then
call cj_callback_00000035()
elseif l__i == 0x41495446 then
call cj_callback_00000036()
elseif l__i == 0x4130334E then
call cj_callback_0000003b()
elseif l__i == 0x41535474 then
call cj_callback_0000003c()
elseif l__i == 0x414E4448 then
call cj_callback_0000003f()
elseif l__i == 0x41303042 then
call cj_callback_00000042()
elseif l__i == 0x41303356 then
call cj_callback_00000044()
elseif l__i == 0x414F5144 then
call cj_callback_00000046()
elseif l__i == 0x41303538 then
call cj_callback_00000047()
elseif l__i == 0x41303539 then
call cj_callback_00000048()
elseif l__i == 0x41303542 then
call cj_callback_00000049()
elseif l__i == 0x41303541 then
call cj_callback_0000004a()
elseif l__i == 0x41303543 then
call cj_callback_0000004b()
elseif l__i == 0x41524A55 then
call cj_callback_0000004d()
elseif l__i == 0x41535544 then
call cj_callback_00000053()
elseif l__i == 0x41303530 then
call cj_callback_00000055()
elseif l__i == 0x41303459 then
call cj_callback_00000057()
elseif l__i == 0x41545053 then
call cj_callback_00000058()
elseif l__i == 0x41545545 then
call cj_callback_0000005a()
elseif l__i == 0x4154556F then
call cj_callback_0000005b()
elseif l__i == 0x41575753 then
call cj_callback_0000005c()
elseif l__i == 0x41574657 then
call cj_callback_0000005e()
elseif l__i == 0x41574665 then
call cj_callback_0000005f()
elseif l__i == 0x4157534C then
call cj_callback_00000060()
elseif l__i == 0x41303659 then
call cj_callback_00000061()
elseif l__i == 0x41303658 then
call cj_callback_00000064()
elseif l__i == 0x4130335A then
call cj_callback_00000066()
elseif l__i == 0x41465275 then
call cj_callback_00000068()
elseif l__i == 0x41303647 then
call cj_callback_0000006a()
elseif l__i == 0x41303558 then
call cj_callback_0000006c()
elseif l__i == 0x414B6554 then
call cj_callback_0000006f()
elseif l__i == 0x41303649 then
call cj_callback_00000071()
elseif l__i == 0x4130364E then
call cj_callback_00000073()
endif
call cj_callback_00000007()
call cj_callback_00000017()
call cj_callback_00000028()
endfunction
function cjCallbacksRegestration___reg_0c takes nothing returns nothing
local integer l__i=GetSpellAbilityId()
if l__i == 0x414C4146 then
call cj_callback_00000038()
endif
endfunction
function cjCallbacksRegestration___reg_0d takes nothing returns nothing
local integer l__i=GetSpellAbilityId()
if l__i == 0x41303553 then
call cj_callback_0000001a()
elseif l__i == 0x41303552 then
call cj_callback_0000001b()
elseif l__i == 0x414C4146 then
call cj_callback_00000039()
endif
endfunction
function cjCallbacksRegestration___reg_0f takes nothing returns nothing
local integer l__i=GetItemTypeId(GetManipulatedItem())
if l__i == 0x4930385A then
call cj_callback_0000002a()
endif
endfunction
function cjCallbacksRegestration___reg_10 takes nothing returns nothing
local integer l__i=GetItemTypeId(GetManipulatedItem())
if l__i == 0x4930385A then
call cj_callback_0000002b()
endif
endfunction
function cjCallbacksRegestration__initX takes nothing returns nothing
local integer l__i=0
local player p
loop
set p=Player(l__i)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_02, p, EVENT_PLAYER_UNIT_DEATH, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_07, p, EVENT_PLAYER_HERO_LEVEL, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_08, p, EVENT_PLAYER_HERO_SKILL, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_09, p, EVENT_PLAYER_UNIT_SPELL_CHANNEL, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_0a, p, EVENT_PLAYER_UNIT_SPELL_CAST, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_0b, p, EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_0c, p, EVENT_PLAYER_UNIT_SPELL_FINISH, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_0d, p, EVENT_PLAYER_UNIT_SPELL_ENDCAST, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_0f, p, EVENT_PLAYER_UNIT_SPELL_ENDCAST, null)
call TriggerRegisterPlayerUnitEvent(cj_callback_trg_10, p, EVENT_PLAYER_UNIT_SPELL_ENDCAST, null)
set l__i=l__i + 1
exitwhen l__i == 16
endloop
call TriggerAddAction(cj_callback_trg_02, function cjCallbacksRegestration___reg_02)
call TriggerAddAction(cj_callback_trg_07, function cjCallbacksRegestration___reg_07)
call TriggerAddAction(cj_callback_trg_08, function cjCallbacksRegestration___reg_08)
call TriggerAddAction(cj_callback_trg_09, function cjCallbacksRegestration___reg_09)
call TriggerAddAction(cj_callback_trg_0a, function cjCallbacksRegestration___reg_0a)
call TriggerAddAction(cj_callback_trg_0b, function cjCallbacksRegestration___reg_0b)
call TriggerAddAction(cj_callback_trg_0c, function cjCallbacksRegestration___reg_0c)
call TriggerAddAction(cj_callback_trg_0d, function cjCallbacksRegestration___reg_0d)
call TriggerAddAction(cj_callback_trg_0f, function cjCallbacksRegestration___reg_0f)
call TriggerAddAction(cj_callback_trg_10, function cjCallbacksRegestration___reg_10)
call cj_callback_00000000()
call cj_callback_00000001()
call cj_callback_00000002()
call cj_callback_00000003()
call cj_callback_00000004()
call cj_callback_00000005()
call cj_callback_00000006()
call cj_callback_00000008()
call cj_callback_00000009()
call s__hometper_cj_callback_0000000a()
call cj_callback_0000000b()
call cj_callback_0000000c()
call cj_callback_0000000e()
call cj_callback_0000000f()
call cj_callback_00000010()
call cj_callback_00000013()
call cj_callback_00000014()
call cj_callback_00000019()
call cj_callback_0000001d()
call cj_callback_0000001f()
call cj_callback_00000021()
call cj_callback_00000024()
call cj_callback_00000026()
call cj_callback_00000027()
call cj_callback_00000029()
call cj_callback_0000002d()
call cj_callback_0000002f()
call cj_callback_00000031()
call cj_callback_00000032()
call cj_callback_00000034()
call cj_callback_0000003a()
call cj_callback_0000003d()
call cj_callback_0000003e()
call cj_callback_00000041()
call cj_callback_00000043()
call cj_callback_0000004f()
call cj_callback_00000051()
call cj_callback_00000056()
call cj_callback_0000005d()
call cj_callback_00000062()
call cj_callback_00000065()
call cj_callback_00000067()
call cj_callback_00000069()
call cj_callback_0000006b()
call cj_callback_0000006d()
call cj_callback_00000070()
call cj_callback_00000072()
call cj_callback_00000075()
call cj_callback_00000076()
endfunction
// scope cjCallbacksRegestration ends


//Struct method generated initializers/callers:

//Functions for BigArrays:
function sa__drakulty___drakultybuff_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
call DestroyGroup(s__drakulty___drakultybuff_affected[this])
set l__i=s__drakulty___drakultybuff_index[this]
set s__drakulty___drakultybuff_count=s__drakulty___drakultybuff_count - 1
set s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]=s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_count]
set s__drakulty___drakultybuff_index[s__drakulty___drakultybuff_me[s__drakulty___drakultybuff_index[this]]]=s__drakulty___drakultybuff_index[this]
if s__drakulty___drakultybuff_count == 0 then
call DestroyTimer(s__drakulty___drakultybuff_time)
endif
   return true
endfunction
function sa__Posoh_GetUnitMp takes nothing returns boolean
local integer this=f__arg_this
local real cjlocgn_00000000
local real cjlocgn_00000001
set s__Posoh_tt[this]=s__Posoh_tt[this] + 1
if ( s__Posoh_tt[this] > 1 ) then
set cjlocgn_00000000=GetUnitState(s__Posoh_u[this], UNIT_STATE_MANA)
if ( s__Posoh_mp[this] <= cjlocgn_00000000 ) then
return true
endif
set cjlocgn_00000001=( s__Posoh_mp[this] - cjlocgn_00000000 ) * ( 50 * .01 )
set s__Posoh_mp[this]=cjlocgn_00000000
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", s__Posoh_c[this], "origin"))
set IsTriggerDamage=true
call UnitDamageTarget(s__Posoh_u[this], s__Posoh_c[this], cjlocgn_00000001, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
set IsTriggerDamage=false
call DestroyEffect(s__Posoh_Eff[this])
set s__Posoh_Eff[this]=null
set s__Posoh_b[this]=false
endif
   return true
endfunction
function sa__Posoh_Proverka takes nothing returns boolean
    set f__result_integer=s__Posoh_Proverka(f__arg_unit1)
   return true
endfunction
function sa__Posoh_RemoveStruct takes nothing returns boolean
    call s__Posoh_RemoveStruct(f__arg_unit1)
   return true
endfunction
function sa__Posoh_Update takes nothing returns boolean

local integer l__i=0
loop
exitwhen not ( ( l__i < s__Posoh_count ) )
call s__Posoh_Awake(s__Posoh_Name[l__i])
set l__i=l__i + 1
endloop
if ( s__Posoh_count == 0 ) then
call DestroyTimer(s__Posoh_t)
set s__Posoh_t=null
endif
   return true
endfunction
function sa__Table__GTable_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call s__Table__GTable_reset(this)
   return true
endfunction
function sa__volnawodomuta___wavslow_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
call RemoveUnit(s__volnawodomuta___wavslow_source[this])
set l__i=s__volnawodomuta___wavslow_index[this]
set s__volnawodomuta___wavslow_count=s__volnawodomuta___wavslow_count - 1
set s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]=s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_count]
set s__volnawodomuta___wavslow_index[s__volnawodomuta___wavslow_me[s__volnawodomuta___wavslow_index[this]]]=s__volnawodomuta___wavslow_index[this]
if s__volnawodomuta___wavslow_count == 0 then
call DestroyTimer(s__volnawodomuta___wavslow_time)
endif
   return true
endfunction
function sa__drozhzem_Find takes nothing returns boolean
    set f__result_integer=s__drozhzem_Find(f__arg_unit1)
   return true
endfunction
function sa__drozhzem_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__drozhzem_index[this]
set s__drozhzem_count=s__drozhzem_count - 1
set s__drozhzem_me[s__drozhzem_index[this]]=s__drozhzem_me[s__drozhzem_count]
set s__drozhzem_index[s__drozhzem_me[s__drozhzem_index[this]]]=s__drozhzem_index[this]
if s__drozhzem_count == 0 then
call DestroyTimer(s__drozhzem_time)
endif
   return true
endfunction
function sa__gladiator_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__gladiator_index[this]
set s__gladiator_count=s__gladiator_count - 1
set s__gladiator_me[s__gladiator_index[this]]=s__gladiator_me[s__gladiator_count]
set s__gladiator_index[s__gladiator_me[s__gladiator_index[this]]]=s__gladiator_index[this]
if s__gladiator_count == 0 then
call DestroyTimer(s__gladiator_gtime)
endif
   return true
endfunction
function sa__pechsveta_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41525061)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x41526962)
call UnitRemoveAbility(s__pechsveta_affected[this], 0x42525030)
set l__i=s__pechsveta_index[this]
set s__pechsveta_count=s__pechsveta_count - 1
set s__pechsveta_me[s__pechsveta_index[this]]=s__pechsveta_me[s__pechsveta_count]
set s__pechsveta_index[s__pechsveta_me[s__pechsveta_index[this]]]=s__pechsveta_index[this]
call DestroyTimer(s__pechsveta_time)
   return true
endfunction
function sa__slepsv_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__slepsv_index[this]
set s__slepsv_count=s__slepsv_count - 1
set s__slepsv_me[s__slepsv_index[this]]=s__slepsv_me[s__slepsv_count]
set s__slepsv_index[s__slepsv_me[s__slepsv_index[this]]]=s__slepsv_index[this]
   return true
endfunction
function sa__projectilegroup_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__projectilegroup_size[this] - 1
loop
exitwhen l__i < 0
call s__projectilegroup_remove(this,LoadInteger(s__projectilegroup_table, this + 8092, l__i))
set l__i=l__i - 1
endloop
   return true
endfunction
function sa__angrybird___ordrek_Find takes nothing returns boolean
    set f__result_integer=s__angrybird___ordrek_Find(f__arg_unit1)
   return true
endfunction
function sa__angrybird___ffganim_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer cjlocgn_00000000=0
local integer l__i
loop
exitwhen not ( cjlocgn_00000000 < 2 )
call DestroyEffect(s___angrybird___ffganim_cellmdl[s__angrybird___ffganim_cellmdl[this]+cjlocgn_00000000])
call KillUnit(s___angrybird___ffganim_cell[s__angrybird___ffganim_cell[this]+cjlocgn_00000000])
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set l__i=s__angrybird___ffganim_index[this]
set s__angrybird___ffganim_count=s__angrybird___ffganim_count - 1
set s__angrybird___ffganim_me[s__angrybird___ffganim_index[this]]=s__angrybird___ffganim_me[s__angrybird___ffganim_count]
set s__angrybird___ffganim_index[s__angrybird___ffganim_me[s__angrybird___ffganim_index[this]]]=s__angrybird___ffganim_index[this]
if s__angrybird___ffganim_count == 0 then
call DestroyTimer(s__angrybird___ffganim_t)
endif
   return true
endfunction
function sa__angrybird___ffganim_Find takes nothing returns boolean
    set f__result_integer=s__angrybird___ffganim_Find(f__arg_unit1)
   return true
endfunction
function sa__projectile_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
if not ( s__projectile_destroyed[this] ) then
set s__projectile_DATA__size=s__projectile_DATA__size - 1
set s__projectile_DATA__stack[s__projectile_DATA__index[this]]=s__projectile_DATA__stack[s__projectile_DATA__size]
set s__projectile_DATA__index[s__projectile_DATA__stack[s__projectile_DATA__index[this]]]=s__projectile_DATA__index[this]
if ( s__projectile_DATA__size == 0 ) then
call PauseTimer(s__projectile_DATA__loop)
endif
set Projectile__totalProjectiles=Projectile__totalProjectiles - 1
    call s__projectile_killModel(this)
if s__projectile_toRemove[this] then
call RemoveUnit(s__projectile_toUnit[this])
elseif s__projectile_toKill[this] then
call KillUnit(s__projectile_toUnit[this])
endif
call s__vector_deallocate(s__projectile_VECTOR__position[this])
call s__vector_deallocate(s__projectile_VECTOR__velocity[this])
call s__vector_deallocate(s__projectile_VECTOR__acceleration[this])
call s__vector_deallocate(s__projectile_VECTOR__target[this])
call s__vector_deallocate(s__projectile_VECTOR__start[this])
if HaveSavedInteger(Projectile__projGroupTable, this, - 1) then
set l__i=LoadInteger(Projectile__projGroupTable, this, - 1) - 1
loop
exitwhen l__i < 0
call s__projectilegroup_remove((LoadInteger(Projectile__projGroupTable, this, l__i)),this)
set l__i=l__i - 1
endloop
call FlushChildHashtable(Projectile__projGroupTable, this)
call FlushChildHashtable(Projectile__projGroupTable, this + 8092)
endif
set s__projectile_destroyed[this]=true
endif
    set f__arg_this=this
   return true
endfunction
function sa__projectile_create takes nothing returns boolean
    set f__result_integer=s__projectile_create(f__arg_unit1)
   return true
endfunction
function sa__lnetproj_onUnitCollision takes nothing returns boolean
    call s__lnetproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__lnetproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__lnetproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__lnetproj_onFinish takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
call sc__projectileinterface_deallocate(this)
   return true
endfunction
function sa__lnetproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__lnetproj_affected[this])
set s__lnetproj_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__latadash_onFinish takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl", s__projectile__get_source(this), "origin"))
call FlushChildHashtable(hash, GetHandleId(s__latadash_efft[this]))
call DestroyTimer(s__latadash_efft[this])
   return true
endfunction
function sa__latablinktrap___trap_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
call DestroyEffect(s__latablinktrap___trap_effectactive[this])
set l__i=s__latablinktrap___trap_index[this]
set s__latablinktrap___trap_count=s__latablinktrap___trap_count - 1
set s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]=s__latablinktrap___trap_me[s__latablinktrap___trap_count]
set s__latablinktrap___trap_index[s__latablinktrap___trap_me[s__latablinktrap___trap_index[this]]]=s__latablinktrap___trap_index[this]
if s__latablinktrap___trap_count == 0 then
call DestroyTimer(s__latablinktrap___trap_lifetimer)
call DestroyTimer(s__latablinktrap___trap_activatetimer)
endif
   return true
endfunction
function sa__arrfallspell_Find takes nothing returns boolean
    set f__result_integer=s__arrfallspell_Find(f__arg_unit1)
   return true
endfunction
function sa__arrfallspell_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer cjlocgn_00000000=0
local integer l__i
call DestroyFogModifier(s__arrfallspell_ontarget[this])
call DestroyFogModifier(s__arrfallspell_onmark[this])
call KillUnit(s__arrfallspell_arrowmark[this])
call KillUnit(s__arrfallspell_faketarget[this])
loop
exitwhen not ( cjlocgn_00000000 < 6 )
call DestroyEffect(s___arrfallspell_bordermdl[s__arrfallspell_bordermdl[this]+cjlocgn_00000000])
call KillUnit(s___arrfallspell_border[s__arrfallspell_border[this]+cjlocgn_00000000])
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set l__i=s__arrfallspell_index[this]
set s__arrfallspell_count=s__arrfallspell_count - 1
set s__arrfallspell_me[s__arrfallspell_index[this]]=s__arrfallspell_me[s__arrfallspell_count]
set s__arrfallspell_index[s__arrfallspell_me[s__arrfallspell_index[this]]]=s__arrfallspell_index[this]
   return true
endfunction
function sa__latanelka___lataarrowproj_onUnitCollision takes nothing returns boolean
    call s__latanelka___lataarrowproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__latanelka___lataarrowproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__latanelka___lataarrowproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__latanelka___lataarrowproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(s__latanelka___lataarrowproj_additionaleff[this])
if not s__latanelka___lataarrowproj_targeted[this] then
call s__latanelka___leftarrow_create(s__projectile_toUnit[this])
endif
    set f__arg_this=this
   return true
endfunction
function sa__latanelka___lataarrowproj_create takes nothing returns boolean
    set f__result_integer=s__latanelka___lataarrowproj_create(f__arg_integer1,f__arg_real1,f__arg_unit1,f__arg_real2,f__arg_unit2,f__arg_real3,f__arg_real4,f__arg_integer2,f__arg_integer3,f__arg_string1,f__arg_string2)
   return true
endfunction
function sa__latanelka___leftarrow_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i
call DestroyEffect(s__latanelka___leftarrow_eff[this])
call RemoveUnit(s__latanelka___leftarrow_u[this])
set l__i=s__latanelka___leftarrow_index[this]
set s__latanelka___leftarrow_count=s__latanelka___leftarrow_count - 1
set s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]=s__latanelka___leftarrow_me[s__latanelka___leftarrow_count]
set s__latanelka___leftarrow_index[s__latanelka___leftarrow_me[s__latanelka___leftarrow_index[this]]]=s__latanelka___leftarrow_index[this]
if s__latanelka___leftarrow_count == 0 then
call DestroyTimer(s__latanelka___leftarrow_time)
endif
   return true
endfunction
function sa__thirstyfire___thirstyfire_onUnitCollision takes nothing returns boolean
    call s__thirstyfire___thirstyfire_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__thirstyfire___thirstyfire_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__thirstyfire___thirstyfire_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__thirstyfire___thirstyfire_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__thirstyfire___thirstyfire_affected[this])
set s__thirstyfire___thirstyfire_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__ringofdespair___rodproj_onUnitCollision takes nothing returns boolean
    call s__ringofdespair___rodproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__ringofdespair___rodproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__ringofdespair___rodproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__ringofdespair___rodproj_onFinish takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
call sc__projectileinterface_deallocate(this)
   return true
endfunction
function sa__ringofdespair___rodproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__ringofdespair___rodproj_affected[this])
set s__ringofdespair___rodproj_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__ringofdespair___rodeffect_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__ringofdespair___rodeffect_index[this]
set s__ringofdespair___rodeffect_count=s__ringofdespair___rodeffect_count - 1
set s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]=s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_count]
set s__ringofdespair___rodeffect_index[s__ringofdespair___rodeffect_me[s__ringofdespair___rodeffect_index[this]]]=s__ringofdespair___rodeffect_index[this]
if s__ringofdespair___rodeffect_count == 0 then
call DestroyTimer(s__ringofdespair___rodeffect_T)
endif
   return true
endfunction
function sa__bogproj_onFinish takes nothing returns boolean
local integer this=f__arg_this
if ( GetUnitState(s__bootsofgon_carrier[s__bogproj_boots[this]], UNIT_STATE_LIFE) > .405 ) then
call s__bootsofgon_SwapBoots(s__bogproj_boots[this],0x4930314A , 0x49303145)
call s__bootsofgon_deallocate(s__bogproj_boots[this])
else
set s__bootsofgon_projecti[s__bogproj_boots[this]]=0
endif
call sc__projectileinterface_deallocate(this)
   return true
endfunction
function sa__bogproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
    set f__arg_this=this
   return true
endfunction
function sa__bootsofgon_Activate takes nothing returns boolean
    set f__result_boolean=s__bootsofgon_Activate(f__arg_unit1)
   return true
endfunction
function sa__bootsofgon_Find takes nothing returns boolean
    set f__result_integer=s__bootsofgon_Find(f__arg_unit1)
   return true
endfunction
function sa__bootsofgon_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local integer l__i=s__bootsofgon_index[this]
set s__bootsofgon_count=s__bootsofgon_count - 1
set s__bootsofgon_me[s__bootsofgon_index[this]]=s__bootsofgon_me[s__bootsofgon_count]
set s__bootsofgon_index[s__bootsofgon_me[s__bootsofgon_index[this]]]=s__bootsofgon_index[this]
if ( s__bootsofgon_count == 0 ) then
call DestroyTimer(s__bootsofgon_swapper)
endif
   return true
endfunction
function sa__shurikenitem___shurp_onUnitCollision takes nothing returns boolean
    call s__shurikenitem___shurp_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__shurikenitem___shurp_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__shurikenitem___shurp_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__shurikenitem___shurp_create takes nothing returns boolean
    set f__result_integer=s__shurikenitem___shurp_create(f__arg_unit1,f__arg_real1,f__arg_unit2,f__arg_real2,f__arg_integer1,f__arg_integer2,f__arg_string1)
   return true
endfunction
function sa__trollsforestspear___fspearproj_onUnitCollision takes nothing returns boolean
    call s__trollsforestspear___fspearproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__trollsforestspear___fspearproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__trollsforestspear___fspearproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__trollsforestspear___fspearproj_onFinish takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
   return true
endfunction
function sa__trollsforestspear___fspearproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__trollsforestspear___fspearproj_affected[this])
set s__trollsforestspear___fspearproj_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__grenade_onGround takes nothing returns boolean
local integer this=f__arg_this
local boolean b=true
local group g
local real aoe
local unit u
local timer cjlocgn_00000000
local real cjlocgn_00000001
local integer number
local integer cjlocgn_00000002
local real cjlocgn_00000003
local integer cjlocgn_00000004
local integer cjlocgn_00000005
call BJDebugMsg("Grenade " + I2S(this) + " level " + I2S(s__grenade_level[this]))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Parasite\\ParasiteTarget.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
set g=CreateGroup()
set aoe=400. + 50. * ( s__grenade_level[this] - 1 )
call GroupEnumUnitsInRange(g, s__projectile__get_x(this), s__projectile__get_y(this), aoe, null)
call GroupRemoveUnit(g, s__projectile_toUnit[this])
loop
set u=FirstOfGroup(g)
exitwhen u == null
call GroupRemoveUnit(g, u)
if s__grenade_healfilter(this,s__projectile__get_source(this) , u) then
set b=false
set cjlocgn_00000000=CreateTimer()
call SaveEffectHandle(hash, GetHandleId(cjlocgn_00000000), 0, AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", u, "origin"))
call TimerStart(cjlocgn_00000000, .75, false, function s__grenade_cj_anonym__64)
set cjlocgn_00000001=50. + 40. * ( s__grenade_level[this] - 1 )
call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + cjlocgn_00000001)
endif
endloop
set number=LoadInteger(hash, GetHandleId(s__projectile_toUnit[this]), 0)
if ( number + 1 < 3 and s__grenade_dist[this] > 50. and b ) then
call BJDebugMsg("Speed = " + R2S(s__projectile_speed[this]) + "\t Arc = " + R2S(s__projectile_arc[this]) + "\t Number = " + I2S(number))
set s__grenade_dist[this]=s__grenade_dist[this] * ( ( 2. / 3. ) )
set cjlocgn_00000002=s__vector_create(s__projectile__get_x(this) , s__projectile__get_y(this) , GetTerrainZ(s__projectile__get_x(this) , s__projectile__get_y(this)) + s__projectile__get_z(this))
set cjlocgn_00000001=s__projectile__get_x(this) + s__grenade_dist[this] * Cos(s__grenade_angle[this])
set cjlocgn_00000003=s__projectile__get_y(this) + s__grenade_dist[this] * Sin(s__grenade_angle[this])
set cjlocgn_00000004=s__vector_create(cjlocgn_00000001 , cjlocgn_00000003 , GetTerrainZ(cjlocgn_00000001 , cjlocgn_00000003))
set cjlocgn_00000005=sc__grenade_create(s__projectile__get_source(this) , s__projectile_toUnit[this] , s__grenade_level[this] , s__grenade_dist[this] , s__projectile_speed[this] , s__projectile_arc[this] , cjlocgn_00000002 , cjlocgn_00000004 , "Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl")
call s__vector_deallocate(cjlocgn_00000002)
call s__vector_deallocate(cjlocgn_00000004)
set s__projectile_toKill[this]=false
call sc__projectileinterface_deallocate(this)
set number=number + 1
call SaveInteger(hash, GetHandleId(s__projectile_toUnit[this]), 0, number)
else
call FlushChildHashtable(hash, GetHandleId(s__projectile_toUnit[this]))
set s__projectile_toDestroy[this]=true
set s__projectile_toKill[this]=true
call sc__projectileinterface_deallocate(this)
endif
set cjlocgn_00000000=null
set u=null
set g=null
   return true
endfunction
function sa__grenade_create takes nothing returns boolean
    set f__result_integer=s__grenade_create(f__arg_unit1,f__arg_unit2,f__arg_integer1,f__arg_real1,f__arg_real2,f__arg_real3,f__arg_integer2,f__arg_integer3,f__arg_string1)
   return true
endfunction
function sa__splitskull___spsproj_onFinish takes nothing returns boolean
local integer this=f__arg_this
local real dmg
local real stundur
local group cjlocgn_00000000
local unit cjlocgn_00000001
local unit cjlocgn_00000002
local real cjlocgn_00000003
local real cjlocgn_00000004
call GroupAddUnit(s__splitskull___spsproj_affected[this], s__projectile__get_target(this))
set dmg=90. + 70. * ( s__splitskull___spsproj_level[this] - 1 )
set stundur=1.5 + .25 * ( s__splitskull___spsproj_level[this] - 1 )
call DamageTarget(s__projectile__get_source(this) , s__projectile__get_target(this) , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , s__projectile__get_target(this) , 0x41303255 , R2I(stundur / .1 + .1) , "thunderbolt" , 3.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl", s__projectile__get_target(this), "origin"))
call s__projectile_killModel(this)
set s__splitskull___spsproj_opercount[this]=s__splitskull___spsproj_opercount[this] + 1
if s__splitskull___spsproj_opercount[this] < 2 then
call s__projectile_setModel(this,"Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl")
set cjlocgn_00000000=CreateGroup()
set cjlocgn_00000002=null
set cjlocgn_00000003=700. + 1.
call GroupEnumUnitsInRange(cjlocgn_00000000, GetUnitX(s__projectile_toUnit[this]), GetUnitY(s__projectile_toUnit[this]), 700., null)
loop
set cjlocgn_00000001=FirstOfGroup(cjlocgn_00000000)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjlocgn_00000000, cjlocgn_00000001)
if s__splitskull___spsproj_isValidTarget(this,cjlocgn_00000001) then
set cjlocgn_00000004=DistanceBetweenCord(s__projectile__get_x(this) , s__projectile__get_y(this) , GetUnitX(cjlocgn_00000001) , GetUnitY(cjlocgn_00000001))
if cjlocgn_00000004 < cjlocgn_00000003 and ( cjlocgn_00000002 == null or IsUnitType(cjlocgn_00000001, UNIT_TYPE_HERO) or not IsUnitType(cjlocgn_00000002, UNIT_TYPE_HERO) ) then
set cjlocgn_00000003=cjlocgn_00000004
set cjlocgn_00000002=cjlocgn_00000001
endif
endif
endloop
call DestroyGroup(cjlocgn_00000000)
if cjlocgn_00000002 != null then
call s__projectile__set_target(this,cjlocgn_00000002)
call sc__splitskull___spsproj_launchAgain(this,s__projectile_toUnit[this] , s__projectile_speed[this])
else
call sc__projectileinterface_deallocate(this)
endif
else
call sc__projectileinterface_deallocate(this)
endif
set cjlocgn_00000002=null
set cjlocgn_00000001=null
set cjlocgn_00000000=null
   return true
endfunction
function sa__splitskull___spsproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__splitskull___spsproj_affected[this])
set s__splitskull___spsproj_affected[this]=null
call s__projectile_killModel(this)
call KillUnit(s__projectile_toUnit[this])
    set f__arg_this=this
   return true
endfunction
function sa__splitskull___spsproj_launchAgain takes nothing returns boolean
    call s__splitskull___spsproj_launchAgain(f__arg_this,f__arg_unit1,f__arg_real1)
   return true
endfunction
function sa__orddash_onUnitCollision takes nothing returns boolean
    call s__orddash_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__orddash_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__orddash_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__orddash_onFinish takes nothing returns boolean
local integer this=f__arg_this
local unit cjlocgn_00000000
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl", s__projectile__get_source(this), "origin"))
call FlushChildHashtable(hash, GetHandleId(s__orddash_efft[this]))
call DestroyTimer(s__orddash_efft[this])
if FirstOfGroup(s__orddash_affected[this]) == null then
set cjlocgn_00000000=CreateUnit(GetOwningPlayer(s__projectile_toUnit[this]), 0x68303164, GetUnitX(s__projectile_toUnit[this]), GetUnitY(s__projectile_toUnit[this]), 0.)
call UnitAddAbility(cjlocgn_00000000, 0x41303251)
call SetUnitAbilityLevel(cjlocgn_00000000, 0x41303251, 1)
call IssueTargetOrder(cjlocgn_00000000, "entanglingroots", s__projectile_toUnit[this])
call UnitApplyTimedLife(cjlocgn_00000000, 0x42544C46, 2.1)
endif
call DestroyGroup(s__orddash_affected[this])
set cjlocgn_00000000=null
   return true
endfunction
function sa__Ridilan___ridichargeproj_onUnitCollision takes nothing returns boolean
    call s__Ridilan___ridichargeproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__Ridilan___ridichargeproj_onIteration takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(s__Ridilan___ridichargeproj_eff[this])
set s__Ridilan___ridichargeproj_eff[this]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", s__projectile__get_source(this), "weapon")
   return true
endfunction
function sa__Ridilan___ridichargeproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__Ridilan___ridichargeproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__sod___sodproj_onUnitCollision takes nothing returns boolean
    call s__sod___sodproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__sod___sodproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__sod___sodproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__thexec_onUnitCollision takes nothing returns boolean
    call s__thexec_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__thexec_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__thexec_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__thexec_onFinish takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__thexec_affected[this])
set s__thexec_affected[this]=null
   return true
endfunction
function sa__gladproj_onUnitCollision takes nothing returns boolean
    call s__gladproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__gladproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__gladproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__gladproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__gladproj_affected[this])
set s__gladproj_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__powerstrike___pwrstrike_onIteration takes nothing returns boolean
local integer this=f__arg_this
local real dx=s__powerstrike___pwrstrike_preX[this] - s__projectile__get_x(this)
local real dy=s__powerstrike___pwrstrike_preY[this] - s__projectile__get_y(this)
set s__powerstrike___pwrstrike_traveled[this]=s__powerstrike___pwrstrike_traveled[this] + ( SquareRoot(dx * dx + dy * dy) )
if s__powerstrike___pwrstrike_traveled[this] > s__powerstrike___pwrstrike_distance[this] / 2 then
call SetUnitVertexColor(s__projectile_toUnit[this], 255, 255, 255, 200)
endif
set s__powerstrike___pwrstrike_preX[this]=s__projectile__get_x(this)
set s__powerstrike___pwrstrike_preY[this]=s__projectile__get_y(this)
   return true
endfunction
function sa__powerstrike___pwrstrike_onUnitCollision takes nothing returns boolean
    call s__powerstrike___pwrstrike_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__powerstrike___pwrstrike_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__powerstrike___pwrstrike_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__powerstrike___pwrstrike_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__powerstrike___pwrstrike_affected[this])
set s__powerstrike___pwrstrike_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__powerstrike___pwrstrike_onFinish takes nothing returns boolean
local integer this=f__arg_this
local timer killtimer=CreateTimer()
call SaveInteger(hash, GetHandleId(killtimer), 0, this)
set s__powerstrike___pwrstrike_sca[this]=s__powerstrike___pwrstrike_sca[this] - ( 0.05 / 0.2 )
call SetUnitScale(s__projectile_toUnit[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this], s__powerstrike___pwrstrike_sca[this])
call TimerStart(killtimer, 0.05, true, function s__powerstrike___pwrstrike_fadeprojectile)
set killtimer=null
   return true
endfunction
function sa__drozhkicked_onFinish takes nothing returns boolean
local integer this=f__arg_this
call FlushChildHashtable(hash, GetHandleId(s__drozhkicked_efft[this]))
call DestroyTimer(s__drozhkicked_efft[this])
   return true
endfunction
function sa__volnawodomuta___wavanim_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", s__projectile__get_x(this), s__projectile__get_y(this)))
    set f__arg_this=this
   return true
endfunction
function sa__volnawodomuta___thewave__disposeArrays takes nothing returns boolean
 local integer this=f__arg_this
 local integer kthis
    set si__volnawodomuta___thewave_arrN=si__volnawodomuta___thewave_arrN+1
    set kthis=si__volnawodomuta___thewave_arr[this]
    set si__volnawodomuta___thewave_arrV[si__volnawodomuta___thewave_arrN]=kthis
 return true
endfunction
function sa__volnawodomuta___thewave_onIteration takes nothing returns boolean
local integer this=f__arg_this
local group g=CreateGroup()
local unit f
local real xf
local real yf
local real dist
local integer dm
local integer final
local real dmg
call GroupEnumUnitsInRange(g, s__projectile__get_x(this), s__projectile__get_y(this), 200., null)
set dm=s__vector_create(0 , 0 , 0)
set dmg=200. + 150. * ( s__volnawodomuta___thewave_level[this] - 1 )
loop
set f=FirstOfGroup(g)
exitwhen f == null
if f != s__projectile__get_source(this) and IsUnitEnemy(f, GetOwningPlayer(s__projectile__get_source(this))) and ( GetUnitState(f, UNIT_STATE_LIFE) > .405 ) and GetUnitAbilityLevel(f, 0x416C6F63) == 0 and not IsUnitType(f, UNIT_TYPE_STRUCTURE) then
if not IsUnitInGroup(f, s__volnawodomuta___thewave_affected[this]) and not IsUnitType(f, UNIT_TYPE_MAGIC_IMMUNE) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", f, "origin"))
call DamageTarget(s__projectile__get_source(this) , f , dmg , true , ATTACK_TYPE_MAGIC , DAMAGE_TYPE_MAGIC)
call CastSpellOnTargetTimed(s__projectile__get_source(this) , f , 0x41303655 , 1 , "magicleash" , 10.)
call GroupAddUnit(s__volnawodomuta___thewave_affected[this], f)
endif
set s__vector_x[dm]=GetUnitX(f) - s__projectile__get_x(this)
set s__vector_y[dm]=GetUnitY(f) - s__projectile__get_y(this)
set final=s__vector_crossProduct(dm , s__volnawodomuta___thewave_antidir[this])
set dist=s__vector_getLength(final)
call s__vector_deallocate(final)
if dist < 140. then
set dist=800. * .03 * 1.05 / Pow(bj_E, ( dist / ( 140. * 2 ) ))
set xf=GetUnitX(f) + dist * Cos(s__volnawodomuta___thewave_angle[this])
set yf=GetUnitY(f) + dist * Sin(s__volnawodomuta___thewave_angle[this])
call SetUnitX(f, xf)
call SetUnitY(f, yf)
endif
endif
call GroupRemoveUnit(g, f)
endloop
call s__vector_deallocate(dm)
set f=null
set g=null
   return true
endfunction
function sa__volnawodomuta___thewave_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call ForGroup(s__volnawodomuta___thewave_affected[this], function s__volnawodomuta___thewave_cj_anonym__56)
call s__vector_deallocate(s__volnawodomuta___thewave_codir[this])
call s__vector_deallocate(s__volnawodomuta___thewave_antidir[this])
call DestroyGroup(s__volnawodomuta___thewave_affected[this])
set s__volnawodomuta___thewave_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__vodshard___shard_onUnitCollision takes nothing returns boolean
    call s__vodshard___shard_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__vodshard___shard_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__vodshard___shard_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__vodshard___shard_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__vodshard___shard_affected[this])
set s__vodshard___shard_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__magnproj_onIteration takes nothing returns boolean
local integer this=f__arg_this
local real cjlocgn_00000000
set s__magnproj_distsum[this]=s__magnproj_distsum[this] + ( s__projectile_speed[this] * .03 )
if s__magnproj_affected[this] != null then
set cjlocgn_00000000=Atan2(s__projectile__get_targetY(this) - s__projectile__get_y(this), s__projectile__get_targetX(this) - s__projectile__get_x(this))
call SetUnitX(s__magnproj_affected[this], GetUnitX(s__magnproj_affected[this]) + s__projectile_speed[this] * .03 * Cos(cjlocgn_00000000))
call SetUnitY(s__magnproj_affected[this], GetUnitY(s__magnproj_affected[this]) + s__projectile_speed[this] * .03 * Sin(cjlocgn_00000000))
endif
if s__magnproj_distsum[this] >= s__magnproj_maxdist[this] then
call sc__projectileinterface_deallocate(this)
endif
   return true
endfunction
function sa__magnproj_onDestroy takes nothing returns boolean
local integer this=f__arg_this
set s__magnproj_isdestroyed[this]=true
call UnitRemoveAbility(s__magnproj_affected[this], 0x426D6C74)
set s__magnproj_affected[this]=null
    set f__arg_this=this
   return true
endfunction
function sa__magnproj_onUnitCollision takes nothing returns boolean
    call s__magnproj_onUnitCollision(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa__magnproj_isValidTargetUnit takes nothing returns boolean
    set f__result_boolean=s__magnproj_isValidTargetUnit(f__arg_this,f__arg_unit1)
   return true
endfunction
function sa___prototype1_Forest_ForestSpawn takes nothing returns boolean

local boolean cjlocgn_00000000=false
local boolean cjlocgn_00000001=false
local unit cjlocgn_00000002
local integer cjlocgn_00000003
local timer cjlocgn_00000004
local integer cjlocgn_00000005
local real cjlocgn_00000006
local real cjlocgn_00000007
local real cjlocgn_00000008
local integer array cjlocgn_00000009
local integer array cjlocgn_0000000a
local real cjlocgn_0000000b
local integer cjlocgn_0000000c
local real cjlocgn_0000000d
local real cjlocgn_0000000e
set forestspk=forestspk + 1
call GroupEnumUnitsInRect(cjgrfgn_00000008, gg_rct_Left_Moonwell, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000008)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000008, cjlocgn_00000002)
set cjlocgn_00000000=true
endloop
call GroupEnumUnitsInRect(cjgrfgn_00000008, gg_rct_Right_Moonwell, null)
loop
set cjlocgn_00000002=FirstOfGroup(cjgrfgn_00000008)
exitwhen cjlocgn_00000002 == null
call GroupRemoveUnit(cjgrfgn_00000008, cjlocgn_00000002)
set cjlocgn_00000001=true
endloop
if not ( cjlocgn_00000000 and cjlocgn_00000001 ) then
set cjlocgn_00000004=CreateTimer()
set cjlocgn_00000005=GetHandleId(cjlocgn_00000004)
set cjlocgn_00000006=250.
set cjlocgn_00000009[1]=- 5634
set cjlocgn_00000009[2]=4412
set cjlocgn_0000000a[1]=- 4151
set cjlocgn_0000000a[2]=- 4188
set cjlocgn_0000000b=0.
if not cjlocgn_00000000 and not cjlocgn_00000001 then
set cjlocgn_0000000c=GetRandomInt(1, 2)
set cjlocgn_00000007=cjlocgn_00000009[cjlocgn_0000000c] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[cjlocgn_0000000c]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[cjlocgn_0000000c]
set cjlocgn_0000000e=cjlocgn_0000000a[cjlocgn_0000000c]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
elseif cjlocgn_00000000 then
set cjlocgn_00000007=cjlocgn_00000009[2] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[2]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[2]
set cjlocgn_0000000e=cjlocgn_0000000a[2]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
elseif cjlocgn_00000001 then
set cjlocgn_00000007=cjlocgn_00000009[1] + cjlocgn_00000006
set cjlocgn_00000008=cjlocgn_0000000a[1]
call TimerStart(cjlocgn_00000004, 2.4, true, function DrakeMove)
set cjlocgn_0000000d=cjlocgn_00000009[1]
set cjlocgn_0000000e=cjlocgn_0000000a[1]
call SaveReal(hash, cjlocgn_00000005, 3, cjlocgn_0000000d)
call SaveReal(hash, cjlocgn_00000005, 4, cjlocgn_0000000e)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303036, cjlocgn_00000007, cjlocgn_00000008, 90.)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
call SaveUnitHandle(hash, cjlocgn_00000005, 1, cjlocgn_00000002)
call SaveReal(hash, cjlocgn_00000005, 2, cjlocgn_0000000b)
set cjlocgn_00000003=( forestspk - 1 ) * 3
loop
exitwhen cjlocgn_00000003 <= 0
call UnitAddAbility(cjlocgn_00000002, 0x41303234)
call SetUnitAbilityLevel(cjlocgn_00000002, 0x41303234, 3)
call UnitRemoveAbility(cjlocgn_00000002, 0x41303234)
set cjlocgn_00000003=cjlocgn_00000003 - 1
endloop
if forestspk - 1 > 0 then
call UnitAddAbility(cjlocgn_00000002, 0x41303336)
call SetUnitAbilityLevel(cjlocgn_00000002, 0x41303336, ( ( forestspk - 1 ) * 2 ) + 1)
endif
set cjlocgn_00000002=null
set cjlocgn_00000004=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_runekeeper , null))) == 0 then
set lrunekeep=GetRandomInt(0, 2)
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303038, - 5957.00, - 2330.00, 306.68), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303039, - 6029.00, - 2590.00, 336.17), 0x41486164)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303037, - 6123.00, - 2391.00, 339.56)
set cjlocgn_00000006=GetUnitX(cjlocgn_00000002)
set cjlocgn_00000007=GetUnitY(cjlocgn_00000002)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
if lrunekeep == 0 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 0, 255)
endif
if lrunekeep == 2 then
call SetUnitVertexColor(cjlocgn_00000002, 25, 255, 25, 255)
endif
if lrunekeep == 1 then
call SetUnitVertexColor(cjlocgn_00000002, 0, 75, 255, 255)
endif
if lrunekeep == 3 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 255, 255, 180)
endif
if lrunekeep == 4 then
call SetUnitVertexColor(cjlocgn_00000002, 175, 175, 0, 255)
endif
if lrunekeep == 5 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 255, 255)
endif
set cjlocgn_00000002=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_runekeeper , null))) == 0 then
set rrunekeep=GetRandomInt(0, 2)
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303038, 4535, - 2029.00, 261.67), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303039, 4793, - 2177.00, 233.85), 0x41486164)
endif
set cjlocgn_00000002=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303037, 4749, - 2047.00, 220.70)
set cjlocgn_00000006=GetUnitX(cjlocgn_00000002)
set cjlocgn_00000007=GetUnitY(cjlocgn_00000002)
if forestspk < 20 then
call UnitAddAbility(cjlocgn_00000002, 0x41486164)
endif
if rrunekeep == 0 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 0, 255)
endif
if rrunekeep == 2 then
call SetUnitVertexColor(cjlocgn_00000002, 25, 255, 25, 255)
endif
if rrunekeep == 1 then
call SetUnitVertexColor(cjlocgn_00000002, 0, 75, 255, 255)
endif
if rrunekeep == 3 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 255, 255, 180)
endif
if rrunekeep == 4 then
call SetUnitVertexColor(cjlocgn_00000002, 175, 175, 0, 255)
endif
if rrunekeep == 5 then
call SetUnitVertexColor(cjlocgn_00000002, 255, 0, 255, 255)
endif
set cjlocgn_00000002=null
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_mid_2_liz_1_ner , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 845.00, - 3521.00, 273.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 426.00, - 3535.00, 278.52), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 641.00, - 3652.00, 272.17), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_mid_2_trea_1_liz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 867.00, - 1576.00, 89.38), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 648.00, - 1628.00, 88.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 462.00, - 1579.00, 117.32), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_liz_1_cob , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 4167.00, - 2751.0, 271.50), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, - 3665.00, - 2816.0, 260.73), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, - 3933.00, - 2962.0, 287.91), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_inca_1_ro , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, - 7284.00, - 5573.0, 56.05), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, - 7092.00, - 5866.0, 334.36), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303031, - 7160.00, - 5580.0, 17.82), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_ner_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, - 8074.00, - 3422.5, 83.12), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 8272.00, - 3202.0, 82.95), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, - 7888.00, - 3269.5, 94.40), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_ghou_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, - 10654.00, - 1879.7, 284.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10780.00, - 2060.0, 285.54), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10484.00, - 1931.0, 278.79), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_3_trea , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5975.00, - 424.10, 321.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5723.90, - 362.80, 317.68), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 5845.8, - 623.50, 359.31), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_gia_1_ghou , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 10037.00, - 6742.0, 65.92), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 9882.00, - 6915.0, 16.66), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, - 10071.00, - 6885.0, 44.65), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2__liz_1_cob , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, 2342.00, - 2919.0, 281.63), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303030, 2782.00, - 2949.0, 257.64), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, 2604.40, - 3082.0, 275.06), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_inca_1_ro , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, 6342.00, - 5164.0, 151.71), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303032, 6356.00, - 5455.0, 206.16), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x65303031, 6288.00, - 5268.7, 170.55), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_ner_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, 6958.00, - 3094.0, 96.30), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, 7104.00, - 2946.0, 88.11), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303046, 6744.00, - 2918.0, 95.01), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_ghou_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, 10255.00, - 1824.0, 263.56), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 10046.00, - 1929.0, 293.00), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 10453.00, - 1930.0, 249.74), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_3_trea , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5838.9, 142, 185.64), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5679.90, 297.20, 197.03), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5675.0, 33.60, 155.00), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_gia_1_ghou , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 8888.00, - 6917.00, 131.19), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 9068.00, - 6778.00, 111.97), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303137, 9043.00, - 6922.00, 140.80), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_1_trea_1_cob_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, - 6117.7, 6202.80, 312.58), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, - 6053, 6462.2, 308.23), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, - 6420.00, 6311.50, 313.17), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_left_2_gia_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 7968, 3314, 345.53), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, - 7978, 3021.7, 14.97), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, - 7756.0, 3189.00, 347.12), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_1_trea_1_cob_1_spid , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303043, 5816.7, 5937.20, 229.21), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303044, 6070, 5990.2, 232.04), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303049, 5794.20, 6241.0, 243.21), 0x41486164)
endif
endif
set bj_wantDestroyGroup=true
if CountUnitsInGroup(ALL_DestroyGroup(ALL_GetUnitsInRectMatching(gg_rct_right_2_gia_1_ooz , null))) == 0 then
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 7801, 3480, 197.23), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303141, 7747, 3166, 179.47), 0x41486164)
endif
if forestspk < 20 then
call UnitAddAbility(CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), 0x68303138, 7567.9, 3363.00, 159.45), 0x41486164)
endif
endif
    return true
endfunction
function sa___prototype1_Musicka_startgamemusic takes nothing returns boolean

call ClearMapMusic()
call TimerStart(CreateTimer(), 1., false, function Musicka__musiclistOn)
call TimerStart(CreateTimer(), 5. * 75, false, function Musicka__musiclistOn)
    return true
endfunction
function sa___prototype1_TimerUtils__init takes nothing returns boolean

local integer l__i=0
local integer o=- 1
local boolean oops=false
if ( TimerUtils__didinit ) then
    return true
else
set TimerUtils__didinit=true
endif
    set TimerUtils__ht=InitHashtable()
    loop
    exitwhen ( l__i == TimerUtils__QUANTITY )
    set s__TimerUtils__tT[l__i]= CreateTimer()
    call SetTimerData(s__TimerUtils__tT[l__i] , TimerUtils__HELD)
    set l__i=l__i + 1
    endloop
    set TimerUtils__tN=TimerUtils__QUANTITY
    return true
endfunction
function sa___prototype1_Addtoshops takes nothing returns boolean

call AddUnitToStock(INT_ORDEN, s__HeroType[0], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[0], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[2], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[2], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[3], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[3], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[4], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[4], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[11], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[11], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[14], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[14], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[17], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[17], 1, 1)
call AddUnitToStock(INT_ORDEN, s__HeroType[19], 1, 1)
call AddUnitToStock(INT_KULTE, s__HeroType[19], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[7], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[7], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[9], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[9], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[12], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[12], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[13], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[13], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[18], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[18], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[5], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[5], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[22], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[22], 1, 1)
call AddUnitToStock(STR_ORDEN, s__HeroType[23], 1, 1)
call AddUnitToStock(STR_KULTE, s__HeroType[23], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[1], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[1], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[6], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[6], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[8], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[8], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[15], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[15], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[16], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[16], 1, 1)
call AddUnitToStock(AGI_ORDEN, s__HeroType[10], 1, 1)
call AddUnitToStock(AGI_KULTE, s__HeroType[10], 1, 1)
    return true
endfunction
function sa___prototype36_heropicklib__PickRandom takes nothing returns boolean
 local integer q=f__arg_integer1

local integer plNum=q
local string name
local real x
local real y
local integer id=0
local unit hero
local integer heronumber
local rect locrect
local integer l__i=0
if s__heropicklib__picker[plNum] == null then
    return true
endif
set name=GetPlayerName(Player(plNum))
set heronumber=GetRandomInt(0, heropicklib__HeroTypeCount)
loop
exitwhen not ( ( id == 0 ) )
set id=s__HeroType[heronumber]
endloop
if plNum < 5 then
set locrect=gg_rct_lresp
else
set locrect=gg_rct_rresp
endif
set x=GetRandomReal(GetRectMinX(locrect), GetRectMaxX(locrect))
set y=GetRandomReal(GetRectMinY(locrect), GetRectMaxY(locrect))
set hero=CreateUnit(Player(plNum), id, x, y, 0.)
if plNum < 5 then
call UnitAddAbility(hero, 0x414C4854)
call UnitMakeAbilityPermanent(hero, true, 0x414C4854)
else
call UnitAddAbility(hero, 0x41524854)
call UnitMakeAbilityPermanent(hero, true, 0x41524854)
endif
call RemoveUnitFromAllStock(id)
set s__HeroType[heropicklib__FindType(hero)]= 0
set s__HERO[plNum]= hero
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., name + " случайно выбирает героя " + GetUnitName(hero))
set l__i=l__i + 1
endloop
set name=SubString(name, 0, StringLength(name) - 2) + "(" + GetUnitName(hero) + ") |r"
call SetPlayerName(Player(plNum), name)
set x=GetRectCenterX(locrect)
set y=GetRectCenterY(locrect)
if ( GetLocalPlayer() == Player(plNum) ) then
call SetCameraQuickPosition(x, y)
call PanCameraToTimed(x, y, 0.)
call ClearSelection()
call SelectUnit(hero, true)
endif
call sc___prototype36_execute(1,plNum)
call sc___prototype42_execute(1,plNum , s__HeroIcon[heronumber])
call RemoveUnit(s__heropicklib__picker[plNum])
set locrect=null
set s__heropicklib__picker[plNum]= null
set name=null
set hero=null
    return true
endfunction
function sa___prototype1_heropicklib_ClearShops takes nothing returns boolean

local integer l__i=0
loop
exitwhen not ( ( l__i < 12 ) )
if GetPlayerSlotState(Player(l__i)) == PLAYER_SLOT_STATE_PLAYING or s__HasAddedToControl[l__i] then
if s__HERO[l__i] == null then
call sc___prototype36_evaluate(2,l__i)
endif
endif
if GetPlayerController(Player(l__i)) == MAP_CONTROL_COMPUTER then
call SetPlayerController(Player(l__i), MAP_CONTROL_NONE)
call RemovePlayer(Player(l__i), PLAYER_GAME_RESULT_DEFEAT)
endif
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < heropicklib__HeroTypeCount ) )
if s__heropicklib__picker[l__i] != null then
call RemoveUnit(s__heropicklib__picker[l__i])
endif
call RemoveUnitFromAllStock(s__HeroType[l__i])
set l__i=l__i + 1
endloop
call TriggerRemoveAction(heropicklib__Picktrg, heropicklib__Picktrgact)
call TriggerClearActions(heropicklib__Picktrg)
call DestroyTrigger(heropicklib__Picktrg)
call TriggerRemoveAction(heropicklib_Randomtrg, heropicklib__Randomtrgact)
call TriggerClearActions(heropicklib_Randomtrg)
call DestroyTrigger(heropicklib_Randomtrg)
set heropicklib__Picktrgact=null
set heropicklib__Picktrg=null
set heropicklib__Randomtrgact=null
set heropicklib_Randomtrg=null
    return true
endfunction
function sa___prototype1_E40S takes nothing returns boolean

local timer t=GetExpiredTimer()
local integer k
local integer l__i=1
local integer m
local integer z
local unit creep
set lanespk=lanespk + 1
set k=lanespk
call BJDebugMsg(I2S(k) + " волна")
loop
exitwhen l__i > 2
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303031, GetRectCenterX(gg_rct_bb_bot_o), GetRectCenterY(gg_rct_bb_bot_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303032, GetRectCenterX(gg_rct_db_bot_o), GetRectCenterY(gg_rct_db_bot_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303151, GetRectCenterX(gg_rct_bb_top_o), GetRectCenterY(gg_rct_bb_top_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(5), 0x68303154, GetRectCenterX(gg_rct_db_top_o), GetRectCenterY(gg_rct_db_top_o), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303033, GetRectCenterX(gg_rct_bb_top_k), GetRectCenterY(gg_rct_bb_top_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303034, GetRectCenterX(gg_rct_db_top_k), GetRectCenterY(gg_rct_db_top_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303152, GetRectCenterX(gg_rct_bb_bot_k), GetRectCenterY(gg_rct_bb_bot_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set m=k / 3
set creep=CreateUnit(Player(10), 0x68303153, GetRectCenterX(gg_rct_db_bot_k), GetRectCenterY(gg_rct_db_bot_k), bj_UNIT_FACING)
loop
exitwhen m <= 0
call UnitAddAbility(creep, 0x41303234)
call SetUnitAbilityLevel(creep, 0x41303234, 3)
call UnitRemoveAbility(creep, 0x41303234)
set m=m - 1
endloop
if k / 3 > 0 then
call UnitAddAbility(creep, 0x41303336)
call SetUnitAbilityLevel(creep, 0x41303336, ( k / 3 ) + 1)
endif
set creep=null
set l__i=l__i + 1
endloop
set t=null
    return true
endfunction
function sa___prototype1_lanecreeps_Trig_Spawn_bot_le_Actions takes nothing returns boolean

local integer h
set LineCreepsTimer=CreateTimer()
call sc___prototype1_evaluate(3)
set h=GetHandleId(LineCreepsTimer)
call TimerStart(LineCreepsTimer, 50., true, function E40S)
    return true
endfunction
function sa___prototype1_InitDataBase takes nothing returns boolean

call FICS_Register(0x4930304C , 0x49303247 , 0x49303248 , 200 , 0)
call FICS_Register(0x4930304E , 0x49303249 , 0x4930324A , 200 , 0)
call FICS_Register(0x4930304D , 0x4930324C , 0x4930324B , 200 , 0)
call FICS_Register(0x49303032 , 0x49303251 , 0x49303252 , 200 , 0)
call FICS_Register(0x49303037 , 0x49303253 , 0x49303254 , 200 , 0)
call FICS_Register(0x4930304F , 0x4930324D , 0x4930324E , 300 , 0)
call FICS_Register(0x49303141 , 0x4930324F , 0x49303250 , 180 , 0)
call FICS_Register(0x4930305A , 0x49303255 , 0x49303256 , 300 , 0)
call FICS_Register(0x49303239 , 0x49303258 , 0x49303257 , 300 , 0)
call FICS_Register(0x49303050 , 0x49303259 , 0x4930325A , 1500 , 0)
call FICS_Register(0x49303151 , 0x49303330 , 0x49303331 , 1000 , 0)
call FICS_Register(0x49303332 , 0x49303242 , 0x49303333 , 250 , 0)
call FICS_Register(0x49303045 , 0x49303334 , 0x49303335 , 300 , 0)
call FICS_Register(0x49303237 , 0x49303336 , 0x49303337 , 400 , 0)
call FICS_Register(0x49303152 , 0x49303338 , 0x49303339 , 300 , 0)
call FICS_Register(0x49303235 , 0x49303341 , 0x49303343 , 300 , 0)
call FICS_Register(0x49303342 , 0x49303344 , 0x49303345 , 200 , 0)
call FICS_Register(0x49303047 , 0x49303346 , 0x49303347 , 400 , 0)
call FICS_Register(0x49304C43 , 0x49303348 , 0x49303349 , 400 , 0)
call FICS_Register(0x4930364B , 0x49303246 , 0x4930364B , 75 , 0)
call FICS_Register(0x49303031 , 0x4930334C , 0x49303031 , 80 , 0)
call FICS_Register(0x49303030 , 0x4930334D , 0x49303030 , 60 , 0)
call FICS_Register(0x49303043 , 0x4930334E , 0x49303043 , 150 , 0)
call FICS_Register(0x49303130 , 0x4930334F , 0x49303130 , 120 , 0)
call FICS_Register(0x49303044 , 0x49303350 , 0x49303044 , 100 , 0)
call FICS_Register(0x4930364D , 0x49303351 , 0x49303352 , 250 , 0)
call FICS_Register(0x49303245 , 0x49303353 , 0x49303354 , 800 , 0)
call FICS_Register(0x49303048 , 0x49303355 , 0x49303356 , 100 , 0)
call FICS_Register(0x49303137 , 0x49303357 , 0x49303358 , 400 , 0)
call FICS_Register(0x49303157 , 0x49303359 , 0x4930335A , 900 , 0)
call FICS_Register(0x49303153 , 0x49303430 , 0x49303431 , 1000 , 0)
call FICS_Register(0x49303051 , 0x49303432 , 0x49303433 , 400 , 0)
call FICS_Register(0x49303138 , 0x49303434 , 0x49303435 , 400 , 0)
call FICS_Register(0x4930314F , 0x49303436 , 0x49303437 , 700 , 0)
call FICS_Register(0x49303155 , 0x49303438 , 0x49303439 , 600 , 0)
call FICS_Register(0x49303144 , 0x49303441 , 0x49303442 , 300 , 0)
call FICS_Register(0x49303154 , 0x49303443 , 0x49303444 , 800 , 0)
call FICS_Register(0x4930314E , 0x49303445 , 0x49303446 , 400 , 0)
call FICS_Register(0x4930304A , 0x49303447 , 0x49303448 , 300 , 0)
call FICS_Register(0x49303150 , 0x49303449 , 0x4930344A , 700 , 0)
call FICS_Register(0x49303238 , 0x4930344B , 0x4930344C , 400 , 0)
call FICS_Register(0x49303147 , 0x4930344D , 0x4930344E , 350 , 0)
call FICS_Register(0x49303159 , 0x4930344F , 0x49303450 , 920 , 0)
call FICS_Register(0x4930314C , 0x49303451 , 0x49303452 , 350 , 0)
call FICS_Register(0x49303241 , 0x49303453 , 0x49303454 , 800 , 0)
call FICS_Register(0x49303243 , 0x49303455 , 0x49303456 , 800 , 0)
call FICS_Register(0x49303134 , 0x49303458 , 0x49303459 , 1800 , 0)
call FICS_Register(0x4930364E , 0x49303131 , 0x49303457 , 810 , 0)
call FICS_Register(0x49303244 , 0x4930345A , 0x49303530 , 2400 , 0)
call FICS_Register(0x49303054 , 0x49303531 , 0x49303532 , 800 , 0)
call FICS_Register(0x49303049 , 0x49303533 , 0x49303534 , 1000 , 0)
call FICS_Register(0x49303133 , 0x49303535 , 0x49303536 , 1800 , 0)
call FICS_Register(0x49303156 , 0x49303537 , 0x49303538 , 1900 , 0)
call FICS_Register(0x4930314B , 0x49303539 , 0x49303541 , 3100 , 0)
call FICS_Register(0x49303052 , 0x49303542 , 0x49303543 , 1200 , 0)
call FICS_Register(0x49303136 , 0x49303544 , 0x49303545 , 3300 , 0)
call FICS_Register(0x49303036 , 0x49303546 , 0x49303547 , 600 , 0)
call FICS_Register(0x49303055 , 0x49303548 , 0x49303549 , 800 , 0)
call FICS_Register(0x4930314D , 0x4930354A , 0x4930354B , 1300 , 0)
call FICS_Register(0x49303132 , 0x4930354C , 0x4930354D , 2450 , 0)
call FICS_Register(0x49303143 , 0x4930354E , 0x4930354F , 1280 , 0)
call FICS_Register(0x49303135 , 0x49303550 , 0x49303551 , 1850 , 0)
call FICS_Register(0x49303058 , 0x49303552 , 0x49303553 , 800 , 0)
call FICS_Register(0x4930364F , 0x49303554 , 0x49303555 , 800 , 0)
call FICS_Register(0x49303039 , 0x49303556 , 0x49303557 , 400 , 0)
call FICS_Register(0x4930304B , 0x49303558 , 0x49303559 , 1600 , 0)
call FICS_Register(0x49303145 , 0x4930355A , 0x49303630 , 2400 , 0)
call FICS_Register(0x49303236 , 0x49303631 , 0x49303632 , 1000 , 0)
call FICS_Register(0x49303046 , 0x49303633 , 0x49303634 , 450 , 0)
call FICS_Register(0x49303146 , 0x49303635 , 0x49303636 , 900 , 0)
call FICS_Register(0x49303158 , 0x49303637 , 0x49303638 , 1520 , 0)
call FICS_Register(0x49303034 , 0x49303639 , 0x49303641 , 400 , 0)
call FICS_Register(0x49303650 , 0x49303642 , 0x49303643 , 1310 , 0)
call FICS_Register(0x49303651 , 0x49303644 , 0x49303645 , 4100 , 0)
call FICS_Register(0x49303041 , 0x49303646 , 0x49303647 , 600 , 0)
call FICS_Register(0x4930364A , 0x49303648 , 0x49303649 , 2000 , 0)
call FICS_Register(0x49303652 , 0x49303654 , 0x49303653 , 1000 , 0)
call FICS_Register(0x49303658 , 0x4930365A , 0x49303659 , 0 , 0)
call FICS_Register(0x49303655 , 0x49303657 , 0x49303656 , 3700 , 0)
call FICS_Register(0x49303730 , 0x49303732 , 0x49303731 , 2560 , 0)
call FICS_Register(0x49303733 , 0x49303735 , 0x49303734 , 700 , 0)
call FICS_Register(0x49303736 , 0x49303738 , 0x49303737 , 2620 , 0)
call FICS_Register(0x49303739 , 0x49303742 , 0x49303741 , 1800 , 0)
call FICS_Register(0x49303745 , 0x49303748 , 0x49303747 , 1200 , 0)
call FICS_Register(0x49303743 , 0x49303746 , 0x49303744 , 3600 , 0)
call FICS_Register(0x49303749 , 0x4930374B , 0x4930374A , 2100 , 0)
call FICS_Register(0x4930374C , 0x4930374E , 0x4930374D , 500 , 0)
call FICS_Register(0x49303231 , 0x49303754 , 0x49303753 , 500 , 0)
call FICS_Register(0x49303751 , 0x49303756 , 0x49303755 , 500 , 0)
call FICS_Register(0x49303750 , 0x49303758 , 0x49303757 , 1500 , 0)
call FICS_Register(0x49303759 , 0x49303830 , 0x4930375A , 500 , 0)
call FICS_Register(0x49303831 , 0x49303833 , 0x49303832 , 3800 , 0)
call FICS_Register(0x49303837 , 0x49303839 , 0x49303838 , 700 , 0)
call FICS_Register(0x49303836 , 0x49303842 , 0x49303841 , 700 , 0)
call FICS_Register(0x49303835 , 0x49303844 , 0x49303843 , 700 , 0)
call FICS_Register(0x49303834 , 0x49303846 , 0x49303845 , 700 , 0)
call FICS_Register(0x4930384D , 0x49303849 , 0x49303848 , 1600 , 0)
call FICS_Register(0x4930384B , 0x4930384C , 0x4930384A , 500 , 0)
call FICS_Register(0x49303847 , 0x49303850 , 0x4930384F , 300 , 0)
call FICS_Register(0x49303854 , 0x49303855 , 0x49303856 , 1400 , 0)
call FICS_Register(0x49303851 , 0x49303852 , 0x49303853 , 1400 , 0)
call FICS_Register(0x49303857 , 0x49303859 , 0x49303858 , 1400 , 0)
call FICS_Register(0x4930385A , 0x49303931 , 0x49303930 , 2400 , 0)
call FICS_Register(0x49303932 , 0x49303933 , 0x49303934 , 6000 , 0)
call FICS_Register(0x49303935 , 0x49303936 , 0x49303937 , 300 , 0)
call FICS_Register(0x49303944 , 0x49303946 , 0x49303945 , 1000 , 0)
call FICS_Register(0x49303941 , 0x49303943 , 0x49303942 , 1000 , 0)
call FICS_Register(0x49303947 , 0x49303949 , 0x49303948 , 1000 , 0)
call FICS_Register(0x4930394D , 0x4930394F , 0x4930394E , 600 , 0)
call FICS_Register(0x49303953 , 0x49303950 , 0x49303952 , 900 , 0)
call FICS_Register(0x49303956 , 0x49303958 , 0x49303957 , 3200 , 0)
call FICS_Register(0x49303959 , 0x4930395A , 0x49304130 , 1000 , 0)
call FICS_Register(0x49304131 , 0x49304133 , 0x49304134 , 3400 , 0)
call FICS_Register(0x49304132 , 0x49304135 , 0x49304136 , 400 , 0)
call FICS_Register(0x49304137 , 0x49304138 , 0x49304139 , 4700 , 0)
call FICS_Register(0x49304141 , 0x49304142 , 0x49304143 , 700 , 0)
call FICS_Register(0x49303951 , 0x49303955 , 0x49304144 , 2500 , 0)
call FICS_Register(0x49304145 , 0x49304146 , 0x49304147 , 700 , 0)
call FICS_Register(0x4930414A , 0x4930414C , 0x4930414D , 5600 , 0)
call FICS_Register(0x4930414B , 0x4930414E , 0x4930414F , 5600 , 0)
call FICS_Register(0x49304150 , 0x49304151 , 0x49304152 , 1040 , 0)
call FICS_Register(0x49304153 , 0x49304154 , 0x49304155 , 1600 , 0)
call FICS_Register(0x49304156 , 0x49304157 , 0x49304158 , 400 , 0)
call FICS_Register(0x49304159 , 0x49304230 , 0x4930415A , 500 , 0)
call FICS_Register(0x49303148 , 0x49304232 , 0x49304231 , 1000 , 0)
call FICS_Register(0x49304234 , 0x49304233 , 0x49304235 , 3600 , 0)
call FICS_Register7(47 , 8 , 124 , 125 , 0 , 0 , 0 , 0)
call FICS_Register7(48 , 7 , 7 , 4 , 26 , 0 , 0 , 0)
call FICS_Register7(49 , 27 , 75 , 11 , 0 , 0 , 0 , 0)
call FICS_Register7(50 , 1 , 1 , 2 , 2 , 0 , 0 , 0)
call FICS_Register7(51 , 69 , 69 , 28 , 0 , 0 , 0 , 0)
call FICS_Register7(52 , 51 , 29 , 17 , 17 , 0 , 0 , 0)
call FICS_Register7(53 , 6 , 6 , 65 , 30 , 0 , 0 , 0)
call FICS_Register7(54 , 57 , 57 , 94 , 31 , 0 , 0 , 0)
call FICS_Register7(55 , 57 , 32 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(56 , 66 , 11 , 13 , 33 , 0 , 0 , 0)
call FICS_Register7(57 , 4 , 72 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(58 , 2 , 2 , 3 , 3 , 0 , 0 , 0)
call FICS_Register7(59 , 1 , 2 , 3 , 34 , 0 , 0 , 0)
call FICS_Register7(60 , 51 , 69 , 3 , 3 , 35 , 0 , 0)
call FICS_Register7(61 , 63 , 7 , 36 , 0 , 0 , 0 , 0)
call FICS_Register7(62 , 69 , 75 , 37 , 0 , 0 , 0 , 0)
call FICS_Register7(63 , 1 , 1 , 3 , 3 , 0 , 0 , 0)
call FICS_Register7(64 , 18 , 38 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(65 , 5 , 5 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(66 , 72 , 110 , 39 , 0 , 0 , 0 , 0)
call FICS_Register7(67 , 18 , 10 , 40 , 0 , 0 , 0 , 0)
call FICS_Register7(68 , 6 , 16 , 41 , 0 , 0 , 0 , 0)
call FICS_Register7(69 , 17 , 12 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(70 , 6 , 12 , 42 , 0 , 0 , 0 , 0)
call FICS_Register7(71 , 1 , 2 , 3 , 43 , 0 , 0 , 0)
call FICS_Register7(72 , 4 , 4 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(73 , 7 , 7 , 57 , 44 , 0 , 0 , 0)
call FICS_Register7(74 , 110 , 110 , 10 , 45 , 0 , 0 , 0)
call FICS_Register7(75 , 5 , 65 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(76 , 75 , 75 , 46 , 0 , 0 , 0 , 0)
call FICS_Register7(77 , 15 , 95 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(79 , 62 , 62 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(80 , 61 , 61 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(82 , 73 , 73 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(83 , 70 , 70 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(85 , 57 , 57 , 55 , 84 , 0 , 0 , 0)
call FICS_Register7(86 , 87 , 50 , 58 , 0 , 0 , 0 , 0)
call FICS_Register7(90 , 11 , 91 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(97 , 94 , 18 , 98 , 0 , 0 , 0 , 0)
call FICS_Register7(100 , 106 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(101 , 107 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(102 , 108 , 14 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(103 , 14 , 14 , 14 , 14 , 14 , 14 , 0)
call FICS_Register7(109 , 13 , 13 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(110 , 109 , 13 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(111 , 66 , 66 , 0 , 0 , 0 , 0 , 0)
call FICS_Register7(113 , 110 , 112 , 1 , 4 , 93 , 114 , 0)
call FICS_Register7(115 , 116 , 112 , 112 , 68 , 68 , 0 , 0)
call FICS_Register7(117 , 118 , 112 , 50 , 0 , 0 , 0 , 0)
call FICS_Register7(119 , 112 , 112 , 11 , 11 , 4 , 7 , 121)
call FICS_Register7(122 , 123 , 63 , 5 , 17 , 0 , 0 , 0)
call FICS_Register7(126 , 47 , 47 , 0 , 0 , 0 , 0 , 0)
    return true
endfunction
function sa___prototype24_Initbwlib_GetCurrentTime takes nothing returns boolean

if GameStarted then
    set f__result_integer= mins * 60 + tens * 10 + secs
    return true
endif
    set f__result_integer= 0
    return true
endfunction
function sa___prototype42_Initbwlib_MultiAddHeroIcon takes nothing returns boolean
 local integer plNum=f__arg_integer1
 local string path=f__arg_string1

local multiboarditem q
if plNum < 5 then
set q=MultiboardGetItem(table, plNum + 1, 0)
elseif plNum > 5 and plNum < 10 then
set q=MultiboardGetItem(table, plNum, 0)
endif
call MultiboardSetItemIcon(q, path)
set q=null
    return true
endfunction
function sa___prototype36_Initbwlib_MultiUpdateStatus takes nothing returns boolean
 local integer plNum=f__arg_integer1

local multiboarditem cjlocgn_00000000
if not Initbwlib_GameEnded then
if plNum < 5 then
set cjlocgn_00000000=MultiboardGetItem(table, plNum + 1, 1)
elseif plNum > 5 and plNum < 10 then
set cjlocgn_00000000=MultiboardGetItem(table, plNum, 1)
endif
if GetUnitState(s__HERO[plNum], UNIT_STATE_LIFE) > .405 then
call MultiboardSetItemValueColor(cjlocgn_00000000, 0, 255, 0, 255)
call MultiboardSetItemValue(cjlocgn_00000000, "      Жив")
else
call MultiboardSetItemValueColor(cjlocgn_00000000, 128, 0, 0, 255)
call MultiboardSetItemValue(cjlocgn_00000000, "     Мертв")
endif
endif
set cjlocgn_00000000=null
    return true
endfunction
function sa___prototype1_Initbwlib__GameStart takes nothing returns boolean

local integer l__i=0
call PauseTimer(GameTime)
set mins=0
set tens=0
set secs=0
call MultiboardSetTitleText(table, pretitle + I2S(mins) + ":" + I2S(tens) + I2S(secs))
call TimerStart(GameTime, 1., true, function Initbwlib__GameTime_tick)
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., gamestartmessage)
set l__i=l__i + 1
endloop
call StartSound(gg_snd_NewTournament)
call SetUnitInvulnerable(gg_unit_n00D_0159, false)
call sc___prototype1_evaluate(5)
call sc___prototype1_execute(6)
call sc___prototype1_execute(4)
call sc___prototype1_execute(7)
call sc___prototype1_execute(8)
set ForestTime=CreateTimer()
set MoneyTime=CreateTimer()
call TimerStart(ForestTime, 120., true, function cj_anonym__2)
call TimerStart(MoneyTime, 1.5, true, function Initbwlib__Takemymoney)
set GameStarted=true
    return true
endfunction
function sa___prototype41_endgame_EndGame takes nothing returns boolean
 local integer win=f__arg_integer1
 local integer lose=f__arg_integer2

local multiboarditem q
local integer l__i=0
local trigger trigenter
if win == 0 then
set endgame__WonOrder=true
else
set endgame__WonOrder=false
endif
set q=MultiboardGetItem(table, 0, 1)
call MultiboardSetItemValue(q, "")
call MultiboardSetItemWidth(q, 0.)
set q=MultiboardGetItem(table, 5, 1)
call MultiboardSetItemValue(q, "")
call MultiboardSetItemWidth(q, 0.)
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemWidth(q, 0.2)
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemWidth(q, 0.2)
if endgame__WonOrder then
set q=MultiboardGetItem(table, 0, 0)
call MultiboardSetItemValue(q, "|c00FE8A00ОРДЕН ОДЕРЖАЛ ПОБЕДУ!|r")
call CameraSetupApplyForceDuration(gg_cam_Camera_EndGameCult, true, 6.00)
else
set q=MultiboardGetItem(table, 5, 0)
call MultiboardSetItemValue(q, "|c00116246КУЛЬТ ОДЕРЖАЛ ПОБЕДУ!|r")
call CameraSetupApplyForceDuration(gg_cam_Camera_EndGameOrden, true, 6.00)
endif
call MultiboardDisplay(table, false)
call MultiboardDisplay(table, true)
set l__i=1
loop
exitwhen not ( l__i < 5 )
set q=MultiboardGetItem(table, l__i, 1)
call MultiboardSetItemValue(q, I2S(s__deaths[l__i - 1]) + " смертей")
call MultiboardSetItemValueColor(q, 255, 255, 255, 255)
set l__i=l__i + 1
endloop
set l__i=6
loop
exitwhen not ( l__i < 10 )
set q=MultiboardGetItem(table, l__i, 1)
call MultiboardSetItemValue(q, I2S(s__deaths[l__i]) + " смертей")
call MultiboardSetItemValueColor(q, 255, 255, 255, 255)
set l__i=l__i + 1
endloop
set Initbwlib_GameEnded=true
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., endgame__endmsg)
set l__i=l__i + 1
endloop
set l__i=0
loop
exitwhen not ( ( l__i < bj_MAX_PLAYERS ) )
call DisplayTextToPlayer(Player(l__i), 0., 0., endgame__endmsg2)
set l__i=l__i + 1
endloop
call TimerStart(CreateTimer(), 120., false, function endgame__endscore)
call PauseAllUnitsBJ(true)
set trigenter=CreateTrigger()
set l__i=0
loop
exitwhen not ( l__i < 15 )
call TriggerRegisterEnterRectSimple(trigenter, GetWorldBounds())
set l__i=l__i + 1
endloop
call TriggerAddAction(trigenter, function cj_anonym__9)
call FogMaskEnable(false)
call FogEnable(false)
call PauseTimer(GameTime)
call DestroyTrigger(KRS)
call PauseTimer(ForestTime)
call PauseTimer(MoneyTime)
call PauseTimer(LineCreepsTimer)
set trigenter=null
set q=null
    return true
endfunction
function sa___prototype1_CodeNames takes nothing returns boolean

local integer cjlocgn_00000000=0
local string cjlocgn_00000001
local integer cjlocgn_00000002=GetRandomInt(1, 100)
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "dova3"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "dova3" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошэльный20!8")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "20!8")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошэн")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "Пропуск_в_трусики")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "Имба")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "322")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Я знаю где читы")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "Читы активированы")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "CheatsEnabled")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "Язнаюгдетыфармишь")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Крадущийся тигр")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошальный")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "Раздвигай Ноги")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "Похоронный-Коронный")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "Le_Chapulta")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "0clona")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "Def_Uranus")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "define_ty_pidor")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошик")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Жукофоб")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошенваген")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Во Имя Баланса")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Афк,прон,брб")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Гошпиталь")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Пригорин")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Ииииигорь")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Игорный автомат")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Вождь горяжопых")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "GOSHANI?!")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "Огогоша")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "Go PvP")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "ГОШЭНГОШЭН")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "605h4n")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
set cjlocgn_00000000=0
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "redobivan" or cjlocgn_00000001 == "Ob_Ivan"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000002=GetRandomInt(1, 100)
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "redobivan" or cjlocgn_00000001 == "Ob_Ivan" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "Вандершафт")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "D_Ivan")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "D.van")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "Ivan_tuz")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванилин")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "Падаван")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванесса")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "мамина_принцесса")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "Фея Вынкс")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "Об_рыган")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Затаившийся дракон")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Жеван")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "Вазилин")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванндерхаузен")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "Le_Chapulta")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "Ван Клод ОбИван")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "Ванедикт Кибербенч")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "Человек-Абуз")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "ЕГЭ с третьей попытки")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Трехлетняя девочка")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Третий ничего не делает")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Обивангох")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Зато у меня есть лефрут")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Сикруфомейнер")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Nerf this")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Водомут не герой")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Розовый слот")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Рваня")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "Баланс не пострадал")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "zerg rush kekeke")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "3 в лесу, не считая Артема")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "081v4n")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "Квант был лучше")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
set cjlocgn_00000000=0
loop
set cjlocgn_00000001=GetPlayerName(Player(cjlocgn_00000000))
exitwhen cjlocgn_00000000 == 12 or cjlocgn_00000001 == "temariys" or cjlocgn_00000001 == "temariys"
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set cjlocgn_00000002=GetRandomInt(1, 100)
if cjlocgn_00000002 < 36 then
if cjlocgn_00000001 == "temariys" or cjlocgn_00000001 == "temariys" then
if cjlocgn_00000002 == 1 then
call SetPlayerName(Player(cjlocgn_00000000), "tremaiys")
elseif cjlocgn_00000002 == 2 then
call SetPlayerName(Player(cjlocgn_00000000), "tremasiy")
elseif cjlocgn_00000002 == 3 then
call SetPlayerName(Player(cjlocgn_00000000), "Сын шалавы")
elseif cjlocgn_00000002 == 4 then
call SetPlayerName(Player(cjlocgn_00000000), "stremaiy")
elseif cjlocgn_00000002 == 5 then
call SetPlayerName(Player(cjlocgn_00000000), "matresiy")
elseif cjlocgn_00000002 == 6 then
call SetPlayerName(Player(cjlocgn_00000000), "srematiy")
elseif cjlocgn_00000002 == 7 then
call SetPlayerName(Player(cjlocgn_00000000), "Маме привет")
elseif cjlocgn_00000002 == 8 then
call SetPlayerName(Player(cjlocgn_00000000), "artemiys")
elseif cjlocgn_00000002 == 9 then
call SetPlayerName(Player(cjlocgn_00000000), "tremaiys")
elseif cjlocgn_00000002 == 10 then
call SetPlayerName(Player(cjlocgn_00000000), "amretiys")
elseif cjlocgn_00000002 == 11 then
call SetPlayerName(Player(cjlocgn_00000000), "Детдомовец")
elseif cjlocgn_00000002 == 12 then
call SetPlayerName(Player(cjlocgn_00000000), "Люблю рандом")
elseif cjlocgn_00000002 == 13 then
call SetPlayerName(Player(cjlocgn_00000000), "amteriys")
elseif cjlocgn_00000002 == 14 then
call SetPlayerName(Player(cjlocgn_00000000), "5 см")
elseif cjlocgn_00000002 == 15 then
call SetPlayerName(Player(cjlocgn_00000000), "сладкий петушок")
elseif cjlocgn_00000002 == 16 then
call SetPlayerName(Player(cjlocgn_00000000), "atesriym")
elseif cjlocgn_00000002 == 17 then
call SetPlayerName(Player(cjlocgn_00000000), "mistreya")
elseif cjlocgn_00000002 == 18 then
call SetPlayerName(Player(cjlocgn_00000000), "asretiym")
elseif cjlocgn_00000002 == 19 then
call SetPlayerName(Player(cjlocgn_00000000), "retamiys")
elseif cjlocgn_00000002 == 20 then
call SetPlayerName(Player(cjlocgn_00000000), "Пчетаю Бзе Галз")
elseif cjlocgn_00000002 == 21 then
call SetPlayerName(Player(cjlocgn_00000000), "Артемон")
elseif cjlocgn_00000002 == 22 then
call SetPlayerName(Player(cjlocgn_00000000), "Артишок")
elseif cjlocgn_00000002 == 23 then
call SetPlayerName(Player(cjlocgn_00000000), "Артемонд")
elseif cjlocgn_00000002 == 24 then
call SetPlayerName(Player(cjlocgn_00000000), "Самый умный")
elseif cjlocgn_00000002 == 25 then
call SetPlayerName(Player(cjlocgn_00000000), "Паркуюсь где хочу")
elseif cjlocgn_00000002 == 26 then
call SetPlayerName(Player(cjlocgn_00000000), "Артельный")
elseif cjlocgn_00000002 == 27 then
call SetPlayerName(Player(cjlocgn_00000000), "Артикул")
elseif cjlocgn_00000002 == 28 then
call SetPlayerName(Player(cjlocgn_00000000), "Баланс пострадал")
elseif cjlocgn_00000002 == 29 then
call SetPlayerName(Player(cjlocgn_00000000), "73m4r1y5")
elseif cjlocgn_00000002 == 30 then
call SetPlayerName(Player(cjlocgn_00000000), "АнАлЬнЫй УгНеТаТеЛь")
elseif cjlocgn_00000002 == 31 then
call SetPlayerName(Player(cjlocgn_00000000), "Вуди Вудкекер")
elseif cjlocgn_00000002 == 32 then
call SetPlayerName(Player(cjlocgn_00000000), "кекаем вместо патчей")
elseif cjlocgn_00000002 == 33 then
call SetPlayerName(Player(cjlocgn_00000000), "Артур Пирожков")
elseif cjlocgn_00000002 == 34 then
call SetPlayerName(Player(cjlocgn_00000000), ">sooqa")
elseif cjlocgn_00000002 == 35 then
call SetPlayerName(Player(cjlocgn_00000000), ">Новая мета!")
endif
call DisplayTimedTextToPlayer(Player(cjlocgn_00000000), 0., 0., 10., "Катжеяс, ебтя токльо тчо зартлолили")
endif
endif
    return true
endfunction
function sa___prototype1_expb_strbookInit takes nothing returns boolean

set EXPBTimer=CreateTimer()
call TimerStart(EXPBTimer, 60., true, function expb___onTickWithItem)
    return true
endfunction
function sa___prototype1_onRicochet takes nothing returns boolean

local unit source=udg_DamageEventSource
local unit target=udg_DamageEventTarget
local integer level=GetUnitAbilityLevel(source, 0x414C5249)
local real dmg=udg_DamageEventAmount * ( .4 + .1 * ( level - 1 ) )
local real x=GetUnitX(target)
local real y=GetUnitY(target)
local real xt
local real yt
local real min
local unit array toWhom
local real array mindist
local integer l__i=0
local integer cjlocgn_00000000=0
local unit cjlocgn_00000001
local integer cjlocgn_00000002
local integer cjlocgn_00000003
loop
exitwhen not ( cjlocgn_00000000 < 2 )
set mindist[cjlocgn_00000000]=500. + 1.
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call GroupEnumUnitsInRange(cjgrfgn_0000001a, x, y, 500., null)
loop
set cjlocgn_00000001=FirstOfGroup(cjgrfgn_0000001a)
exitwhen cjlocgn_00000001 == null
call GroupRemoveUnit(cjgrfgn_0000001a, cjlocgn_00000001)
if cjlocgn_00000001 != target and ( GetUnitState(cjlocgn_00000001, UNIT_STATE_LIFE) > .405 ) and GetUnitAbilityLevel(cjlocgn_00000001, 0x416C6F63) == 0 and ( GetUnitAbilityLevel(cjlocgn_00000001, 0x4176756C) == 0 or not IsUnitInvulnerable(cjlocgn_00000001) ) and not IsUnitType(cjlocgn_00000001, UNIT_TYPE_STRUCTURE) and IsUnitEnemy(cjlocgn_00000001, GetOwningPlayer(source)) and IsUnitVisible(cjlocgn_00000001, GetOwningPlayer(source)) then
set xt=GetUnitX(cjlocgn_00000001)
set yt=GetUnitY(cjlocgn_00000001)
set min=SquareRoot(( xt - x ) * ( xt - x ) + ( yt - y ) * ( yt - y ))
set l__i=0
loop
exitwhen not ( ( l__i < 2 ) )
if min < mindist[l__i] then
set cjlocgn_00000000=2 - l__i - 1
loop
exitwhen not ( cjlocgn_00000000 > 0 )
set toWhom[cjlocgn_00000000]=toWhom[cjlocgn_00000000 - 1]
set mindist[cjlocgn_00000000]=mindist[cjlocgn_00000000 - 1]
set cjlocgn_00000000=cjlocgn_00000000 - 1
endloop
set mindist[l__i]=min
set toWhom[l__i]=cjlocgn_00000001
exitwhen true
endif
set l__i=l__i + 1
endloop
endif
endloop
set cjlocgn_00000000=0
loop
exitwhen not ( cjlocgn_00000000 < 2 )
if toWhom[cjlocgn_00000000] != null then
set cjlocgn_00000002=s__vector_create(x , y , GetTerrainZ(x , y) + GetUnitFlyHeight(source) + 80.)
set xt=GetUnitX(toWhom[cjlocgn_00000000])
set yt=GetUnitY(toWhom[cjlocgn_00000000])
set cjlocgn_00000003=s__vector_create(xt , yt , GetTerrainZ(xt , yt) + GetUnitFlyHeight(toWhom[cjlocgn_00000000]) + 80.)
call sx__latanelka___lataarrowproj_create(1 , 1. , source , dmg , toWhom[cjlocgn_00000000] , 800. , .1 , cjlocgn_00000002 , cjlocgn_00000003 , "abilities\\weapons\\huntermissile\\huntermissile.mdl" , "")
call s__vector_deallocate(cjlocgn_00000002)
call s__vector_deallocate(cjlocgn_00000003)
endif
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set target=null
set source=null
    return true
endfunction
function sa___prototype67_s__shurikenitem___shurp_create takes nothing returns boolean
    set f__result_integer=s__shurikenitem___shurp_create(f__arg_unit1,f__arg_real1,f__arg_unit2,f__arg_real2,f__arg_integer1,f__arg_integer2,f__arg_string1)
    return true
endfunction
function sa___prototype68_s__latanelka___lataarrowproj_create takes nothing returns boolean
    set f__result_integer=s__latanelka___lataarrowproj_create(f__arg_integer1,f__arg_real1,f__arg_unit1,f__arg_real2,f__arg_unit2,f__arg_real3,f__arg_real4,f__arg_integer2,f__arg_integer3,f__arg_string1,f__arg_string2)
    return true
endfunction

function jasshelper__initstructs159780421 takes nothing returns nothing
    set st__drakulty___drakultybuff_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__drakulty___drakultybuff_onDestroy,Condition( function sa__drakulty___drakultybuff_onDestroy))
    set st__Posoh_GetUnitMp=CreateTrigger()
    call TriggerAddCondition(st__Posoh_GetUnitMp,Condition( function sa__Posoh_GetUnitMp))
    set st__Posoh_Proverka=CreateTrigger()
    call TriggerAddCondition(st__Posoh_Proverka,Condition( function sa__Posoh_Proverka))
    set st__Posoh_RemoveStruct=CreateTrigger()
    call TriggerAddCondition(st__Posoh_RemoveStruct,Condition( function sa__Posoh_RemoveStruct))
    set st__Posoh_Update=CreateTrigger()
    call TriggerAddCondition(st__Posoh_Update,Condition( function sa__Posoh_Update))
    set st__Table__GTable_onDestroy[5]=CreateTrigger()
    set st__Table__GTable_onDestroy[6]=st__Table__GTable_onDestroy[5]
    set st__Table__GTable_onDestroy[7]=st__Table__GTable_onDestroy[5]
    set st__Table__GTable_onDestroy[8]=st__Table__GTable_onDestroy[5]
    call TriggerAddCondition(st__Table__GTable_onDestroy[5],Condition( function sa__Table__GTable_onDestroy))
    set st__volnawodomuta___wavslow_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__volnawodomuta___wavslow_onDestroy,Condition( function sa__volnawodomuta___wavslow_onDestroy))
    set st__drozhzem_Find=CreateTrigger()
    call TriggerAddCondition(st__drozhzem_Find,Condition( function sa__drozhzem_Find))
    set st__drozhzem_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__drozhzem_onDestroy,Condition( function sa__drozhzem_onDestroy))
    set st__gladiator_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__gladiator_onDestroy,Condition( function sa__gladiator_onDestroy))
    set st__projectileinterface_onStart[15]=null
    set st__projectileinterface_onStart[17]=null
    set st__projectileinterface_onStart[18]=null
    set st__projectileinterface_onStart[20]=null
    set st__projectileinterface_onStart[23]=null
    set st__projectileinterface_onStart[25]=null
    set st__projectileinterface_onStart[27]=null
    set st__projectileinterface_onStart[32]=null
    set st__projectileinterface_onStart[33]=null
    set st__projectileinterface_onStart[35]=null
    set st__projectileinterface_onStart[40]=null
    set st__projectileinterface_onStart[43]=null
    set st__projectileinterface_onStart[44]=null
    set st__projectileinterface_onStart[45]=null
    set st__projectileinterface_onStart[46]=null
    set st__projectileinterface_onStart[48]=null
    set st__projectileinterface_onStart[49]=null
    set st__projectileinterface_onStart[50]=null
    set st__projectileinterface_onStart[53]=null
    set st__projectileinterface_onStart[54]=null
    set st__projectileinterface_onStart[57]=null
    set st__projectileinterface_onStart[58]=null
    set st__projectileinterface_onStart[60]=null
    set st__projectileinterface_onFinish[15]=null
    set st__projectileinterface_onFinish[18]=null
    set st__projectileinterface_onFinish[25]=null
    set st__projectileinterface_onFinish[27]=null
    set st__projectileinterface_onFinish[43]=null
    set st__projectileinterface_onFinish[44]=null
    set st__projectileinterface_onFinish[45]=null
    set st__projectileinterface_onFinish[48]=null
    set st__projectileinterface_onFinish[53]=null
    set st__projectileinterface_onFinish[54]=null
    set st__projectileinterface_onFinish[57]=null
    set st__projectileinterface_onFinish[58]=null
    set st__projectileinterface_onFinish[60]=null
    set st__projectileinterface_onGround[15]=null
    set st__projectileinterface_onGround[17]=null
    set st__projectileinterface_onGround[18]=null
    set st__projectileinterface_onGround[20]=null
    set st__projectileinterface_onGround[23]=null
    set st__projectileinterface_onGround[25]=null
    set st__projectileinterface_onGround[27]=null
    set st__projectileinterface_onGround[32]=null
    set st__projectileinterface_onGround[33]=null
    set st__projectileinterface_onGround[35]=null
    set st__projectileinterface_onGround[40]=null
    set st__projectileinterface_onGround[43]=null
    set st__projectileinterface_onGround[44]=null
    set st__projectileinterface_onGround[45]=null
    set st__projectileinterface_onGround[46]=null
    set st__projectileinterface_onGround[48]=null
    set st__projectileinterface_onGround[49]=null
    set st__projectileinterface_onGround[50]=null
    set st__projectileinterface_onGround[53]=null
    set st__projectileinterface_onGround[54]=null
    set st__projectileinterface_onGround[57]=null
    set st__projectileinterface_onGround[58]=null
    set st__projectileinterface_onIteration[15]=null
    set st__projectileinterface_onIteration[17]=null
    set st__projectileinterface_onIteration[18]=null
    set st__projectileinterface_onIteration[20]=null
    set st__projectileinterface_onIteration[23]=null
    set st__projectileinterface_onIteration[25]=null
    set st__projectileinterface_onIteration[27]=null
    set st__projectileinterface_onIteration[32]=null
    set st__projectileinterface_onIteration[33]=null
    set st__projectileinterface_onIteration[35]=null
    set st__projectileinterface_onIteration[40]=null
    set st__projectileinterface_onIteration[43]=null
    set st__projectileinterface_onIteration[45]=null
    set st__projectileinterface_onIteration[46]=null
    set st__projectileinterface_onIteration[48]=null
    set st__projectileinterface_onIteration[50]=null
    set st__projectileinterface_onIteration[53]=null
    set st__projectileinterface_onIteration[57]=null
    set st__projectileinterface_onIteration[60]=null
    set st__projectileinterface_onUnitCollision[15]=null
    set st__projectileinterface_onUnitCollision[20]=null
    set st__projectileinterface_onUnitCollision[32]=null
    set st__projectileinterface_onUnitCollision[35]=null
    set st__projectileinterface_onUnitCollision[43]=null
    set st__projectileinterface_onUnitCollision[50]=null
    set st__projectileinterface_onUnitCollision[53]=null
    set st__projectileinterface_onUnitCollision[54]=null
    set st__projectileinterface_onUnitCollision[60]=null
    set st__projectileinterface_onDestCollision[15]=null
    set st__projectileinterface_onDestCollision[17]=null
    set st__projectileinterface_onDestCollision[18]=null
    set st__projectileinterface_onDestCollision[20]=null
    set st__projectileinterface_onDestCollision[23]=null
    set st__projectileinterface_onDestCollision[25]=null
    set st__projectileinterface_onDestCollision[27]=null
    set st__projectileinterface_onDestCollision[32]=null
    set st__projectileinterface_onDestCollision[33]=null
    set st__projectileinterface_onDestCollision[35]=null
    set st__projectileinterface_onDestCollision[40]=null
    set st__projectileinterface_onDestCollision[43]=null
    set st__projectileinterface_onDestCollision[44]=null
    set st__projectileinterface_onDestCollision[45]=null
    set st__projectileinterface_onDestCollision[46]=null
    set st__projectileinterface_onDestCollision[48]=null
    set st__projectileinterface_onDestCollision[49]=null
    set st__projectileinterface_onDestCollision[50]=null
    set st__projectileinterface_onDestCollision[53]=null
    set st__projectileinterface_onDestCollision[54]=null
    set st__projectileinterface_onDestCollision[57]=null
    set st__projectileinterface_onDestCollision[58]=null
    set st__projectileinterface_onDestCollision[60]=null
    set st__projectileinterface_isValidTargetUnit[15]=null
    set st__projectileinterface_isValidTargetUnit[20]=null
    set st__projectileinterface_isValidTargetUnit[32]=null
    set st__projectileinterface_isValidTargetUnit[35]=null
    set st__projectileinterface_isValidTargetUnit[43]=null
    set st__projectileinterface_isValidTargetUnit[50]=null
    set st__projectileinterface_isValidTargetUnit[53]=null
    set st__projectileinterface_isValidTargetUnit[54]=null
    set st__projectileinterface_isValidTargetUnit[60]=null
    set st__projectileinterface_isValidTargetDest[15]=null
    set st__projectileinterface_isValidTargetDest[17]=null
    set st__projectileinterface_isValidTargetDest[18]=null
    set st__projectileinterface_isValidTargetDest[20]=null
    set st__projectileinterface_isValidTargetDest[23]=null
    set st__projectileinterface_isValidTargetDest[25]=null
    set st__projectileinterface_isValidTargetDest[27]=null
    set st__projectileinterface_isValidTargetDest[32]=null
    set st__projectileinterface_isValidTargetDest[33]=null
    set st__projectileinterface_isValidTargetDest[35]=null
    set st__projectileinterface_isValidTargetDest[40]=null
    set st__projectileinterface_isValidTargetDest[43]=null
    set st__projectileinterface_isValidTargetDest[44]=null
    set st__projectileinterface_isValidTargetDest[45]=null
    set st__projectileinterface_isValidTargetDest[46]=null
    set st__projectileinterface_isValidTargetDest[48]=null
    set st__projectileinterface_isValidTargetDest[49]=null
    set st__projectileinterface_isValidTargetDest[50]=null
    set st__projectileinterface_isValidTargetDest[53]=null
    set st__projectileinterface_isValidTargetDest[54]=null
    set st__projectileinterface_isValidTargetDest[57]=null
    set st__projectileinterface_isValidTargetDest[58]=null
    set st__projectileinterface_isValidTargetDest[60]=null
    set st__pechsveta_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__pechsveta_onDestroy,Condition( function sa__pechsveta_onDestroy))
    set st__slepsv_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__slepsv_onDestroy,Condition( function sa__slepsv_onDestroy))
    set st__projectilegroup_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__projectilegroup_onDestroy,Condition( function sa__projectilegroup_onDestroy))
    set st__angrybird___ordrek_Find=CreateTrigger()
    call TriggerAddCondition(st__angrybird___ordrek_Find,Condition( function sa__angrybird___ordrek_Find))
    set st__angrybird___ffganim_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__angrybird___ffganim_onDestroy,Condition( function sa__angrybird___ffganim_onDestroy))
    set st__angrybird___ffganim_Find=CreateTrigger()
    call TriggerAddCondition(st__angrybird___ffganim_Find,Condition( function sa__angrybird___ffganim_Find))
    set st__projectile_create=CreateTrigger()
    call TriggerAddCondition(st__projectile_create,Condition( function sa__projectile_create))
    set st__projectileinterface_onDestroy[15]=CreateTrigger()
    set st__projectileinterface_onDestroy[18]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[32]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[40]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[43]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[44]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[45]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[46]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[50]=st__projectileinterface_onDestroy[15]
    set st__projectileinterface_onDestroy[60]=st__projectileinterface_onDestroy[15]
    call TriggerAddCondition(st__projectileinterface_onDestroy[15],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onUnitCollision[33]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[33],Condition( function sa__lnetproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[33], function sa__lnetproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[33]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[33],Condition( function sa__lnetproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[33], function sa__lnetproj_isValidTargetUnit)
    set st__projectileinterface_onFinish[33]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[33],Condition( function sa__lnetproj_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[33], function sa__lnetproj_onFinish)
    set st__projectileinterface_onDestroy[33]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[33],Condition( function sa__lnetproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[33],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onFinish[32]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[32],Condition( function sa__latadash_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[32], function sa__latadash_onFinish)
    set st__latablinktrap___trap_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__latablinktrap___trap_onDestroy,Condition( function sa__latablinktrap___trap_onDestroy))
    set st__arrfallspell_Find=CreateTrigger()
    call TriggerAddCondition(st__arrfallspell_Find,Condition( function sa__arrfallspell_Find))
    set st__arrfallspell_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__arrfallspell_onDestroy,Condition( function sa__arrfallspell_onDestroy))
    set st__projectileinterface_onUnitCollision[27]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[27],Condition( function sa__latanelka___lataarrowproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[27], function sa__latanelka___lataarrowproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[27]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[27],Condition( function sa__latanelka___lataarrowproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[27], function sa__latanelka___lataarrowproj_isValidTargetUnit)
    set st__latanelka___lataarrowproj_create=CreateTrigger()
    call TriggerAddCondition(st__latanelka___lataarrowproj_create,Condition( function sa__latanelka___lataarrowproj_create))
    call TriggerAddAction(st__latanelka___lataarrowproj_create, function sa__latanelka___lataarrowproj_create)
    set st__projectileinterface_onDestroy[27]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[27],Condition( function sa__latanelka___lataarrowproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[27],Condition( function sa__projectile_onDestroy))
    set st__latanelka___leftarrow_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__latanelka___leftarrow_onDestroy,Condition( function sa__latanelka___leftarrow_onDestroy))
    set st__projectileinterface_onUnitCollision[25]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[25],Condition( function sa__thirstyfire___thirstyfire_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[25], function sa__thirstyfire___thirstyfire_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[25]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[25],Condition( function sa__thirstyfire___thirstyfire_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[25], function sa__thirstyfire___thirstyfire_isValidTargetUnit)
    set st__projectileinterface_onDestroy[25]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[25],Condition( function sa__thirstyfire___thirstyfire_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[25],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onUnitCollision[23]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[23],Condition( function sa__ringofdespair___rodproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[23], function sa__ringofdespair___rodproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[23]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[23],Condition( function sa__ringofdespair___rodproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[23], function sa__ringofdespair___rodproj_isValidTargetUnit)
    set st__projectileinterface_onFinish[23]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[23],Condition( function sa__ringofdespair___rodproj_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[23], function sa__ringofdespair___rodproj_onFinish)
    set st__projectileinterface_onDestroy[23]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[23],Condition( function sa__ringofdespair___rodproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[23],Condition( function sa__projectile_onDestroy))
    set st__ringofdespair___rodeffect_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__ringofdespair___rodeffect_onDestroy,Condition( function sa__ringofdespair___rodeffect_onDestroy))
    set st__projectileinterface_onFinish[20]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[20],Condition( function sa__bogproj_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[20], function sa__bogproj_onFinish)
    set st__projectileinterface_onDestroy[20]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[20],Condition( function sa__bogproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[20],Condition( function sa__projectile_onDestroy))
    set st__bootsofgon_Activate=CreateTrigger()
    call TriggerAddCondition(st__bootsofgon_Activate,Condition( function sa__bootsofgon_Activate))
    set st__bootsofgon_Find=CreateTrigger()
    call TriggerAddCondition(st__bootsofgon_Find,Condition( function sa__bootsofgon_Find))
    set st__bootsofgon_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__bootsofgon_onDestroy,Condition( function sa__bootsofgon_onDestroy))
    set st__projectileinterface_onUnitCollision[18]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[18],Condition( function sa__shurikenitem___shurp_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[18], function sa__shurikenitem___shurp_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[18]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[18],Condition( function sa__shurikenitem___shurp_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[18], function sa__shurikenitem___shurp_isValidTargetUnit)
    set st__shurikenitem___shurp_create=CreateTrigger()
    call TriggerAddCondition(st__shurikenitem___shurp_create,Condition( function sa__shurikenitem___shurp_create))
    call TriggerAddAction(st__shurikenitem___shurp_create, function sa__shurikenitem___shurp_create)
    set st__projectileinterface_onUnitCollision[17]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[17],Condition( function sa__trollsforestspear___fspearproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[17], function sa__trollsforestspear___fspearproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[17]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[17],Condition( function sa__trollsforestspear___fspearproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[17], function sa__trollsforestspear___fspearproj_isValidTargetUnit)
    set st__projectileinterface_onFinish[17]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[17],Condition( function sa__trollsforestspear___fspearproj_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[17], function sa__trollsforestspear___fspearproj_onFinish)
    set st__projectileinterface_onDestroy[17]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[17],Condition( function sa__trollsforestspear___fspearproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[17],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onGround[60]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onGround[60],Condition( function sa__grenade_onGround))
    call TriggerAddAction(st__projectileinterface_onGround[60], function sa__grenade_onGround)
    set st__grenade_create=CreateTrigger()
    call TriggerAddCondition(st__grenade_create,Condition( function sa__grenade_create))
    set st__projectileinterface_onFinish[35]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[35],Condition( function sa__splitskull___spsproj_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[35], function sa__splitskull___spsproj_onFinish)
    set st__splitskull___spsproj_launchAgain=CreateTrigger()
    call TriggerAddCondition(st__splitskull___spsproj_launchAgain,Condition( function sa__splitskull___spsproj_launchAgain))
    set st__projectileinterface_onDestroy[35]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[35],Condition( function sa__splitskull___spsproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[35],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onUnitCollision[40]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[40],Condition( function sa__orddash_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[40], function sa__orddash_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[40]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[40],Condition( function sa__orddash_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[40], function sa__orddash_isValidTargetUnit)
    set st__projectileinterface_onFinish[40]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[40],Condition( function sa__orddash_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[40], function sa__orddash_onFinish)
    set st__projectileinterface_onUnitCollision[44]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[44],Condition( function sa__Ridilan___ridichargeproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[44], function sa__Ridilan___ridichargeproj_onUnitCollision)
    set st__projectileinterface_onIteration[44]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onIteration[44],Condition( function sa__Ridilan___ridichargeproj_onIteration))
    call TriggerAddAction(st__projectileinterface_onIteration[44], function sa__Ridilan___ridichargeproj_onIteration)
    set st__projectileinterface_isValidTargetUnit[44]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[44],Condition( function sa__Ridilan___ridichargeproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[44], function sa__Ridilan___ridichargeproj_isValidTargetUnit)
    set st__projectileinterface_onUnitCollision[45]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[45],Condition( function sa__sod___sodproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[45], function sa__sod___sodproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[45]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[45],Condition( function sa__sod___sodproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[45], function sa__sod___sodproj_isValidTargetUnit)
    set st__projectileinterface_onUnitCollision[46]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[46],Condition( function sa__thexec_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[46], function sa__thexec_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[46]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[46],Condition( function sa__thexec_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[46], function sa__thexec_isValidTargetUnit)
    set st__projectileinterface_onFinish[46]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[46],Condition( function sa__thexec_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[46], function sa__thexec_onFinish)
    set st__projectileinterface_onUnitCollision[48]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[48],Condition( function sa__gladproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[48], function sa__gladproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[48]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[48],Condition( function sa__gladproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[48], function sa__gladproj_isValidTargetUnit)
    set st__projectileinterface_onDestroy[48]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[48],Condition( function sa__gladproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[48],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onIteration[49]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onIteration[49],Condition( function sa__powerstrike___pwrstrike_onIteration))
    call TriggerAddAction(st__projectileinterface_onIteration[49], function sa__powerstrike___pwrstrike_onIteration)
    set st__projectileinterface_onUnitCollision[49]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[49],Condition( function sa__powerstrike___pwrstrike_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[49], function sa__powerstrike___pwrstrike_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[49]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[49],Condition( function sa__powerstrike___pwrstrike_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[49], function sa__powerstrike___pwrstrike_isValidTargetUnit)
    set st__projectileinterface_onFinish[49]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[49],Condition( function sa__powerstrike___pwrstrike_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[49], function sa__powerstrike___pwrstrike_onFinish)
    set st__projectileinterface_onDestroy[49]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[49],Condition( function sa__powerstrike___pwrstrike_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[49],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onFinish[50]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onFinish[50],Condition( function sa__drozhkicked_onFinish))
    call TriggerAddAction(st__projectileinterface_onFinish[50], function sa__drozhkicked_onFinish)
    set st__projectileinterface_onDestroy[53]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[53],Condition( function sa__volnawodomuta___wavanim_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[53],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onIteration[54]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onIteration[54],Condition( function sa__volnawodomuta___thewave_onIteration))
    call TriggerAddAction(st__projectileinterface_onIteration[54], function sa__volnawodomuta___thewave_onIteration)
    set st__projectileinterface_onDestroy[54]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[54],Condition( function sa__volnawodomuta___thewave_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[54],Condition( function sa__volnawodomuta___thewave__disposeArrays))
    call TriggerAddCondition(st__projectileinterface_onDestroy[54],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onUnitCollision[57]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[57],Condition( function sa__vodshard___shard_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[57], function sa__vodshard___shard_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[57]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[57],Condition( function sa__vodshard___shard_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[57], function sa__vodshard___shard_isValidTargetUnit)
    set st__projectileinterface_onDestroy[57]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[57],Condition( function sa__vodshard___shard_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[57],Condition( function sa__projectile_onDestroy))
    set st__projectileinterface_onIteration[58]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onIteration[58],Condition( function sa__magnproj_onIteration))
    call TriggerAddAction(st__projectileinterface_onIteration[58], function sa__magnproj_onIteration)
    set st__projectileinterface_onUnitCollision[58]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onUnitCollision[58],Condition( function sa__magnproj_onUnitCollision))
    call TriggerAddAction(st__projectileinterface_onUnitCollision[58], function sa__magnproj_onUnitCollision)
    set st__projectileinterface_isValidTargetUnit[58]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_isValidTargetUnit[58],Condition( function sa__magnproj_isValidTargetUnit))
    call TriggerAddAction(st__projectileinterface_isValidTargetUnit[58], function sa__magnproj_isValidTargetUnit)
    set st__projectileinterface_onDestroy[58]=CreateTrigger()
    call TriggerAddCondition(st__projectileinterface_onDestroy[58],Condition( function sa__magnproj_onDestroy))
    call TriggerAddCondition(st__projectileinterface_onDestroy[58],Condition( function sa__projectile_onDestroy))
    set st___prototype1[4]=CreateTrigger()
    call TriggerAddAction(st___prototype1[4],function sa___prototype1_Forest_ForestSpawn)
    call TriggerAddCondition(st___prototype1[4],Condition(function sa___prototype1_Forest_ForestSpawn))
    set st___prototype1[5]=CreateTrigger()
    call TriggerAddAction(st___prototype1[5],function sa___prototype1_Musicka_startgamemusic)
    call TriggerAddCondition(st___prototype1[5],Condition(function sa___prototype1_Musicka_startgamemusic))
    set st___prototype1[1]=CreateTrigger()
    call TriggerAddAction(st___prototype1[1],function sa___prototype1_TimerUtils__init)
    call TriggerAddCondition(st___prototype1[1],Condition(function sa___prototype1_TimerUtils__init))
    set st___prototype1[2]=CreateTrigger()
    call TriggerAddAction(st___prototype1[2],function sa___prototype1_Addtoshops)
    call TriggerAddCondition(st___prototype1[2],Condition(function sa___prototype1_Addtoshops))
    set st___prototype36[2]=CreateTrigger()
    call TriggerAddAction(st___prototype36[2],function sa___prototype36_heropicklib__PickRandom)
    call TriggerAddCondition(st___prototype36[2],Condition(function sa___prototype36_heropicklib__PickRandom))
    set st___prototype1[6]=CreateTrigger()
    call TriggerAddAction(st___prototype1[6],function sa___prototype1_heropicklib_ClearShops)
    call TriggerAddCondition(st___prototype1[6],Condition(function sa___prototype1_heropicklib_ClearShops))
    set st___prototype1[3]=CreateTrigger()
    call TriggerAddAction(st___prototype1[3],function sa___prototype1_E40S)
    call TriggerAddCondition(st___prototype1[3],Condition(function sa___prototype1_E40S))
    set st___prototype1[7]=CreateTrigger()
    call TriggerAddAction(st___prototype1[7],function sa___prototype1_lanecreeps_Trig_Spawn_bot_le_Actions)
    call TriggerAddCondition(st___prototype1[7],Condition(function sa___prototype1_lanecreeps_Trig_Spawn_bot_le_Actions))
    set st___prototype1[10]=CreateTrigger()
    call TriggerAddAction(st___prototype1[10],function sa___prototype1_InitDataBase)
    call TriggerAddCondition(st___prototype1[10],Condition(function sa___prototype1_InitDataBase))
    set st___prototype24[1]=CreateTrigger()
    call TriggerAddAction(st___prototype24[1],function sa___prototype24_Initbwlib_GetCurrentTime)
    call TriggerAddCondition(st___prototype24[1],Condition(function sa___prototype24_Initbwlib_GetCurrentTime))
    set st___prototype42[1]=CreateTrigger()
    call TriggerAddAction(st___prototype42[1],function sa___prototype42_Initbwlib_MultiAddHeroIcon)
    call TriggerAddCondition(st___prototype42[1],Condition(function sa___prototype42_Initbwlib_MultiAddHeroIcon))
    set st___prototype36[1]=CreateTrigger()
    call TriggerAddAction(st___prototype36[1],function sa___prototype36_Initbwlib_MultiUpdateStatus)
    call TriggerAddCondition(st___prototype36[1],Condition(function sa___prototype36_Initbwlib_MultiUpdateStatus))
    set st___prototype1[9]=CreateTrigger()
    call TriggerAddAction(st___prototype1[9],function sa___prototype1_Initbwlib__GameStart)
    call TriggerAddCondition(st___prototype1[9],Condition(function sa___prototype1_Initbwlib__GameStart))
    set st___prototype41[1]=CreateTrigger()
    call TriggerAddAction(st___prototype41[1],function sa___prototype41_endgame_EndGame)
    call TriggerAddCondition(st___prototype41[1],Condition(function sa___prototype41_endgame_EndGame))
    set st___prototype1[11]=CreateTrigger()
    call TriggerAddAction(st___prototype1[11],function sa___prototype1_CodeNames)
    call TriggerAddCondition(st___prototype1[11],Condition(function sa___prototype1_CodeNames))
    set st___prototype1[8]=CreateTrigger()
    call TriggerAddAction(st___prototype1[8],function sa___prototype1_expb_strbookInit)
    call TriggerAddCondition(st___prototype1[8],Condition(function sa___prototype1_expb_strbookInit))
    set st___prototype1[12]=CreateTrigger()
    call TriggerAddAction(st___prototype1[12],function sa___prototype1_onRicochet)
    call TriggerAddCondition(st___prototype1[12],Condition(function sa___prototype1_onRicochet))
    set st___prototype67[1]=CreateTrigger()
    call TriggerAddAction(st___prototype67[1],function sa___prototype67_s__shurikenitem___shurp_create)
    call TriggerAddCondition(st___prototype67[1],Condition(function sa___prototype67_s__shurikenitem___shurp_create))
    set st___prototype68[1]=CreateTrigger()
    call TriggerAddAction(st___prototype68[1],function sa___prototype68_s__latanelka___lataarrowproj_create)
    call TriggerAddCondition(st___prototype68[1],Condition(function sa___prototype68_s__latanelka___lataarrowproj_create))





























































    call ExecuteFunc("s__projectile_onInit")
    call ExecuteFunc("s__latablinktrap___trap_onInit")
endfunction
